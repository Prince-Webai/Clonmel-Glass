const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-B5jZ1AWu.js","assets/react-vendor-DwTPr_wt.js","assets/charts-DBaTe8_W.js"])))=>i.map(i=>d[i]);
import{r as je,R as aa,a as Ex,B as Cx,X as kx,Y as Rx,T as Ix,b as Lx,C as Dx}from"./charts-DBaTe8_W.js";import{r as Mx,a as Px,g as L2,b as Ux,c as Ox}from"./react-vendor-DwTPr_wt.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Vp={exports:{}},Td={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function jx(){if(qv)return Td;qv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:t,type:i,key:l,ref:a!==void 0?a:null,props:o}}return Td.Fragment=e,Td.jsx=n,Td.jsxs=n,Td}var zv;function Fx(){return zv||(zv=1,Vp.exports=jx()),Vp.exports}var g=Fx(),$p={exports:{}},Ed={},Jp={exports:{}},Yp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function Bx(){return Hv||(Hv=1,(function(t){function e(U,$){var re=U.length;U.push($);e:for(;0<re;){var oe=re-1>>>1,pe=U[oe];if(0<a(pe,$))U[oe]=$,U[re]=pe,re=oe;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var $=U[0],re=U.pop();if(re!==$){U[0]=re;e:for(var oe=0,pe=U.length,_e=pe>>>1;oe<_e;){var D=2*(oe+1)-1,H=U[D],K=D+1,Z=U[K];if(0>a(H,re))K<pe&&0>a(Z,H)?(U[oe]=Z,U[K]=re,oe=K):(U[oe]=H,U[D]=re,oe=D);else if(K<pe&&0>a(Z,re))U[oe]=Z,U[K]=re,oe=K;else break e}}return $}function a(U,$){var re=U.sortIndex-$.sortIndex;return re!==0?re:U.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],v=1,b=null,S=3,_=!1,T=!1,k=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function O(U){for(var $=n(h);$!==null;){if($.callback===null)i(h);else if($.startTime<=U)i(h),$.sortIndex=$.expirationTime,e(d,$);else break;$=n(h)}}function z(U){if(k=!1,O(U),!T)if(n(d)!==null)T=!0,W||(W=!0,j());else{var $=n(h);$!==null&&be(z,$.startTime-U)}}var W=!1,B=-1,q=5,ee=-1;function ue(){return I?!0:!(t.unstable_now()-ee<q)}function F(){if(I=!1,W){var U=t.unstable_now();ee=U;var $=!0;try{e:{T=!1,k&&(k=!1,R(B),B=-1),_=!0;var re=S;try{t:{for(O(U),b=n(d);b!==null&&!(b.expirationTime>U&&ue());){var oe=b.callback;if(typeof oe=="function"){b.callback=null,S=b.priorityLevel;var pe=oe(b.expirationTime<=U);if(U=t.unstable_now(),typeof pe=="function"){b.callback=pe,O(U),$=!0;break t}b===n(d)&&i(d),O(U)}else i(d);b=n(d)}if(b!==null)$=!0;else{var _e=n(h);_e!==null&&be(z,_e.startTime-U),$=!1}}break e}finally{b=null,S=re,_=!1}$=void 0}}finally{$?j():W=!1}}}var j;if(typeof L=="function")j=function(){L(F)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ie=ne.port2;ne.port1.onmessage=F,j=function(){ie.postMessage(null)}}else j=function(){C(F,0)};function be(U,$){B=C(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(U){switch(S){case 1:case 2:case 3:var $=3;break;default:$=S}var re=S;S=$;try{return U()}finally{S=re}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var re=S;S=U;try{return $()}finally{S=re}},t.unstable_scheduleCallback=function(U,$,re){var oe=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?oe+re:oe):re=oe,U){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=re+pe,U={id:v++,callback:$,priorityLevel:U,startTime:re,expirationTime:pe,sortIndex:-1},re>oe?(U.sortIndex=re,e(h,U),n(d)===null&&U===n(h)&&(k?(R(B),B=-1):k=!0,be(z,re-oe))):(U.sortIndex=pe,e(d,U),T||_||(T=!0,W||(W=!0,j()))),U},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(U){var $=S;return function(){var re=S;S=$;try{return U.apply(this,arguments)}finally{S=re}}}})(Yp)),Yp}var Gv;function qx(){return Gv||(Gv=1,Jp.exports=Bx()),Jp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function zx(){if(Vv)return Ed;Vv=1;var t=qx(),e=Mx(),n=Px();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,u=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(u=s.return),r=s.return;while(r)}return s.tag===3?u:null}function l(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function c(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var u=r,f=s;;){var x=u.return;if(x===null)break;var N=x.alternate;if(N===null){if(f=x.return,f!==null){u=f;continue}break}if(x.child===N.child){for(N=x.child;N;){if(N===u)return d(x),r;if(N===f)return d(x),s;N=N.sibling}throw Error(i(188))}if(u.return!==f.return)u=x,f=N;else{for(var P=!1,Q=x.child;Q;){if(Q===u){P=!0,u=x,f=N;break}if(Q===f){P=!0,f=x,u=N;break}Q=Q.sibling}if(!P){for(Q=N.child;Q;){if(Q===u){P=!0,u=N,f=x;break}if(Q===f){P=!0,f=N,u=x;break}Q=Q.sibling}if(!P)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:s}function v(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=v(r),s!==null)return s;r=r.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),L=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function j(r){return r===null||typeof r!="object"?null:(r=F&&r[F]||r["@@iterator"],typeof r=="function"?r:null)}var ne=Symbol.for("react.client.reference");function ie(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ne?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case C:return"Profiler";case I:return"StrictMode";case z:return"Suspense";case W:return"SuspenseList";case ee:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case L:return r.displayName||"Context";case R:return(r._context.displayName||"Context")+".Consumer";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case B:return s=r.displayName||null,s!==null?s:ie(r.type)||"Memo";case q:s=r._payload,r=r._init;try{return ie(r(s))}catch{}}return null}var be=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},oe=[],pe=-1;function _e(r){return{current:r}}function D(r){0>pe||(r.current=oe[pe],oe[pe]=null,pe--)}function H(r,s){pe++,oe[pe]=r.current,r.current=s}var K=_e(null),Z=_e(null),ae=_e(null),de=_e(null);function se(r,s){switch(H(ae,s),H(Z,r),H(K,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?cv(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=cv(s),r=dv(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}D(K),H(K,r)}function he(){D(K),D(Z),D(ae)}function Ae(r){r.memoizedState!==null&&H(de,r);var s=K.current,u=dv(s,r.type);s!==u&&(H(Z,r),H(K,u))}function Me(r){Z.current===r&&(D(K),D(Z)),de.current===r&&(D(de),Sd._currentValue=re)}var Ke,Ye;function st(r){if(Ke===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);Ke=s&&s[1]||"",Ye=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ke+r+Ye}var Le=!1;function fe(r,s){if(!r||Le)return"";Le=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var Ve=function(){throw Error()};if(Object.defineProperty(Ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ve,[])}catch(Pe){var De=Pe}Reflect.construct(r,[],Ve)}else{try{Ve.call()}catch(Pe){De=Pe}r.call(Ve.prototype)}}else{try{throw Error()}catch(Pe){De=Pe}(Ve=r())&&typeof Ve.catch=="function"&&Ve.catch(function(){})}}catch(Pe){if(Pe&&De&&typeof Pe.stack=="string")return[Pe.stack,De.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=f.DetermineComponentFrameRoot(),P=N[0],Q=N[1];if(P&&Q){var me=P.split(`
`),Ie=Q.split(`
`);for(x=f=0;f<me.length&&!me[f].includes("DetermineComponentFrameRoot");)f++;for(;x<Ie.length&&!Ie[x].includes("DetermineComponentFrameRoot");)x++;if(f===me.length||x===Ie.length)for(f=me.length-1,x=Ie.length-1;1<=f&&0<=x&&me[f]!==Ie[x];)x--;for(;1<=f&&0<=x;f--,x--)if(me[f]!==Ie[x]){if(f!==1||x!==1)do if(f--,x--,0>x||me[f]!==Ie[x]){var Fe=`
`+me[f].replace(" at new "," at ");return r.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",r.displayName)),Fe}while(1<=f&&0<=x);break}}}finally{Le=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?st(u):""}function Et(r,s){switch(r.tag){case 26:case 27:case 5:return st(r.type);case 16:return st("Lazy");case 13:return r.child!==s&&s!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return fe(r.type,!1);case 11:return fe(r.type.render,!1);case 1:return fe(r.type,!0);case 31:return st("Activity");default:return""}}function ut(r){try{var s="",u=null;do s+=Et(r,u),u=r,r=r.return;while(r);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var $e=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,tt=t.unstable_cancelCallback,et=t.unstable_shouldYield,We=t.unstable_requestPaint,Se=t.unstable_now,Qe=t.unstable_getCurrentPriorityLevel,ct=t.unstable_ImmediatePriority,bt=t.unstable_UserBlockingPriority,Ht=t.unstable_NormalPriority,pt=t.unstable_LowPriority,Nt=t.unstable_IdlePriority,it=t.log,En=t.unstable_setDisableYieldValue,Lt=null,qt=null;function Pt(r){if(typeof it=="function"&&En(r),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Lt,r)}catch{}}var St=Math.clz32?Math.clz32:Cr,Kn=Math.log,Yt=Math.LN2;function Cr(r){return r>>>=0,r===0?32:31-(Kn(r)/Yt|0)|0}var an=256,vi=262144,Yi=4194304;function on(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function _t(r,s,u){var f=r.pendingLanes;if(f===0)return 0;var x=0,N=r.suspendedLanes,P=r.pingedLanes;r=r.warmLanes;var Q=f&134217727;return Q!==0?(f=Q&~N,f!==0?x=on(f):(P&=Q,P!==0?x=on(P):u||(u=Q&~r,u!==0&&(x=on(u))))):(Q=f&~N,Q!==0?x=on(Q):P!==0?x=on(P):u||(u=f&~r,u!==0&&(x=on(u)))),x===0?0:s!==0&&s!==x&&(s&N)===0&&(N=x&-x,u=s&-s,N>=u||N===32&&(u&4194048)!==0)?s:x}function Vt(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function es(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gn(){var r=Yi;return Yi<<=1,(Yi&62914560)===0&&(Yi=4194304),r}function ji(r){for(var s=[],u=0;31>u;u++)s.push(r);return s}function yi(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function xt(r,s,u,f,x,N){var P=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var Q=r.entanglements,me=r.expirationTimes,Ie=r.hiddenUpdates;for(u=P&~u;0<u;){var Fe=31-St(u),Ve=1<<Fe;Q[Fe]=0,me[Fe]=-1;var De=Ie[Fe];if(De!==null)for(Ie[Fe]=null,Fe=0;Fe<De.length;Fe++){var Pe=De[Fe];Pe!==null&&(Pe.lane&=-536870913)}u&=~Ve}f!==0&&sr(r,f,0),N!==0&&x===0&&r.tag!==0&&(r.suspendedLanes|=N&~(P&~s))}function sr(r,s,u){r.pendingLanes|=s,r.suspendedLanes&=~s;var f=31-St(s);r.entangledLanes|=s,r.entanglements[f]=r.entanglements[f]|1073741824|u&261930}function ar(r,s){var u=r.entangledLanes|=s;for(r=r.entanglements;u;){var f=31-St(u),x=1<<f;x&s|r[f]&s&&(r[f]|=s),u&=~x}}function Ei(r,s){var u=s&-s;return u=(u&42)!==0?1:jn(u),(u&(r.suspendedLanes|s))!==0?0:u}function jn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ln(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ci(){var r=$.p;return r!==0?r:(r=window.event,r===void 0?32:Mv(r.type))}function vs(r,s){var u=$.p;try{return $.p=r,s()}finally{$.p=u}}var li=Math.random().toString(36).slice(2),ln="__reactFiber$"+li,wn="__reactProps$"+li,ui="__reactContainer$"+li,Be="__reactEvents$"+li,Mt="__reactListeners$"+li,$t="__reactHandles$"+li,Dn="__reactResources$"+li,Fn="__reactMarker$"+li;function ys(r){delete r[ln],delete r[wn],delete r[Be],delete r[Mt],delete r[$t]}function ts(r){var s=r[ln];if(s)return s;for(var u=r.parentNode;u;){if(s=u[ui]||u[ln]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(r=yv(r);r!==null;){if(u=r[ln])return u;r=yv(r)}return s}r=u,u=r.parentNode}return null}function ns(r){if(r=r[ln]||r[ui]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function ha(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function pa(r){var s=r[Dn];return s||(s=r[Dn]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ni(r){r[Fn]=!0}var Ja=new Set,Il={};function js(r,s){bs(r,s),bs(r+"Capture",s)}function bs(r,s){for(Il[r]=s,r=0;r<s.length;r++)Ja.add(s[r])}var Hc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ll={},Au={};function Ro(r){return $e.call(Au,r)?!0:$e.call(Ll,r)?!1:Hc.test(r)?Au[r]=!0:(Ll[r]=!0,!1)}function Io(r,s,u){if(Ro(s))if(u===null)r.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+u)}}function Mn(r,s,u){if(u===null)r.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+u)}}function kr(r,s,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(s,u,""+f)}}function Wi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Dl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ml(r,s,u){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,N=f.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return x.call(this)},set:function(P){u=""+P,N.call(this,P)}}),Object.defineProperty(r,s,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(P){u=""+P},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Pl(r){if(!r._valueTracker){var s=Dl(r)?"checked":"value";r._valueTracker=Ml(r,s,""+r[s])}}function Rr(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return r&&(f=Dl(r)?r.checked?"true":"false":r.value),r=f,r!==u?(s.setValue(r),!0):!1}function Fs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var or=/[\n"\\]/g;function Fi(r){return r.replace(or,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Lo(r,s,u,f,x,N,P,Q){r.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?r.type=P:r.removeAttribute("type"),s!=null?P==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Wi(s)):r.value!==""+Wi(s)&&(r.value=""+Wi(s)):P!=="submit"&&P!=="reset"||r.removeAttribute("value"),s!=null?Do(r,P,Wi(s)):u!=null?Do(r,P,Wi(u)):f!=null&&r.removeAttribute("value"),x==null&&N!=null&&(r.defaultChecked=!!N),x!=null&&(r.checked=x&&typeof x!="function"&&typeof x!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?r.name=""+Wi(Q):r.removeAttribute("name")}function Tu(r,s,u,f,x,N,P,Q){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(r.type=N),s!=null||u!=null){if(!(N!=="submit"&&N!=="reset"||s!=null)){Pl(r);return}u=u!=null?""+Wi(u):"",s=s!=null?""+Wi(s):u,Q||s===r.value||(r.value=s),r.defaultValue=s}f=f??x,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=Q?r.checked:!!f,r.defaultChecked=!!f,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(r.name=P),Pl(r)}function Do(r,s,u){s==="number"&&Fs(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function ma(r,s,u,f){if(r=r.options,s){s={};for(var x=0;x<u.length;x++)s["$"+u[x]]=!0;for(u=0;u<r.length;u++)x=s.hasOwnProperty("$"+r[u].value),r[u].selected!==x&&(r[u].selected=x),x&&f&&(r[u].defaultSelected=!0)}else{for(u=""+Wi(u),s=null,x=0;x<r.length;x++){if(r[x].value===u){r[x].selected=!0,f&&(r[x].defaultSelected=!0);return}s!==null||r[x].disabled||(s=r[x])}s!==null&&(s.selected=!0)}}function Ul(r,s,u){if(s!=null&&(s=""+Wi(s),s!==r.value&&(r.value=s),u==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=u!=null?""+Wi(u):""}function Eu(r,s,u,f){if(s==null){if(f!=null){if(u!=null)throw Error(i(92));if(be(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),s=u}u=Wi(s),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f),Pl(r)}function xs(r,s){if(s){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=s;return}}r.textContent=s}var Gc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cu(r,s,u){var f=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":f?r.setProperty(s,u):typeof u!="number"||u===0||Gc.has(s)?s==="float"?r.cssFloat=u:r[s]=(""+u).trim():r[s]=u+"px"}function ku(r,s,u){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var x in s)f=s[x],s.hasOwnProperty(x)&&u[x]!==f&&Cu(r,x,f)}else for(var N in s)s.hasOwnProperty(N)&&Cu(r,N,s[N])}function is(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Po=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(r){return Po.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Pn(){}var Ol=null;function Uo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var At=null,ga=null;function Ru(r){var s=ns(r);if(s&&(r=s.stateNode)){var u=r[wn]||null;e:switch(r=s.stateNode,s.type){case"input":if(Lo(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Fi(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==r&&f.form===r.form){var x=f[wn]||null;if(!x)throw Error(i(90));Lo(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(s=0;s<u.length;s++)f=u[s],f.form===r.form&&Rr(f)}break e;case"textarea":Ul(r,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&ma(r,!!u.multiple,s,!1)}}}var Ir=!1;function jl(r,s,u){if(Ir)return r(s,u);Ir=!0;try{var f=r(s);return f}finally{if(Ir=!1,(At!==null||ga!==null)&&(Sf(),At&&(s=At,r=ga,ga=At=null,Ru(s),r)))for(s=0;s<r.length;s++)Ru(r[s])}}function va(r,s){var u=r.stateNode;if(u===null)return null;var f=u[wn]||null;if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,s,typeof u));return u}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wa=!1;if(lr)try{var Ka={};Object.defineProperty(Ka,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",Ka,Ka),window.removeEventListener("test",Ka,Ka)}catch{Wa=!1}var ws=null,Fl=null,ya=null;function ba(){if(ya)return ya;var r,s=Fl,u=s.length,f,x="value"in ws?ws.value:ws.textContent,N=x.length;for(r=0;r<u&&s[r]===x[r];r++);var P=u-r;for(f=1;f<=P&&s[u-f]===x[N-f];f++);return ya=x.slice(r,1<f?1-f:void 0)}function rs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Oo(){return!0}function xa(){return!1}function bi(r){function s(u,f,x,N,P){this._reactName=u,this._targetInst=x,this.type=f,this.nativeEvent=N,this.target=P,this.currentTarget=null;for(var Q in r)r.hasOwnProperty(Q)&&(u=r[Q],this[Q]=u?u(N):N[Q]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Oo:xa,this.isPropagationStopped=xa,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),s}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=bi(Lr),wa=b({},Lr,{view:0,detail:0}),Iu=bi(wa),jo,ss,Dr,Fo=b({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dr&&(Dr&&r.type==="mousemove"?(jo=r.screenX-Dr.screenX,ss=r.screenY-Dr.screenY):ss=jo=0,Dr=r),jo)},movementY:function(r){return"movementY"in r?r.movementY:ss}}),Bs=bi(Fo),as=b({},Fo,{dataTransfer:0}),Bl=bi(as),Qa=b({},wa,{relatedTarget:0}),ql=bi(Qa),Bo=b({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vc=bi(Bo),zl=b({},Lr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Hl=bi(zl),Lu=b({},Lr,{data:0}),Za=bi(Lu),Gl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Du[r])?!!s[r]:!1}function Sa(){return $c}var eo=b({},wa,{key:function(r){if(r.key){var s=Gl[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=rs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Vl[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sa,charCode:function(r){return r.type==="keypress"?rs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?rs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),$l=bi(eo),_a=b({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qo=bi(_a),A=b({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sa}),V=bi(A),ce=b({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ge=bi(ce),Ee=b({},Fo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Oe=bi(Ee),Xe=b({},Lr,{newState:0,oldState:0}),ot=bi(Xe),yt=[9,13,27,32],Ut=lr&&"CompositionEvent"in window,jt=null;lr&&"documentMode"in document&&(jt=document.documentMode);var Zt=lr&&"TextEvent"in window&&!jt,Un=lr&&(!Ut||jt&&8<jt&&11>=jt),Bn=" ",Xn=!1;function ki(r,s){switch(r){case"keyup":return yt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ci(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Bi=!1;function vr(r,s){switch(r){case"compositionend":return ci(s);case"keypress":return s.which!==32?null:(Xn=!0,Bn);case"textInput":return r=s.data,r===Bn&&Xn?null:r;default:return null}}function qs(r,s){if(Bi)return r==="compositionend"||!Ut&&ki(r,s)?(r=ba(),ya=Fl=ws=null,Bi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Un&&s.locale!=="ko"?null:s.data;default:return null}}var Mu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zo(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Mu[r.type]:s==="textarea"}function Ho(r,s,u,f){At?ga?ga.push(f):ga=[f]:At=f,s=kf(s,"onChange"),0<s.length&&(u=new Xa("onChange","change",null,u,f),r.push({event:u,listeners:s}))}var Ss=null,zs=null;function Jl(r){rv(r,0)}function Hs(r){var s=ha(r);if(Rr(s))return r}function Ki(r,s){if(r==="change")return s}var to=!1;if(lr){var Na;if(lr){var Aa="oninput"in document;if(!Aa){var Go=document.createElement("div");Go.setAttribute("oninput","return;"),Aa=typeof Go.oninput=="function"}Na=Aa}else Na=!1;to=Na&&(!document.documentMode||9<document.documentMode)}function Xi(){Ss&&(Ss.detachEvent("onpropertychange",Pu),zs=Ss=null)}function Pu(r){if(r.propertyName==="value"&&Hs(zs)){var s=[];Ho(s,zs,r,Uo(r)),jl(Jl,s)}}function Yl(r,s,u){r==="focusin"?(Xi(),Ss=s,zs=u,Ss.attachEvent("onpropertychange",Pu)):r==="focusout"&&Xi()}function Uu(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Hs(zs)}function os(r,s){if(r==="click")return Hs(s)}function Wl(r,s){if(r==="input"||r==="change")return Hs(s)}function Jc(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Qi=typeof Object.is=="function"?Object.is:Jc;function Mr(r,s){if(Qi(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var u=Object.keys(r),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var x=u[f];if(!$e.call(s,x)||!Qi(r[x],s[x]))return!1}return!0}function yr(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Pr(r,s){var u=yr(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=s&&f>=s)return{node:u,offset:s-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=yr(u)}}function Gs(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Gs(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function ls(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Fs(r.document);s instanceof r.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)r=s.contentWindow;else break;s=Fs(r.document)}return s}function us(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var Vo=lr&&"documentMode"in document&&11>=document.documentMode,qi=null,Ta=null,Vs=null,_s=!1;function Ur(r,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;_s||qi==null||qi!==Fs(f)||(f=qi,"selectionStart"in f&&us(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Vs&&Mr(Vs,f)||(Vs=f,f=kf(Ta,"onSelect"),0<f.length&&(s=new Xa("onSelect","select",null,s,u),r.push({event:s,listeners:f}),s.target=qi)))}function Zi(r,s){var u={};return u[r.toLowerCase()]=s.toLowerCase(),u["Webkit"+r]="webkit"+s,u["Moz"+r]="moz"+s,u}var Or={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Ea={},Ca={};lr&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function ur(r){if(Ea[r])return Ea[r];if(!Or[r])return r;var s=Or[r],u;for(u in s)if(s.hasOwnProperty(u)&&u in Ca)return Ea[r]=s[u];return r}var $o=ur("animationend"),br=ur("animationiteration"),Ns=ur("animationstart"),Sn=ur("transitionrun"),_n=ur("transitionstart"),Qn=ur("transitioncancel"),ii=ur("transitionend"),As=new Map,Ts="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ts.push("scrollEnd");function zi(r,s){As.set(r,s),js(s,[r])}var no=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},xr=[],io=0,Ou=0;function Kl(){for(var r=io,s=Ou=io=0;s<r;){var u=xr[s];xr[s++]=null;var f=xr[s];xr[s++]=null;var x=xr[s];xr[s++]=null;var N=xr[s];if(xr[s++]=null,f!==null&&x!==null){var P=f.pending;P===null?x.next=x:(x.next=P.next,P.next=x),f.pending=x}N!==0&&Ql(u,x,N)}}function Xl(r,s,u,f){xr[io++]=r,xr[io++]=s,xr[io++]=u,xr[io++]=f,Ou|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function ju(r,s,u,f){return Xl(r,s,u,f),Hi(r)}function $s(r,s){return Xl(r,null,null,s),Hi(r)}function Ql(r,s,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var x=!1,N=r.return;N!==null;)N.childLanes|=u,f=N.alternate,f!==null&&(f.childLanes|=u),N.tag===22&&(r=N.stateNode,r===null||r._visibility&1||(x=!0)),r=N,N=N.return;return r.tag===3?(N=r.stateNode,x&&s!==null&&(x=31-St(u),r=N.hiddenUpdates,f=r[x],f===null?r[x]=[s]:f.push(s),s.lane=u|536870912),N):null}function Hi(r){if(50<md)throw md=0,mp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ri={};function Fu(r,s,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(r,s,u,f){return new Fu(r,s,u,f)}function Bu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function jr(r,s){var u=r.alternate;return u===null?(u=Gi(r.tag,s,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=s,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,s=r.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Zl(r,s){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,s=u.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Jo(r,s,u,f,x,N){var P=0;if(f=r,typeof r=="function")Bu(r)&&(P=1);else if(typeof r=="string")P=mx(r,u,K.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ee:return r=Gi(31,u,s,x),r.elementType=ee,r.lanes=N,r;case k:return ka(u.children,x,N,s);case I:P=8,x|=24;break;case C:return r=Gi(12,u,s,x|2),r.elementType=C,r.lanes=N,r;case z:return r=Gi(13,u,s,x),r.elementType=z,r.lanes=N,r;case W:return r=Gi(19,u,s,x),r.elementType=W,r.lanes=N,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:P=10;break e;case R:P=9;break e;case O:P=11;break e;case B:P=14;break e;case q:P=16,f=null;break e}P=29,u=Error(i(130,r===null?"null":typeof r,"")),f=null}return s=Gi(P,u,s,x),s.elementType=r,s.type=f,s.lanes=N,s}function ka(r,s,u,f){return r=Gi(7,r,f,s),r.lanes=u,r}function eu(r,s,u){return r=Gi(6,r,null,s),r.lanes=u,r}function qu(r){var s=Gi(18,null,null,0);return s.stateNode=r,s}function Yo(r,s,u){return s=Gi(4,r.children!==null?r.children:[],r.key,s),s.lanes=u,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var zu=new WeakMap;function Fr(r,s){if(typeof r=="object"&&r!==null){var u=zu.get(r);return u!==void 0?u:(s={value:r,source:s,stack:ut(s)},zu.set(r,s),s)}return{value:r,source:s,stack:ut(s)}}var Wo=[],ro=0,Hu=null,tu=0,Br=[],qr=0,Ra=null,zr=1,Hr="";function wr(r,s){Wo[ro++]=tu,Wo[ro++]=Hu,Hu=r,tu=s}function ef(r,s,u){Br[qr++]=zr,Br[qr++]=Hr,Br[qr++]=Ra,Ra=r;var f=zr;r=Hr;var x=32-St(f)-1;f&=~(1<<x),u+=1;var N=32-St(s)+x;if(30<N){var P=x-x%5;N=(f&(1<<P)-1).toString(32),f>>=P,x-=P,zr=1<<32-St(s)+x|u<<x|f,Hr=N+r}else zr=1<<N|u<<x|f,Hr=r}function Yc(r){r.return!==null&&(wr(r,1),ef(r,1,0))}function Gu(r){for(;r===Hu;)Hu=Wo[--ro],Wo[ro]=null,tu=Wo[--ro],Wo[ro]=null;for(;r===Ra;)Ra=Br[--qr],Br[qr]=null,Hr=Br[--qr],Br[qr]=null,zr=Br[--qr],Br[qr]=null}function tf(r,s){Br[qr++]=zr,Br[qr++]=Hr,Br[qr++]=Ra,zr=s.id,Hr=s.overflow,Ra=r}var Ii=null,Cn=null,Wt=!1,er=null,Gn=!1,cs=Error(i(519));function Ia(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ko(Fr(s,r)),cs}function Wc(r){var s=r.stateNode,u=r.type,f=r.memoizedProps;switch(s[ln]=r,s[wn]=f,u){case"dialog":Qt("cancel",s),Qt("close",s);break;case"iframe":case"object":case"embed":Qt("load",s);break;case"video":case"audio":for(u=0;u<vd.length;u++)Qt(vd[u],s);break;case"source":Qt("error",s);break;case"img":case"image":case"link":Qt("error",s),Qt("load",s);break;case"details":Qt("toggle",s);break;case"input":Qt("invalid",s),Tu(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Qt("invalid",s);break;case"textarea":Qt("invalid",s),Eu(s,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||f.suppressHydrationWarning===!0||lv(s.textContent,u)?(f.popover!=null&&(Qt("beforetoggle",s),Qt("toggle",s)),f.onScroll!=null&&Qt("scroll",s),f.onScrollEnd!=null&&Qt("scrollend",s),f.onClick!=null&&(s.onclick=Pn),s=!0):s=!1,s||Ia(r,!0)}function Js(r){for(Ii=r.return;Ii;)switch(Ii.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Ii=Ii.return}}function Li(r){if(r!==Ii)return!1;if(!Wt)return Js(r),Wt=!0,!1;var s=r.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Rp(r.type,r.memoizedProps)),u=!u),u&&Cn&&Ia(r),Js(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Cn=vv(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Cn=vv(r)}else s===27?(s=Cn,cl(r.type)?(r=Pp,Pp=null,Cn=r):Cn=s):Cn=Ii?Ds(r.stateNode.nextSibling):null;return!0}function so(){Cn=Ii=null,Wt=!1}function Kc(){var r=er;return r!==null&&(Wr===null?Wr=r:Wr.push.apply(Wr,r),er=null),r}function Ko(r){er===null?er=[r]:er.push(r)}var Vu=_e(null),La=null,Es=null;function Da(r,s,u){H(Vu,s._currentValue),s._currentValue=u}function Gr(r){r._currentValue=Vu.current,D(Vu)}function Xo(r,s,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),r===u)break;r=r.return}}function ao(r,s,u,f){var x=r.child;for(x!==null&&(x.return=r);x!==null;){var N=x.dependencies;if(N!==null){var P=x.child;N=N.firstContext;e:for(;N!==null;){var Q=N;N=x;for(var me=0;me<s.length;me++)if(Q.context===s[me]){N.lanes|=u,Q=N.alternate,Q!==null&&(Q.lanes|=u),Xo(N.return,u,r),f||(P=null);break e}N=Q.next}}else if(x.tag===18){if(P=x.return,P===null)throw Error(i(341));P.lanes|=u,N=P.alternate,N!==null&&(N.lanes|=u),Xo(P,u,r),P=null}else P=x.child;if(P!==null)P.return=x;else for(P=x;P!==null;){if(P===r){P=null;break}if(x=P.sibling,x!==null){x.return=P.return,P=x;break}P=P.return}x=P}}function Ma(r,s,u,f){r=null;for(var x=s,N=!1;x!==null;){if(!N){if((x.flags&524288)!==0)N=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var P=x.alternate;if(P===null)throw Error(i(387));if(P=P.memoizedProps,P!==null){var Q=x.type;Qi(x.pendingProps.value,P.value)||(r!==null?r.push(Q):r=[Q])}}else if(x===de.current){if(P=x.alternate,P===null)throw Error(i(387));P.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(r!==null?r.push(Sd):r=[Sd])}x=x.return}r!==null&&ao(s,r,u,f),s.flags|=262144}function $u(r){for(r=r.firstContext;r!==null;){if(!Qi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Pa(r){La=r,Es=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Di(r){return nf(La,r)}function Ju(r,s){return La===null&&Pa(r),nf(r,s)}function nf(r,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},Es===null){if(r===null)throw Error(i(308));Es=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Es=Es.next=s;return u}var Mh=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){s.aborted=!0,r.forEach(function(u){return u()})}},Ph=t.unstable_scheduleCallback,Uh=t.unstable_NormalPriority,Zn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qo(){return{controller:new Mh,data:new Map,refCount:0}}function nu(r){r.refCount--,r.refCount===0&&Ph(Uh,function(){r.controller.abort()})}var iu=null,Yu=0,m=0,w=null;function E(r,s){if(iu===null){var u=iu=[];Yu=0,m=wp(),w={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Yu++,s.then(M,M),s}function M(){if(--Yu===0&&iu!==null){w!==null&&(w.status="fulfilled");var r=iu;iu=null,m=0,w=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function G(r,s){var u=[],f={status:"pending",value:null,reason:null,then:function(x){u.push(x)}};return r.then(function(){f.status="fulfilled",f.value=s;for(var x=0;x<u.length;x++)(0,u[x])(s)},function(x){for(f.status="rejected",f.reason=x,x=0;x<u.length;x++)(0,u[x])(void 0)}),f}var J=U.S;U.S=function(r,s){Lg=Se(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&E(r,s),J!==null&&J(r,s)};var Y=_e(null);function X(){var r=Y.current;return r!==null?r:Rn.pooledCache}function te(r,s){s===null?H(Y,Y.current):H(Y,s.pool)}function le(){var r=X();return r===null?null:{parent:Zn._currentValue,pool:r}}var ve=Error(i(460)),ke=Error(i(474)),Ce=Error(i(542)),Ne={then:function(){}};function Ge(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ue(r,s,u){switch(u=r[u],u===void 0?r.push(s):u!==s&&(s.then(Pn,Pn),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Je(r),r;default:if(typeof s.status=="string")s.then(Pn,Pn);else{if(r=Rn,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(f){if(s.status==="pending"){var x=s;x.status="fulfilled",x.value=f}},function(f){if(s.status==="pending"){var x=s;x.status="rejected",x.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Je(r),r}throw we=s,ve}}function ye(r){try{var s=r._init;return s(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(we=u,ve):u}}var we=null;function ze(){if(we===null)throw Error(i(459));var r=we;return we=null,r}function Je(r){if(r===ve||r===Ce)throw Error(i(483))}var qe=null,at=0;function nt(r){var s=at;return at+=1,qe===null&&(qe=[]),Ue(qe,r,s)}function mt(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function rt(r,s){throw s.$$typeof===S?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function sn(r){function s(Te,xe){if(r){var Re=Te.deletions;Re===null?(Te.deletions=[xe],Te.flags|=16):Re.push(xe)}}function u(Te,xe){if(!r)return null;for(;xe!==null;)s(Te,xe),xe=xe.sibling;return null}function f(Te){for(var xe=new Map;Te!==null;)Te.key!==null?xe.set(Te.key,Te):xe.set(Te.index,Te),Te=Te.sibling;return xe}function x(Te,xe){return Te=jr(Te,xe),Te.index=0,Te.sibling=null,Te}function N(Te,xe,Re){return Te.index=Re,r?(Re=Te.alternate,Re!==null?(Re=Re.index,Re<xe?(Te.flags|=67108866,xe):Re):(Te.flags|=67108866,xe)):(Te.flags|=1048576,xe)}function P(Te){return r&&Te.alternate===null&&(Te.flags|=67108866),Te}function Q(Te,xe,Re,He){return xe===null||xe.tag!==6?(xe=eu(Re,Te.mode,He),xe.return=Te,xe):(xe=x(xe,Re),xe.return=Te,xe)}function me(Te,xe,Re,He){var wt=Re.type;return wt===k?Fe(Te,xe,Re.props.children,He,Re.key):xe!==null&&(xe.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===q&&ye(wt)===xe.type)?(xe=x(xe,Re.props),mt(xe,Re),xe.return=Te,xe):(xe=Jo(Re.type,Re.key,Re.props,null,Te.mode,He),mt(xe,Re),xe.return=Te,xe)}function Ie(Te,xe,Re,He){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Re.containerInfo||xe.stateNode.implementation!==Re.implementation?(xe=Yo(Re,Te.mode,He),xe.return=Te,xe):(xe=x(xe,Re.children||[]),xe.return=Te,xe)}function Fe(Te,xe,Re,He,wt){return xe===null||xe.tag!==7?(xe=ka(Re,Te.mode,He,wt),xe.return=Te,xe):(xe=x(xe,Re),xe.return=Te,xe)}function Ve(Te,xe,Re){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return xe=eu(""+xe,Te.mode,Re),xe.return=Te,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case _:return Re=Jo(xe.type,xe.key,xe.props,null,Te.mode,Re),mt(Re,xe),Re.return=Te,Re;case T:return xe=Yo(xe,Te.mode,Re),xe.return=Te,xe;case q:return xe=ye(xe),Ve(Te,xe,Re)}if(be(xe)||j(xe))return xe=ka(xe,Te.mode,Re,null),xe.return=Te,xe;if(typeof xe.then=="function")return Ve(Te,nt(xe),Re);if(xe.$$typeof===L)return Ve(Te,Ju(Te,xe),Re);rt(Te,xe)}return null}function De(Te,xe,Re,He){var wt=xe!==null?xe.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return wt!==null?null:Q(Te,xe,""+Re,He);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case _:return Re.key===wt?me(Te,xe,Re,He):null;case T:return Re.key===wt?Ie(Te,xe,Re,He):null;case q:return Re=ye(Re),De(Te,xe,Re,He)}if(be(Re)||j(Re))return wt!==null?null:Fe(Te,xe,Re,He,null);if(typeof Re.then=="function")return De(Te,xe,nt(Re),He);if(Re.$$typeof===L)return De(Te,xe,Ju(Te,Re),He);rt(Te,Re)}return null}function Pe(Te,xe,Re,He,wt){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return Te=Te.get(Re)||null,Q(xe,Te,""+He,wt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case _:return Te=Te.get(He.key===null?Re:He.key)||null,me(xe,Te,He,wt);case T:return Te=Te.get(He.key===null?Re:He.key)||null,Ie(xe,Te,He,wt);case q:return He=ye(He),Pe(Te,xe,Re,He,wt)}if(be(He)||j(He))return Te=Te.get(Re)||null,Fe(xe,Te,He,wt,null);if(typeof He.then=="function")return Pe(Te,xe,Re,nt(He),wt);if(He.$$typeof===L)return Pe(Te,xe,Re,Ju(xe,He),wt);rt(xe,He)}return null}function dt(Te,xe,Re,He){for(var wt=null,cn=null,ht=xe,Gt=xe=0,nn=null;ht!==null&&Gt<Re.length;Gt++){ht.index>Gt?(nn=ht,ht=null):nn=ht.sibling;var dn=De(Te,ht,Re[Gt],He);if(dn===null){ht===null&&(ht=nn);break}r&&ht&&dn.alternate===null&&s(Te,ht),xe=N(dn,xe,Gt),cn===null?wt=dn:cn.sibling=dn,cn=dn,ht=nn}if(Gt===Re.length)return u(Te,ht),Wt&&wr(Te,Gt),wt;if(ht===null){for(;Gt<Re.length;Gt++)ht=Ve(Te,Re[Gt],He),ht!==null&&(xe=N(ht,xe,Gt),cn===null?wt=ht:cn.sibling=ht,cn=ht);return Wt&&wr(Te,Gt),wt}for(ht=f(ht);Gt<Re.length;Gt++)nn=Pe(ht,Te,Gt,Re[Gt],He),nn!==null&&(r&&nn.alternate!==null&&ht.delete(nn.key===null?Gt:nn.key),xe=N(nn,xe,Gt),cn===null?wt=nn:cn.sibling=nn,cn=nn);return r&&ht.forEach(function(ml){return s(Te,ml)}),Wt&&wr(Te,Gt),wt}function kt(Te,xe,Re,He){if(Re==null)throw Error(i(151));for(var wt=null,cn=null,ht=xe,Gt=xe=0,nn=null,dn=Re.next();ht!==null&&!dn.done;Gt++,dn=Re.next()){ht.index>Gt?(nn=ht,ht=null):nn=ht.sibling;var ml=De(Te,ht,dn.value,He);if(ml===null){ht===null&&(ht=nn);break}r&&ht&&ml.alternate===null&&s(Te,ht),xe=N(ml,xe,Gt),cn===null?wt=ml:cn.sibling=ml,cn=ml,ht=nn}if(dn.done)return u(Te,ht),Wt&&wr(Te,Gt),wt;if(ht===null){for(;!dn.done;Gt++,dn=Re.next())dn=Ve(Te,dn.value,He),dn!==null&&(xe=N(dn,xe,Gt),cn===null?wt=dn:cn.sibling=dn,cn=dn);return Wt&&wr(Te,Gt),wt}for(ht=f(ht);!dn.done;Gt++,dn=Re.next())dn=Pe(ht,Te,Gt,dn.value,He),dn!==null&&(r&&dn.alternate!==null&&ht.delete(dn.key===null?Gt:dn.key),xe=N(dn,xe,Gt),cn===null?wt=dn:cn.sibling=dn,cn=dn);return r&&ht.forEach(function(Tx){return s(Te,Tx)}),Wt&&wr(Te,Gt),wt}function Tn(Te,xe,Re,He){if(typeof Re=="object"&&Re!==null&&Re.type===k&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case _:e:{for(var wt=Re.key;xe!==null;){if(xe.key===wt){if(wt=Re.type,wt===k){if(xe.tag===7){u(Te,xe.sibling),He=x(xe,Re.props.children),He.return=Te,Te=He;break e}}else if(xe.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===q&&ye(wt)===xe.type){u(Te,xe.sibling),He=x(xe,Re.props),mt(He,Re),He.return=Te,Te=He;break e}u(Te,xe);break}else s(Te,xe);xe=xe.sibling}Re.type===k?(He=ka(Re.props.children,Te.mode,He,Re.key),He.return=Te,Te=He):(He=Jo(Re.type,Re.key,Re.props,null,Te.mode,He),mt(He,Re),He.return=Te,Te=He)}return P(Te);case T:e:{for(wt=Re.key;xe!==null;){if(xe.key===wt)if(xe.tag===4&&xe.stateNode.containerInfo===Re.containerInfo&&xe.stateNode.implementation===Re.implementation){u(Te,xe.sibling),He=x(xe,Re.children||[]),He.return=Te,Te=He;break e}else{u(Te,xe);break}else s(Te,xe);xe=xe.sibling}He=Yo(Re,Te.mode,He),He.return=Te,Te=He}return P(Te);case q:return Re=ye(Re),Tn(Te,xe,Re,He)}if(be(Re))return dt(Te,xe,Re,He);if(j(Re)){if(wt=j(Re),typeof wt!="function")throw Error(i(150));return Re=wt.call(Re),kt(Te,xe,Re,He)}if(typeof Re.then=="function")return Tn(Te,xe,nt(Re),He);if(Re.$$typeof===L)return Tn(Te,xe,Ju(Te,Re),He);rt(Te,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint"?(Re=""+Re,xe!==null&&xe.tag===6?(u(Te,xe.sibling),He=x(xe,Re),He.return=Te,Te=He):(u(Te,xe),He=eu(Re,Te.mode,He),He.return=Te,Te=He),P(Te)):u(Te,xe)}return function(Te,xe,Re,He){try{at=0;var wt=Tn(Te,xe,Re,He);return qe=null,wt}catch(ht){if(ht===ve||ht===Ce)throw ht;var cn=Gi(29,ht,null,Te.mode);return cn.lanes=He,cn.return=Te,cn}finally{}}}var Kt=sn(!0),en=sn(!1),Ft=!1;function hn(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function un(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ct(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function vn(r,s,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(pn&2)!==0){var x=f.pending;return x===null?s.next=s:(s.next=x.next,x.next=s),f.pending=s,s=Hi(r),Ql(r,null,u),s}return Xl(r,f,s,u),Hi(r)}function xi(r,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var f=s.lanes;f&=r.pendingLanes,u|=f,s.lanes=u,ar(r,u)}}function Vn(r,s){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var x=null,N=null;if(u=u.firstBaseUpdate,u!==null){do{var P={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};N===null?x=N=P:N=N.next=P,u=u.next}while(u!==null);N===null?x=N=s:N=N.next=s}else x=N=s;u={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:N,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=s:r.next=s,u.lastBaseUpdate=s}var Vi=!1;function rn(){if(Vi){var r=w;if(r!==null)throw r}}function Mi(r,s,u,f){Vi=!1;var x=r.updateQueue;Ft=!1;var N=x.firstBaseUpdate,P=x.lastBaseUpdate,Q=x.shared.pending;if(Q!==null){x.shared.pending=null;var me=Q,Ie=me.next;me.next=null,P===null?N=Ie:P.next=Ie,P=me;var Fe=r.alternate;Fe!==null&&(Fe=Fe.updateQueue,Q=Fe.lastBaseUpdate,Q!==P&&(Q===null?Fe.firstBaseUpdate=Ie:Q.next=Ie,Fe.lastBaseUpdate=me))}if(N!==null){var Ve=x.baseState;P=0,Fe=Ie=me=null,Q=N;do{var De=Q.lane&-536870913,Pe=De!==Q.lane;if(Pe?(tn&De)===De:(f&De)===De){De!==0&&De===m&&(Vi=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var dt=r,kt=Q;De=s;var Tn=u;switch(kt.tag){case 1:if(dt=kt.payload,typeof dt=="function"){Ve=dt.call(Tn,Ve,De);break e}Ve=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=kt.payload,De=typeof dt=="function"?dt.call(Tn,Ve,De):dt,De==null)break e;Ve=b({},Ve,De);break e;case 2:Ft=!0}}De=Q.callback,De!==null&&(r.flags|=64,Pe&&(r.flags|=8192),Pe=x.callbacks,Pe===null?x.callbacks=[De]:Pe.push(De))}else Pe={lane:De,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Fe===null?(Ie=Fe=Pe,me=Ve):Fe=Fe.next=Pe,P|=De;if(Q=Q.next,Q===null){if(Q=x.shared.pending,Q===null)break;Pe=Q,Q=Pe.next,Pe.next=null,x.lastBaseUpdate=Pe,x.shared.pending=null}}while(!0);Fe===null&&(me=Ve),x.baseState=me,x.firstBaseUpdate=Ie,x.lastBaseUpdate=Fe,N===null&&(x.shared.lanes=0),sl|=P,r.lanes=P,r.memoizedState=Ve}}function cr(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function di(r,s){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)cr(u[r],s)}var $n=_e(null),wi=_e(0);function Sr(r,s){r=bo,H(wi,r),H($n,s),bo=r|s.baseLanes}function Vr(){H(wi,bo),H($n,$n.current)}function ri(){bo=wi.current,D($n),D(wi)}var ei=_e(null),Si=null;function _r(r){var s=r.alternate;H(Jn,Jn.current&1),H(ei,r),Si===null&&(s===null||$n.current!==null||s.memoizedState!==null)&&(Si=r)}function Cs(r){H(Jn,Jn.current),H(ei,r),Si===null&&(Si=r)}function qn(r){r.tag===22?(H(Jn,Jn.current),H(ei,r),Si===null&&(Si=r)):ks()}function ks(){H(Jn,Jn.current),H(ei,ei.current)}function dr(r){D(ei),Si===r&&(Si=null),D(Jn)}var Jn=_e(0);function oo(r){for(var s=r;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Dp(u)||Mp(u)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nr=0,Ot=null,Jt=null,kn=null,Ys=!1,lo=!1,Rs=!1,ru=0,Ua=0,Oa=null,Wu=0;function Nn(){throw Error(i(321))}function Xc(r,s){if(s===null)return!1;for(var u=0;u<s.length&&u<r.length;u++)if(!Qi(r[u],s[u]))return!1;return!0}function Qc(r,s,u,f,x,N){return Nr=N,Ot=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,U.H=r===null||r.memoizedState===null?Hm:Gh,Rs=!1,N=u(f,x),Rs=!1,lo&&(N=Ws(s,u,f,x)),Ku(r),N}function Ku(r){U.H=ad;var s=Jt!==null&&Jt.next!==null;if(Nr=0,kn=Jt=Ot=null,Ys=!1,Ua=0,Oa=null,s)throw Error(i(300));r===null||Ni||(r=r.dependencies,r!==null&&$u(r)&&(Ni=!0))}function Ws(r,s,u,f){Ot=r;var x=0;do{if(lo&&(Oa=null),Ua=0,lo=!1,25<=x)throw Error(i(301));if(x+=1,kn=Jt=null,r.updateQueue!=null){var N=r.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}U.H=Gm,N=s(u,f)}while(lo);return N}function Oh(){var r=U.H,s=r.useState()[0];return s=typeof s.then=="function"?ja(s):s,r=r.useState()[0],(Jt!==null?Jt.memoizedState:null)!==r&&(Ot.flags|=1024),s}function Zc(){var r=ru!==0;return ru=0,r}function ed(r,s,u){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~u}function Xu(r){if(Ys){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ys=!1}Nr=0,kn=Jt=Ot=null,lo=!1,Ua=ru=0,Oa=null}function _i(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?Ot.memoizedState=kn=r:kn=kn.next=r,kn}function Yn(){if(Jt===null){var r=Ot.alternate;r=r!==null?r.memoizedState:null}else r=Jt.next;var s=kn===null?Ot.memoizedState:kn.next;if(s!==null)kn=s,Jt=r;else{if(r===null)throw Ot.alternate===null?Error(i(467)):Error(i(310));Jt=r,r={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},kn===null?Ot.memoizedState=kn=r:kn=kn.next=r}return kn}function su(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ja(r){var s=Ua;return Ua+=1,Oa===null&&(Oa=[]),r=Ue(Oa,r,s),s=Ot,(kn===null?s.memoizedState:kn.next)===null&&(s=s.alternate,U.H=s===null||s.memoizedState===null?Hm:Gh),r}function Zo(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ja(r);if(r.$$typeof===L)return Di(r)}throw Error(i(438,String(r)))}function uo(r){var s=null,u=Ot.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var f=Ot.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(x){return x.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=su(),Ot.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(r),f=0;f<r;f++)u[f]=ue;return s.index++,u}function Is(r,s){return typeof s=="function"?s(r):s}function Qu(r){var s=Yn();return el(s,Jt,r)}function el(r,s,u){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var x=r.baseQueue,N=f.pending;if(N!==null){if(x!==null){var P=x.next;x.next=N.next,N.next=P}s.baseQueue=x=N,f.pending=null}if(N=r.baseState,x===null)r.memoizedState=N;else{s=x.next;var Q=P=null,me=null,Ie=s,Fe=!1;do{var Ve=Ie.lane&-536870913;if(Ve!==Ie.lane?(tn&Ve)===Ve:(Nr&Ve)===Ve){var De=Ie.revertLane;if(De===0)me!==null&&(me=me.next={lane:0,revertLane:0,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),Ve===m&&(Fe=!0);else if((Nr&De)===De){Ie=Ie.next,De===m&&(Fe=!0);continue}else Ve={lane:0,revertLane:Ie.revertLane,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},me===null?(Q=me=Ve,P=N):me=me.next=Ve,Ot.lanes|=De,sl|=De;Ve=Ie.action,Rs&&u(N,Ve),N=Ie.hasEagerState?Ie.eagerState:u(N,Ve)}else De={lane:Ve,revertLane:Ie.revertLane,gesture:Ie.gesture,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},me===null?(Q=me=De,P=N):me=me.next=De,Ot.lanes|=Ve,sl|=Ve;Ie=Ie.next}while(Ie!==null&&Ie!==s);if(me===null?P=N:me.next=Q,!Qi(N,r.memoizedState)&&(Ni=!0,Fe&&(u=w,u!==null)))throw u;r.memoizedState=N,r.baseState=P,r.baseQueue=me,f.lastRenderedState=N}return x===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function Zu(r){var s=Yn(),u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var f=u.dispatch,x=u.pending,N=s.memoizedState;if(x!==null){u.pending=null;var P=x=x.next;do N=r(N,P.action),P=P.next;while(P!==x);Qi(N,s.memoizedState)||(Ni=!0),s.memoizedState=N,s.baseQueue===null&&(s.baseState=N),u.lastRenderedState=N}return[N,f]}function ec(r,s,u){var f=Ot,x=Yn(),N=Wt;if(N){if(u===void 0)throw Error(i(407));u=u()}else u=s();var P=!Qi((Jt||x).memoizedState,u);if(P&&(x.memoizedState=u,Ni=!0),x=x.queue,jh(nd.bind(null,f,x,r),[r]),x.getSnapshot!==s||P||kn!==null&&kn.memoizedState.tag&1){if(f.flags|=2048,fo(9,{destroy:void 0},td.bind(null,f,x,u,s),null),Rn===null)throw Error(i(349));N||(Nr&127)!==0||Ks(f,s,u)}return u}function Ks(r,s,u){r.flags|=16384,r={getSnapshot:s,value:u},s=Ot.updateQueue,s===null?(s=su(),Ot.updateQueue=s,s.stores=[r]):(u=s.stores,u===null?s.stores=[r]:u.push(r))}function td(r,s,u,f){s.value=u,s.getSnapshot=f,rf(s)&&id(r)}function nd(r,s,u){return u(function(){rf(s)&&id(r)})}function rf(r){var s=r.getSnapshot;r=r.value;try{var u=s();return!Qi(r,u)}catch{return!0}}function id(r){var s=$s(r,2);s!==null&&Kr(s,r,2)}function Fa(r){var s=_i();if(typeof r=="function"){var u=r;if(r=u(),Rs){Pt(!0);try{u()}finally{Pt(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:r},s}function sf(r,s,u,f){return r.baseState=u,el(r,Jt,typeof f=="function"?f:Is)}function af(r,s,u,f,x){if(cf(r))throw Error(i(485));if(r=s.action,r!==null){var N={payload:x,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){N.listeners.push(P)}};U.T!==null?u(!0):N.isTransition=!1,f(N),u=s.pending,u===null?(N.next=s.pending=N,of(s,N)):(N.next=u.next,s.pending=u.next=N)}}function of(r,s){var u=s.action,f=s.payload,x=r.state;if(s.isTransition){var N=U.T,P={};U.T=P;try{var Q=u(x,f),me=U.S;me!==null&&me(P,Q),rd(r,s,Q)}catch(Ie){co(r,s,Ie)}finally{N!==null&&P.types!==null&&(N.types=P.types),U.T=N}}else try{N=u(x,f),rd(r,s,N)}catch(Ie){co(r,s,Ie)}}function rd(r,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){lf(r,s,f)},function(f){return co(r,s,f)}):lf(r,s,u)}function lf(r,s,u){s.status="fulfilled",s.value=u,tc(s),r.state=u,s=r.pending,s!==null&&(u=s.next,u===s?r.pending=null:(u=u.next,s.next=u,of(r,u)))}function co(r,s,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=u,tc(s),s=s.next;while(s!==f)}r.action=null}function tc(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function au(r,s){return s}function Ls(r,s){if(Wt){var u=Rn.formState;if(u!==null){e:{var f=Ot;if(Wt){if(Cn){t:{for(var x=Cn,N=Gn;x.nodeType!==8;){if(!N){x=null;break t}if(x=Ds(x.nextSibling),x===null){x=null;break t}}N=x.data,x=N==="F!"||N==="F"?x:null}if(x){Cn=Ds(x.nextSibling),f=x.data==="F!";break e}}Ia(f)}f=!1}f&&(s=u[0])}}return u=_i(),u.memoizedState=u.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:au,lastRenderedState:s},u.queue=f,u=Bm.bind(null,Ot,f),f.dispatch=u,f=Fa(!1),N=Hh.bind(null,Ot,!1,f.queue),f=_i(),x={state:s,dispatch:null,action:r,pending:null},f.queue=x,u=af.bind(null,Ot,x,N,u),x.dispatch=u,f.memoizedState=r,[s,u,!1]}function Xs(r){var s=Yn();return Qs(s,Jt,r)}function Qs(r,s,u){if(s=el(r,s,au)[0],r=Qu(Is)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=ja(s)}catch(P){throw P===ve?Ce:P}else f=s;s=Yn();var x=s.queue,N=x.dispatch;return u!==s.memoizedState&&(Ot.flags|=2048,fo(9,{destroy:void 0},nc.bind(null,x,u),null)),[f,N,r]}function nc(r,s){r.action=s}function ic(r){var s=Yn(),u=Jt;if(u!==null)return Qs(s,u,r);Yn(),s=s.memoizedState,u=Yn();var f=u.queue.dispatch;return u.memoizedState=r,[s,f,!1]}function fo(r,s,u,f){return r={tag:r,create:u,deps:f,inst:s,next:null},s=Ot.updateQueue,s===null&&(s=su(),Ot.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,s.lastEffect=r),r}function uf(){return Yn().memoizedState}function tl(r,s,u,f){var x=_i();Ot.flags|=r,x.memoizedState=fo(1|s,{destroy:void 0},u,f===void 0?null:f)}function nl(r,s,u,f){var x=Yn();f=f===void 0?null:f;var N=x.memoizedState.inst;Jt!==null&&f!==null&&Xc(f,Jt.memoizedState.deps)?x.memoizedState=fo(s,N,u,f):(Ot.flags|=r,x.memoizedState=fo(1|s,N,u,f))}function Tm(r,s){tl(8390656,8,r,s)}function jh(r,s){nl(2048,8,r,s)}function x5(r){Ot.flags|=4;var s=Ot.updateQueue;if(s===null)s=su(),Ot.updateQueue=s,s.events=[r];else{var u=s.events;u===null?s.events=[r]:u.push(r)}}function Em(r){var s=Yn().memoizedState;return x5({ref:s,nextImpl:r}),function(){if((pn&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Cm(r,s){return nl(4,2,r,s)}function km(r,s){return nl(4,4,r,s)}function Rm(r,s){if(typeof s=="function"){r=r();var u=s(r);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Im(r,s,u){u=u!=null?u.concat([r]):null,nl(4,4,Rm.bind(null,s,r),u)}function Fh(){}function Lm(r,s){var u=Yn();s=s===void 0?null:s;var f=u.memoizedState;return s!==null&&Xc(s,f[1])?f[0]:(u.memoizedState=[r,s],r)}function Dm(r,s){var u=Yn();s=s===void 0?null:s;var f=u.memoizedState;if(s!==null&&Xc(s,f[1]))return f[0];if(f=r(),Rs){Pt(!0);try{r()}finally{Pt(!1)}}return u.memoizedState=[f,s],f}function Bh(r,s,u){return u===void 0||(Nr&1073741824)!==0&&(tn&261930)===0?r.memoizedState=s:(r.memoizedState=u,r=Mg(),Ot.lanes|=r,sl|=r,u)}function Mm(r,s,u,f){return Qi(u,s)?u:$n.current!==null?(r=Bh(r,u,f),Qi(r,s)||(Ni=!0),r):(Nr&42)===0||(Nr&1073741824)!==0&&(tn&261930)===0?(Ni=!0,r.memoizedState=u):(r=Mg(),Ot.lanes|=r,sl|=r,s)}function Pm(r,s,u,f,x){var N=$.p;$.p=N!==0&&8>N?N:8;var P=U.T,Q={};U.T=Q,Hh(r,!1,s,u);try{var me=x(),Ie=U.S;if(Ie!==null&&Ie(Q,me),me!==null&&typeof me=="object"&&typeof me.then=="function"){var Fe=G(me,f);sd(r,s,Fe,hs(r))}else sd(r,s,f,hs(r))}catch(Ve){sd(r,s,{then:function(){},status:"rejected",reason:Ve},hs())}finally{$.p=N,P!==null&&Q.types!==null&&(P.types=Q.types),U.T=P}}function w5(){}function qh(r,s,u,f){if(r.tag!==5)throw Error(i(476));var x=Um(r).queue;Pm(r,x,s,re,u===null?w5:function(){return Om(r),u(f)})}function Um(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:re},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:u},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Om(r){var s=Um(r);s.next===null&&(s=r.alternate.memoizedState),sd(r,s.next.queue,{},hs())}function zh(){return Di(Sd)}function jm(){return Yn().memoizedState}function Fm(){return Yn().memoizedState}function S5(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var u=hs();r=Ct(u);var f=vn(s,r,u);f!==null&&(Kr(f,s,u),xi(f,s,u)),s={cache:Qo()},r.payload=s;return}s=s.return}}function _5(r,s,u){var f=hs();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},cf(r)?qm(s,u):(u=ju(r,s,u,f),u!==null&&(Kr(u,r,f),zm(u,s,f)))}function Bm(r,s,u){var f=hs();sd(r,s,u,f)}function sd(r,s,u,f){var x={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(cf(r))qm(s,x);else{var N=r.alternate;if(r.lanes===0&&(N===null||N.lanes===0)&&(N=s.lastRenderedReducer,N!==null))try{var P=s.lastRenderedState,Q=N(P,u);if(x.hasEagerState=!0,x.eagerState=Q,Qi(Q,P))return Xl(r,s,x,0),Rn===null&&Kl(),!1}catch{}finally{}if(u=ju(r,s,x,f),u!==null)return Kr(u,r,f),zm(u,s,f),!0}return!1}function Hh(r,s,u,f){if(f={lane:2,revertLane:wp(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},cf(r)){if(s)throw Error(i(479))}else s=ju(r,u,f,2),s!==null&&Kr(s,r,2)}function cf(r){var s=r.alternate;return r===Ot||s!==null&&s===Ot}function qm(r,s){lo=Ys=!0;var u=r.pending;u===null?s.next=s:(s.next=u.next,u.next=s),r.pending=s}function zm(r,s,u){if((u&4194048)!==0){var f=s.lanes;f&=r.pendingLanes,u|=f,s.lanes=u,ar(r,u)}}var ad={readContext:Di,use:Zo,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn,useHostTransitionStatus:Nn,useFormState:Nn,useActionState:Nn,useOptimistic:Nn,useMemoCache:Nn,useCacheRefresh:Nn};ad.useEffectEvent=Nn;var Hm={readContext:Di,use:Zo,useCallback:function(r,s){return _i().memoizedState=[r,s===void 0?null:s],r},useContext:Di,useEffect:Tm,useImperativeHandle:function(r,s,u){u=u!=null?u.concat([r]):null,tl(4194308,4,Rm.bind(null,s,r),u)},useLayoutEffect:function(r,s){return tl(4194308,4,r,s)},useInsertionEffect:function(r,s){tl(4,2,r,s)},useMemo:function(r,s){var u=_i();s=s===void 0?null:s;var f=r();if(Rs){Pt(!0);try{r()}finally{Pt(!1)}}return u.memoizedState=[f,s],f},useReducer:function(r,s,u){var f=_i();if(u!==void 0){var x=u(s);if(Rs){Pt(!0);try{u(s)}finally{Pt(!1)}}}else x=s;return f.memoizedState=f.baseState=x,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:x},f.queue=r,r=r.dispatch=_5.bind(null,Ot,r),[f.memoizedState,r]},useRef:function(r){var s=_i();return r={current:r},s.memoizedState=r},useState:function(r){r=Fa(r);var s=r.queue,u=Bm.bind(null,Ot,s);return s.dispatch=u,[r.memoizedState,u]},useDebugValue:Fh,useDeferredValue:function(r,s){var u=_i();return Bh(u,r,s)},useTransition:function(){var r=Fa(!1);return r=Pm.bind(null,Ot,r.queue,!0,!1),_i().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,u){var f=Ot,x=_i();if(Wt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=s(),Rn===null)throw Error(i(349));(tn&127)!==0||Ks(f,s,u)}x.memoizedState=u;var N={value:u,getSnapshot:s};return x.queue=N,Tm(nd.bind(null,f,N,r),[r]),f.flags|=2048,fo(9,{destroy:void 0},td.bind(null,f,N,u,s),null),u},useId:function(){var r=_i(),s=Rn.identifierPrefix;if(Wt){var u=Hr,f=zr;u=(f&~(1<<32-St(f)-1)).toString(32)+u,s="_"+s+"R_"+u,u=ru++,0<u&&(s+="H"+u.toString(32)),s+="_"}else u=Wu++,s="_"+s+"r_"+u.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:zh,useFormState:Ls,useActionState:Ls,useOptimistic:function(r){var s=_i();s.memoizedState=s.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Hh.bind(null,Ot,!0,u),u.dispatch=s,[r,s]},useMemoCache:uo,useCacheRefresh:function(){return _i().memoizedState=S5.bind(null,Ot)},useEffectEvent:function(r){var s=_i(),u={impl:r};return s.memoizedState=u,function(){if((pn&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Gh={readContext:Di,use:Zo,useCallback:Lm,useContext:Di,useEffect:jh,useImperativeHandle:Im,useInsertionEffect:Cm,useLayoutEffect:km,useMemo:Dm,useReducer:Qu,useRef:uf,useState:function(){return Qu(Is)},useDebugValue:Fh,useDeferredValue:function(r,s){var u=Yn();return Mm(u,Jt.memoizedState,r,s)},useTransition:function(){var r=Qu(Is)[0],s=Yn().memoizedState;return[typeof r=="boolean"?r:ja(r),s]},useSyncExternalStore:ec,useId:jm,useHostTransitionStatus:zh,useFormState:Xs,useActionState:Xs,useOptimistic:function(r,s){var u=Yn();return sf(u,Jt,r,s)},useMemoCache:uo,useCacheRefresh:Fm};Gh.useEffectEvent=Em;var Gm={readContext:Di,use:Zo,useCallback:Lm,useContext:Di,useEffect:jh,useImperativeHandle:Im,useInsertionEffect:Cm,useLayoutEffect:km,useMemo:Dm,useReducer:Zu,useRef:uf,useState:function(){return Zu(Is)},useDebugValue:Fh,useDeferredValue:function(r,s){var u=Yn();return Jt===null?Bh(u,r,s):Mm(u,Jt.memoizedState,r,s)},useTransition:function(){var r=Zu(Is)[0],s=Yn().memoizedState;return[typeof r=="boolean"?r:ja(r),s]},useSyncExternalStore:ec,useId:jm,useHostTransitionStatus:zh,useFormState:ic,useActionState:ic,useOptimistic:function(r,s){var u=Yn();return Jt!==null?sf(u,Jt,r,s):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:uo,useCacheRefresh:Fm};Gm.useEffectEvent=Em;function Vh(r,s,u,f){s=r.memoizedState,u=u(f,s),u=u==null?s:b({},s,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var $h={enqueueSetState:function(r,s,u){r=r._reactInternals;var f=hs(),x=Ct(f);x.payload=s,u!=null&&(x.callback=u),s=vn(r,x,f),s!==null&&(Kr(s,r,f),xi(s,r,f))},enqueueReplaceState:function(r,s,u){r=r._reactInternals;var f=hs(),x=Ct(f);x.tag=1,x.payload=s,u!=null&&(x.callback=u),s=vn(r,x,f),s!==null&&(Kr(s,r,f),xi(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var u=hs(),f=Ct(u);f.tag=2,s!=null&&(f.callback=s),s=vn(r,f,u),s!==null&&(Kr(s,r,u),xi(s,r,u))}};function Vm(r,s,u,f,x,N,P){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,N,P):s.prototype&&s.prototype.isPureReactComponent?!Mr(u,f)||!Mr(x,N):!0}function $m(r,s,u,f){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==r&&$h.enqueueReplaceState(s,s.state,null)}function ou(r,s){var u=s;if("ref"in s){u={};for(var f in s)f!=="ref"&&(u[f]=s[f])}if(r=r.defaultProps){u===s&&(u=b({},u));for(var x in r)u[x]===void 0&&(u[x]=r[x])}return u}function Jm(r){no(r)}function Ym(r){console.error(r)}function Wm(r){no(r)}function df(r,s){try{var u=r.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function Km(r,s,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Jh(r,s,u){return u=Ct(u),u.tag=3,u.payload={element:null},u.callback=function(){df(r,s)},u}function Xm(r){return r=Ct(r),r.tag=3,r}function Qm(r,s,u,f){var x=u.type.getDerivedStateFromError;if(typeof x=="function"){var N=f.value;r.payload=function(){return x(N)},r.callback=function(){Km(s,u,f)}}var P=u.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(r.callback=function(){Km(s,u,f),typeof x!="function"&&(al===null?al=new Set([this]):al.add(this));var Q=f.stack;this.componentDidCatch(f.value,{componentStack:Q!==null?Q:""})})}function N5(r,s,u,f,x){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=u.alternate,s!==null&&Ma(s,u,x,!0),u=ei.current,u!==null){switch(u.tag){case 31:case 13:return Si===null?_f():u.alternate===null&&si===0&&(si=3),u.flags&=-257,u.flags|=65536,u.lanes=x,f===Ne?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([f]):s.add(f),yp(r,f,x)),!1;case 22:return u.flags|=65536,f===Ne?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([f]):u.add(f)),yp(r,f,x)),!1}throw Error(i(435,u.tag))}return yp(r,f,x),_f(),!1}if(Wt)return s=ei.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=x,f!==cs&&(r=Error(i(422),{cause:f}),Ko(Fr(r,u)))):(f!==cs&&(s=Error(i(423),{cause:f}),Ko(Fr(s,u))),r=r.current.alternate,r.flags|=65536,x&=-x,r.lanes|=x,f=Fr(f,u),x=Jh(r.stateNode,f,x),Vn(r,x),si!==4&&(si=2)),!1;var N=Error(i(520),{cause:f});if(N=Fr(N,u),pd===null?pd=[N]:pd.push(N),si!==4&&(si=2),s===null)return!0;f=Fr(f,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,r=x&-x,u.lanes|=r,r=Jh(u.stateNode,f,r),Vn(u,r),!1;case 1:if(s=u.type,N=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(al===null||!al.has(N))))return u.flags|=65536,x&=-x,u.lanes|=x,x=Xm(x),Qm(x,r,u,f),Vn(u,x),!1}u=u.return}while(u!==null);return!1}var Yh=Error(i(461)),Ni=!1;function tr(r,s,u,f){s.child=r===null?en(s,null,u,f):Kt(s,r.child,u,f)}function Zm(r,s,u,f,x){u=u.render;var N=s.ref;if("ref"in f){var P={};for(var Q in f)Q!=="ref"&&(P[Q]=f[Q])}else P=f;return Pa(s),f=Qc(r,s,u,P,N,x),Q=Zc(),r!==null&&!Ni?(ed(r,s,x),ho(r,s,x)):(Wt&&Q&&Yc(s),s.flags|=1,tr(r,s,f,x),s.child)}function eg(r,s,u,f,x){if(r===null){var N=u.type;return typeof N=="function"&&!Bu(N)&&N.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=N,tg(r,s,N,f,x)):(r=Jo(u.type,null,f,s,s.mode,x),r.ref=s.ref,r.return=s,s.child=r)}if(N=r.child,!np(r,x)){var P=N.memoizedProps;if(u=u.compare,u=u!==null?u:Mr,u(P,f)&&r.ref===s.ref)return ho(r,s,x)}return s.flags|=1,r=jr(N,f),r.ref=s.ref,r.return=s,s.child=r}function tg(r,s,u,f,x){if(r!==null){var N=r.memoizedProps;if(Mr(N,f)&&r.ref===s.ref)if(Ni=!1,s.pendingProps=f=N,np(r,x))(r.flags&131072)!==0&&(Ni=!0);else return s.lanes=r.lanes,ho(r,s,x)}return Wh(r,s,u,f,x)}function ng(r,s,u,f){var x=f.children,N=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(N=N!==null?N.baseLanes|u:u,r!==null){for(f=s.child=r.child,x=0;f!==null;)x=x|f.lanes|f.childLanes,f=f.sibling;f=x&~N}else f=0,s.child=null;return ig(r,s,N,u,f)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&te(s,N!==null?N.cachePool:null),N!==null?Sr(s,N):Vr(),qn(s);else return f=s.lanes=536870912,ig(r,s,N!==null?N.baseLanes|u:u,u,f)}else N!==null?(te(s,N.cachePool),Sr(s,N),ks(),s.memoizedState=null):(r!==null&&te(s,null),Vr(),ks());return tr(r,s,x,u),s.child}function od(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ig(r,s,u,f,x){var N=X();return N=N===null?null:{parent:Zn._currentValue,pool:N},s.memoizedState={baseLanes:u,cachePool:N},r!==null&&te(s,null),Vr(),qn(s),r!==null&&Ma(r,s,f,!0),s.childLanes=x,null}function ff(r,s){return s=pf({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function rg(r,s,u){return Kt(s,r.child,null,u),r=ff(s,s.pendingProps),r.flags|=2,dr(s),s.memoizedState=null,r}function A5(r,s,u){var f=s.pendingProps,x=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Wt){if(f.mode==="hidden")return r=ff(s,f),s.lanes=536870912,od(null,r);if(Cs(s),(r=Cn)?(r=gv(r,Gn),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ra!==null?{id:zr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},u=qu(r),u.return=s,s.child=u,Ii=s,Cn=null)):r=null,r===null)throw Ia(s);return s.lanes=536870912,null}return ff(s,f)}var N=r.memoizedState;if(N!==null){var P=N.dehydrated;if(Cs(s),x)if(s.flags&256)s.flags&=-257,s=rg(r,s,u);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Ni||Ma(r,s,u,!1),x=(u&r.childLanes)!==0,Ni||x){if(f=Rn,f!==null&&(P=Ei(f,u),P!==0&&P!==N.retryLane))throw N.retryLane=P,$s(r,P),Kr(f,r,P),Yh;_f(),s=rg(r,s,u)}else r=N.treeContext,Cn=Ds(P.nextSibling),Ii=s,Wt=!0,er=null,Gn=!1,r!==null&&tf(s,r),s=ff(s,f),s.flags|=4096;return s}return r=jr(r.child,{mode:f.mode,children:f.children}),r.ref=s.ref,s.child=r,r.return=s,r}function hf(r,s){var u=s.ref;if(u===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(s.flags|=4194816)}}function Wh(r,s,u,f,x){return Pa(s),u=Qc(r,s,u,f,void 0,x),f=Zc(),r!==null&&!Ni?(ed(r,s,x),ho(r,s,x)):(Wt&&f&&Yc(s),s.flags|=1,tr(r,s,u,x),s.child)}function sg(r,s,u,f,x,N){return Pa(s),s.updateQueue=null,u=Ws(s,f,u,x),Ku(r),f=Zc(),r!==null&&!Ni?(ed(r,s,N),ho(r,s,N)):(Wt&&f&&Yc(s),s.flags|=1,tr(r,s,u,N),s.child)}function ag(r,s,u,f,x){if(Pa(s),s.stateNode===null){var N=Ri,P=u.contextType;typeof P=="object"&&P!==null&&(N=Di(P)),N=new u(f,N),s.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=$h,s.stateNode=N,N._reactInternals=s,N=s.stateNode,N.props=f,N.state=s.memoizedState,N.refs={},hn(s),P=u.contextType,N.context=typeof P=="object"&&P!==null?Di(P):Ri,N.state=s.memoizedState,P=u.getDerivedStateFromProps,typeof P=="function"&&(Vh(s,u,P,f),N.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(P=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),P!==N.state&&$h.enqueueReplaceState(N,N.state,null),Mi(s,f,N,x),rn(),N.state=s.memoizedState),typeof N.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(r===null){N=s.stateNode;var Q=s.memoizedProps,me=ou(u,Q);N.props=me;var Ie=N.context,Fe=u.contextType;P=Ri,typeof Fe=="object"&&Fe!==null&&(P=Di(Fe));var Ve=u.getDerivedStateFromProps;Fe=typeof Ve=="function"||typeof N.getSnapshotBeforeUpdate=="function",Q=s.pendingProps!==Q,Fe||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Q||Ie!==P)&&$m(s,N,f,P),Ft=!1;var De=s.memoizedState;N.state=De,Mi(s,f,N,x),rn(),Ie=s.memoizedState,Q||De!==Ie||Ft?(typeof Ve=="function"&&(Vh(s,u,Ve,f),Ie=s.memoizedState),(me=Ft||Vm(s,u,me,f,De,Ie,P))?(Fe||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(s.flags|=4194308)):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=Ie),N.props=f,N.state=Ie,N.context=P,f=me):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{N=s.stateNode,un(r,s),P=s.memoizedProps,Fe=ou(u,P),N.props=Fe,Ve=s.pendingProps,De=N.context,Ie=u.contextType,me=Ri,typeof Ie=="object"&&Ie!==null&&(me=Di(Ie)),Q=u.getDerivedStateFromProps,(Ie=typeof Q=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(P!==Ve||De!==me)&&$m(s,N,f,me),Ft=!1,De=s.memoizedState,N.state=De,Mi(s,f,N,x),rn();var Pe=s.memoizedState;P!==Ve||De!==Pe||Ft||r!==null&&r.dependencies!==null&&$u(r.dependencies)?(typeof Q=="function"&&(Vh(s,u,Q,f),Pe=s.memoizedState),(Fe=Ft||Vm(s,u,Fe,f,De,Pe,me)||r!==null&&r.dependencies!==null&&$u(r.dependencies))?(Ie||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(f,Pe,me),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(f,Pe,me)),typeof N.componentDidUpdate=="function"&&(s.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof N.componentDidUpdate!="function"||P===r.memoizedProps&&De===r.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&De===r.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Pe),N.props=f,N.state=Pe,N.context=me,f=Fe):(typeof N.componentDidUpdate!="function"||P===r.memoizedProps&&De===r.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&De===r.memoizedState||(s.flags|=1024),f=!1)}return N=f,hf(r,s),f=(s.flags&128)!==0,N||f?(N=s.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:N.render(),s.flags|=1,r!==null&&f?(s.child=Kt(s,r.child,null,x),s.child=Kt(s,null,u,x)):tr(r,s,u,x),s.memoizedState=N.state,r=s.child):r=ho(r,s,x),r}function og(r,s,u,f){return so(),s.flags|=256,tr(r,s,u,f),s.child}var Kh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xh(r){return{baseLanes:r,cachePool:le()}}function Qh(r,s,u){return r=r!==null?r.childLanes&~u:0,s&&(r|=fs),r}function lg(r,s,u){var f=s.pendingProps,x=!1,N=(s.flags&128)!==0,P;if((P=N)||(P=r!==null&&r.memoizedState===null?!1:(Jn.current&2)!==0),P&&(x=!0,s.flags&=-129),P=(s.flags&32)!==0,s.flags&=-33,r===null){if(Wt){if(x?_r(s):ks(),(r=Cn)?(r=gv(r,Gn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ra!==null?{id:zr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},u=qu(r),u.return=s,s.child=u,Ii=s,Cn=null)):r=null,r===null)throw Ia(s);return Mp(r)?s.lanes=32:s.lanes=536870912,null}var Q=f.children;return f=f.fallback,x?(ks(),x=s.mode,Q=pf({mode:"hidden",children:Q},x),f=ka(f,x,u,null),Q.return=s,f.return=s,Q.sibling=f,s.child=Q,f=s.child,f.memoizedState=Xh(u),f.childLanes=Qh(r,P,u),s.memoizedState=Kh,od(null,f)):(_r(s),Zh(s,Q))}var me=r.memoizedState;if(me!==null&&(Q=me.dehydrated,Q!==null)){if(N)s.flags&256?(_r(s),s.flags&=-257,s=ep(r,s,u)):s.memoizedState!==null?(ks(),s.child=r.child,s.flags|=128,s=null):(ks(),Q=f.fallback,x=s.mode,f=pf({mode:"visible",children:f.children},x),Q=ka(Q,x,u,null),Q.flags|=2,f.return=s,Q.return=s,f.sibling=Q,s.child=f,Kt(s,r.child,null,u),f=s.child,f.memoizedState=Xh(u),f.childLanes=Qh(r,P,u),s.memoizedState=Kh,s=od(null,f));else if(_r(s),Mp(Q)){if(P=Q.nextSibling&&Q.nextSibling.dataset,P)var Ie=P.dgst;P=Ie,f=Error(i(419)),f.stack="",f.digest=P,Ko({value:f,source:null,stack:null}),s=ep(r,s,u)}else if(Ni||Ma(r,s,u,!1),P=(u&r.childLanes)!==0,Ni||P){if(P=Rn,P!==null&&(f=Ei(P,u),f!==0&&f!==me.retryLane))throw me.retryLane=f,$s(r,f),Kr(P,r,f),Yh;Dp(Q)||_f(),s=ep(r,s,u)}else Dp(Q)?(s.flags|=192,s.child=r.child,s=null):(r=me.treeContext,Cn=Ds(Q.nextSibling),Ii=s,Wt=!0,er=null,Gn=!1,r!==null&&tf(s,r),s=Zh(s,f.children),s.flags|=4096);return s}return x?(ks(),Q=f.fallback,x=s.mode,me=r.child,Ie=me.sibling,f=jr(me,{mode:"hidden",children:f.children}),f.subtreeFlags=me.subtreeFlags&65011712,Ie!==null?Q=jr(Ie,Q):(Q=ka(Q,x,u,null),Q.flags|=2),Q.return=s,f.return=s,f.sibling=Q,s.child=f,od(null,f),f=s.child,Q=r.child.memoizedState,Q===null?Q=Xh(u):(x=Q.cachePool,x!==null?(me=Zn._currentValue,x=x.parent!==me?{parent:me,pool:me}:x):x=le(),Q={baseLanes:Q.baseLanes|u,cachePool:x}),f.memoizedState=Q,f.childLanes=Qh(r,P,u),s.memoizedState=Kh,od(r.child,f)):(_r(s),u=r.child,r=u.sibling,u=jr(u,{mode:"visible",children:f.children}),u.return=s,u.sibling=null,r!==null&&(P=s.deletions,P===null?(s.deletions=[r],s.flags|=16):P.push(r)),s.child=u,s.memoizedState=null,u)}function Zh(r,s){return s=pf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function pf(r,s){return r=Gi(22,r,null,s),r.lanes=0,r}function ep(r,s,u){return Kt(s,r.child,null,u),r=Zh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function ug(r,s,u){r.lanes|=s;var f=r.alternate;f!==null&&(f.lanes|=s),Xo(r.return,s,u)}function tp(r,s,u,f,x,N){var P=r.memoizedState;P===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:x,treeForkCount:N}:(P.isBackwards=s,P.rendering=null,P.renderingStartTime=0,P.last=f,P.tail=u,P.tailMode=x,P.treeForkCount=N)}function cg(r,s,u){var f=s.pendingProps,x=f.revealOrder,N=f.tail;f=f.children;var P=Jn.current,Q=(P&2)!==0;if(Q?(P=P&1|2,s.flags|=128):P&=1,H(Jn,P),tr(r,s,f,u),f=Wt?tu:0,!Q&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ug(r,u,s);else if(r.tag===19)ug(r,u,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(x){case"forwards":for(u=s.child,x=null;u!==null;)r=u.alternate,r!==null&&oo(r)===null&&(x=u),u=u.sibling;u=x,u===null?(x=s.child,s.child=null):(x=u.sibling,u.sibling=null),tp(s,!1,x,u,N,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,x=s.child,s.child=null;x!==null;){if(r=x.alternate,r!==null&&oo(r)===null){s.child=x;break}r=x.sibling,x.sibling=u,u=x,x=r}tp(s,!0,u,null,N,f);break;case"together":tp(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function ho(r,s,u){if(r!==null&&(s.dependencies=r.dependencies),sl|=s.lanes,(u&s.childLanes)===0)if(r!==null){if(Ma(r,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,u=jr(r,r.pendingProps),s.child=u,u.return=s;r.sibling!==null;)r=r.sibling,u=u.sibling=jr(r,r.pendingProps),u.return=s;u.sibling=null}return s.child}function np(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&$u(r)))}function T5(r,s,u){switch(s.tag){case 3:se(s,s.stateNode.containerInfo),Da(s,Zn,r.memoizedState.cache),so();break;case 27:case 5:Ae(s);break;case 4:se(s,s.stateNode.containerInfo);break;case 10:Da(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Cs(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(_r(s),s.flags|=128,null):(u&s.child.childLanes)!==0?lg(r,s,u):(_r(s),r=ho(r,s,u),r!==null?r.sibling:null);_r(s);break;case 19:var x=(r.flags&128)!==0;if(f=(u&s.childLanes)!==0,f||(Ma(r,s,u,!1),f=(u&s.childLanes)!==0),x){if(f)return cg(r,s,u);s.flags|=128}if(x=s.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),H(Jn,Jn.current),f)break;return null;case 22:return s.lanes=0,ng(r,s,u,s.pendingProps);case 24:Da(s,Zn,r.memoizedState.cache)}return ho(r,s,u)}function dg(r,s,u){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ni=!0;else{if(!np(r,u)&&(s.flags&128)===0)return Ni=!1,T5(r,s,u);Ni=(r.flags&131072)!==0}else Ni=!1,Wt&&(s.flags&1048576)!==0&&ef(s,tu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(r=ye(s.elementType),s.type=r,typeof r=="function")Bu(r)?(f=ou(r,f),s.tag=1,s=ag(null,s,r,f,u)):(s.tag=0,s=Wh(null,s,r,f,u));else{if(r!=null){var x=r.$$typeof;if(x===O){s.tag=11,s=Zm(null,s,r,f,u);break e}else if(x===B){s.tag=14,s=eg(null,s,r,f,u);break e}}throw s=ie(r)||r,Error(i(306,s,""))}}return s;case 0:return Wh(r,s,s.type,s.pendingProps,u);case 1:return f=s.type,x=ou(f,s.pendingProps),ag(r,s,f,x,u);case 3:e:{if(se(s,s.stateNode.containerInfo),r===null)throw Error(i(387));f=s.pendingProps;var N=s.memoizedState;x=N.element,un(r,s),Mi(s,f,null,u);var P=s.memoizedState;if(f=P.cache,Da(s,Zn,f),f!==N.cache&&ao(s,[Zn],u,!0),rn(),f=P.element,N.isDehydrated)if(N={element:f,isDehydrated:!1,cache:P.cache},s.updateQueue.baseState=N,s.memoizedState=N,s.flags&256){s=og(r,s,f,u);break e}else if(f!==x){x=Fr(Error(i(424)),s),Ko(x),s=og(r,s,f,u);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Cn=Ds(r.firstChild),Ii=s,Wt=!0,er=null,Gn=!0,u=en(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(so(),f===x){s=ho(r,s,u);break e}tr(r,s,f,u)}s=s.child}return s;case 26:return hf(r,s),r===null?(u=Sv(s.type,null,s.pendingProps,null))?s.memoizedState=u:Wt||(u=s.type,r=s.pendingProps,f=Rf(ae.current).createElement(u),f[ln]=s,f[wn]=r,nr(f,u,r),ni(f),s.stateNode=f):s.memoizedState=Sv(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ae(s),r===null&&Wt&&(f=s.stateNode=bv(s.type,s.pendingProps,ae.current),Ii=s,Gn=!0,x=Cn,cl(s.type)?(Pp=x,Cn=Ds(f.firstChild)):Cn=x),tr(r,s,s.pendingProps.children,u),hf(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Wt&&((x=f=Cn)&&(f=nx(f,s.type,s.pendingProps,Gn),f!==null?(s.stateNode=f,Ii=s,Cn=Ds(f.firstChild),Gn=!1,x=!0):x=!1),x||Ia(s)),Ae(s),x=s.type,N=s.pendingProps,P=r!==null?r.memoizedProps:null,f=N.children,Rp(x,N)?f=null:P!==null&&Rp(x,P)&&(s.flags|=32),s.memoizedState!==null&&(x=Qc(r,s,Oh,null,null,u),Sd._currentValue=x),hf(r,s),tr(r,s,f,u),s.child;case 6:return r===null&&Wt&&((r=u=Cn)&&(u=ix(u,s.pendingProps,Gn),u!==null?(s.stateNode=u,Ii=s,Cn=null,r=!0):r=!1),r||Ia(s)),null;case 13:return lg(r,s,u);case 4:return se(s,s.stateNode.containerInfo),f=s.pendingProps,r===null?s.child=Kt(s,null,f,u):tr(r,s,f,u),s.child;case 11:return Zm(r,s,s.type,s.pendingProps,u);case 7:return tr(r,s,s.pendingProps,u),s.child;case 8:return tr(r,s,s.pendingProps.children,u),s.child;case 12:return tr(r,s,s.pendingProps.children,u),s.child;case 10:return f=s.pendingProps,Da(s,s.type,f.value),tr(r,s,f.children,u),s.child;case 9:return x=s.type._context,f=s.pendingProps.children,Pa(s),x=Di(x),f=f(x),s.flags|=1,tr(r,s,f,u),s.child;case 14:return eg(r,s,s.type,s.pendingProps,u);case 15:return tg(r,s,s.type,s.pendingProps,u);case 19:return cg(r,s,u);case 31:return A5(r,s,u);case 22:return ng(r,s,u,s.pendingProps);case 24:return Pa(s),f=Di(Zn),r===null?(x=X(),x===null&&(x=Rn,N=Qo(),x.pooledCache=N,N.refCount++,N!==null&&(x.pooledCacheLanes|=u),x=N),s.memoizedState={parent:f,cache:x},hn(s),Da(s,Zn,x)):((r.lanes&u)!==0&&(un(r,s),Mi(s,null,null,u),rn()),x=r.memoizedState,N=s.memoizedState,x.parent!==f?(x={parent:f,cache:f},s.memoizedState=x,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=x),Da(s,Zn,f)):(f=N.cache,Da(s,Zn,f),f!==x.cache&&ao(s,[Zn],u,!0))),tr(r,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function po(r){r.flags|=4}function ip(r,s,u,f,x){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(x&335544128)===x)if(r.stateNode.complete)r.flags|=8192;else if(jg())r.flags|=8192;else throw we=Ne,ke}else r.flags&=-16777217}function fg(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ev(s))if(jg())r.flags|=8192;else throw we=Ne,ke}function mf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?gn():536870912,r.lanes|=s,oc|=s)}function ld(r,s){if(!Wt)switch(r.tailMode){case"hidden":s=r.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function zn(r){var s=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(s)for(var x=r.child;x!==null;)u|=x.lanes|x.childLanes,f|=x.subtreeFlags&65011712,f|=x.flags&65011712,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)u|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=f,r.childLanes=u,s}function E5(r,s,u){var f=s.pendingProps;switch(Gu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(s),null;case 1:return zn(s),null;case 3:return u=s.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Gr(Zn),he(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Li(s)?po(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Kc())),zn(s),null;case 26:var x=s.type,N=s.memoizedState;return r===null?(po(s),N!==null?(zn(s),fg(s,N)):(zn(s),ip(s,x,null,f,u))):N?N!==r.memoizedState?(po(s),zn(s),fg(s,N)):(zn(s),s.flags&=-16777217):(r=r.memoizedProps,r!==f&&po(s),zn(s),ip(s,x,r,f,u)),null;case 27:if(Me(s),u=ae.current,x=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==f&&po(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return zn(s),null}r=K.current,Li(s)?Wc(s):(r=bv(x,f,u),s.stateNode=r,po(s))}return zn(s),null;case 5:if(Me(s),x=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==f&&po(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return zn(s),null}if(N=K.current,Li(s))Wc(s);else{var P=Rf(ae.current);switch(N){case 1:N=P.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:N=P.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":N=P.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":N=P.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":N=P.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof f.is=="string"?P.createElement("select",{is:f.is}):P.createElement("select"),f.multiple?N.multiple=!0:f.size&&(N.size=f.size);break;default:N=typeof f.is=="string"?P.createElement(x,{is:f.is}):P.createElement(x)}}N[ln]=s,N[wn]=f;e:for(P=s.child;P!==null;){if(P.tag===5||P.tag===6)N.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===s)break e;for(;P.sibling===null;){if(P.return===null||P.return===s)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}s.stateNode=N;e:switch(nr(N,x,f),x){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&po(s)}}return zn(s),ip(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,u),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==f&&po(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(i(166));if(r=ae.current,Li(s)){if(r=s.stateNode,u=s.memoizedProps,f=null,x=Ii,x!==null)switch(x.tag){case 27:case 5:f=x.memoizedProps}r[ln]=s,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||lv(r.nodeValue,u)),r||Ia(s,!0)}else r=Rf(r).createTextNode(f),r[ln]=s,s.stateNode=r}return zn(s),null;case 31:if(u=s.memoizedState,r===null||r.memoizedState!==null){if(f=Li(s),u!==null){if(r===null){if(!f)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[ln]=s}else so(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zn(s),r=!1}else u=Kc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return s.flags&256?(dr(s),s):(dr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return zn(s),null;case 13:if(f=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(x=Li(s),f!==null&&f.dehydrated!==null){if(r===null){if(!x)throw Error(i(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[ln]=s}else so(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zn(s),x=!1}else x=Kc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=x),x=!0;if(!x)return s.flags&256?(dr(s),s):(dr(s),null)}return dr(s),(s.flags&128)!==0?(s.lanes=u,s):(u=f!==null,r=r!==null&&r.memoizedState!==null,u&&(f=s.child,x=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(x=f.alternate.memoizedState.cachePool.pool),N=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(N=f.memoizedState.cachePool.pool),N!==x&&(f.flags|=2048)),u!==r&&u&&(s.child.flags|=8192),mf(s,s.updateQueue),zn(s),null);case 4:return he(),r===null&&Ap(s.stateNode.containerInfo),zn(s),null;case 10:return Gr(s.type),zn(s),null;case 19:if(D(Jn),f=s.memoizedState,f===null)return zn(s),null;if(x=(s.flags&128)!==0,N=f.rendering,N===null)if(x)ld(f,!1);else{if(si!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(N=oo(r),N!==null){for(s.flags|=128,ld(f,!1),r=N.updateQueue,s.updateQueue=r,mf(s,r),s.subtreeFlags=0,r=u,u=s.child;u!==null;)Zl(u,r),u=u.sibling;return H(Jn,Jn.current&1|2),Wt&&wr(s,f.treeForkCount),s.child}r=r.sibling}f.tail!==null&&Se()>xf&&(s.flags|=128,x=!0,ld(f,!1),s.lanes=4194304)}else{if(!x)if(r=oo(N),r!==null){if(s.flags|=128,x=!0,r=r.updateQueue,s.updateQueue=r,mf(s,r),ld(f,!0),f.tail===null&&f.tailMode==="hidden"&&!N.alternate&&!Wt)return zn(s),null}else 2*Se()-f.renderingStartTime>xf&&u!==536870912&&(s.flags|=128,x=!0,ld(f,!1),s.lanes=4194304);f.isBackwards?(N.sibling=s.child,s.child=N):(r=f.last,r!==null?r.sibling=N:s.child=N,f.last=N)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Se(),r.sibling=null,u=Jn.current,H(Jn,x?u&1|2:u&1),Wt&&wr(s,f.treeForkCount),r):(zn(s),null);case 22:case 23:return dr(s),ri(),f=s.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(u&536870912)!==0&&(s.flags&128)===0&&(zn(s),s.subtreeFlags&6&&(s.flags|=8192)):zn(s),u=s.updateQueue,u!==null&&mf(s,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==u&&(s.flags|=2048),r!==null&&D(Y),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Gr(Zn),zn(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function C5(r,s){switch(Gu(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Gr(Zn),he(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Me(s),null;case 31:if(s.memoizedState!==null){if(dr(s),s.alternate===null)throw Error(i(340));so()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(dr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));so()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return D(Jn),null;case 4:return he(),null;case 10:return Gr(s.type),null;case 22:case 23:return dr(s),ri(),r!==null&&D(Y),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Gr(Zn),null;case 25:return null;default:return null}}function hg(r,s){switch(Gu(s),s.tag){case 3:Gr(Zn),he();break;case 26:case 27:case 5:Me(s);break;case 4:he();break;case 31:s.memoizedState!==null&&dr(s);break;case 13:dr(s);break;case 19:D(Jn);break;case 10:Gr(s.type);break;case 22:case 23:dr(s),ri(),r!==null&&D(Y);break;case 24:Gr(Zn)}}function ud(r,s){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var x=f.next;u=x;do{if((u.tag&r)===r){f=void 0;var N=u.create,P=u.inst;f=N(),P.destroy=f}u=u.next}while(u!==x)}}catch(Q){bn(s,s.return,Q)}}function il(r,s,u){try{var f=s.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var N=x.next;f=N;do{if((f.tag&r)===r){var P=f.inst,Q=P.destroy;if(Q!==void 0){P.destroy=void 0,x=s;var me=u,Ie=Q;try{Ie()}catch(Fe){bn(x,me,Fe)}}}f=f.next}while(f!==N)}}catch(Fe){bn(s,s.return,Fe)}}function pg(r){var s=r.updateQueue;if(s!==null){var u=r.stateNode;try{di(s,u)}catch(f){bn(r,r.return,f)}}}function mg(r,s,u){u.props=ou(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){bn(r,s,f)}}function cd(r,s){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(x){bn(r,s,x)}}function Ba(r,s){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(x){bn(r,s,x)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(x){bn(r,s,x)}else u.current=null}function gg(r){var s=r.type,u=r.memoizedProps,f=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(x){bn(r,r.return,x)}}function rp(r,s,u){try{var f=r.stateNode;K5(f,r.type,u,s),f[wn]=s}catch(x){bn(r,r.return,x)}}function vg(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&cl(r.type)||r.tag===4}function sp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||vg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&cl(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ap(r,s,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(r),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Pn));else if(f!==4&&(f===27&&cl(r.type)&&(u=r.stateNode,s=null),r=r.child,r!==null))for(ap(r,s,u),r=r.sibling;r!==null;)ap(r,s,u),r=r.sibling}function gf(r,s,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?u.insertBefore(r,s):u.appendChild(r);else if(f!==4&&(f===27&&cl(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(gf(r,s,u),r=r.sibling;r!==null;)gf(r,s,u),r=r.sibling}function yg(r){var s=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,x=s.attributes;x.length;)s.removeAttributeNode(x[0]);nr(s,f,u),s[ln]=r,s[wn]=u}catch(N){bn(r,r.return,N)}}var mo=!1,Ai=!1,op=!1,bg=typeof WeakSet=="function"?WeakSet:Set,$i=null;function k5(r,s){if(r=r.containerInfo,Cp=Of,r=ls(r),us(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var x=f.anchorOffset,N=f.focusNode;f=f.focusOffset;try{u.nodeType,N.nodeType}catch{u=null;break e}var P=0,Q=-1,me=-1,Ie=0,Fe=0,Ve=r,De=null;t:for(;;){for(var Pe;Ve!==u||x!==0&&Ve.nodeType!==3||(Q=P+x),Ve!==N||f!==0&&Ve.nodeType!==3||(me=P+f),Ve.nodeType===3&&(P+=Ve.nodeValue.length),(Pe=Ve.firstChild)!==null;)De=Ve,Ve=Pe;for(;;){if(Ve===r)break t;if(De===u&&++Ie===x&&(Q=P),De===N&&++Fe===f&&(me=P),(Pe=Ve.nextSibling)!==null)break;Ve=De,De=Ve.parentNode}Ve=Pe}u=Q===-1||me===-1?null:{start:Q,end:me}}else u=null}u=u||{start:0,end:0}}else u=null;for(kp={focusedElem:r,selectionRange:u},Of=!1,$i=s;$i!==null;)if(s=$i,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,$i=r;else for(;$i!==null;){switch(s=$i,N=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)x=r[u],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&N!==null){r=void 0,u=s,x=N.memoizedProps,N=N.memoizedState,f=u.stateNode;try{var dt=ou(u.type,x);r=f.getSnapshotBeforeUpdate(dt,N),f.__reactInternalSnapshotBeforeUpdate=r}catch(kt){bn(u,u.return,kt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,u=r.nodeType,u===9)Lp(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Lp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,$i=r;break}$i=s.return}}function xg(r,s,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:vo(r,u),f&4&&ud(5,u);break;case 1:if(vo(r,u),f&4)if(r=u.stateNode,s===null)try{r.componentDidMount()}catch(P){bn(u,u.return,P)}else{var x=ou(u.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(x,s,r.__reactInternalSnapshotBeforeUpdate)}catch(P){bn(u,u.return,P)}}f&64&&pg(u),f&512&&cd(u,u.return);break;case 3:if(vo(r,u),f&64&&(r=u.updateQueue,r!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{di(r,s)}catch(P){bn(u,u.return,P)}}break;case 27:s===null&&f&4&&yg(u);case 26:case 5:vo(r,u),s===null&&f&4&&gg(u),f&512&&cd(u,u.return);break;case 12:vo(r,u);break;case 31:vo(r,u),f&4&&_g(r,u);break;case 13:vo(r,u),f&4&&Ng(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=j5.bind(null,u),rx(r,u))));break;case 22:if(f=u.memoizedState!==null||mo,!f){s=s!==null&&s.memoizedState!==null||Ai,x=mo;var N=Ai;mo=f,(Ai=s)&&!N?yo(r,u,(u.subtreeFlags&8772)!==0):vo(r,u),mo=x,Ai=N}break;case 30:break;default:vo(r,u)}}function wg(r){var s=r.alternate;s!==null&&(r.alternate=null,wg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ys(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Wn=null,$r=!1;function go(r,s,u){for(u=u.child;u!==null;)Sg(r,s,u),u=u.sibling}function Sg(r,s,u){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Lt,u)}catch{}switch(u.tag){case 26:Ai||Ba(u,s),go(r,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ai||Ba(u,s);var f=Wn,x=$r;cl(u.type)&&(Wn=u.stateNode,$r=!1),go(r,s,u),bd(u.stateNode),Wn=f,$r=x;break;case 5:Ai||Ba(u,s);case 6:if(f=Wn,x=$r,Wn=null,go(r,s,u),Wn=f,$r=x,Wn!==null)if($r)try{(Wn.nodeType===9?Wn.body:Wn.nodeName==="HTML"?Wn.ownerDocument.body:Wn).removeChild(u.stateNode)}catch(N){bn(u,s,N)}else try{Wn.removeChild(u.stateNode)}catch(N){bn(u,s,N)}break;case 18:Wn!==null&&($r?(r=Wn,pv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),mc(r)):pv(Wn,u.stateNode));break;case 4:f=Wn,x=$r,Wn=u.stateNode.containerInfo,$r=!0,go(r,s,u),Wn=f,$r=x;break;case 0:case 11:case 14:case 15:il(2,u,s),Ai||il(4,u,s),go(r,s,u);break;case 1:Ai||(Ba(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"&&mg(u,s,f)),go(r,s,u);break;case 21:go(r,s,u);break;case 22:Ai=(f=Ai)||u.memoizedState!==null,go(r,s,u),Ai=f;break;default:go(r,s,u)}}function _g(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{mc(r)}catch(u){bn(s,s.return,u)}}}function Ng(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{mc(r)}catch(u){bn(s,s.return,u)}}function R5(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new bg),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new bg),s;default:throw Error(i(435,r.tag))}}function vf(r,s){var u=R5(r);s.forEach(function(f){if(!u.has(f)){u.add(f);var x=F5.bind(null,r,f);f.then(x,x)}})}function Jr(r,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var x=u[f],N=r,P=s,Q=P;e:for(;Q!==null;){switch(Q.tag){case 27:if(cl(Q.type)){Wn=Q.stateNode,$r=!1;break e}break;case 5:Wn=Q.stateNode,$r=!1;break e;case 3:case 4:Wn=Q.stateNode.containerInfo,$r=!0;break e}Q=Q.return}if(Wn===null)throw Error(i(160));Sg(N,P,x),Wn=null,$r=!1,N=x.alternate,N!==null&&(N.return=null),x.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ag(s,r),s=s.sibling}var Zs=null;function Ag(r,s){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Jr(s,r),Yr(r),f&4&&(il(3,r,r.return),ud(3,r),il(5,r,r.return));break;case 1:Jr(s,r),Yr(r),f&512&&(Ai||u===null||Ba(u,u.return)),f&64&&mo&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var x=Zs;if(Jr(s,r),Yr(r),f&512&&(Ai||u===null||Ba(u,u.return)),f&4){var N=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){e:{f=r.type,u=r.memoizedProps,x=x.ownerDocument||x;t:switch(f){case"title":N=x.getElementsByTagName("title")[0],(!N||N[Fn]||N[ln]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=x.createElement(f),x.head.insertBefore(N,x.querySelector("head > title"))),nr(N,f,u),N[ln]=r,ni(N),f=N;break e;case"link":var P=Av("link","href",x).get(f+(u.href||""));if(P){for(var Q=0;Q<P.length;Q++)if(N=P[Q],N.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&N.getAttribute("rel")===(u.rel==null?null:u.rel)&&N.getAttribute("title")===(u.title==null?null:u.title)&&N.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){P.splice(Q,1);break t}}N=x.createElement(f),nr(N,f,u),x.head.appendChild(N);break;case"meta":if(P=Av("meta","content",x).get(f+(u.content||""))){for(Q=0;Q<P.length;Q++)if(N=P[Q],N.getAttribute("content")===(u.content==null?null:""+u.content)&&N.getAttribute("name")===(u.name==null?null:u.name)&&N.getAttribute("property")===(u.property==null?null:u.property)&&N.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&N.getAttribute("charset")===(u.charSet==null?null:u.charSet)){P.splice(Q,1);break t}}N=x.createElement(f),nr(N,f,u),x.head.appendChild(N);break;default:throw Error(i(468,f))}N[ln]=r,ni(N),f=N}r.stateNode=f}else Tv(x,r.type,r.stateNode);else r.stateNode=Nv(x,f,r.memoizedProps);else N!==f?(N===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):N.count--,f===null?Tv(x,r.type,r.stateNode):Nv(x,f,r.memoizedProps)):f===null&&r.stateNode!==null&&rp(r,r.memoizedProps,u.memoizedProps)}break;case 27:Jr(s,r),Yr(r),f&512&&(Ai||u===null||Ba(u,u.return)),u!==null&&f&4&&rp(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Jr(s,r),Yr(r),f&512&&(Ai||u===null||Ba(u,u.return)),r.flags&32){x=r.stateNode;try{xs(x,"")}catch(dt){bn(r,r.return,dt)}}f&4&&r.stateNode!=null&&(x=r.memoizedProps,rp(r,x,u!==null?u.memoizedProps:x)),f&1024&&(op=!0);break;case 6:if(Jr(s,r),Yr(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(dt){bn(r,r.return,dt)}}break;case 3:if(Df=null,x=Zs,Zs=If(s.containerInfo),Jr(s,r),Zs=x,Yr(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{mc(s.containerInfo)}catch(dt){bn(r,r.return,dt)}op&&(op=!1,Tg(r));break;case 4:f=Zs,Zs=If(r.stateNode.containerInfo),Jr(s,r),Yr(r),Zs=f;break;case 12:Jr(s,r),Yr(r);break;case 31:Jr(s,r),Yr(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,vf(r,f)));break;case 13:Jr(s,r),Yr(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(bf=Se()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,vf(r,f)));break;case 22:x=r.memoizedState!==null;var me=u!==null&&u.memoizedState!==null,Ie=mo,Fe=Ai;if(mo=Ie||x,Ai=Fe||me,Jr(s,r),Ai=Fe,mo=Ie,Yr(r),f&8192)e:for(s=r.stateNode,s._visibility=x?s._visibility&-2:s._visibility|1,x&&(u===null||me||mo||Ai||lu(r)),u=null,s=r;;){if(s.tag===5||s.tag===26){if(u===null){me=u=s;try{if(N=me.stateNode,x)P=N.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{Q=me.stateNode;var Ve=me.memoizedProps.style,De=Ve!=null&&Ve.hasOwnProperty("display")?Ve.display:null;Q.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(dt){bn(me,me.return,dt)}}}else if(s.tag===6){if(u===null){me=s;try{me.stateNode.nodeValue=x?"":me.memoizedProps}catch(dt){bn(me,me.return,dt)}}}else if(s.tag===18){if(u===null){me=s;try{var Pe=me.stateNode;x?mv(Pe,!0):mv(me.stateNode,!1)}catch(dt){bn(me,me.return,dt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,vf(r,u))));break;case 19:Jr(s,r),Yr(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,vf(r,f)));break;case 30:break;case 21:break;default:Jr(s,r),Yr(r)}}function Yr(r){var s=r.flags;if(s&2){try{for(var u,f=r.return;f!==null;){if(vg(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var x=u.stateNode,N=sp(r);gf(r,N,x);break;case 5:var P=u.stateNode;u.flags&32&&(xs(P,""),u.flags&=-33);var Q=sp(r);gf(r,Q,P);break;case 3:case 4:var me=u.stateNode.containerInfo,Ie=sp(r);ap(r,Ie,me);break;default:throw Error(i(161))}}catch(Fe){bn(r,r.return,Fe)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Tg(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Tg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function vo(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)xg(r,s.alternate,s),s=s.sibling}function lu(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:il(4,s,s.return),lu(s);break;case 1:Ba(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&mg(s,s.return,u),lu(s);break;case 27:bd(s.stateNode);case 26:case 5:Ba(s,s.return),lu(s);break;case 22:s.memoizedState===null&&lu(s);break;case 30:lu(s);break;default:lu(s)}r=r.sibling}}function yo(r,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,x=r,N=s,P=N.flags;switch(N.tag){case 0:case 11:case 15:yo(x,N,u),ud(4,N);break;case 1:if(yo(x,N,u),f=N,x=f.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Ie){bn(f,f.return,Ie)}if(f=N,x=f.updateQueue,x!==null){var Q=f.stateNode;try{var me=x.shared.hiddenCallbacks;if(me!==null)for(x.shared.hiddenCallbacks=null,x=0;x<me.length;x++)cr(me[x],Q)}catch(Ie){bn(f,f.return,Ie)}}u&&P&64&&pg(N),cd(N,N.return);break;case 27:yg(N);case 26:case 5:yo(x,N,u),u&&f===null&&P&4&&gg(N),cd(N,N.return);break;case 12:yo(x,N,u);break;case 31:yo(x,N,u),u&&P&4&&_g(x,N);break;case 13:yo(x,N,u),u&&P&4&&Ng(x,N);break;case 22:N.memoizedState===null&&yo(x,N,u),cd(N,N.return);break;case 30:break;default:yo(x,N,u)}s=s.sibling}}function lp(r,s){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&nu(u))}function up(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&nu(r))}function ea(r,s,u,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Eg(r,s,u,f),s=s.sibling}function Eg(r,s,u,f){var x=s.flags;switch(s.tag){case 0:case 11:case 15:ea(r,s,u,f),x&2048&&ud(9,s);break;case 1:ea(r,s,u,f);break;case 3:ea(r,s,u,f),x&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&nu(r)));break;case 12:if(x&2048){ea(r,s,u,f),r=s.stateNode;try{var N=s.memoizedProps,P=N.id,Q=N.onPostCommit;typeof Q=="function"&&Q(P,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(me){bn(s,s.return,me)}}else ea(r,s,u,f);break;case 31:ea(r,s,u,f);break;case 13:ea(r,s,u,f);break;case 23:break;case 22:N=s.stateNode,P=s.alternate,s.memoizedState!==null?N._visibility&2?ea(r,s,u,f):dd(r,s):N._visibility&2?ea(r,s,u,f):(N._visibility|=2,rc(r,s,u,f,(s.subtreeFlags&10256)!==0||!1)),x&2048&&lp(P,s);break;case 24:ea(r,s,u,f),x&2048&&up(s.alternate,s);break;default:ea(r,s,u,f)}}function rc(r,s,u,f,x){for(x=x&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var N=r,P=s,Q=u,me=f,Ie=P.flags;switch(P.tag){case 0:case 11:case 15:rc(N,P,Q,me,x),ud(8,P);break;case 23:break;case 22:var Fe=P.stateNode;P.memoizedState!==null?Fe._visibility&2?rc(N,P,Q,me,x):dd(N,P):(Fe._visibility|=2,rc(N,P,Q,me,x)),x&&Ie&2048&&lp(P.alternate,P);break;case 24:rc(N,P,Q,me,x),x&&Ie&2048&&up(P.alternate,P);break;default:rc(N,P,Q,me,x)}s=s.sibling}}function dd(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=r,f=s,x=f.flags;switch(f.tag){case 22:dd(u,f),x&2048&&lp(f.alternate,f);break;case 24:dd(u,f),x&2048&&up(f.alternate,f);break;default:dd(u,f)}s=s.sibling}}var fd=8192;function sc(r,s,u){if(r.subtreeFlags&fd)for(r=r.child;r!==null;)Cg(r,s,u),r=r.sibling}function Cg(r,s,u){switch(r.tag){case 26:sc(r,s,u),r.flags&fd&&r.memoizedState!==null&&gx(u,Zs,r.memoizedState,r.memoizedProps);break;case 5:sc(r,s,u);break;case 3:case 4:var f=Zs;Zs=If(r.stateNode.containerInfo),sc(r,s,u),Zs=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=fd,fd=16777216,sc(r,s,u),fd=f):sc(r,s,u));break;default:sc(r,s,u)}}function kg(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function hd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];$i=f,Ig(f,r)}kg(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Rg(r),r=r.sibling}function Rg(r){switch(r.tag){case 0:case 11:case 15:hd(r),r.flags&2048&&il(9,r,r.return);break;case 3:hd(r);break;case 12:hd(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,yf(r)):hd(r);break;default:hd(r)}}function yf(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];$i=f,Ig(f,r)}kg(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:il(8,s,s.return),yf(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,yf(s));break;default:yf(s)}r=r.sibling}}function Ig(r,s){for(;$i!==null;){var u=$i;switch(u.tag){case 0:case 11:case 15:il(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:nu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,$i=f;else e:for(u=r;$i!==null;){f=$i;var x=f.sibling,N=f.return;if(wg(f),f===u){$i=null;break e}if(x!==null){x.return=N,$i=x;break e}$i=N}}}var I5={getCacheForType:function(r){var s=Di(Zn),u=s.data.get(r);return u===void 0&&(u=r(),s.data.set(r,u)),u},cacheSignal:function(){return Di(Zn).controller.signal}},L5=typeof WeakMap=="function"?WeakMap:Map,pn=0,Rn=null,Xt=null,tn=0,yn=0,ds=null,rl=!1,ac=!1,cp=!1,bo=0,si=0,sl=0,uu=0,dp=0,fs=0,oc=0,pd=null,Wr=null,fp=!1,bf=0,Lg=0,xf=1/0,wf=null,al=null,Pi=0,ol=null,lc=null,xo=0,hp=0,pp=null,Dg=null,md=0,mp=null;function hs(){return(pn&2)!==0&&tn!==0?tn&-tn:U.T!==null?wp():Ci()}function Mg(){if(fs===0)if((tn&536870912)===0||Wt){var r=vi;vi<<=1,(vi&3932160)===0&&(vi=262144),fs=r}else fs=536870912;return r=ei.current,r!==null&&(r.flags|=32),fs}function Kr(r,s,u){(r===Rn&&(yn===2||yn===9)||r.cancelPendingCommit!==null)&&(uc(r,0),ll(r,tn,fs,!1)),yi(r,u),((pn&2)===0||r!==Rn)&&(r===Rn&&((pn&2)===0&&(uu|=u),si===4&&ll(r,tn,fs,!1)),qa(r))}function Pg(r,s,u){if((pn&6)!==0)throw Error(i(327));var f=!u&&(s&127)===0&&(s&r.expiredLanes)===0||Vt(r,s),x=f?P5(r,s):vp(r,s,!0),N=f;do{if(x===0){ac&&!f&&ll(r,s,0,!1);break}else{if(u=r.current.alternate,N&&!D5(u)){x=vp(r,s,!1),N=!1;continue}if(x===2){if(N=s,r.errorRecoveryDisabledLanes&N)var P=0;else P=r.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){s=P;e:{var Q=r;x=pd;var me=Q.current.memoizedState.isDehydrated;if(me&&(uc(Q,P).flags|=256),P=vp(Q,P,!1),P!==2){if(cp&&!me){Q.errorRecoveryDisabledLanes|=N,uu|=N,x=4;break e}N=Wr,Wr=x,N!==null&&(Wr===null?Wr=N:Wr.push.apply(Wr,N))}x=P}if(N=!1,x!==2)continue}}if(x===1){uc(r,0),ll(r,s,0,!0);break}e:{switch(f=r,N=x,N){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ll(f,s,fs,!rl);break e;case 2:Wr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(x=bf+300-Se(),10<x)){if(ll(f,s,fs,!rl),_t(f,0,!0)!==0)break e;xo=s,f.timeoutHandle=fv(Ug.bind(null,f,u,Wr,wf,fp,s,fs,uu,oc,rl,N,"Throttled",-0,0),x);break e}Ug(f,u,Wr,wf,fp,s,fs,uu,oc,rl,N,null,-0,0)}}break}while(!0);qa(r)}function Ug(r,s,u,f,x,N,P,Q,me,Ie,Fe,Ve,De,Pe){if(r.timeoutHandle=-1,Ve=s.subtreeFlags,Ve&8192||(Ve&16785408)===16785408){Ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pn},Cg(s,N,Ve);var dt=(N&62914560)===N?bf-Se():(N&4194048)===N?Lg-Se():0;if(dt=vx(Ve,dt),dt!==null){xo=N,r.cancelPendingCommit=dt(Gg.bind(null,r,s,N,u,f,x,P,Q,me,Fe,Ve,null,De,Pe)),ll(r,N,P,!Ie);return}}Gg(r,s,N,u,f,x,P,Q,me)}function D5(r){for(var s=r;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var x=u[f],N=x.getSnapshot;x=x.value;try{if(!Qi(N(),x))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ll(r,s,u,f){s&=~dp,s&=~uu,r.suspendedLanes|=s,r.pingedLanes&=~s,f&&(r.warmLanes|=s),f=r.expirationTimes;for(var x=s;0<x;){var N=31-St(x),P=1<<N;f[N]=-1,x&=~P}u!==0&&sr(r,u,s)}function Sf(){return(pn&6)===0?(gd(0),!1):!0}function gp(){if(Xt!==null){if(yn===0)var r=Xt.return;else r=Xt,Es=La=null,Xu(r),qe=null,at=0,r=Xt;for(;r!==null;)hg(r.alternate,r),r=r.return;Xt=null}}function uc(r,s){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,Z5(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),xo=0,gp(),Rn=r,Xt=u=jr(r.current,null),tn=s,yn=0,ds=null,rl=!1,ac=Vt(r,s),cp=!1,oc=fs=dp=uu=sl=si=0,Wr=pd=null,fp=!1,(s&8)!==0&&(s|=s&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=s;0<f;){var x=31-St(f),N=1<<x;s|=r[x],f&=~N}return bo=s,Kl(),u}function Og(r,s){Ot=null,U.H=ad,s===ve||s===Ce?(s=ze(),yn=3):s===ke?(s=ze(),yn=4):yn=s===Yh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ds=s,Xt===null&&(si=1,df(r,Fr(s,r.current)))}function jg(){var r=ei.current;return r===null?!0:(tn&4194048)===tn?Si===null:(tn&62914560)===tn||(tn&536870912)!==0?r===Si:!1}function Fg(){var r=U.H;return U.H=ad,r===null?ad:r}function Bg(){var r=U.A;return U.A=I5,r}function _f(){si=4,rl||(tn&4194048)!==tn&&ei.current!==null||(ac=!0),(sl&134217727)===0&&(uu&134217727)===0||Rn===null||ll(Rn,tn,fs,!1)}function vp(r,s,u){var f=pn;pn|=2;var x=Fg(),N=Bg();(Rn!==r||tn!==s)&&(wf=null,uc(r,s)),s=!1;var P=si;e:do try{if(yn!==0&&Xt!==null){var Q=Xt,me=ds;switch(yn){case 8:gp(),P=6;break e;case 3:case 2:case 9:case 6:ei.current===null&&(s=!0);var Ie=yn;if(yn=0,ds=null,cc(r,Q,me,Ie),u&&ac){P=0;break e}break;default:Ie=yn,yn=0,ds=null,cc(r,Q,me,Ie)}}M5(),P=si;break}catch(Fe){Og(r,Fe)}while(!0);return s&&r.shellSuspendCounter++,Es=La=null,pn=f,U.H=x,U.A=N,Xt===null&&(Rn=null,tn=0,Kl()),P}function M5(){for(;Xt!==null;)qg(Xt)}function P5(r,s){var u=pn;pn|=2;var f=Fg(),x=Bg();Rn!==r||tn!==s?(wf=null,xf=Se()+500,uc(r,s)):ac=Vt(r,s);e:do try{if(yn!==0&&Xt!==null){s=Xt;var N=ds;t:switch(yn){case 1:yn=0,ds=null,cc(r,s,N,1);break;case 2:case 9:if(Ge(N)){yn=0,ds=null,zg(s);break}s=function(){yn!==2&&yn!==9||Rn!==r||(yn=7),qa(r)},N.then(s,s);break e;case 3:yn=7;break e;case 4:yn=5;break e;case 7:Ge(N)?(yn=0,ds=null,zg(s)):(yn=0,ds=null,cc(r,s,N,7));break;case 5:var P=null;switch(Xt.tag){case 26:P=Xt.memoizedState;case 5:case 27:var Q=Xt;if(P?Ev(P):Q.stateNode.complete){yn=0,ds=null;var me=Q.sibling;if(me!==null)Xt=me;else{var Ie=Q.return;Ie!==null?(Xt=Ie,Nf(Ie)):Xt=null}break t}}yn=0,ds=null,cc(r,s,N,5);break;case 6:yn=0,ds=null,cc(r,s,N,6);break;case 8:gp(),si=6;break e;default:throw Error(i(462))}}U5();break}catch(Fe){Og(r,Fe)}while(!0);return Es=La=null,U.H=f,U.A=x,pn=u,Xt!==null?0:(Rn=null,tn=0,Kl(),si)}function U5(){for(;Xt!==null&&!et();)qg(Xt)}function qg(r){var s=dg(r.alternate,r,bo);r.memoizedProps=r.pendingProps,s===null?Nf(r):Xt=s}function zg(r){var s=r,u=s.alternate;switch(s.tag){case 15:case 0:s=sg(u,s,s.pendingProps,s.type,void 0,tn);break;case 11:s=sg(u,s,s.pendingProps,s.type.render,s.ref,tn);break;case 5:Xu(s);default:hg(u,s),s=Xt=Zl(s,bo),s=dg(u,s,bo)}r.memoizedProps=r.pendingProps,s===null?Nf(r):Xt=s}function cc(r,s,u,f){Es=La=null,Xu(s),qe=null,at=0;var x=s.return;try{if(N5(r,x,s,u,tn)){si=1,df(r,Fr(u,r.current)),Xt=null;return}}catch(N){if(x!==null)throw Xt=x,N;si=1,df(r,Fr(u,r.current)),Xt=null;return}s.flags&32768?(Wt||f===1?r=!0:ac||(tn&536870912)!==0?r=!1:(rl=r=!0,(f===2||f===9||f===3||f===6)&&(f=ei.current,f!==null&&f.tag===13&&(f.flags|=16384))),Hg(s,r)):Nf(s)}function Nf(r){var s=r;do{if((s.flags&32768)!==0){Hg(s,rl);return}r=s.return;var u=E5(s.alternate,s,bo);if(u!==null){Xt=u;return}if(s=s.sibling,s!==null){Xt=s;return}Xt=s=r}while(s!==null);si===0&&(si=5)}function Hg(r,s){do{var u=C5(r.alternate,r);if(u!==null){u.flags&=32767,Xt=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(r=r.sibling,r!==null)){Xt=r;return}Xt=r=u}while(r!==null);si=6,Xt=null}function Gg(r,s,u,f,x,N,P,Q,me){r.cancelPendingCommit=null;do Af();while(Pi!==0);if((pn&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(N=s.lanes|s.childLanes,N|=Ou,xt(r,u,N,P,Q,me),r===Rn&&(Xt=Rn=null,tn=0),lc=s,ol=r,xo=u,hp=N,pp=x,Dg=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,B5(Ht,function(){return Wg(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=U.T,U.T=null,x=$.p,$.p=2,P=pn,pn|=4;try{k5(r,s,u)}finally{pn=P,$.p=x,U.T=f}}Pi=1,Vg(),$g(),Jg()}}function Vg(){if(Pi===1){Pi=0;var r=ol,s=lc,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=U.T,U.T=null;var f=$.p;$.p=2;var x=pn;pn|=4;try{Ag(s,r);var N=kp,P=ls(r.containerInfo),Q=N.focusedElem,me=N.selectionRange;if(P!==Q&&Q&&Q.ownerDocument&&Gs(Q.ownerDocument.documentElement,Q)){if(me!==null&&us(Q)){var Ie=me.start,Fe=me.end;if(Fe===void 0&&(Fe=Ie),"selectionStart"in Q)Q.selectionStart=Ie,Q.selectionEnd=Math.min(Fe,Q.value.length);else{var Ve=Q.ownerDocument||document,De=Ve&&Ve.defaultView||window;if(De.getSelection){var Pe=De.getSelection(),dt=Q.textContent.length,kt=Math.min(me.start,dt),Tn=me.end===void 0?kt:Math.min(me.end,dt);!Pe.extend&&kt>Tn&&(P=Tn,Tn=kt,kt=P);var Te=Pr(Q,kt),xe=Pr(Q,Tn);if(Te&&xe&&(Pe.rangeCount!==1||Pe.anchorNode!==Te.node||Pe.anchorOffset!==Te.offset||Pe.focusNode!==xe.node||Pe.focusOffset!==xe.offset)){var Re=Ve.createRange();Re.setStart(Te.node,Te.offset),Pe.removeAllRanges(),kt>Tn?(Pe.addRange(Re),Pe.extend(xe.node,xe.offset)):(Re.setEnd(xe.node,xe.offset),Pe.addRange(Re))}}}}for(Ve=[],Pe=Q;Pe=Pe.parentNode;)Pe.nodeType===1&&Ve.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Ve.length;Q++){var He=Ve[Q];He.element.scrollLeft=He.left,He.element.scrollTop=He.top}}Of=!!Cp,kp=Cp=null}finally{pn=x,$.p=f,U.T=u}}r.current=s,Pi=2}}function $g(){if(Pi===2){Pi=0;var r=ol,s=lc,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=U.T,U.T=null;var f=$.p;$.p=2;var x=pn;pn|=4;try{xg(r,s.alternate,s)}finally{pn=x,$.p=f,U.T=u}}Pi=3}}function Jg(){if(Pi===4||Pi===3){Pi=0,We();var r=ol,s=lc,u=xo,f=Dg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Pi=5:(Pi=0,lc=ol=null,Yg(r,r.pendingLanes));var x=r.pendingLanes;if(x===0&&(al=null),Ln(u),s=s.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Lt,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=U.T,x=$.p,$.p=2,U.T=null;try{for(var N=r.onRecoverableError,P=0;P<f.length;P++){var Q=f[P];N(Q.value,{componentStack:Q.stack})}}finally{U.T=s,$.p=x}}(xo&3)!==0&&Af(),qa(r),x=r.pendingLanes,(u&261930)!==0&&(x&42)!==0?r===mp?md++:(md=0,mp=r):md=0,gd(0)}}function Yg(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,nu(s)))}function Af(){return Vg(),$g(),Jg(),Wg()}function Wg(){if(Pi!==5)return!1;var r=ol,s=hp;hp=0;var u=Ln(xo),f=U.T,x=$.p;try{$.p=32>u?32:u,U.T=null,u=pp,pp=null;var N=ol,P=xo;if(Pi=0,lc=ol=null,xo=0,(pn&6)!==0)throw Error(i(331));var Q=pn;if(pn|=4,Rg(N.current),Eg(N,N.current,P,u),pn=Q,gd(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Lt,N)}catch{}return!0}finally{$.p=x,U.T=f,Yg(r,s)}}function Kg(r,s,u){s=Fr(u,s),s=Jh(r.stateNode,s,2),r=vn(r,s,2),r!==null&&(yi(r,2),qa(r))}function bn(r,s,u){if(r.tag===3)Kg(r,r,u);else for(;s!==null;){if(s.tag===3){Kg(s,r,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(al===null||!al.has(f))){r=Fr(u,r),u=Xm(2),f=vn(s,u,2),f!==null&&(Qm(u,f,s,r),yi(f,2),qa(f));break}}s=s.return}}function yp(r,s,u){var f=r.pingCache;if(f===null){f=r.pingCache=new L5;var x=new Set;f.set(s,x)}else x=f.get(s),x===void 0&&(x=new Set,f.set(s,x));x.has(u)||(cp=!0,x.add(u),r=O5.bind(null,r,s,u),s.then(r,r))}function O5(r,s,u){var f=r.pingCache;f!==null&&f.delete(s),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Rn===r&&(tn&u)===u&&(si===4||si===3&&(tn&62914560)===tn&&300>Se()-bf?(pn&2)===0&&uc(r,0):dp|=u,oc===tn&&(oc=0)),qa(r)}function Xg(r,s){s===0&&(s=gn()),r=$s(r,s),r!==null&&(yi(r,s),qa(r))}function j5(r){var s=r.memoizedState,u=0;s!==null&&(u=s.retryLane),Xg(r,u)}function F5(r,s){var u=0;switch(r.tag){case 31:case 13:var f=r.stateNode,x=r.memoizedState;x!==null&&(u=x.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(s),Xg(r,u)}function B5(r,s){return Ze(r,s)}var Tf=null,dc=null,bp=!1,Ef=!1,xp=!1,ul=0;function qa(r){r!==dc&&r.next===null&&(dc===null?Tf=dc=r:dc=dc.next=r),Ef=!0,bp||(bp=!0,z5())}function gd(r,s){if(!xp&&Ef){xp=!0;do for(var u=!1,f=Tf;f!==null;){if(r!==0){var x=f.pendingLanes;if(x===0)var N=0;else{var P=f.suspendedLanes,Q=f.pingedLanes;N=(1<<31-St(42|r)+1)-1,N&=x&~(P&~Q),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(u=!0,tv(f,N))}else N=tn,N=_t(f,f===Rn?N:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(N&3)===0||Vt(f,N)||(u=!0,tv(f,N));f=f.next}while(u);xp=!1}}function q5(){Qg()}function Qg(){Ef=bp=!1;var r=0;ul!==0&&Q5()&&(r=ul);for(var s=Se(),u=null,f=Tf;f!==null;){var x=f.next,N=Zg(f,s);N===0?(f.next=null,u===null?Tf=x:u.next=x,x===null&&(dc=u)):(u=f,(r!==0||(N&3)!==0)&&(Ef=!0)),f=x}Pi!==0&&Pi!==5||gd(r),ul!==0&&(ul=0)}function Zg(r,s){for(var u=r.suspendedLanes,f=r.pingedLanes,x=r.expirationTimes,N=r.pendingLanes&-62914561;0<N;){var P=31-St(N),Q=1<<P,me=x[P];me===-1?((Q&u)===0||(Q&f)!==0)&&(x[P]=es(Q,s)):me<=s&&(r.expiredLanes|=Q),N&=~Q}if(s=Rn,u=tn,u=_t(r,r===s?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===s&&(yn===2||yn===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&tt(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Vt(r,u)){if(s=u&-u,s===r.callbackPriority)return s;switch(f!==null&&tt(f),Ln(u)){case 2:case 8:u=bt;break;case 32:u=Ht;break;case 268435456:u=Nt;break;default:u=Ht}return f=ev.bind(null,r),u=Ze(u,f),r.callbackPriority=s,r.callbackNode=u,s}return f!==null&&f!==null&&tt(f),r.callbackPriority=2,r.callbackNode=null,2}function ev(r,s){if(Pi!==0&&Pi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Af()&&r.callbackNode!==u)return null;var f=tn;return f=_t(r,r===Rn?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(Pg(r,f,s),Zg(r,Se()),r.callbackNode!=null&&r.callbackNode===u?ev.bind(null,r):null)}function tv(r,s){if(Af())return null;Pg(r,s,!0)}function z5(){ex(function(){(pn&6)!==0?Ze(ct,q5):Qg()})}function wp(){if(ul===0){var r=m;r===0&&(r=an,an<<=1,(an&261888)===0&&(an=256)),ul=r}return ul}function nv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ya(""+r)}function iv(r,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,r.id&&u.setAttribute("form",r.id),s.parentNode.insertBefore(u,s),r=new FormData(r),u.parentNode.removeChild(u),r}function H5(r,s,u,f,x){if(s==="submit"&&u&&u.stateNode===x){var N=nv((x[wn]||null).action),P=f.submitter;P&&(s=(s=P[wn]||null)?nv(s.formAction):P.getAttribute("formAction"),s!==null&&(N=s,P=null));var Q=new Xa("action","action",null,f,x);r.push({event:Q,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(ul!==0){var me=P?iv(x,P):new FormData(x);qh(u,{pending:!0,data:me,method:x.method,action:N},null,me)}}else typeof N=="function"&&(Q.preventDefault(),me=P?iv(x,P):new FormData(x),qh(u,{pending:!0,data:me,method:x.method,action:N},N,me))},currentTarget:x}]})}}for(var Sp=0;Sp<Ts.length;Sp++){var _p=Ts[Sp],G5=_p.toLowerCase(),V5=_p[0].toUpperCase()+_p.slice(1);zi(G5,"on"+V5)}zi($o,"onAnimationEnd"),zi(br,"onAnimationIteration"),zi(Ns,"onAnimationStart"),zi("dblclick","onDoubleClick"),zi("focusin","onFocus"),zi("focusout","onBlur"),zi(Sn,"onTransitionRun"),zi(_n,"onTransitionStart"),zi(Qn,"onTransitionCancel"),zi(ii,"onTransitionEnd"),bs("onMouseEnter",["mouseout","mouseover"]),bs("onMouseLeave",["mouseout","mouseover"]),bs("onPointerEnter",["pointerout","pointerover"]),bs("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vd));function rv(r,s){s=(s&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],x=f.event;f=f.listeners;e:{var N=void 0;if(s)for(var P=f.length-1;0<=P;P--){var Q=f[P],me=Q.instance,Ie=Q.currentTarget;if(Q=Q.listener,me!==N&&x.isPropagationStopped())break e;N=Q,x.currentTarget=Ie;try{N(x)}catch(Fe){no(Fe)}x.currentTarget=null,N=me}else for(P=0;P<f.length;P++){if(Q=f[P],me=Q.instance,Ie=Q.currentTarget,Q=Q.listener,me!==N&&x.isPropagationStopped())break e;N=Q,x.currentTarget=Ie;try{N(x)}catch(Fe){no(Fe)}x.currentTarget=null,N=me}}}}function Qt(r,s){var u=s[Be];u===void 0&&(u=s[Be]=new Set);var f=r+"__bubble";u.has(f)||(sv(s,r,2,!1),u.add(f))}function Np(r,s,u){var f=0;s&&(f|=4),sv(u,r,f,s)}var Cf="_reactListening"+Math.random().toString(36).slice(2);function Ap(r){if(!r[Cf]){r[Cf]=!0,Ja.forEach(function(u){u!=="selectionchange"&&($5.has(u)||Np(u,!1,r),Np(u,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Cf]||(s[Cf]=!0,Np("selectionchange",!1,s))}}function sv(r,s,u,f){switch(Mv(s)){case 2:var x=xx;break;case 8:x=wx;break;default:x=Bp}u=x.bind(null,s,u,r),x=void 0,!Wa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(x=!0),f?x!==void 0?r.addEventListener(s,u,{capture:!0,passive:x}):r.addEventListener(s,u,!0):x!==void 0?r.addEventListener(s,u,{passive:x}):r.addEventListener(s,u,!1)}function Tp(r,s,u,f,x){var N=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var P=f.tag;if(P===3||P===4){var Q=f.stateNode.containerInfo;if(Q===x)break;if(P===4)for(P=f.return;P!==null;){var me=P.tag;if((me===3||me===4)&&P.stateNode.containerInfo===x)return;P=P.return}for(;Q!==null;){if(P=ts(Q),P===null)return;if(me=P.tag,me===5||me===6||me===26||me===27){f=N=P;continue e}Q=Q.parentNode}}f=f.return}jl(function(){var Ie=N,Fe=Uo(u),Ve=[];e:{var De=As.get(r);if(De!==void 0){var Pe=Xa,dt=r;switch(r){case"keypress":if(rs(u)===0)break e;case"keydown":case"keyup":Pe=$l;break;case"focusin":dt="focus",Pe=ql;break;case"focusout":dt="blur",Pe=ql;break;case"beforeblur":case"afterblur":Pe=ql;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Bl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=V;break;case $o:case br:case Ns:Pe=Vc;break;case ii:Pe=ge;break;case"scroll":case"scrollend":Pe=Iu;break;case"wheel":Pe=Oe;break;case"copy":case"cut":case"paste":Pe=Hl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=qo;break;case"toggle":case"beforetoggle":Pe=ot}var kt=(s&4)!==0,Tn=!kt&&(r==="scroll"||r==="scrollend"),Te=kt?De!==null?De+"Capture":null:De;kt=[];for(var xe=Ie,Re;xe!==null;){var He=xe;if(Re=He.stateNode,He=He.tag,He!==5&&He!==26&&He!==27||Re===null||Te===null||(He=va(xe,Te),He!=null&&kt.push(yd(xe,He,Re))),Tn)break;xe=xe.return}0<kt.length&&(De=new Pe(De,dt,null,u,Fe),Ve.push({event:De,listeners:kt}))}}if((s&7)===0){e:{if(De=r==="mouseover"||r==="pointerover",Pe=r==="mouseout"||r==="pointerout",De&&u!==Ol&&(dt=u.relatedTarget||u.fromElement)&&(ts(dt)||dt[ui]))break e;if((Pe||De)&&(De=Fe.window===Fe?Fe:(De=Fe.ownerDocument)?De.defaultView||De.parentWindow:window,Pe?(dt=u.relatedTarget||u.toElement,Pe=Ie,dt=dt?ts(dt):null,dt!==null&&(Tn=o(dt),kt=dt.tag,dt!==Tn||kt!==5&&kt!==27&&kt!==6)&&(dt=null)):(Pe=null,dt=Ie),Pe!==dt)){if(kt=Bs,He="onMouseLeave",Te="onMouseEnter",xe="mouse",(r==="pointerout"||r==="pointerover")&&(kt=qo,He="onPointerLeave",Te="onPointerEnter",xe="pointer"),Tn=Pe==null?De:ha(Pe),Re=dt==null?De:ha(dt),De=new kt(He,xe+"leave",Pe,u,Fe),De.target=Tn,De.relatedTarget=Re,He=null,ts(Fe)===Ie&&(kt=new kt(Te,xe+"enter",dt,u,Fe),kt.target=Re,kt.relatedTarget=Tn,He=kt),Tn=He,Pe&&dt)t:{for(kt=J5,Te=Pe,xe=dt,Re=0,He=Te;He;He=kt(He))Re++;He=0;for(var wt=xe;wt;wt=kt(wt))He++;for(;0<Re-He;)Te=kt(Te),Re--;for(;0<He-Re;)xe=kt(xe),He--;for(;Re--;){if(Te===xe||xe!==null&&Te===xe.alternate){kt=Te;break t}Te=kt(Te),xe=kt(xe)}kt=null}else kt=null;Pe!==null&&av(Ve,De,Pe,kt,!1),dt!==null&&Tn!==null&&av(Ve,Tn,dt,kt,!0)}}e:{if(De=Ie?ha(Ie):window,Pe=De.nodeName&&De.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&De.type==="file")var cn=Ki;else if(zo(De))if(to)cn=Wl;else{cn=Uu;var ht=Yl}else Pe=De.nodeName,!Pe||Pe.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Ie&&is(Ie.elementType)&&(cn=Ki):cn=os;if(cn&&(cn=cn(r,Ie))){Ho(Ve,cn,u,Fe);break e}ht&&ht(r,De,Ie),r==="focusout"&&Ie&&De.type==="number"&&Ie.memoizedProps.value!=null&&Do(De,"number",De.value)}switch(ht=Ie?ha(Ie):window,r){case"focusin":(zo(ht)||ht.contentEditable==="true")&&(qi=ht,Ta=Ie,Vs=null);break;case"focusout":Vs=Ta=qi=null;break;case"mousedown":_s=!0;break;case"contextmenu":case"mouseup":case"dragend":_s=!1,Ur(Ve,u,Fe);break;case"selectionchange":if(Vo)break;case"keydown":case"keyup":Ur(Ve,u,Fe)}var Gt;if(Ut)e:{switch(r){case"compositionstart":var nn="onCompositionStart";break e;case"compositionend":nn="onCompositionEnd";break e;case"compositionupdate":nn="onCompositionUpdate";break e}nn=void 0}else Bi?ki(r,u)&&(nn="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(nn="onCompositionStart");nn&&(Un&&u.locale!=="ko"&&(Bi||nn!=="onCompositionStart"?nn==="onCompositionEnd"&&Bi&&(Gt=ba()):(ws=Fe,Fl="value"in ws?ws.value:ws.textContent,Bi=!0)),ht=kf(Ie,nn),0<ht.length&&(nn=new Za(nn,r,null,u,Fe),Ve.push({event:nn,listeners:ht}),Gt?nn.data=Gt:(Gt=ci(u),Gt!==null&&(nn.data=Gt)))),(Gt=Zt?vr(r,u):qs(r,u))&&(nn=kf(Ie,"onBeforeInput"),0<nn.length&&(ht=new Za("onBeforeInput","beforeinput",null,u,Fe),Ve.push({event:ht,listeners:nn}),ht.data=Gt)),H5(Ve,r,Ie,u,Fe)}rv(Ve,s)})}function yd(r,s,u){return{instance:r,listener:s,currentTarget:u}}function kf(r,s){for(var u=s+"Capture",f=[];r!==null;){var x=r,N=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||N===null||(x=va(r,u),x!=null&&f.unshift(yd(r,x,N)),x=va(r,s),x!=null&&f.push(yd(r,x,N))),r.tag===3)return f;r=r.return}return[]}function J5(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function av(r,s,u,f,x){for(var N=s._reactName,P=[];u!==null&&u!==f;){var Q=u,me=Q.alternate,Ie=Q.stateNode;if(Q=Q.tag,me!==null&&me===f)break;Q!==5&&Q!==26&&Q!==27||Ie===null||(me=Ie,x?(Ie=va(u,N),Ie!=null&&P.unshift(yd(u,Ie,me))):x||(Ie=va(u,N),Ie!=null&&P.push(yd(u,Ie,me)))),u=u.return}P.length!==0&&r.push({event:s,listeners:P})}var Y5=/\r\n?/g,W5=/\u0000|\uFFFD/g;function ov(r){return(typeof r=="string"?r:""+r).replace(Y5,`
`).replace(W5,"")}function lv(r,s){return s=ov(s),ov(r)===s}function An(r,s,u,f,x,N){switch(u){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||xs(r,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&xs(r,""+f);break;case"className":Mn(r,"class",f);break;case"tabIndex":Mn(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(r,u,f);break;case"style":ku(r,f,N);break;case"data":if(s!=="object"){Mn(r,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Ya(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(u==="formAction"?(s!=="input"&&An(r,s,"name",x.name,x,null),An(r,s,"formEncType",x.formEncType,x,null),An(r,s,"formMethod",x.formMethod,x,null),An(r,s,"formTarget",x.formTarget,x,null)):(An(r,s,"encType",x.encType,x,null),An(r,s,"method",x.method,x,null),An(r,s,"target",x.target,x,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Ya(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=Pn);break;case"onScroll":f!=null&&Qt("scroll",r);break;case"onScrollEnd":f!=null&&Qt("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(x.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=Ya(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":Qt("beforetoggle",r),Qt("toggle",r),Io(r,"popover",f);break;case"xlinkActuate":kr(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":kr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":kr(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":kr(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":kr(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":kr(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":kr(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":kr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":kr(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Io(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Mo.get(u)||u,Io(r,u,f))}}function Ep(r,s,u,f,x,N){switch(u){case"style":ku(r,f,N);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(x.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof f=="string"?xs(r,f):(typeof f=="number"||typeof f=="bigint")&&xs(r,""+f);break;case"onScroll":f!=null&&Qt("scroll",r);break;case"onScrollEnd":f!=null&&Qt("scrollend",r);break;case"onClick":f!=null&&(r.onclick=Pn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(x=u.endsWith("Capture"),s=u.slice(2,x?u.length-7:void 0),N=r[wn]||null,N=N!=null?N[u]:null,typeof N=="function"&&r.removeEventListener(s,N,x),typeof f=="function")){typeof N!="function"&&N!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(s,f,x);break e}u in r?r[u]=f:f===!0?r.setAttribute(u,""):Io(r,u,f)}}}function nr(r,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qt("error",r),Qt("load",r);var f=!1,x=!1,N;for(N in u)if(u.hasOwnProperty(N)){var P=u[N];if(P!=null)switch(N){case"src":f=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:An(r,s,N,P,u,null)}}x&&An(r,s,"srcSet",u.srcSet,u,null),f&&An(r,s,"src",u.src,u,null);return;case"input":Qt("invalid",r);var Q=N=P=x=null,me=null,Ie=null;for(f in u)if(u.hasOwnProperty(f)){var Fe=u[f];if(Fe!=null)switch(f){case"name":x=Fe;break;case"type":P=Fe;break;case"checked":me=Fe;break;case"defaultChecked":Ie=Fe;break;case"value":N=Fe;break;case"defaultValue":Q=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(i(137,s));break;default:An(r,s,f,Fe,u,null)}}Tu(r,N,Q,me,Ie,P,x,!1);return;case"select":Qt("invalid",r),f=P=N=null;for(x in u)if(u.hasOwnProperty(x)&&(Q=u[x],Q!=null))switch(x){case"value":N=Q;break;case"defaultValue":P=Q;break;case"multiple":f=Q;default:An(r,s,x,Q,u,null)}s=N,u=P,r.multiple=!!f,s!=null?ma(r,!!f,s,!1):u!=null&&ma(r,!!f,u,!0);return;case"textarea":Qt("invalid",r),N=x=f=null;for(P in u)if(u.hasOwnProperty(P)&&(Q=u[P],Q!=null))switch(P){case"value":f=Q;break;case"defaultValue":x=Q;break;case"children":N=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(91));break;default:An(r,s,P,Q,u,null)}Eu(r,f,x,N);return;case"option":for(me in u)if(u.hasOwnProperty(me)&&(f=u[me],f!=null))switch(me){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:An(r,s,me,f,u,null)}return;case"dialog":Qt("beforetoggle",r),Qt("toggle",r),Qt("cancel",r),Qt("close",r);break;case"iframe":case"object":Qt("load",r);break;case"video":case"audio":for(f=0;f<vd.length;f++)Qt(vd[f],r);break;case"image":Qt("error",r),Qt("load",r);break;case"details":Qt("toggle",r);break;case"embed":case"source":case"link":Qt("error",r),Qt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ie in u)if(u.hasOwnProperty(Ie)&&(f=u[Ie],f!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:An(r,s,Ie,f,u,null)}return;default:if(is(s)){for(Fe in u)u.hasOwnProperty(Fe)&&(f=u[Fe],f!==void 0&&Ep(r,s,Fe,f,u,void 0));return}}for(Q in u)u.hasOwnProperty(Q)&&(f=u[Q],f!=null&&An(r,s,Q,f,u,null))}function K5(r,s,u,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,N=null,P=null,Q=null,me=null,Ie=null,Fe=null;for(Pe in u){var Ve=u[Pe];if(u.hasOwnProperty(Pe)&&Ve!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":me=Ve;default:f.hasOwnProperty(Pe)||An(r,s,Pe,null,f,Ve)}}for(var De in f){var Pe=f[De];if(Ve=u[De],f.hasOwnProperty(De)&&(Pe!=null||Ve!=null))switch(De){case"type":N=Pe;break;case"name":x=Pe;break;case"checked":Ie=Pe;break;case"defaultChecked":Fe=Pe;break;case"value":P=Pe;break;case"defaultValue":Q=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(i(137,s));break;default:Pe!==Ve&&An(r,s,De,Pe,f,Ve)}}Lo(r,P,Q,me,Ie,Fe,N,x);return;case"select":Pe=P=Q=De=null;for(N in u)if(me=u[N],u.hasOwnProperty(N)&&me!=null)switch(N){case"value":break;case"multiple":Pe=me;default:f.hasOwnProperty(N)||An(r,s,N,null,f,me)}for(x in f)if(N=f[x],me=u[x],f.hasOwnProperty(x)&&(N!=null||me!=null))switch(x){case"value":De=N;break;case"defaultValue":Q=N;break;case"multiple":P=N;default:N!==me&&An(r,s,x,N,f,me)}s=Q,u=P,f=Pe,De!=null?ma(r,!!u,De,!1):!!f!=!!u&&(s!=null?ma(r,!!u,s,!0):ma(r,!!u,u?[]:"",!1));return;case"textarea":Pe=De=null;for(Q in u)if(x=u[Q],u.hasOwnProperty(Q)&&x!=null&&!f.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:An(r,s,Q,null,f,x)}for(P in f)if(x=f[P],N=u[P],f.hasOwnProperty(P)&&(x!=null||N!=null))switch(P){case"value":De=x;break;case"defaultValue":Pe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==N&&An(r,s,P,x,f,N)}Ul(r,De,Pe);return;case"option":for(var dt in u)if(De=u[dt],u.hasOwnProperty(dt)&&De!=null&&!f.hasOwnProperty(dt))switch(dt){case"selected":r.selected=!1;break;default:An(r,s,dt,null,f,De)}for(me in f)if(De=f[me],Pe=u[me],f.hasOwnProperty(me)&&De!==Pe&&(De!=null||Pe!=null))switch(me){case"selected":r.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:An(r,s,me,De,f,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in u)De=u[kt],u.hasOwnProperty(kt)&&De!=null&&!f.hasOwnProperty(kt)&&An(r,s,kt,null,f,De);for(Ie in f)if(De=f[Ie],Pe=u[Ie],f.hasOwnProperty(Ie)&&De!==Pe&&(De!=null||Pe!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(i(137,s));break;default:An(r,s,Ie,De,f,Pe)}return;default:if(is(s)){for(var Tn in u)De=u[Tn],u.hasOwnProperty(Tn)&&De!==void 0&&!f.hasOwnProperty(Tn)&&Ep(r,s,Tn,void 0,f,De);for(Fe in f)De=f[Fe],Pe=u[Fe],!f.hasOwnProperty(Fe)||De===Pe||De===void 0&&Pe===void 0||Ep(r,s,Fe,De,f,Pe);return}}for(var Te in u)De=u[Te],u.hasOwnProperty(Te)&&De!=null&&!f.hasOwnProperty(Te)&&An(r,s,Te,null,f,De);for(Ve in f)De=f[Ve],Pe=u[Ve],!f.hasOwnProperty(Ve)||De===Pe||De==null&&Pe==null||An(r,s,Ve,De,f,Pe)}function uv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function X5(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var x=u[f],N=x.transferSize,P=x.initiatorType,Q=x.duration;if(N&&Q&&uv(P)){for(P=0,Q=x.responseEnd,f+=1;f<u.length;f++){var me=u[f],Ie=me.startTime;if(Ie>Q)break;var Fe=me.transferSize,Ve=me.initiatorType;Fe&&uv(Ve)&&(me=me.responseEnd,P+=Fe*(me<Q?1:(Q-Ie)/(me-Ie)))}if(--f,s+=8*(N+P)/(x.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Cp=null,kp=null;function Rf(r){return r.nodeType===9?r:r.ownerDocument}function cv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dv(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Rp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ip=null;function Q5(){var r=window.event;return r&&r.type==="popstate"?r===Ip?!1:(Ip=r,!0):(Ip=null,!1)}var fv=typeof setTimeout=="function"?setTimeout:void 0,Z5=typeof clearTimeout=="function"?clearTimeout:void 0,hv=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof hv<"u"?function(r){return hv.resolve(null).then(r).catch(tx)}:fv;function tx(r){setTimeout(function(){throw r})}function cl(r){return r==="head"}function pv(r,s){var u=s,f=0;do{var x=u.nextSibling;if(r.removeChild(u),x&&x.nodeType===8)if(u=x.data,u==="/$"||u==="/&"){if(f===0){r.removeChild(x),mc(s);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")bd(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,bd(u);for(var N=u.firstChild;N;){var P=N.nextSibling,Q=N.nodeName;N[Fn]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&N.rel.toLowerCase()==="stylesheet"||u.removeChild(N),N=P}}else u==="body"&&bd(r.ownerDocument.body);u=x}while(u);mc(s)}function mv(r,s){var u=r;r=0;do{var f=u.nextSibling;if(u.nodeType===1?s?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(s?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=f}while(u)}function Lp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Lp(u),ys(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function nx(r,s,u,f){for(;r.nodeType===1;){var x=u;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[Fn])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(N=r.getAttribute("rel"),N==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(N!==x.rel||r.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||r.getAttribute("title")!==(x.title==null?null:x.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(N=r.getAttribute("src"),(N!==(x.src==null?null:x.src)||r.getAttribute("type")!==(x.type==null?null:x.type)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&N&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var N=x.name==null?null:""+x.name;if(x.type==="hidden"&&r.getAttribute("name")===N)return r}else return r;if(r=Ds(r.nextSibling),r===null)break}return null}function ix(r,s,u){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Ds(r.nextSibling),r===null))return null;return r}function gv(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Ds(r.nextSibling),r===null))return null;return r}function Dp(r){return r.data==="$?"||r.data==="$~"}function Mp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function rx(r,s){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||u.readyState!=="loading")s();else{var f=function(){s(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function Ds(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Pp=null;function vv(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(s===0)return Ds(r.nextSibling);s--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||s++}r=r.nextSibling}return null}function yv(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(s===0)return r;s--}else u!=="/$"&&u!=="/&"||s++}r=r.previousSibling}return null}function bv(r,s,u){switch(s=Rf(u),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function bd(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ys(r)}var Ms=new Map,xv=new Set;function If(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var wo=$.d;$.d={f:sx,r:ax,D:ox,C:lx,L:ux,m:cx,X:fx,S:dx,M:hx};function sx(){var r=wo.f(),s=Sf();return r||s}function ax(r){var s=ns(r);s!==null&&s.tag===5&&s.type==="form"?Om(s):wo.r(r)}var fc=typeof document>"u"?null:document;function wv(r,s,u){var f=fc;if(f&&typeof s=="string"&&s){var x=Fi(s);x='link[rel="'+r+'"][href="'+x+'"]',typeof u=="string"&&(x+='[crossorigin="'+u+'"]'),xv.has(x)||(xv.add(x),r={rel:r,crossOrigin:u,href:s},f.querySelector(x)===null&&(s=f.createElement("link"),nr(s,"link",r),ni(s),f.head.appendChild(s)))}}function ox(r){wo.D(r),wv("dns-prefetch",r,null)}function lx(r,s){wo.C(r,s),wv("preconnect",r,s)}function ux(r,s,u){wo.L(r,s,u);var f=fc;if(f&&r&&s){var x='link[rel="preload"][as="'+Fi(s)+'"]';s==="image"&&u&&u.imageSrcSet?(x+='[imagesrcset="'+Fi(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(x+='[imagesizes="'+Fi(u.imageSizes)+'"]')):x+='[href="'+Fi(r)+'"]';var N=x;switch(s){case"style":N=hc(r);break;case"script":N=pc(r)}Ms.has(N)||(r=b({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:r,as:s},u),Ms.set(N,r),f.querySelector(x)!==null||s==="style"&&f.querySelector(xd(N))||s==="script"&&f.querySelector(wd(N))||(s=f.createElement("link"),nr(s,"link",r),ni(s),f.head.appendChild(s)))}}function cx(r,s){wo.m(r,s);var u=fc;if(u&&r){var f=s&&typeof s.as=="string"?s.as:"script",x='link[rel="modulepreload"][as="'+Fi(f)+'"][href="'+Fi(r)+'"]',N=x;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=pc(r)}if(!Ms.has(N)&&(r=b({rel:"modulepreload",href:r},s),Ms.set(N,r),u.querySelector(x)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(wd(N)))return}f=u.createElement("link"),nr(f,"link",r),ni(f),u.head.appendChild(f)}}}function dx(r,s,u){wo.S(r,s,u);var f=fc;if(f&&r){var x=pa(f).hoistableStyles,N=hc(r);s=s||"default";var P=x.get(N);if(!P){var Q={loading:0,preload:null};if(P=f.querySelector(xd(N)))Q.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":s},u),(u=Ms.get(N))&&Up(r,u);var me=P=f.createElement("link");ni(me),nr(me,"link",r),me._p=new Promise(function(Ie,Fe){me.onload=Ie,me.onerror=Fe}),me.addEventListener("load",function(){Q.loading|=1}),me.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,Lf(P,s,f)}P={type:"stylesheet",instance:P,count:1,state:Q},x.set(N,P)}}}function fx(r,s){wo.X(r,s);var u=fc;if(u&&r){var f=pa(u).hoistableScripts,x=pc(r),N=f.get(x);N||(N=u.querySelector(wd(x)),N||(r=b({src:r,async:!0},s),(s=Ms.get(x))&&Op(r,s),N=u.createElement("script"),ni(N),nr(N,"link",r),u.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},f.set(x,N))}}function hx(r,s){wo.M(r,s);var u=fc;if(u&&r){var f=pa(u).hoistableScripts,x=pc(r),N=f.get(x);N||(N=u.querySelector(wd(x)),N||(r=b({src:r,async:!0,type:"module"},s),(s=Ms.get(x))&&Op(r,s),N=u.createElement("script"),ni(N),nr(N,"link",r),u.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},f.set(x,N))}}function Sv(r,s,u,f){var x=(x=ae.current)?If(x):null;if(!x)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=hc(u.href),u=pa(x).hoistableStyles,f=u.get(s),f||(f={type:"style",instance:null,count:0,state:null},u.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=hc(u.href);var N=pa(x).hoistableStyles,P=N.get(r);if(P||(x=x.ownerDocument||x,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(r,P),(N=x.querySelector(xd(r)))&&!N._p&&(P.instance=N,P.state.loading=5),Ms.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ms.set(r,u),N||px(x,r,u,P.state))),s&&f===null)throw Error(i(528,""));return P}if(s&&f!==null)throw Error(i(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=pc(u),u=pa(x).hoistableScripts,f=u.get(s),f||(f={type:"script",instance:null,count:0,state:null},u.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function hc(r){return'href="'+Fi(r)+'"'}function xd(r){return'link[rel="stylesheet"]['+r+"]"}function _v(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function px(r,s,u,f){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=r.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),nr(s,"link",u),ni(s),r.head.appendChild(s))}function pc(r){return'[src="'+Fi(r)+'"]'}function wd(r){return"script[async]"+r}function Nv(r,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var f=r.querySelector('style[data-href~="'+Fi(u.href)+'"]');if(f)return s.instance=f,ni(f),f;var x=b({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),ni(f),nr(f,"style",x),Lf(f,u.precedence,r),s.instance=f;case"stylesheet":x=hc(u.href);var N=r.querySelector(xd(x));if(N)return s.state.loading|=4,s.instance=N,ni(N),N;f=_v(u),(x=Ms.get(x))&&Up(f,x),N=(r.ownerDocument||r).createElement("link"),ni(N);var P=N;return P._p=new Promise(function(Q,me){P.onload=Q,P.onerror=me}),nr(N,"link",f),s.state.loading|=4,Lf(N,u.precedence,r),s.instance=N;case"script":return N=pc(u.src),(x=r.querySelector(wd(N)))?(s.instance=x,ni(x),x):(f=u,(x=Ms.get(N))&&(f=b({},u),Op(f,x)),r=r.ownerDocument||r,x=r.createElement("script"),ni(x),nr(x,"link",f),r.head.appendChild(x),s.instance=x);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,Lf(f,u.precedence,r));return s.instance}function Lf(r,s,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=f.length?f[f.length-1]:null,N=x,P=0;P<f.length;P++){var Q=f[P];if(Q.dataset.precedence===s)N=Q;else if(N!==x)break}N?N.parentNode.insertBefore(r,N.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(r,s.firstChild))}function Up(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Op(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Df=null;function Av(r,s,u){if(Df===null){var f=new Map,x=Df=new Map;x.set(u,f)}else x=Df,f=x.get(u),f||(f=new Map,x.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),x=0;x<u.length;x++){var N=u[x];if(!(N[Fn]||N[ln]||r==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var P=N.getAttribute(s)||"";P=r+P;var Q=f.get(P);Q?Q.push(N):f.set(P,[N])}}return f}function Tv(r,s,u){r=r.ownerDocument||r,r.head.insertBefore(u,s==="title"?r.querySelector("head > title"):null)}function mx(r,s,u){if(u===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ev(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function gx(r,s,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var x=hc(f.href),N=s.querySelector(xd(x));if(N){s=N._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Mf.bind(r),s.then(r,r)),u.state.loading|=4,u.instance=N,ni(N);return}N=s.ownerDocument||s,f=_v(f),(x=Ms.get(x))&&Up(f,x),N=N.createElement("link"),ni(N);var P=N;P._p=new Promise(function(Q,me){P.onload=Q,P.onerror=me}),nr(N,"link",f),u.instance=N}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=Mf.bind(r),s.addEventListener("load",u),s.addEventListener("error",u))}}var jp=0;function vx(r,s){return r.stylesheets&&r.count===0&&Uf(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var f=setTimeout(function(){if(r.stylesheets&&Uf(r,r.stylesheets),r.unsuspend){var N=r.unsuspend;r.unsuspend=null,N()}},6e4+s);0<r.imgBytes&&jp===0&&(jp=62500*X5());var x=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Uf(r,r.stylesheets),r.unsuspend)){var N=r.unsuspend;r.unsuspend=null,N()}},(r.imgBytes>jp?50:800)+s);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(x)}}:null}function Mf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Pf=null;function Uf(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Pf=new Map,s.forEach(yx,r),Pf=null,Mf.call(r))}function yx(r,s){if(!(s.state.loading&4)){var u=Pf.get(r);if(u)var f=u.get(null);else{u=new Map,Pf.set(r,u);for(var x=r.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<x.length;N++){var P=x[N];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(u.set(P.dataset.precedence,P),f=P)}f&&u.set(null,f)}x=s.instance,P=x.getAttribute("data-precedence"),N=u.get(P)||f,N===f&&u.set(null,x),u.set(P,x),this.count++,f=Mf.bind(this),x.addEventListener("load",f),x.addEventListener("error",f),N?N.parentNode.insertBefore(x,N.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(x,r.firstChild)),s.state.loading|=4}}var Sd={$$typeof:L,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function bx(r,s,u,f,x,N,P,Q,me){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.hiddenUpdates=ji(null),this.identifierPrefix=f,this.onUncaughtError=x,this.onCaughtError=N,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=me,this.incompleteTransitions=new Map}function Cv(r,s,u,f,x,N,P,Q,me,Ie,Fe,Ve){return r=new bx(r,s,u,P,me,Ie,Fe,Ve,Q),s=1,N===!0&&(s|=24),N=Gi(3,null,null,s),r.current=N,N.stateNode=r,s=Qo(),s.refCount++,r.pooledCache=s,s.refCount++,N.memoizedState={element:f,isDehydrated:u,cache:s},hn(N),r}function kv(r){return r?(r=Ri,r):Ri}function Rv(r,s,u,f,x,N){x=kv(x),f.context===null?f.context=x:f.pendingContext=x,f=Ct(s),f.payload={element:u},N=N===void 0?null:N,N!==null&&(f.callback=N),u=vn(r,f,s),u!==null&&(Kr(u,r,s),xi(u,r,s))}function Iv(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<s?u:s}}function Fp(r,s){Iv(r,s),(r=r.alternate)&&Iv(r,s)}function Lv(r){if(r.tag===13||r.tag===31){var s=$s(r,67108864);s!==null&&Kr(s,r,67108864),Fp(r,67108864)}}function Dv(r){if(r.tag===13||r.tag===31){var s=hs();s=jn(s);var u=$s(r,s);u!==null&&Kr(u,r,s),Fp(r,s)}}var Of=!0;function xx(r,s,u,f){var x=U.T;U.T=null;var N=$.p;try{$.p=2,Bp(r,s,u,f)}finally{$.p=N,U.T=x}}function wx(r,s,u,f){var x=U.T;U.T=null;var N=$.p;try{$.p=8,Bp(r,s,u,f)}finally{$.p=N,U.T=x}}function Bp(r,s,u,f){if(Of){var x=qp(f);if(x===null)Tp(r,s,f,jf,u),Pv(r,f);else if(_x(x,r,s,u,f))f.stopPropagation();else if(Pv(r,f),s&4&&-1<Sx.indexOf(r)){for(;x!==null;){var N=ns(x);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var P=on(N.pendingLanes);if(P!==0){var Q=N;for(Q.pendingLanes|=2,Q.entangledLanes|=2;P;){var me=1<<31-St(P);Q.entanglements[1]|=me,P&=~me}qa(N),(pn&6)===0&&(xf=Se()+500,gd(0))}}break;case 31:case 13:Q=$s(N,2),Q!==null&&Kr(Q,N,2),Sf(),Fp(N,2)}if(N=qp(f),N===null&&Tp(r,s,f,jf,u),N===x)break;x=N}x!==null&&f.stopPropagation()}else Tp(r,s,f,null,u)}}function qp(r){return r=Uo(r),zp(r)}var jf=null;function zp(r){if(jf=null,r=ts(r),r!==null){var s=o(r);if(s===null)r=null;else{var u=s.tag;if(u===13){if(r=l(s),r!==null)return r;r=null}else if(u===31){if(r=c(s),r!==null)return r;r=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return jf=r,null}function Mv(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case ct:return 2;case bt:return 8;case Ht:case pt:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var Hp=!1,dl=null,fl=null,hl=null,_d=new Map,Nd=new Map,pl=[],Sx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pv(r,s){switch(r){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":fl=null;break;case"mouseover":case"mouseout":hl=null;break;case"pointerover":case"pointerout":_d.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nd.delete(s.pointerId)}}function Ad(r,s,u,f,x,N){return r===null||r.nativeEvent!==N?(r={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:N,targetContainers:[x]},s!==null&&(s=ns(s),s!==null&&Lv(s)),r):(r.eventSystemFlags|=f,s=r.targetContainers,x!==null&&s.indexOf(x)===-1&&s.push(x),r)}function _x(r,s,u,f,x){switch(s){case"focusin":return dl=Ad(dl,r,s,u,f,x),!0;case"dragenter":return fl=Ad(fl,r,s,u,f,x),!0;case"mouseover":return hl=Ad(hl,r,s,u,f,x),!0;case"pointerover":var N=x.pointerId;return _d.set(N,Ad(_d.get(N)||null,r,s,u,f,x)),!0;case"gotpointercapture":return N=x.pointerId,Nd.set(N,Ad(Nd.get(N)||null,r,s,u,f,x)),!0}return!1}function Uv(r){var s=ts(r.target);if(s!==null){var u=o(s);if(u!==null){if(s=u.tag,s===13){if(s=l(u),s!==null){r.blockedOn=s,vs(r.priority,function(){Dv(u)});return}}else if(s===31){if(s=c(u),s!==null){r.blockedOn=s,vs(r.priority,function(){Dv(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ff(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var u=qp(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);Ol=f,u.target.dispatchEvent(f),Ol=null}else return s=ns(u),s!==null&&Lv(s),r.blockedOn=u,!1;s.shift()}return!0}function Ov(r,s,u){Ff(r)&&u.delete(s)}function Nx(){Hp=!1,dl!==null&&Ff(dl)&&(dl=null),fl!==null&&Ff(fl)&&(fl=null),hl!==null&&Ff(hl)&&(hl=null),_d.forEach(Ov),Nd.forEach(Ov)}function Bf(r,s){r.blockedOn===s&&(r.blockedOn=null,Hp||(Hp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Nx)))}var qf=null;function jv(r){qf!==r&&(qf=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){qf===r&&(qf=null);for(var s=0;s<r.length;s+=3){var u=r[s],f=r[s+1],x=r[s+2];if(typeof f!="function"){if(zp(f||u)===null)continue;break}var N=ns(u);N!==null&&(r.splice(s,3),s-=3,qh(N,{pending:!0,data:x,method:u.method,action:f},f,x))}}))}function mc(r){function s(me){return Bf(me,r)}dl!==null&&Bf(dl,r),fl!==null&&Bf(fl,r),hl!==null&&Bf(hl,r),_d.forEach(s),Nd.forEach(s);for(var u=0;u<pl.length;u++){var f=pl[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<pl.length&&(u=pl[0],u.blockedOn===null);)Uv(u),u.blockedOn===null&&pl.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var x=u[f],N=u[f+1],P=x[wn]||null;if(typeof N=="function")P||jv(u);else if(P){var Q=null;if(N&&N.hasAttribute("formAction")){if(x=N,P=N[wn]||null)Q=P.formAction;else if(zp(x)!==null)continue}else Q=P.action;typeof Q=="function"?u[f+1]=Q:(u.splice(f,3),f-=3),jv(u)}}}function Fv(){function r(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(P){return x=P})},focusReset:"manual",scroll:"manual"})}function s(){x!==null&&(x(),x=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,x=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),x!==null&&(x(),x=null)}}}function Gp(r){this._internalRoot=r}zf.prototype.render=Gp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var u=s.current,f=hs();Rv(u,f,r,s,null,null)},zf.prototype.unmount=Gp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Rv(r.current,2,null,r,null,null),Sf(),s[ui]=null}};function zf(r){this._internalRoot=r}zf.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ci();r={blockedOn:null,target:r,priority:s};for(var u=0;u<pl.length&&s!==0&&s<pl[u].priority;u++);pl.splice(u,0,r),u===0&&Uv(r)}};var Bv=e.version;if(Bv!=="19.2.3")throw Error(i(527,Bv,"19.2.3"));$.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var Ax={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hf.isDisabled&&Hf.supportsFiber)try{Lt=Hf.inject(Ax),qt=Hf}catch{}}return Ed.createRoot=function(r,s){if(!a(r))throw Error(i(299));var u=!1,f="",x=Jm,N=Ym,P=Wm;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(x=s.onUncaughtError),s.onCaughtError!==void 0&&(N=s.onCaughtError),s.onRecoverableError!==void 0&&(P=s.onRecoverableError)),s=Cv(r,1,!1,null,null,u,f,null,x,N,P,Fv),r[ui]=s.current,Ap(r),new Gp(s)},Ed.hydrateRoot=function(r,s,u){if(!a(r))throw Error(i(299));var f=!1,x="",N=Jm,P=Ym,Q=Wm,me=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(N=u.onUncaughtError),u.onCaughtError!==void 0&&(P=u.onCaughtError),u.onRecoverableError!==void 0&&(Q=u.onRecoverableError),u.formState!==void 0&&(me=u.formState)),s=Cv(r,1,!0,s,u??null,f,x,me,N,P,Q,Fv),s.context=kv(null),u=s.current,f=hs(),f=jn(f),x=Ct(f),x.callback=null,vn(u,x,f),u=f,s.current.lanes=u,yi(s,u),qa(s),r[ui]=s.current,Ap(r),new zf(s)},Ed.version="19.2.3",Ed}var $v;function Hx(){if($v)return $p.exports;$v=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$p.exports=zx(),$p.exports}var Gx=Hx();const Vx=L2(Gx);var Xr=(t=>(t.ADMIN="ADMIN",t.USER="USER",t))(Xr||{}),mn=(t=>(t.UNPAID="UNPAID",t.PARTIALLY_PAID="PARTIALLY_PAID",t.PAID="PAID",t.PENDING="PENDING",t.ACCEPTED="ACCEPTED",t.REJECTED="REJECTED",t.EXPIRED="EXPIRED",t))(mn||{});function bh(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function $x(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(v){try{h(i.next(v))}catch(b){l(b)}}function d(v){try{h(i.throw(v))}catch(b){l(b)}}function h(v){v.done?o(v.value):a(v.value).then(c,d)}h((i=i.apply(t,e||[])).next())})}const Jx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class im extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class Yx extends im{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Jv extends im{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Yv extends im{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var g0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(g0||(g0={}));class Wx{constructor(e,{headers:n={},customFetch:i,region:a=g0.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=Jx(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return $x(this,arguments,void 0,function*(n,i={}){var a;let o,l;try{const{headers:c,method:d,body:h,signal:v,timeout:b}=i;let S={},{region:_}=i;_||(_=this.region);const T=new URL(`${this.url}/${n}`);_&&_!=="any"&&(S["x-region"]=_,T.searchParams.set("forceFunctionRegion",_));let k;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",k=h):typeof h=="string"?(S["Content-Type"]="text/plain",k=h):typeof FormData<"u"&&h instanceof FormData?k=h:(S["Content-Type"]="application/json",k=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?k=JSON.stringify(h):k=h;let I=v;b&&(l=new AbortController,o=setTimeout(()=>l.abort(),b),v?(I=l.signal,v.addEventListener("abort",()=>l.abort())):I=l.signal);const C=yield this.fetch(T.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),c),body:k,signal:I}).catch(z=>{throw new Yx(z)}),R=C.headers.get("x-relay-error");if(R&&R==="true")throw new Jv(C);if(!C.ok)throw new Yv(C);let L=((a=C.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),O;return L==="application/json"?O=yield C.json():L==="application/octet-stream"||L==="application/pdf"?O=yield C.blob():L==="text/event-stream"?O=C:L==="multipart/form-data"?O=yield C.formData():O=yield C.text(),{data:O,error:null,response:C}}catch(c){return{data:null,error:c,response:c instanceof Yv||c instanceof Jv?c.context:void 0}}finally{o&&clearTimeout(o)}})}}var Kx=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Xx=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let a=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,c=null,d=null,h=o.status,v=o.statusText;if(o.ok){var b,S;if(n.method!=="HEAD"){var _;const C=await o.text();C===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((_=n.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?c=C:c=JSON.parse(C))}const k=(b=n.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),I=(S=o.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");k&&I&&I.length>1&&(d=parseInt(I[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,h=406,v="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var T;const k=await o.text();try{l=JSON.parse(k),Array.isArray(l)&&o.status===404&&(c=[],l=null,h=200,v="OK")}catch{o.status===404&&k===""?(h=204,v="No Content"):l={message:k}}if(l&&n.isMaybeSingle&&(!(l==null||(T=l.details)===null||T===void 0)&&T.includes("0 rows"))&&(l=null,h=200,v="OK"),l&&n.shouldThrowOnError)throw new Kx(l)}return{error:l,data:c,count:d,status:h,statusText:v}});return this.shouldThrowOnError||(a=a.catch(o=>{var l;let c="";const d=o==null?void 0:o.cause;if(d){var h,v,b,S;const T=(h=d==null?void 0:d.message)!==null&&h!==void 0?h:"",k=(v=d==null?void 0:d.code)!==null&&v!==void 0?v:"";c=`${(b=o==null?void 0:o.name)!==null&&b!==void 0?b:"FetchError"}: ${o==null?void 0:o.message}`,c+=`

Caused by: ${(S=d==null?void 0:d.name)!==null&&S!==void 0?S:"Error"}: ${T}`,k&&(c+=` (${k})`),d!=null&&d.stack&&(c+=`
${d.stack}`)}else{var _;c=(_=o==null?void 0:o.stack)!==null&&_!==void 0?_:""}return{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},Qx=class extends Xx{select(t){let e=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Wv=new RegExp("[,()]");var Ac=class extends Qx{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&Wv.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&Wv.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Zx=class{constructor(t,{headers:e={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:i}=e??{},a=n?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join(""),{url:c,headers:d}=this.cloneRequestState();return c.searchParams.set("select",l),i&&d.append("Prefer",`count=${i}`),new Ac({method:a,url:c,headers:d,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var i;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);o.searchParams.set("columns",d.join(","))}}return new Ac({method:a,url:o,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var o;const l="POST",{url:c,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&c.searchParams.set("on_conflict",e),i&&d.append("Prefer",`count=${i}`),a||d.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(h.length>0){const v=[...new Set(h)].map(b=>`"${b}"`);c.searchParams.set("columns",v.join(","))}}return new Ac({method:l,url:c,headers:d,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const i="PATCH",{url:a,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Ac({method:i,url:a,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:i,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Ac({method:n,url:i,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},ew=class D2{constructor(e,{headers:n={},schema:i,fetch:a}={}){this.url=e,this.headers=new Headers(n),this.schemaName=i,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Zx(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new D2(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:a=!1,count:o}={}){var l;let c;const d=new URL(`${this.url}/rpc/${e}`);let h;const v=_=>_!==null&&typeof _=="object"&&(!Array.isArray(_)||_.some(v)),b=i&&Object.values(n).some(v);b?(c="POST",h=n):i||a?(c=i?"HEAD":"GET",Object.entries(n).filter(([_,T])=>T!==void 0).map(([_,T])=>[_,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([_,T])=>{d.searchParams.append(_,T)})):(c="POST",h=n);const S=new Headers(this.headers);return b?S.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&S.set("Prefer",`count=${o}`),new Ac({method:c,url:d,headers:S,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class tw{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const a=i.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const nw="2.90.1",iw=`realtime-js/${nw}`,M2="1.0.0",rw="2.0.0",Kv=M2,v0=1e4,sw=1e3,aw=100;var bl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bl||(bl={}));var Ui;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ui||(Ui={}));var oa;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(oa||(oa={}));var y0;(function(t){t.websocket="websocket"})(y0||(y0={}));var mu;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(mu||(mu={}));class ow{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const a=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var n,i;const a=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,i){var a,o;const l=e.topic,c=(a=e.ref)!==null&&a!==void 0?a:"",d=(o=e.join_ref)!==null&&o!==void 0?o:"",h=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(v).length===0?"":JSON.stringify(v);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+c.length+l.length+h.length+b.length,_=new ArrayBuffer(this.HEADER_LENGTH+S);let T=new DataView(_),k=0;T.setUint8(k++,this.KINDS.userBroadcastPush),T.setUint8(k++,d.length),T.setUint8(k++,c.length),T.setUint8(k++,l.length),T.setUint8(k++,h.length),T.setUint8(k++,b.length),T.setUint8(k++,n),Array.from(d,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(c,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(l,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(h,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(b,C=>T.setUint8(k++,C.charCodeAt(0)));var I=new Uint8Array(_.byteLength+i.byteLength);return I.set(new Uint8Array(_),0),I.set(new Uint8Array(i),_.byteLength),I.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[a,o,l,c,d]=i;return n({join_ref:a,ref:o,topic:l,event:c,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),a=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,a)}}_decodeUserBroadcast(e,n,i){const a=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),c=n.getUint8(4);let d=this.HEADER_LENGTH+4;const h=i.decode(e.slice(d,d+a));d=d+a;const v=i.decode(e.slice(d,d+o));d=d+o;const b=i.decode(e.slice(d,d+l));d=d+l;const S=e.slice(d,e.byteLength),_=c===this.JSON_ENCODING?JSON.parse(i.decode(S)):S,T={type:this.BROADCAST_EVENT,event:v,payload:_};return l>0&&(T.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class P2{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var On;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(On||(On={}));const Xv=(t,e,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=lw(l,t,e,a),o),{}):{}},lw=(t,e,n,i)=>{const a=e.find(c=>c.name===t),o=a==null?void 0:a.type,l=n[t];return o&&!i.includes(o)?U2(o,l):b0(l)},U2=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return fw(e,n)}switch(t){case On.bool:return uw(e);case On.float4:case On.float8:case On.int2:case On.int4:case On.int8:case On.numeric:case On.oid:return cw(e);case On.json:case On.jsonb:return dw(e);case On.timestamp:return hw(e);case On.abstime:case On.date:case On.daterange:case On.int4range:case On.int8range:case On.money:case On.reltime:case On.text:case On.time:case On.timestamptz:case On.timetz:case On.tsrange:case On.tstzrange:return b0(e);default:return b0(e)}},b0=t=>t,uw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},cw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},dw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},fw=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(c=>U2(e,c))}return t},hw=t=>typeof t=="string"?t.replace(" ","T"):t,O2=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Wp{constructor(e,n,i={},a=v0){this.channel=e,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Qv||(Qv={}));class Ud{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ud.syncState(this.state,a,o,l),this.pendingDiffs.forEach(d=>{this.state=Ud.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],c()}),this.channel._on(i.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ud.syncDiff(this.state,a,o,l),c())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,a){const o=this.cloneDeep(e),l=this.transformState(n),c={},d={};return this.map(o,(h,v)=>{l[h]||(d[h]=v)}),this.map(l,(h,v)=>{const b=o[h];if(b){const S=v.map(I=>I.presence_ref),_=b.map(I=>I.presence_ref),T=v.filter(I=>_.indexOf(I.presence_ref)<0),k=b.filter(I=>S.indexOf(I.presence_ref)<0);T.length>0&&(c[h]=T),k.length>0&&(d[h]=k)}else c[h]=v}),this.syncDiff(o,{joins:c,leaves:d},i,a)}static syncDiff(e,n,i,a){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(o,(c,d)=>{var h;const v=(h=e[c])!==null&&h!==void 0?h:[];if(e[c]=this.cloneDeep(d),v.length>0){const b=e[c].map(_=>_.presence_ref),S=v.filter(_=>b.indexOf(_.presence_ref)<0);e[c].unshift(...S)}i(c,v,d)}),this.map(l,(c,d)=>{let h=e[c];if(!h)return;const v=d.map(b=>b.presence_ref);h=h.filter(b=>v.indexOf(b.presence_ref)<0),e[c]=h,a(c,h,d),h.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const a=e[i];return"metas"in a?n[i]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Zv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Zv||(Zv={}));var Od;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Od||(Od={}));var _o;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(_o||(_o={}));class Ic{constructor(e,n={config:{}},i){var a,o;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Ui.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Wp(this,oa.join,this.params,this.timeout),this.rejoinTimer=new P2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ui.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ui.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ui.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ui.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ui.errored,this.rejoinTimer.scheduleTimeout())}),this._on(oa.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Ud(this),this.broadcastEndpointURL=O2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ui.closed){const{config:{broadcast:l,presence:c,private:d}}=this.params,h=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(_=>_.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Od.PRESENCE]&&this.bindings[Od.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,b={},S={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:v}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(_=>e==null?void 0:e(_o.CHANNEL_ERROR,_)),this._onClose(()=>e==null?void 0:e(_o.CLOSED)),this.updateJoinPayload(Object.assign({config:S},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var T;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){e==null||e(_o.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,I=(T=k==null?void 0:k.length)!==null&&T!==void 0?T:0,C=[];for(let R=0;R<I;R++){const L=k[R],{filter:{event:O,schema:z,table:W,filter:B}}=L,q=_&&_[R];if(q&&q.event===O&&Ic.isFilterValueEqual(q.schema,z)&&Ic.isFilterValueEqual(q.table,W)&&Ic.isFilterValueEqual(q.filter,B))C.push(Object.assign(Object.assign({},L),{id:q.id}));else{this.unsubscribe(),this.state=Ui.errored,e==null||e(_o.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(_o.SUBSCRIBED);return}}).receive("error",_=>{this.state=Ui.errored,e==null||e(_o.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(_o.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===Ui.joined&&e===Od.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(c.status===202)return{success:!0};let d=c.statusText;try{const h=await c.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,d;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ui.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(oa.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new Wp(this,oa.leave,{},e),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ui.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const a=new AbortController,o=setTimeout(()=>a.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),l}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Wp(this,e,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>aw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var a,o;const l=e.toLocaleLowerCase(),{close:c,error:d,leave:h,join:v}=oa;if(i&&[c,d,h,v].indexOf(l)>=0&&i!==this._joinRef())return;let S=this._onMessage(l,n,i);if(n&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(_=>{var T,k,I;return((T=_.filter)===null||T===void 0?void 0:T.event)==="*"||((I=(k=_.filter)===null||k===void 0?void 0:k.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===l}).map(_=>_.callback(S,i)):(o=this.bindings[l])===null||o===void 0||o.filter(_=>{var T,k,I,C,R,L,O,z;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in _){const W=_.id,B=(T=_.filter)===null||T===void 0?void 0:T.event;return W&&((k=n.ids)===null||k===void 0?void 0:k.includes(W))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((I=n.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))&&(!(!((C=_.filter)===null||C===void 0)&&C.table)||_.filter.table===((R=n.data)===null||R===void 0?void 0:R.table))}else{const W=(O=(L=_==null?void 0:_.filter)===null||L===void 0?void 0:L.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return W==="*"||W===((z=n==null?void 0:n.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===l}).map(_=>{if(typeof S=="object"&&"ids"in S){const T=S.data,{schema:k,table:I,commit_timestamp:C,type:R,errors:L}=T;S=Object.assign(Object.assign({},{schema:k,table:I,commit_timestamp:C,eventType:R,new:{},old:{},errors:L}),this._getPayloadRecords(T))}_.callback(S,i)})}_isClosed(){return this.state===Ui.closed}_isJoined(){return this.state===Ui.joined}_isJoining(){return this.state===Ui.joining}_isLeaving(){return this.state===Ui.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const a=e.toLocaleLowerCase(),o={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&Ic.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(oa.close,{},e)}_onError(e){this._on(oa.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ui.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Xv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Xv(e.columns,e.old_record)),n}}const Kp=()=>{},Gf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pw=[1e3,2e3,5e3,1e4],mw=1e4,gw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vw{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=v0,this.transport=null,this.heartbeatIntervalMs=Gf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Kp,this.ref=0,this.reconnectTimer=null,this.vsn=Kv,this.logger=Kp,this.conn=null,this.sendBuffer=[],this.serializer=new ow,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${y0.websocket}`,this.httpEndpoint=O2(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case bl.connecting:return mu.Connecting;case bl.open:return mu.Open;case bl.closing:return mu.Closing;default:return mu.Closed}}isConnected(){return this.connectionState()===mu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===i);if(a)return a;{const o=new Ic(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:i,payload:a,ref:o}=e,l=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${n} ${i} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(sw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Gf.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",h)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:a,payload:o,ref:l}=n,c=l?`(${l})`:"",d=o.status||"";this.log("receive",`${d} ${i} ${a} ${c}`.trim(),o),this.channels.filter(h=>h._isMember(i)).forEach(h=>h._trigger(a,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===bl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bl.open||this.conn.readyState===bl.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(oa.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${i}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([gw],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,i=!1;if(e)n=e,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const o={access_token:n,version:iw};n&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(oa.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new P2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,a,o,l,c,d,h,v,b,S,_;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:v0,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Gf.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:Kp,this.vsn=(d=e==null?void 0:e.vsn)!==null&&d!==void 0?d:Kv,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(T=>pw[T-1]||mw),this.vsn){case M2:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((T,k)=>k(JSON.stringify(T))),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:((T,k)=>k(JSON.parse(T)));break;case rw:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Hd=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function yw(t,e,n){const i=new URL(e,t);if(n)for(const[a,o]of Object.entries(n))o!==void 0&&i.searchParams.set(a,o);return i.toString()}async function bw(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function xw(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:a,body:o,headers:l}){const c=yw(t.baseUrl,i,a),d=await bw(t.auth),h=await e(c,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...d,...l},body:o?JSON.stringify(o):void 0}),v=await h.text(),b=(h.headers.get("content-type")||"").includes("application/json"),S=b&&v?JSON.parse(v):v;if(!h.ok){const _=b?S:void 0,T=_==null?void 0:_.error;throw new Hd((T==null?void 0:T.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:T==null?void 0:T.type,icebergCode:T==null?void 0:T.code,details:_})}return{status:h.status,headers:h.headers,data:S}}}}function Vf(t){return t.join("")}var ww=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Vf(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vf(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vf(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vf(t.namespace)}`}),!0}catch(e){if(e instanceof Hd&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Hd&&n.status===409)return;throw n}}};function gc(t){return t.join("")}var Sw=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gc(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gc(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gc(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gc(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gc(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gc(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Hd&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Hd&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},_w=class{constructor(t){var i;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=xw({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(i=t.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new ww(this.client,e),this.tableOps=new Sw(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},xh=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function ti(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Nw=class extends xh{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},x0=class extends xh{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const rm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Aw=()=>Response,w0=t=>{if(Array.isArray(t))return t.map(n=>w0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=w0(i)}),e},Tw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ew=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function Cw(t,e){if(Gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Gd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kw(t){var e=Cw(t,"string");return Gd(e)=="symbol"?e:e+""}function Rw(t,e,n){return(e=kw(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ey(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ey(Object(n),!0).forEach(function(i){Rw(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const Xp=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Iw=async(t,e,n)=>{t instanceof await Aw()&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new Nw(Xp(i),a,o))}).catch(i=>{e(new x0(Xp(i),i))}):e(new x0(Xp(t),t))},Lw=(t,e,n,i)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?a:(Tw(i)?(a.headers=It({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(i)):a.body=i,e!=null&&e.duplex&&(a.duplex=e.duplex),It(It({},a),n))};async function Zd(t,e,n,i,a,o){return new Promise((l,c)=>{t(n,Lw(e,i,a,o)).then(d=>{if(!d.ok)throw d;return i!=null&&i.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>Iw(d,c,i))})}async function Vd(t,e,n,i){return Zd(t,"GET",e,n,i)}async function sa(t,e,n,i,a){return Zd(t,"POST",e,i,a,n)}async function S0(t,e,n,i,a){return Zd(t,"PUT",e,i,a,n)}async function Dw(t,e,n,i){return Zd(t,"HEAD",e,It(It({},n),{},{noResolveJson:!0}),i)}async function sm(t,e,n,i,a){return Zd(t,"DELETE",e,i,a,n)}var Mw=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ti(e))return{data:null,error:e};throw e}}};let j2;j2=Symbol.toStringTag;var Pw=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[j2]="BlobDownloadBuilder",this.promise=null}asStream(){return new Mw(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ti(e))return{data:null,error:e};throw e}}};const Uw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ty={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ow=class{constructor(t,e={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=rm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,i){var a=this;try{let o;const l=It(It({},ty),i);let c=It(It({},a.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",a.encodeMetadata(d)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),d&&!o.has("metadata")&&o.append("metadata",a.encodeMetadata(d))):(o=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,d&&(c["x-metadata"]=a.toBase64(a.encodeMetadata(d))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),i!=null&&i.headers&&(c=It(It({},c),i.headers));const h=a._removeEmptyFolders(e),v=a._getFinalPath(h),b=await(t=="PUT"?S0:sa)(a.fetch,`${a.url}/object/${v}`,o,It({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:b.Id,fullPath:b.Key},error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(ti(o))return{data:null,error:o};throw o}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,i){var a=this;const o=a._removeEmptyFolders(t),l=a._getFinalPath(o),c=new URL(a.url+`/object/upload/sign/${l}`);c.searchParams.set("token",e);try{let d;const h=It({upsert:ty.upsert},i),v=It(It({},a.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",h.cacheControl)):(d=n,v["cache-control"]=`max-age=${h.cacheControl}`,v["content-type"]=h.contentType),{data:{path:o,fullPath:(await S0(a.fetch,c.toString(),d,{headers:v})).Key},error:null}}catch(d){if(a.shouldThrowOnError)throw d;if(ti(d))return{data:null,error:d};throw d}}async createSignedUploadUrl(t,e){var n=this;try{let i=n._getFinalPath(t);const a=It({},n.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const o=await sa(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:a}),l=new URL(n.url+o.url),c=l.searchParams.get("token");if(!c)throw new xh("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:c},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ti(i))return{data:null,error:i};throw i}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var i=this;try{return{data:await sa(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}),error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}}async copy(t,e,n){var i=this;try{return{data:{path:(await sa(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key},error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}}async createSignedUrl(t,e,n){var i=this;try{let a=i._getFinalPath(t),o=await sa(i.fetch,`${i.url}/object/sign/${a}`,It({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${i.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}}async createSignedUrls(t,e,n){var i=this;try{const a=await sa(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:t},{headers:i.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>It(It({},l),{},{signedUrl:l.signedURL?encodeURI(`${i.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=i?`?${i}`:"",o=this._getFinalPath(t),l=()=>Vd(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new Pw(l,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:w0(await Vd(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(ti(i))return{data:null,error:i};throw i}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await Dw(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(ti(i)&&i instanceof x0){const a=i.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:i}}throw i}}getPublicUrl(t,e){const n=this._getFinalPath(t),i=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&i.push(a);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}async remove(t){var e=this;try{return{data:await sm(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ti(n))return{data:null,error:n};throw n}}async list(t,e,n){var i=this;try{const a=It(It(It({},Uw),e),{},{prefix:t||""});return{data:await sa(i.fetch,`${i.url}/object/list/${i.bucketId}`,a,{headers:i.headers},n),error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}}async listV2(t,e){var n=this;try{const i=It({},t);return{data:await sa(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},e),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ti(i))return{data:null,error:i};throw i}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const F2="2.90.1",B2={"X-Client-Info":`storage-js/${F2}`};var jw=class{constructor(t,e={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=It(It({},B2),e),this.fetch=rm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Vd(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ti(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Vd(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ti(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await sa(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ti(i))return{data:null,error:i};throw i}}async updateBucket(t,e){var n=this;try{return{data:await S0(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ti(i))return{data:null,error:i};throw i}}async emptyBucket(t){var e=this;try{return{data:await sa(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ti(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await sm(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ti(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Fw=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=It(It({},B2),e),this.fetch=rm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await sa(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ti(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const i=n.toString(),a=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return{data:await Vd(e.fetch,a,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ti(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await sm(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ti(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!Ew(t))throw new xh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new _w({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(a,o){const l=a[o];return typeof l!="function"?l:async(...c)=>{try{return{data:await l.apply(a,c),error:null}}catch(d){if(i)throw d;return{data:null,error:d}}}}})}};const am={"X-Client-Info":`storage-js/${F2}`,"Content-Type":"application/json"};var q2=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ms(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Qp=class extends q2{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Bw=class extends q2{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const om=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),qw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ny=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zw=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Qp(ny(o),i,l))}).catch(()=>{const o=i+"";e(new Qp(a.statusText||`HTTP ${i} error`,i,o))});else{const o=i+"";e(new Qp(a.statusText||`HTTP ${i} error`,i,o))}}else e(new Bw(ny(t),t))},Hw=(t,e,n,i)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return i?(qw(i)?(a.headers=It({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(i)):a.body=i,It(It({},a),n)):a};async function Gw(t,e,n,i,a,o){return new Promise((l,c)=>{t(n,Hw(e,i,a,o)).then(d=>{if(!d.ok)throw d;if(i!=null&&i.noResolveJson)return d;const h=d.headers.get("content-type");return!h||!h.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>zw(d,c,i))})}async function gs(t,e,n,i,a){return Gw(t,"POST",e,i,a,n)}var Vw=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=It(It({},am),e),this.fetch=om(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await gs(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ms(i))return{data:null,error:i};throw i}}async listIndexes(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await gs(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ms(i))return{data:null,error:i};throw i}}},$w=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=It(It({},am),e),this.fetch=om(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await gs(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await gs(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await gs(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}},Jw=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=It(It({},am),e),this.fetch=om(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await gs(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}},Yw=class extends Jw{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Ww(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},Ww=class extends Vw{constructor(t,e,n,i){super(t,e,i),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,It(It({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,It(It({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new Kw(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Kw=class extends $w{constructor(t,e,n,i,a){super(t,e,a),this.vectorBucketName=n,this.indexName=i}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,It(It({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,It(It({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,It(It({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,It(It({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,It(It({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Xw=class extends jw{constructor(t,e={},n,i){super(t,e,n,i)}from(t){return new Ow(this.url,this.headers,t,this.fetch)}get vectors(){return new Yw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Fw(this.url+"/iceberg",this.headers,this.fetch)}};const z2="2.90.1",Tc=30*1e3,_0=3,Zp=_0*Tc,Qw="http://localhost:9999",Zw="supabase.auth.token",eS={"X-Client-Info":`gotrue-js/${z2}`},N0="X-Supabase-Api-Version",H2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nS=600*1e3;class $d extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function gt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class iS extends $d{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function rS(t){return gt(t)&&t.name==="AuthApiError"}class gu extends $d{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Eo extends $d{constructor(e,n,i,a){super(e,i,a),this.name=n,this.status=i}}class ps extends Eo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sS(t){return gt(t)&&t.name==="AuthSessionMissingError"}class vc extends Eo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $f extends Eo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jf extends Eo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aS(t){return gt(t)&&t.name==="AuthImplicitGrantRedirectError"}class iy extends Eo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oS extends Eo{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class A0 extends Eo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function e0(t){return gt(t)&&t.name==="AuthRetryableFetchError"}class ry extends Eo{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class T0 extends Eo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ah="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sy=` 	
\r=`.split(""),lS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<sy.length;e+=1)t[sy[e].charCodeAt(0)]=-2;for(let e=0;e<ah.length;e+=1)t[ah[e].charCodeAt(0)]=e;return t})();function ay(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(ah[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(ah[i]),e.queuedBits-=6}}function G2(t,e,n){const i=lS[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function oy(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{dS(l,i,n)};for(let l=0;l<t.length;l+=1)G2(t.charCodeAt(l),a,o);return e.join("")}function uS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function cS(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}uS(i,e)}}function dS(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Mc(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)G2(t.charCodeAt(a),n,i);return new Uint8Array(e)}function fS(t){const e=[];return cS(t,n=>e.push(n)),new Uint8Array(e)}function vu(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};return t.forEach(a=>ay(a,n,i)),ay(null,n,i),e.join("")}function hS(t){return Math.round(Date.now()/1e3)+t}function pS(){return Symbol("auth-callback")}const rr=()=>typeof window<"u"&&typeof document<"u",cu={tested:!1,writable:!1},V2=()=>{if(!rr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cu.tested)return cu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),cu.tested=!0,cu.writable=!0}catch{cu.tested=!0,cu.writable=!1}return cu.writable};function mS(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return n.searchParams.forEach((i,a)=>{e[a]=i}),e}const $2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),gS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ec=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},du=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ir=async(t,e)=>{await t.removeItem(e)};class wh{constructor(){this.promise=new wh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}wh.promiseConstructor=Promise;function t0(t){const e=t.split(".");if(e.length!==3)throw new T0("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!tS.test(e[i]))throw new T0("JWT not in base64url format");return{header:JSON.parse(oy(e[0])),payload:JSON.parse(oy(e[1])),signature:Mc(e[2]),raw:{header:e[0],payload:e[1]}}}async function vS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function yS(t,e){return new Promise((i,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){i(l);return}}catch(l){if(!e(o,l)){a(l);return}}})()})}function bS(t){return("0"+t.toString(16)).substr(-2)}function xS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,bS).join("")}async function wS(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function SS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await wS(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yc(t,e,n=!1){const i=xS();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await Ec(t,`${e}-code-verifier`,a);const o=await SS(i);return[o,i===o?"plain":"s256"]}const _S=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NS(t){const e=t.headers.get(N0);if(!e||!e.match(_S))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function AS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function TS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ES=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function bc(t){if(!ES.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function n0(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function CS(t,e){return new Proxy(t,{get:(n,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,a)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,a)}})}function ly(t){return JSON.parse(JSON.stringify(t))}const fu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kS=[502,503,504];async function uy(t){var e;if(!gS(t))throw new A0(fu(t),0);if(kS.includes(t.status))throw new A0(fu(t),t.status);let n;try{n=await t.json()}catch(o){throw new gu(fu(o),o)}let i;const a=NS(t);if(a&&a.getTime()>=H2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new ry(fu(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new ps}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new ry(fu(n),t.status,n.weak_password.reasons);throw new iS(fu(n),t.status||500,i)}const RS=(t,e,n,i)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function Rt(t,e,n,i){var a;const o=Object.assign({},i==null?void 0:i.headers);o[N0]||(o[N0]=H2["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const l=(a=i==null?void 0:i.query)!==null&&a!==void 0?a:{};i!=null&&i.redirectTo&&(l.redirect_to=i.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await IS(t,e,n+c,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(d):{data:Object.assign({},d),error:null}}async function IS(t,e,n,i,a,o){const l=RS(e,i,a,o);let c;try{c=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new A0(fu(d),0)}if(c.ok||await uy(c),i!=null&&i.noResolveJson)return c;try{return await c.json()}catch(d){await uy(d)}}function ra(t){var e;let n=null;MS(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=hS(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function cy(t){const e=ra(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function wl(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function LS(t){return{data:t,error:null}}function DS(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o}=t,l=bh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o},d=Object.assign({},l);return{data:{properties:c,user:d},error:null}}function dy(t){return t}function MS(t){return t.access_token&&t.refresh_token&&t.expires_in}const i0=["global","local","others"];class PS{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=$2(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=i0[0]){if(i0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${i0.join(", ")}`);try{return await Rt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(gt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await Rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:wl})}catch(i){if(gt(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=bh(e,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i==null?void 0:i.newEmail,delete a.newEmail),await Rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:DS,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(gt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Rt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wl})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,a,o,l,c,d;try{const h={nextPage:null,lastPage:0,total:0},v=await Rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:dy});if(v.error)throw v.error;const b=await v.json(),S=(l=v.headers.get("x-total-count"))!==null&&l!==void 0?l:0,_=(d=(c=v.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(T.split(";")[1].split("=")[1]);h[`${I}Page`]=k}),h.total=parseInt(S)),{data:Object.assign(Object.assign({},b),h),error:null}}catch(h){if(gt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){bc(e);try{return await Rt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wl})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){bc(e);try{return await Rt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:wl})}catch(i){if(gt(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){bc(e);try{return await Rt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:wl})}catch(i){if(gt(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){bc(e.userId);try{const{data:n,error:i}=await Rt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){bc(e.userId),bc(e.id);try{return{data:await Rt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,a,o,l,c,d;try{const h={nextPage:null,lastPage:0,total:0},v=await Rt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:dy});if(v.error)throw v.error;const b=await v.json(),S=(l=v.headers.get("x-total-count"))!==null&&l!==void 0?l:0,_=(d=(c=v.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(T.split(";")[1].split("=")[1]);h[`${I}Page`]=k}),h.total=parseInt(S)),{data:Object.assign(Object.assign({},b),h),error:null}}catch(h){if(gt(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Rt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Rt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Rt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(gt(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await Rt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Rt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(gt(n))return{data:null,error:n};throw n}}}function fy(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const xc={debug:!!(globalThis&&V2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class J2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class US extends J2{}async function OS(t,e,n){xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),xc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw xc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new US(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function jS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Y2(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function FS(t){return parseInt(t,16)}function BS(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function qS(t){var e;const{chainId:n,domain:i,expirationTime:a,issuedAt:o=new Date,nonce:l,notBefore:c,requestId:d,resources:h,scheme:v,uri:b,version:S}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const _=Y2(t.address),T=v?`${v}://${i}`:i,k=t.statement?`${t.statement}
`:"",I=`${T} wants you to sign in with your Ethereum account:
${_}

${k}`;let C=`URI: ${b}
Version: ${S}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(a&&(C+=`
Expiration Time: ${a.toISOString()}`),c&&(C+=`
Not Before: ${c.toISOString()}`),d&&(C+=`
Request ID: ${d}`),h){let R=`
Resources:`;for(const L of h){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);R+=`
- ${L}`}C+=R}return`${I}
${C}`}class Ti extends Error{constructor({message:e,code:n,cause:i,name:a}){var o;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(o=a??(i instanceof Error?i.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class oh extends Ti{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function zS({error:t,options:e}){var n,i,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ti({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ti({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ti({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ti({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ti({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ti({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Ti({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ti({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(W2(l)){if(o.rp.id!==l)return new Ti({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ti({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ti({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ti({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ti({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function HS({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ti({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ti({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(W2(i)){if(n.rpId!==i)return new Ti({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ti({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ti({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ti({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class GS{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const VS=new GS;function $S(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:i}=t,a=bh(t,["challenge","user","excludeCredentials"]),o=Mc(e).buffer,l=Object.assign(Object.assign({},n),{id:Mc(n.id).buffer}),c=Object.assign(Object.assign({},a),{challenge:o,user:l});if(i&&i.length>0){c.excludeCredentials=new Array(i.length);for(let d=0;d<i.length;d++){const h=i[d];c.excludeCredentials[d]=Object.assign(Object.assign({},h),{id:Mc(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return c}function JS(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,i=bh(t,["challenge","allowCredentials"]),a=Mc(e).buffer,o=Object.assign(Object.assign({},i),{challenge:a});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},c),{id:Mc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function YS(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:vu(new Uint8Array(t.response.attestationObject)),clientDataJSON:vu(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function WS(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,i=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:vu(new Uint8Array(a.authenticatorData)),clientDataJSON:vu(new Uint8Array(a.clientDataJSON)),signature:vu(new Uint8Array(a.signature)),userHandle:a.userHandle?vu(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function W2(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function hy(){var t,e;return!!(rr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function KS(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new oh("Browser returned unexpected credential type",e)}:{data:null,error:new oh("Empty credential response",e)}}catch(e){return{data:null,error:zS({error:e,options:t})}}}async function XS(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new oh("Browser returned unexpected credential type",e)}:{data:null,error:new oh("Empty credential response",e)}}catch(e){return{data:null,error:HS({error:e,options:t})}}}const QS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ZS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lh(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of t)if(a)for(const o in a){const l=a[o];if(l!==void 0)if(Array.isArray(l))i[o]=l;else if(n(l))i[o]=l;else if(e(l)){const c=i[o];e(c)?i[o]=lh(c,l):i[o]=lh(l)}else i[o]=l}return i}function e_(t,e){return lh(QS,t,e||{})}function t_(t,e){return lh(ZS,t,e||{})}class n_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:a},o){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:c};const d=a??VS.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${i}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=e_(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:v,error:b}=await KS({publicKey:h,signal:d});return v?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const h=t_(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:v,error:b}=await XS(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:d}));return v?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(l){return gt(l)?{data:null,error:l}:{data:null,error:new gu("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new $d("rpId is required for WebAuthn authentication")};try{if(!hy())return{data:null,error:new gu("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:a},{request:o});if(!l)return{data:null,error:c};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:i,credential_response:d.credential_response}})}catch(l){return gt(l)?{data:null,error:l}:{data:null,error:new gu("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new $d("rpId is required for WebAuthn registration")};try{if(!hy())return{data:null,error:new gu("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:c};const{data:d,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:a},{create:o});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:i,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(l){return gt(l)?{data:null,error:l}:{data:null,error:new gu("Unexpected error in register",l)}}}}jS();const i_={url:Qw,storageKey:Zw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function py(t,e,n){return await n()}const wc={};class Jd{get jwks(){var e,n;return(n=(e=wc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){wc[this.storageKey]=Object.assign(Object.assign({},wc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=wc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){wc[this.storageKey]=Object.assign(Object.assign({},wc[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},i_),e);if(this.storageKey=o.storageKey,this.instanceID=(n=Jd.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Jd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&rr()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new PS({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=$2(o.fetch),this.lock=o.lock||py,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&rr()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=OS:this.lock=py,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new n_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:V2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fy(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=fy(this.memoryStorage)),rr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${z2}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(rr()&&(n=mS(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),rr()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),aS(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return gt(n)?this._returnResult({error:n}):this._returnResult({error:new gu("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,a;try{const o=await Rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:ra}),{data:l,error:c}=o;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(o){if(gt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,i,a;try{let o;if("email"in e){const{email:v,password:b,options:S}=e;let _=null,T=null;this.flowType==="pkce"&&([_,T]=await yc(this.storage,this.storageKey)),o=await Rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:b,data:(n=S==null?void 0:S.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:_,code_challenge_method:T},xform:ra})}else if("phone"in e){const{phone:v,password:b,options:S}=e;o=await Rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},channel:(a=S==null?void 0:S.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:ra})}else throw new $f("You must provide either an email or phone number and a password");const{data:l,error:c}=o;if(c||!l)return await ir(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(o){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:c}=e;n=await Rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:cy})}else if("phone"in e){const{phone:o,password:l,options:c}=e;n=await Rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:cy})}else throw new $f("You must provide either an email or phone number and a password");const{data:i,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!i||!i.session||!i.user){const o=new vc;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,a,o,l,c,d,h,v,b,S;let _,T;if("message"in e)_=e.message,T=e.signature;else{const{chain:k,wallet:I,statement:C,options:R}=e;let L;if(rr())if(typeof I=="object")L=I;else{const ee=window;if("ethereum"in ee&&typeof ee.ethereum=="object"&&"request"in ee.ethereum&&typeof ee.ethereum.request=="function")L=ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=I}const O=new URL((n=R==null?void 0:R.url)!==null&&n!==void 0?n:window.location.href),z=await L.request({method:"eth_requestAccounts"}).then(ee=>ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!z||z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=Y2(z[0]);let B=(i=R==null?void 0:R.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!B){const ee=await L.request({method:"eth_chainId"});B=FS(ee)}const q={domain:O.host,address:W,statement:C,uri:O.href,version:"1",chainId:B,nonce:(a=R==null?void 0:R.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(o=R==null?void 0:R.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=R==null?void 0:R.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=R==null?void 0:R.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(v=R==null?void 0:R.signInWithEthereum)===null||v===void 0?void 0:v.resources};_=qS(q),T=await L.request({method:"personal_sign",params:[BS(_),W]})}try{const{data:k,error:I}=await Rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:T},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:ra});if(I)throw I;if(!k||!k.session||!k.user){const C=new vc;return this._returnResult({data:{user:null,session:null},error:C})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:I})}catch(k){if(gt(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(e){var n,i,a,o,l,c,d,h,v,b,S,_;let T,k;if("message"in e)T=e.message,k=e.signature;else{const{chain:I,wallet:C,statement:R,options:L}=e;let O;if(rr())if(typeof C=="object")O=C;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))O=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=C}const z=new URL((n=L==null?void 0:L.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const W=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L==null?void 0:L.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),R?{statement:R}:null));let B;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")B=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)B=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)T=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),k=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${z.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(a=(i=L==null?void 0:L.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=L==null?void 0:L.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((l=L==null?void 0:L.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((c=L==null?void 0:L.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((d=L==null?void 0:L.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((h=L==null?void 0:L.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((b=(v=L==null?void 0:L.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...L.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const W=await O.signMessage(new TextEncoder().encode(T),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=W}}try{const{data:I,error:C}=await Rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:vu(k)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:ra});if(C)throw C;if(!I||!I.session||!I.user){const R=new vc;return this._returnResult({data:{user:null,session:null},error:R})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:C})}catch(I){if(gt(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async _exchangeCodeForSession(e){const n=await du(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new oS;const{data:o,error:l}=await Rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ra});if(await ir(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const c=new vc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:i,token:a,access_token:o,nonce:l}=e,c=await Rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ra}),{data:d,error:h}=c;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d||!d.session||!d.user){const v=new vc;return this._returnResult({data:{user:null,session:null},error:v})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:h})}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,a,o,l;try{if("email"in e){const{email:c,options:d}=e;let h=null,v=null;this.flowType==="pkce"&&([h,v]=await yc(this.storage,this.storageKey));const{error:b}=await Rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:v},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:c,options:d}=e,{data:h,error:v}=await Rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:v})}throw new $f("You must provide either an email or phone number.")}catch(c){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var n,i;try{let a,o;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:c}=await Rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ra});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,h=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(a){if(gt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,i,a,o,l;try{let c=null,d=null;this.flowType==="pkce"&&([c,d]=await yc(this.storage,this.storageKey));const h=await Rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:LS});return!((o=h.data)===null||o===void 0)&&o.url&&rr()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(c){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new ps;const{error:a}=await Rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(gt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:o}=e,{error:l}=await Rt(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:i,type:a,options:o}=e,{data:l,error:c}=await Rt(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c})}throw new $f("You must provide either an email or phone number and a type")}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await du(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Zp:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await du(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=n0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=CS(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wl}):await this._useSession(async n=>{var i,a,o;const{data:l,error:c}=n;if(c)throw c;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ps}:await Rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:wl})})}catch(n){if(gt(n))return sS(n)&&(await this._removeSession(),await ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:a,error:o}=i;if(o)throw o;if(!a.session)throw new ps;const l=a.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await yc(this.storage,this.storageKey));const{data:h,error:v}=await Rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:l.access_token,xform:wl});if(v)throw v;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(i){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ps;const n=Date.now()/1e3;let i=n,a=!0,o=null;const{payload:l}=t0(e.access_token);if(l.exp&&(i=l.exp,a=i<=n),a){const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(gt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:l,error:c}=n;if(c)throw c;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new ps;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!rr())throw new Jf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new iy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new iy("No code detected.");const{data:R,error:L}=await this._exchangeCodeForSession(e.code);if(L)throw L;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:c,expires_at:d,token_type:h}=e;if(!o||!c||!l||!h)throw new Jf("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(c);let S=v+b;d&&(S=parseInt(d));const _=S-v;_*1e3<=Tc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${b}s`);const T=S-b;v-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,S,v):v-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,S,v);const{data:k,error:I}=await this._getUser(o);if(I)throw I;const C={provider_token:i,provider_refresh_token:a,access_token:o,expires_in:b,expires_at:S,refresh_token:l,token_type:h,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(i){if(gt(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await du(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({error:o});const l=(i=a.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(rS(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=pS(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,a;try{const{data:{session:o},error:l}=n;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await yc(this.storage,this.storageKey,!0));try{return await Rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:a}=await this._useSession(async o=>{var l,c,d,h,v;const{data:b,error:S}=o;if(S)throw S;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Rt(this.fetch,"GET",_,{headers:this.headers,jwt:(v=(h=b.session)===null||h===void 0?void 0:h.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return rr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(gt(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:a,data:{session:o}}=n;if(a)throw a;const{options:l,provider:c,token:d,access_token:h,nonce:v}=e,b=await Rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o==null?void 0:o.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:d,access_token:h,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ra}),{data:S,error:_}=b;return _?this._returnResult({data:{user:null,session:null},error:_}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new vc}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:_}))}catch(a){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)throw l;return await Rt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await yS(async a=>(a>0&&await vS(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ra})),(a,o)=>{const l=200*Math.pow(2,a);return o&&e0(o)&&Date.now()+l-i<Tc})}catch(i){if(this._debug(n,"error",i),gt(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),rr()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await du(this.storage,this.storageKey);if(a&&this.userStorage){let l=await du(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Ec(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:n0()}else if(a&&!a.user&&!a.user){const l=await du(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await ir(this.storage,this.storageKey+"-user"),await Ec(this.storage,this.storageKey,a)):a.user=n0()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Zp;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${Zp}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),e0(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(a.access_token);!c&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new wh;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new ps;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(a,"error",o),gt(o)){const l={data:null,error:o};return e0(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ir(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Ec(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=ly(a);await Ec(this.storage,this.storageKey,o)}else{const a=ly(n);await Ec(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ir(this.storage,this.storageKey),await ir(this.storage,this.storageKey+"-code-verifier"),await ir(this.storage,this.storageKey+"-user"),this.userStorage&&await ir(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Tc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/Tc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Tc}ms, refresh threshold is ${_0} ticks`),a<=_0&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof J2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,l]=await yc(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(c.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);a.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;return o?this._returnResult({data:null,error:o}):await Rt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:h}=await Rt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&d.type==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?YS(e.webauthn.credential_response):WS(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:d}=await Rt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:d}))})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await Rt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:$S(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:JS(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:i},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=t0(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(e=i.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?await Rt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new ps})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new ps});const l=await Rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&rr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(gt(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new ps});const l=await Rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&rr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(gt(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await Rt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ps})})}catch(e){if(gt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?(await Rt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ps})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(c=>c.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(c=>c.kid===e),i&&this.jwks_cached_at+nS>a)return i;const{data:o,error:l}=await Rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,i=o.keys.find(c=>c.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:_,error:T}=await this.getSession();if(T||!_.session)return this._returnResult({data:null,error:T});i=_.session.access_token}const{header:a,payload:o,signature:l,raw:{header:c,payload:d}}=t0(i);n!=null&&n.allowExpired||AS(o.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:_}=await this.getUser(i);if(_)throw _;return{data:{claims:o,header:a,signature:l},error:null}}const v=TS(a.alg),b=await crypto.subtle.importKey("jwk",h,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,l,fS(`${c}.${d}`)))throw new T0("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(i){if(gt(i))return this._returnResult({data:null,error:i});throw i}}}Jd.nextInstanceID={};const r_=Jd,s_="2.90.1";let Dd="";typeof Deno<"u"?Dd="deno":typeof document<"u"?Dd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dd="react-native":Dd="node";const a_={"X-Client-Info":`supabase-js-${Dd}/${s_}`},o_={headers:a_},l_={schema:"public"},u_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},c_={};function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function d_(t,e){if(Yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Yd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f_(t){var e=d_(t,"string");return Yd(e)=="symbol"?e:e+""}function h_(t,e,n){return(e=f_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function my(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?my(Object(n),!0).forEach(function(i){h_(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):my(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const p_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),m_=()=>Headers,g_=(t,e,n)=>{const i=p_(n),a=m_();return async(o,l)=>{var c;const d=(c=await e())!==null&&c!==void 0?c:t;let h=new a(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),i(o,oi(oi({},l),{},{headers:h}))}};function v_(t){return t.endsWith("/")?t:t+"/"}function y_(t,e){var n,i;const{db:a,auth:o,realtime:l,global:c}=t,{db:d,auth:h,realtime:v,global:b}=e,S={db:oi(oi({},d),a),auth:oi(oi({},h),o),realtime:oi(oi({},v),l),storage:{},global:oi(oi(oi({},b),c),{},{headers:oi(oi({},(n=b==null?void 0:b.headers)!==null&&n!==void 0?n:{}),(i=c==null?void 0:c.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?S.accessToken=t.accessToken:delete S.accessToken,S}function b_(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(v_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var x_=class extends r_{constructor(t){super(t)}},w_=class{constructor(t,e,n){var i,a;this.supabaseUrl=t,this.supabaseKey=e;const o=b_(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:l_,realtime:c_,auth:oi(oi({},u_),{},{storageKey:l}),global:o_},d=y_(n??{},c);if(this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=d.auth)!==null&&h!==void 0?h:{},this.headers,d.global.fetch)}this.fetch=g_(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(oi({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new ew(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Xw(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Wx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:i}=await t.auth.getSession();return(e=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:l,lock:c,debug:d,throwOnError:h},v,b){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new x_({url:this.authUrl.href,headers:oi(oi({},S),v),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:a,flowType:l,lock:c,debug:d,throwOnError:h,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new vw(this.realtimeUrl.href,oi(oi({},t),{},{params:oi(oi({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const S_=(t,e,n)=>new w_(t,e,n);function __(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}__()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const N_="https://azyeptjbktvkqiigotbi.supabase.co",A_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6eWVwdGpia3R2a3FpaWdvdGJpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4ODc0MjYsImV4cCI6MjA4MzQ2MzQyNn0.XHc7sOAgRW9AQJvOFVQ25R0ovsIr8Bxnv_hukDag2LY",fi=S_(N_,A_),Sc=t=>{var e;return((e=t==null?void 0:t.message)==null?void 0:e.includes("Could not find the table"))||(t==null?void 0:t.code)==="PGRST116"||(t==null?void 0:t.code)==="42P01"},T_=t=>{const e=(t==null?void 0:t.message)||"";return(t==null?void 0:t.code)==="PGRST107"||(t==null?void 0:t.code)==="42703"||e.includes("Could not find the")||e.includes("column")||e.includes("schema cache")},hi={async getProducts(){const{data:t,error:e}=await fi.from("products").select("*").order("name");if(e){if(Sc(e))throw new Error("DATABASE_MISSING");return[]}return(t||[]).map(n=>({...n,company:n.company||(n.category.toLowerCase().includes("mirror")?"mirrorzone":"clonmel")}))},async addProduct(t){const{error:e}=await fi.from("products").insert([t]);if(e)throw e},async updateProduct(t){const{error:e}=await fi.from("products").update(t).eq("id",String(t.id));if(e)throw e},async deleteProduct(t){const{error:e}=await fi.from("products").delete().eq("id",String(t));if(e)throw e},async getInvoices(){const{data:t,error:e}=await fi.from("invoices").select("*").order("date_issued",{ascending:!1});if(e){if(Sc(e))throw new Error("DATABASE_MISSING");return[]}return(t||[]).map(n=>({...n,invoiceNumber:String(n.invoice_number||""),customerId:String(n.customer_id||""),customerName:String(n.customer_name||""),customerEmail:String(n.customer_email||""),customerPhone:String(n.customer_phone||""),customerAddress:String(n.customer_address||""),taxRate:Number(n.tax_rate||0),taxAmount:Number(n.tax_amount||0),amountPaid:Number(n.amount_paid||0),balanceDue:Number(n.balance_due||0),dateIssued:String(n.date_issued||""),dueDate:String(n.due_date||""),createdBy:String(n.created_by||""),lastReminderSent:n.last_reminder_sent?String(n.last_reminder_sent):void 0,documentType:n.document_type?String(n.document_type):void 0,validUntil:n.valid_until?String(n.valid_until):void 0,paymentDate:n.payment_date?String(n.payment_date):void 0}))},async addInvoice(t){const e={id:String(t.id),invoice_number:String(t.invoiceNumber),customer_id:String(t.customerId),customer_name:String(t.customerName),customer_email:String(t.customerEmail),customer_phone:String(t.customerPhone||""),customer_address:String(t.customerAddress),company:String(t.company||"clonmel"),items:t.items,subtotal:Number(t.subtotal),tax_rate:Number(t.taxRate),tax_amount:Number(t.taxAmount),total:Number(t.total),amount_paid:Number(t.amountPaid),balance_due:Number(t.balanceDue),status:String(t.status),date_issued:String(t.dateIssued),due_date:String(t.dueDate),notes:String(t.notes||""),created_by:String(t.createdBy),last_reminder_sent:t.lastReminderSent?String(t.lastReminderSent):null,document_type:t.documentType?String(t.documentType):"invoice",valid_until:t.validUntil?String(t.validUntil):null,payment_date:t.paymentDate?String(t.paymentDate):null},{error:n}=await fi.from("invoices").insert([e]);if(n)throw n},async updateInvoice(t){const e={};if(t.items!==void 0&&(e.items=t.items),t.subtotal!==void 0&&(e.subtotal=Number(t.subtotal)),t.taxRate!==void 0&&(e.tax_rate=Number(t.taxRate)),t.taxAmount!==void 0&&(e.tax_amount=Number(t.taxAmount)),t.total!==void 0&&(e.total=Number(t.total)),t.notes!==void 0&&(e.notes=String(t.notes)),t.customerName!==void 0&&(e.customer_name=String(t.customerName)),t.customerEmail!==void 0&&(e.customer_email=String(t.customerEmail)),t.customerPhone!==void 0&&(e.customer_phone=String(t.customerPhone)),t.customerAddress!==void 0&&(e.customer_address=String(t.customerAddress)),t.dateIssued!==void 0&&(e.date_issued=String(t.dateIssued)),t.dueDate!==void 0&&(e.due_date=String(t.dueDate)),t.company!==void 0&&(e.company=String(t.company)),t.documentType!==void 0&&(e.document_type=String(t.documentType)),t.validUntil!==void 0&&(e.valid_until=String(t.validUntil)),t.amountPaid!==void 0&&(e.amount_paid=Number(t.amountPaid)),t.balanceDue!==void 0&&(e.balance_due=Number(t.balanceDue)),t.status!==void 0&&(e.status=String(t.status)),t.lastReminderSent!==void 0&&(e.last_reminder_sent=t.lastReminderSent?String(t.lastReminderSent):null),t.paymentDate!==void 0&&(e.payment_date=t.paymentDate?String(t.paymentDate):null),Object.keys(e).length===0)return;const{error:n}=await fi.from("invoices").update(e).eq("id",String(t.id));if(n){if(T_(n)&&e.last_reminder_sent!==void 0){const i=new Error("COLUMN_MISSING_REMINDER");throw i.originalError=n,i}throw n}},async deleteInvoice(t){const{error:e}=await fi.from("invoices").delete().eq("id",String(t));if(e)throw e},async getUsers(){const{data:t,error:e}=await fi.from("users").select("*");if(e){if(Sc(e))throw new Error("DATABASE_MISSING");return[]}return t||[]},async addUser(t){const{error:e}=await fi.from("users").insert([t]);if(e)throw e},async deleteUser(t){const{error:e}=await fi.from("users").delete().eq("id",t);if(e)throw e},async getLogo(){try{const{data:t,error:e}=await fi.from("app_settings").select("value").eq("key","company_logo").maybeSingle();if(e&&Sc(e))throw new Error("DATABASE_MISSING");return(t==null?void 0:t.value)||""}catch(t){if(t instanceof Error&&t.message==="DATABASE_MISSING")throw t;return""}},async saveLogo(t){const{error:e}=await fi.from("app_settings").upsert({key:"company_logo",value:t});if(e)throw e},async getSettings(){try{const{data:t,error:e}=await fi.from("app_settings").select("value").eq("key","global_settings").maybeSingle();return e&&Sc(e)||!t?null:typeof t.value=="string"?JSON.parse(t.value):t.value}catch{return null}},async saveSettings(t){const{error:e}=await fi.from("app_settings").upsert({key:"global_settings",value:JSON.stringify(t)});if(e)throw e},async getCustomers(){const{data:t,error:e}=await fi.from("customers").select("*").order("name");if(e){if(Sc(e))throw new Error("DATABASE_MISSING");return[]}return(t||[]).map(n=>({...n,createdAt:String(n.created_at||""),updatedAt:String(n.updated_at||""),createdBy:String(n.created_by||""),postalCode:n.postal_code}))},async addCustomer(t){const e={id:String(t.id),name:String(t.name),email:t.email||null,phone:t.phone||null,address:t.address||null,address_line_2:t.addressLine2||null,city:t.city||null,postal_code:t.postalCode||null,country:t.country||"Ireland",company:t.company||null,notes:t.notes||null,tags:t.tags||[],created_at:t.createdAt,updated_at:t.updatedAt,created_by:t.createdBy||"system"},{error:n}=await fi.from("customers").insert([e]);if(n)throw n},async updateCustomer(t){const e={name:String(t.name),email:t.email||null,phone:t.phone||null,address:t.address||null,address_line_2:t.addressLine2||null,city:t.city||null,postal_code:t.postalCode||null,country:t.country||"Ireland",company:t.company||null,notes:t.notes||null,tags:t.tags||[],updated_at:new Date().toISOString()},{error:n}=await fi.from("customers").update(e).eq("id",t.id);if(n)throw n},async deleteCustomer(t){const{error:e}=await fi.from("customers").delete().eq("id",String(t));if(e)throw e},async exportFullBackup(){const[t,e,n,i]=await Promise.all([this.getProducts(),this.getInvoices(),this.getUsers(),this.getLogo()]);return JSON.stringify({products:t,invoices:e,users:n,logo:i,exportedAt:new Date().toISOString()},null,2)},async seedData(t,e){const{error:n}=await fi.from("products").upsert(t,{onConflict:"id"});n&&console.error("Error seeding products:",n);const{error:i}=await fi.from("users").upsert(e,{onConflict:"id"});i&&console.error("Error seeding users:",i)}},E_=[{id:"u1",name:"Admin User",email:"admin@clonmel.com",role:Xr.ADMIN,avatar:"https://i.pravatar.cc/150?u=admin"},{id:"u2",name:"John Staff",email:"john@clonmel.com",role:Xr.USER,avatar:"https://i.pravatar.cc/150?u=john"}],C_={taxRate:23,companyName:"Clonmel Glass & Mirrors Ltd",companyAddress:"Unit 3, Clonmel Business Park, Clonmel, Co. Tipperary",companyPhone:"+353 52 123 4567",companyEmail:"accounts@clonmelglass.ie",companyWebsite:"www.clonmelglass.ie",vatNumber:"IE 1234567T",bankName:"Bank of Ireland",accountName:"Clonmel Glass Ltd",iban:"IE93 BOFI 9000 1234 5678 90",bic:"BOFIE2D",defaultNotes:"Payment due within 30 days. Please quote invoice number on all payments."},K2=je.createContext(void 0),k_=({children:t})=>{const e=je.useRef(!1),[n,i]=je.useState(null),[a,o]=je.useState("LOGIN"),[l,c]=je.useState(null),[d,h]=je.useState(!1),[v,b]=je.useState(!0),[S,_]=je.useState(!1),[T,k]=je.useState(null),[I,C]=je.useState([]),[R,L]=je.useState([]),[O,z]=je.useState([]),[W,B]=je.useState([]),[q,ee]=je.useState(""),[ue,F]=je.useState(C_),j=async()=>{if(!e.current){e.current=!0,b(!0),_(!1);try{const se=new Promise((Le,fe)=>setTimeout(()=>fe(new Error("INIT_TIMEOUT")),2e3)),[he,Ae,Me,Ke,Ye]=await Promise.race([Promise.all([hi.getUsers(),hi.getProducts(),hi.getInvoices(),hi.getCustomers(),hi.getLogo()]),se]);if(he.length===0&&!S){console.log("Empty Users DB detected. Seeding initial users..."),await hi.seedData([],E_);const Le=await hi.getUsers();C(Le)}else C(he);L(Ae),z(Me),B(Ke),ee(Ye);const st=await hi.getSettings();st&&F(Le=>({...Le,...st})),_(!1)}catch(se){console.error("Initialization failed:",se),(se.message==="DATABASE_MISSING"||se.message==="INIT_TIMEOUT")&&(_(!0),C([]),L([]),z([]))}finally{b(!1),localStorage.getItem("currentUser")&&o(S?"PRODUCTS":"DASHBOARD")}}};je.useEffect(()=>{const se=localStorage.getItem("currentUser");if(se)try{const he=JSON.parse(se);i(he)}catch(he){console.error("Failed to restore session",he),localStorage.removeItem("currentUser")}j()},[]);const ne=se=>{const he=I.find(Ae=>Ae.email===se);if(he)i(he),localStorage.setItem("currentUser",JSON.stringify(he)),o(S?"PRODUCTS":"DASHBOARD");else{if(se==="admin@clonmel.com"){const Ae={id:"u1",name:"Admin User",email:se,role:Xr.ADMIN,avatar:"https://i.pravatar.cc/150?u=admin"};i(Ae),localStorage.setItem("currentUser",JSON.stringify(Ae)),o(S?"PRODUCTS":"DASHBOARD");return}alert("User not found.")}},ie=()=>{i(null),localStorage.removeItem("currentUser"),o("LOGIN")},be=async se=>{h(!0);try{await hi.addUser(se),C(he=>[...he,se])}finally{h(!1)}},U=async se=>{const he=I;C(Ae=>Ae.filter(Me=>Me.id!==se)),h(!0);try{await hi.deleteUser(se)}catch(Ae){throw console.error("Delete failed, rolling back UI",Ae),C(he),Ae}finally{h(!1)}},$=async se=>{h(!0);try{await hi.addProduct(se),L(he=>[...he,se])}finally{h(!1)}},re=async se=>{h(!0);try{await hi.updateProduct(se),L(he=>he.map(Ae=>Ae.id===se.id?se:Ae))}finally{h(!1)}},oe=async se=>{h(!0);try{await hi.deleteProduct(se),L(he=>he.filter(Ae=>Ae.id!==se))}finally{h(!1)}},pe=async se=>{h(!0);try{await hi.addInvoice(se),z(he=>[se,...he])}finally{h(!1)}},_e=async se=>{h(!0);try{await hi.updateInvoice(se),z(he=>he.map(Ae=>Ae.id===se.id?se:Ae))}finally{h(!1)}},D=async se=>{const he=O;z(Ae=>Ae.filter(Me=>Me.id!==se)),h(!0);try{await hi.deleteInvoice(se)}catch(Ae){throw console.error("Delete failed, rolling back UI",Ae),z(he),Ae}finally{h(!1)}},H=async se=>{h(!0);try{await hi.saveLogo(se),ee(se)}catch(he){console.error("DB Error:",he)}finally{h(!1)}},K=async se=>{h(!0);try{await hi.saveSettings(se),F(se)}catch(he){throw console.error("Failed to save settings:",he),he}finally{h(!1)}},Z=async se=>{h(!0);try{await hi.addCustomer(se),B(he=>[...he,se])}finally{h(!1)}},ae=async se=>{h(!0);try{await hi.updateCustomer(se),B(he=>he.map(Ae=>Ae.id===se.id?se:Ae))}finally{h(!1)}},de=async se=>{h(!0);try{await hi.deleteCustomer(se),B(he=>he.filter(Ae=>Ae.id!==se))}finally{h(!1)}};return g.jsx(K2.Provider,{value:{user:n,login:ne,logout:ie,users:I,addUser:be,deleteUser:U,products:R,addProduct:$,updateProduct:re,deleteProduct:oe,invoices:O,addInvoice:pe,updateInvoice:_e,deleteInvoice:D,customers:W,addCustomer:Z,updateCustomer:ae,deleteCustomer:de,currentView:a,setView:o,selectedInvoiceId:l,setSelectedInvoiceId:c,companyLogo:q,setCompanyLogo:H,isSyncing:d,isLoading:v,databaseError:S,refreshDatabase:j,editingInvoice:T,setEditingInvoice:k,settings:ue,updateSettings:K},children:t})},Os=()=>{const t=je.useContext(K2);if(!t)throw new Error("useApp must be used within AppProvider");return t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I_=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),gy=t=>{const e=I_(t);return e.charAt(0).toUpperCase()+e.slice(1)},X2=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),L_=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=je.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:l,...c},d)=>je.createElement("svg",{ref:d,...D_,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:X2("lucide",a),...!o&&!L_(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,v])=>je.createElement(h,v)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=(t,e)=>{const n=je.forwardRef(({className:i,...a},o)=>je.createElement(M_,{ref:o,iconNode:e,className:X2(`lucide-${R_(gy(t))}`,`lucide-${t}`,i),...a}));return n.displayName=gy(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Q2=vt("activity",P_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],O_=vt("arrow-right",U_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],F_=vt("bell-ring",j_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],E0=vt("building-2",B_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Z2=vt("calculator",q_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],vy=vt("calendar-days",z_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Sh=vt("calendar",H_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],C0=vt("check",G_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$_=vt("chevron-down",V_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lm=vt("chevron-left",J_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],um=vt("chevron-right",Y_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Pc=vt("circle-alert",W_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]],X_=vt("circle-arrow-right",K_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],k0=vt("circle-check-big",Q_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_h=vt("circle-check",Z_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],yy=vt("circle-plus",eN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],by=vt("circle-user",tN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],iN=vt("circle-x",nN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],El=vt("clock",rN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],aN=vt("cloud",sN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lN=vt("credit-card",oN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],eb=vt("download",uN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]],tb=vt("euro",cN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uh=vt("eye",dN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],hN=vt("file-check",fN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M4.226 20.925A2 2 0 0 0 6 22h12a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.127",key:"wfxp4w"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]],mN=vt("file-output",pN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jc=vt("file-text",gN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],yN=vt("info",vN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],xy=vt("landmark",bN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],wN=vt("layers",xN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],wy=vt("layout-dashboard",SN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],NN=vt("log-out",_N);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],cm=vt("mail",AN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],EN=vt("map-pin",TN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],kN=vt("menu",CN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ch=vt("package",RN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Md=vt("pen",IN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],DN=vt("pencil",LN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],dm=vt("phone",MN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_l=vt("plus",PN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],r0=vt("refresh-ccw",UN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],jN=vt("ruler",ON);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],dh=vt("save",FN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fc=vt("search",BN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],nb=vt("send",qN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Sy=vt("settings",zN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ib=vt("square-pen",HN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],VN=vt("tag",GN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],JN=vt("target",$N);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],No=vt("trash-2",YN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],KN=vt("trending-up",WN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],QN=vt("triangle-alert",XN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],rb=vt("upload",ZN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sb=vt("user",eA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wd=vt("users",tA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],iA=vt("wand-sparkles",nA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ao=vt("x",rA),sA=({children:t})=>{const{user:e,logout:n,currentView:i,setView:a,isSyncing:o,databaseError:l}=Os(),[c,d]=aa.useState(!1);if(!e)return g.jsx(g.Fragment,{children:t});const h=({view:v,icon:b,label:S})=>g.jsxs("button",{onClick:()=>{a(v),d(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${i===v?"bg-brand-50 text-brand-600 font-medium":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[g.jsx(b,{size:20}),g.jsx("span",{children:S})]});return g.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[g.jsxs("aside",{className:"hidden md:flex w-64 flex-col bg-white border-r border-slate-200 shadow-sm",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 flex flex-col items-center relative",children:[g.jsx("img",{src:"/clonmel-logo.png",alt:"Clonmel Glass & Mirrors",className:"h-16 w-auto mb-3 object-contain",onError:v=>{var b;v.currentTarget.style.display="none",(b=v.currentTarget.nextElementSibling)==null||b.classList.remove("hidden")}}),g.jsx("div",{className:"h-12 w-12 bg-brand-500 rounded-lg flex items-center justify-center text-white font-bold text-xl mb-3 shadow-lg shadow-brand-500/30 hidden",children:"CG"}),g.jsxs("div",{className:"absolute top-4 right-4 flex items-center space-x-1",title:l?"Using Local Mock Data":"Connected to Cloud DB",children:[g.jsx("div",{className:`h-2 w-2 rounded-full ${o?"bg-purple-500 animate-pulse":l?"bg-amber-400":"bg-emerald-400"}`}),g.jsx("span",{className:`text-[8px] font-bold uppercase tracking-tighter ${l?"text-amber-500":"text-slate-400"}`,children:o?"SYNC":l?"MOCK":"LIVE"})]})]}),g.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[e.role===Xr.ADMIN&&g.jsx(h,{view:"DASHBOARD",icon:wy,label:"Dashboard"}),g.jsx(h,{view:"CALENDAR",icon:vy,label:"Schedule"}),g.jsx(h,{view:"INVOICES",icon:jc,label:"Invoices"}),g.jsx(h,{view:"QUOTES",icon:hN,label:"Quotes"}),g.jsx(h,{view:"CREATE_INVOICE",icon:yy,label:"New Invoice"}),g.jsx(h,{view:"CUSTOMERS",icon:by,label:"Customers"}),e.role===Xr.ADMIN&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pt-4 pb-2 px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Admin"}),g.jsx(h,{view:"PRODUCTS",icon:ch,label:"Products"}),g.jsx(h,{view:"USERS",icon:Wd,label:"Users"}),g.jsx(h,{view:"SETTINGS",icon:Sy,label:"Settings"})]})]}),g.jsxs("div",{className:"p-4 border-t border-slate-100",children:[g.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 mb-6 bg-slate-900 mx-4 rounded-xl border border-slate-800 shadow-lg relative overflow-hidden group",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),g.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center text-white font-black text-xs shadow-sm shadow-brand-500/10",children:e.name.charAt(0)}),g.jsxs("div",{className:"flex-1 min-w-0 relative z-10",children:[g.jsx("p",{className:"text-sm font-medium text-white truncate",children:e.name}),g.jsx("p",{className:"text-xs text-slate-400 truncate",children:e.role})]})]}),g.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-md transition-colors",children:[g.jsx(NN,{size:16}),g.jsx("span",{children:"Sign Out"})]})]})]}),g.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[g.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-white border-b border-slate-200",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("div",{className:"h-8 w-8 bg-brand-500 rounded flex items-center justify-center text-white font-bold text-sm",children:"CG"}),g.jsx("span",{className:"font-bold text-slate-800 text-sm",children:"Clonmel Glass"})]}),g.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[g.jsxs("div",{className:"hidden sm:flex items-center space-x-1 bg-slate-100 px-2 py-1 rounded-full",children:[g.jsx("div",{className:`h-1.5 w-1.5 rounded-full ${o?"bg-purple-500 animate-pulse":l?"bg-amber-400":"bg-emerald-400"}`}),g.jsx("span",{className:`text-[8px] font-bold ${l?"text-amber-600":"text-slate-500"}`,children:o?"SYNC":l?"MOCK DATA":"LIVE DB"})]}),g.jsx("button",{onClick:()=>d(!c),className:"text-slate-600 p-2 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx(kN,{size:24})})]})]}),c&&g.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/50 md:hidden",onClick:()=>d(!1),children:g.jsxs("div",{className:"absolute top-0 right-0 h-full w-64 bg-white shadow-xl p-4",onClick:v=>v.stopPropagation(),children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("span",{className:"font-bold text-lg",children:"Menu"}),g.jsx("button",{onClick:()=>d(!1),className:"text-slate-500",children:""})]}),g.jsxs("nav",{className:"space-y-2",children:[e.role===Xr.ADMIN&&g.jsx(h,{view:"DASHBOARD",icon:wy,label:"Dashboard"}),g.jsx(h,{view:"CALENDAR",icon:vy,label:"Schedule"}),g.jsx(h,{view:"INVOICES",icon:jc,label:"Invoices"}),g.jsx(h,{view:"CREATE_INVOICE",icon:yy,label:"New Invoice"}),g.jsx(h,{view:"CUSTOMERS",icon:by,label:"Customers"}),e.role===Xr.ADMIN&&g.jsxs(g.Fragment,{children:[g.jsx("hr",{className:"my-2 border-slate-100"}),g.jsx(h,{view:"PRODUCTS",icon:ch,label:"Products"}),g.jsx(h,{view:"USERS",icon:Wd,label:"Users"}),g.jsx(h,{view:"SETTINGS",icon:Sy,label:"Settings"})]}),g.jsx("hr",{className:"my-2 border-slate-100"}),g.jsx("button",{onClick:n,className:"w-full text-left px-4 py-3 text-red-600",children:"Sign Out"})]})]})}),g.jsx("main",{className:"flex-1 overflow-auto bg-slate-50 p-4 md:p-8",children:t})]})]})};var aA={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oA,lA;function uA(){return{geminiUrl:oA,vertexUrl:lA}}function cA(t,e,n,i){var a,o;if(!(t!=null&&t.baseUrl)){const l=uA();return e?(a=l.vertexUrl)!==null&&a!==void 0?a:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Co{}function lt(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const o=e[a];return o!=null?String(o):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let h=0;h<d.length;h++){const v=d[h];y(v,e.slice(o+1),n[h])}else for(const h of d)y(h,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];y(d[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],a=t[i];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const a=e[i];if(a.endsWith("[]")){const o=a.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[a]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function dA(t,e){for(const[n,i]of Object.entries(e)){const a=n.split("."),o=i.split("."),l=new Set;let c=-1;for(let d=0;d<a.length;d++)if(a[d]==="*"){c=d;break}if(c!==-1&&o.length>c)for(let d=c;d<o.length;d++){const h=o[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}R0(t,a,o,0,l)}}function R0(t,e,n,i,a){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])R0(d,e,n,i+1,a)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!a.has(h)),d={};for(const h of c)d[h]=l[h];for(const[h,v]of Object.entries(d)){const b=[];for(const S of n.slice(i))S==="*"?b.push(h):b.push(S);y(l,b,v)}for(const h of c)delete l[h]}}else{const l=t;o in l&&R0(l[o],e,n,i+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fm(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fA(t){const e={},n=p(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function hA(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],mA(l)),e}function pA(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response"]);return l!=null&&y(e,["response"],gA(l)),e}function mA(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>vA(l))),y(e,["generatedVideos"],o)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function gA(t){const e={},n=p(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>yA(l))),y(e,["generatedVideos"],o)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function vA(t){const e={},n=p(t,["video"]);return n!=null&&y(e,["video"],NA(n)),e}function yA(t){const e={},n=p(t,["_self"]);return n!=null&&y(e,["video"],AA(n)),e}function bA(t){const e={},n=p(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function xA(t){const e={},n=p(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function wA(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response"]);return l!=null&&y(e,["response"],SA(l)),e}function SA(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const a=p(t,["documentName"]);return a!=null&&y(e,["documentName"],a),e}function ab(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response"]);return l!=null&&y(e,["response"],_A(l)),e}function _A(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const a=p(t,["documentName"]);return a!=null&&y(e,["documentName"],a),e}function NA(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],fm(i));const a=p(t,["encoding"]);return a!=null&&y(e,["mimeType"],a),e}function AA(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],fm(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _y;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_y||(_y={}));var Ny;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Ny||(Ny={}));var Ay;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Ay||(Ay={}));var Nl;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Nl||(Nl={}));var Ty;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ty||(Ty={}));var Ey;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ey||(Ey={}));var Cy;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Cy||(Cy={}));var ky;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ky||(ky={}));var Ry;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ry||(Ry={}));var Iy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Iy||(Iy={}));var Ly;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Ly||(Ly={}));var Dy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Dy||(Dy={}));var My;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(My||(My={}));var Py;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Py||(Py={}));var Uy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Uy||(Uy={}));var Oy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Oy||(Oy={}));var jy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(jy||(jy={}));var Fy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Fy||(Fy={}));var By;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(By||(By={}));var qy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(qy||(qy={}));var zy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(zy||(zy={}));var fh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(fh||(fh={}));var Hy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Hy||(Hy={}));var Gy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Gy||(Gy={}));var Vy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Vy||(Vy={}));var I0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(I0||(I0={}));var $y;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})($y||($y={}));var Jy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Jy||(Jy={}));var Yy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Yy||(Yy={}));var Wy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Wy||(Wy={}));var Ky;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ky||(Ky={}));var Xy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Xy||(Xy={}));var Qy;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Qy||(Qy={}));var Zy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Zy||(Zy={}));var e1;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(e1||(e1={}));var t1;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(t1||(t1={}));var n1;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(n1||(n1={}));var i1;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(i1||(i1={}));var r1;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(r1||(r1={}));var s1;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(s1||(s1={}));var a1;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(a1||(a1={}));var o1;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(o1||(o1={}));var l1;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(l1||(l1={}));var u1;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(u1||(u1={}));var c1;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(c1||(c1={}));var d1;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(d1||(d1={}));var f1;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(f1||(f1={}));var h1;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(h1||(h1={}));var p1;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(p1||(p1={}));var m1;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(m1||(m1={}));var g1;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(g1||(g1={}));var v1;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(v1||(v1={}));var y1;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(y1||(y1={}));var b1;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(b1||(b1={}));var Lc;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Lc||(Lc={}));class L0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Cd{get text(){var e,n,i,a,o,l,c,d;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const b=[];for(const S of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[_,T]of Object.entries(S))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(T!==null||T!==void 0)&&b.push(_);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,h+=S.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,n,i,a,o,l,c,d;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const b of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[S,_]of Object.entries(b))S!=="inlineData"&&(_!==null||_!==void 0)&&v.push(S);b.inlineData&&typeof b.inlineData.data=="string"&&(h+=atob(b.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,a,o,l,c,d;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,a,o,l,c,d,h;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,a,o,l,c,d,h;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class x1{}class w1{}class TA{}class EA{}class CA{}class kA{}class S1{}class _1{}class N1{}class RA{}class hh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new hh;let a;const o=e;return n?a=pA(o):a=hA(o),Object.assign(i,a),i}}class A1{}class T1{}class E1{}class C1{}class IA{}class LA{}class DA{}class hm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new hm,o=wA(e);return Object.assign(i,o),i}}class MA{}class PA{}class UA{}class k1{}class OA{get text(){var e,n,i;let a="",o=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(c))d!=="text"&&d!=="thought"&&h!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,a+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?a:void 0}get data(){var e,n,i;let a="";const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(a+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class jA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class pm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new pm,o=ab(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ob(t,e){const n=fn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function lb(t){return Array.isArray(t)?t.map(e=>ph(e)):[ph(t)]}function ph(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function ub(t){const e=ph(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cb(t){const e=ph(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function R1(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function db(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>R1(e)):[R1(t)]}function D0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function I1(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function L1(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function gr(t){if(t==null)throw new Error("ContentUnion is required");return D0(t)?t:{role:"user",parts:db(t)}}function mm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=gr(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=gr(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>gr(n)):[gr(e)]}function Ps(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(I1(t)||L1(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[gr(t)]}const e=[],n=[],i=D0(t[0]);for(const a of t){const o=D0(a);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(a);else{if(I1(a)||L1(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return i||e.push({role:"user",parts:db(n)}),e}function FA(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Nl).includes(n[0].toUpperCase())?n[0].toUpperCase():Nl.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Nl).includes(i.toUpperCase())?i.toUpperCase():Nl.TYPE_UNSPECIFIED})}}function Uc(t){const e={},n=["items"],i=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&FA(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Nl).includes(c.toUpperCase())?c.toUpperCase():Nl.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Uc(c);else if(i.includes(l)){const d=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}d.push(Uc(h))}e[l]=d}else if(a.includes(l)){const d={};for(const[h,v]of Object.entries(c))d[h]=Uc(v);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function gm(t){return Uc(t)}function vm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ym(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Bc(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Uc(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Uc(e.response));return t}function qc(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function BA(t,e,n,i=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function ko(t,e){if(typeof e!="string")throw new Error("name must be a string");return BA(t,e,"cachedContents")}function fb(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Rl(t){return fm(t)}function qA(t){return t!=null&&typeof t=="object"&&"name"in t}function zA(t){return t!=null&&typeof t=="object"&&"video"in t}function HA(t){return t!=null&&typeof t=="object"&&"uri"in t}function hb(t){var e;let n;if(qA(t)&&(n=t.name),!(HA(t)&&(n=t.uri,n===void 0))&&!(zA(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function pb(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function mb(t){for(const e of["models","tunedModels","publisherModels"])if(GA(t,e))return t[e];return[]}function GA(t,e){return t!==null&&typeof t=="object"&&e in t}function VA(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function $A(t,e={}){const n=[],i=new Set;for(const a of t){const o=a.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=VA(a,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function gb(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function JA(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function vb(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let o=!1;for(const l of a){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function zc(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function yb(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YA(t){const e={},n=p(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>C4(l))),y(e,["inlinedResponses"],o)}const a=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["inlinedEmbedContentResponses"],o)}return e}function WA(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const a=p(t,["bigqueryDestination","outputUri"]);return a!=null&&y(e,["bigqueryUri"],a),e}function KA(t){const e={},n=p(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const a=p(t,["bigqueryUri"]);if(a!=null&&y(e,["bigqueryDestination","outputUri"],a),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ih(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const a=p(t,["metadata","state"]);a!=null&&y(e,["state"],yb(a));const o=p(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const l=p(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=p(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const d=p(t,["metadata","model"]);d!=null&&y(e,["model"],d);const h=p(t,["metadata","output"]);return h!=null&&y(e,["dest"],YA(vb(h))),e}function M0(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const a=p(t,["state"]);a!=null&&y(e,["state"],yb(a));const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=p(t,["startTime"]);c!=null&&y(e,["startTime"],c);const d=p(t,["endTime"]);d!=null&&y(e,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(e,["updateTime"],h);const v=p(t,["model"]);v!=null&&y(e,["model"],v);const b=p(t,["inputConfig"]);b!=null&&y(e,["src"],XA(b));const S=p(t,["outputConfig"]);S!=null&&y(e,["dest"],WA(vb(S)));const _=p(t,["completionStats"]);return _!=null&&y(e,["completionStats"],_),e}function XA(t){const e={},n=p(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const a=p(t,["bigquerySource","inputUri"]);return a!=null&&y(e,["bigqueryUri"],a),e}function QA(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&y(n,["fileName"],i);const a=p(e,["inlinedRequests"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>E4(t,l))),y(n,["requests","requests"],o)}return n}function ZA(t){const e={},n=p(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const a=p(t,["bigqueryUri"]);if(a!=null&&y(e,["bigquerySource","inputUri"],a),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function e4(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function t4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],zc(t,i)),n}function n4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],zc(t,i)),n}function i4(t){const e={},n=p(t,["content"]);n!=null&&y(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],r4(i));const a=p(t,["tokenCount"]);a!=null&&y(e,["tokenCount"],a);const o=p(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=p(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&y(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&y(e,["logprobsResult"],h);const v=p(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(_=>_)),y(e,["safetyRatings"],S)}const b=p(t,["urlContextMetadata"]);return b!=null&&y(e,["urlContextMetadata"],b),e}function r4(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),y(e,["citations"],i)}return e}function bb(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>P4(o))),y(e,["parts"],a)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function s4(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function a4(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const a=p(t,["dest"]);return e!==void 0&&a!=null&&y(e,["outputConfig"],KA(JA(a))),n}function D1(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["src"]);a!=null&&y(n,["batch","inputConfig"],QA(t,gb(t,a)));const o=p(e,["config"]);return o!=null&&s4(o,n),n}function o4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],fn(t,i));const a=p(e,["src"]);a!=null&&y(n,["inputConfig"],ZA(gb(t,a)));const o=p(e,["config"]);return o!=null&&a4(o,n),n}function l4(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function u4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["src"]);a!=null&&y(n,["batch","inputConfig"],g4(t,a));const o=p(e,["config"]);return o!=null&&l4(o,n),n}function c4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],zc(t,i)),n}function d4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],zc(t,i)),n}function f4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);return o!=null&&y(e,["error"],o),e}function h4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);return o!=null&&y(e,["error"],o),e}function p4(t,e){const n={},i=p(e,["contents"]);if(i!=null){let o=mm(t,i);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["requests[]","request","content"],o)}const a=p(e,["config"]);return a!=null&&(y(n,["_self"],m4(a,n)),dA(n,{"requests[].*":"requests[].request.*"})),n}function m4(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const a=p(t,["title"]);e!==void 0&&a!=null&&y(e,["requests[]","title"],a);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function g4(t,e){const n={},i=p(e,["fileName"]);i!=null&&y(n,["file_name"],i);const a=p(e,["inlinedRequests"]);return a!=null&&y(n,["requests"],p4(t,a)),n}function v4(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function y4(t){const e={},n=p(t,["id"]);n!=null&&y(e,["id"],n);const i=p(t,["args"]);i!=null&&y(e,["args"],i);const a=p(t,["name"]);if(a!=null&&y(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function b4(t){const e={},n=p(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const i=p(t,["mode"]);if(i!=null&&y(e,["mode"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function x4(t,e,n){const i={},a=p(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],bb(gr(a)));const o=p(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&y(i,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&y(i,["responseLogprobs"],b);const S=p(e,["logprobs"]);S!=null&&y(i,["logprobs"],S);const _=p(e,["presencePenalty"]);_!=null&&y(i,["presencePenalty"],_);const T=p(e,["frequencyPenalty"]);T!=null&&y(i,["frequencyPenalty"],T);const k=p(e,["seed"]);k!=null&&y(i,["seed"],k);const I=p(e,["responseMimeType"]);I!=null&&y(i,["responseMimeType"],I);const C=p(e,["responseSchema"]);C!=null&&y(i,["responseSchema"],gm(C));const R=p(e,["responseJsonSchema"]);if(R!=null&&y(i,["responseJsonSchema"],R),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=p(e,["safetySettings"]);if(n!==void 0&&L!=null){let ne=L;Array.isArray(ne)&&(ne=ne.map(ie=>U4(ie))),y(n,["safetySettings"],ne)}const O=p(e,["tools"]);if(n!==void 0&&O!=null){let ne=qc(O);Array.isArray(ne)&&(ne=ne.map(ie=>j4(Bc(ie)))),y(n,["tools"],ne)}const z=p(e,["toolConfig"]);if(n!==void 0&&z!=null&&y(n,["toolConfig"],O4(z)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=p(e,["cachedContent"]);n!==void 0&&W!=null&&y(n,["cachedContent"],ko(t,W));const B=p(e,["responseModalities"]);B!=null&&y(i,["responseModalities"],B);const q=p(e,["mediaResolution"]);q!=null&&y(i,["mediaResolution"],q);const ee=p(e,["speechConfig"]);if(ee!=null&&y(i,["speechConfig"],vm(ee)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=p(e,["thinkingConfig"]);ue!=null&&y(i,["thinkingConfig"],ue);const F=p(e,["imageConfig"]);F!=null&&y(i,["imageConfig"],T4(F));const j=p(e,["enableEnhancedCivicAnswers"]);return j!=null&&y(i,["enableEnhancedCivicAnswers"],j),i}function w4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>i4(h))),y(e,["candidates"],d)}const a=p(t,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const o=p(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=p(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function S4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],zc(t,i)),n}function _4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],zc(t,i)),n}function N4(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function A4(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function T4(t){const e={},n=p(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),p(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function E4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["request","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let c=Ps(a);Array.isArray(c)&&(c=c.map(d=>bb(d))),y(n,["request","contents"],c)}const o=p(e,["metadata"]);o!=null&&y(n,["metadata"],o);const l=p(e,["config"]);return l!=null&&y(n,["request","generationConfig"],x4(t,l,p(n,["request"],{}))),n}function C4(t){const e={},n=p(t,["response"]);n!=null&&y(e,["response"],w4(n));const i=p(t,["error"]);return i!=null&&y(e,["error"],i),e}function k4(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);if(e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function R4(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const o=p(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function I4(t){const e={},n=p(t,["config"]);return n!=null&&k4(n,e),e}function L4(t){const e={},n=p(t,["config"]);return n!=null&&R4(n,e),e}function D4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["operations"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>ih(l))),y(e,["batchJobs"],o)}return e}function M4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["batchPredictionJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>M0(l))),y(e,["batchJobs"],o)}return e}function P4(t){const e={},n=p(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=p(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const o=p(t,["fileData"]);o!=null&&y(e,["fileData"],v4(o));const l=p(t,["functionCall"]);l!=null&&y(e,["functionCall"],y4(l));const c=p(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&y(e,["inlineData"],e4(d));const h=p(t,["text"]);h!=null&&y(e,["text"],h);const v=p(t,["thought"]);v!=null&&y(e,["thought"],v);const b=p(t,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=p(t,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function U4(t){const e={},n=p(t,["category"]);if(n!=null&&y(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function O4(t){const e={},n=p(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const i=p(t,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],b4(i)),e}function j4(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const a=p(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=p(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}const l=p(t,["googleMaps"]);l!=null&&y(e,["googleMaps"],N4(l));const c=p(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],A4(c));const d=p(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var To;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(To||(To={}));class _u{constructor(e,n,i,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,a)}init(e,n,i){var a,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(a=l.config)===null||a===void 0?void 0:a.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F4 extends Co{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _u(To.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=D1(this.apiClient,e),i=n._url,a=lt("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,h=[];for(const v of d){const b=Object.assign({},v);if(b.systemInstruction){const S=b.systemInstruction;delete b.systemInstruction;const _=b.request;_.systemInstruction=S,b.request=_}h.push(b)}return c.requests=h,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},a=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${a}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${a}`;else if(l)i.dest=`${l}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=o4(this.apiClient,e);return c=lt("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>M0(v))}else{const h=D1(this.apiClient,e);return c=lt("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>ih(v))}}async createEmbeddingsInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=u4(this.apiClient,e);return o=lt("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>ih(d))}}async get(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=_4(this.apiClient,e);return c=lt("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>M0(v))}else{const h=S4(this.apiClient,e);return c=lt("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>ih(v))}}async cancel(e){var n,i,a,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=n4(this.apiClient,e);l=lt("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=t4(this.apiClient,e);l=lt("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=L4(e);return c=lt("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=M4(v),S=new k1;return Object.assign(S,b),S})}else{const h=I4(e);return c=lt("batches",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=D4(v),S=new k1;return Object.assign(S,b),S})}}async delete(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=d4(this.apiClient,e);return c=lt("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>h4(v))}else{const h=c4(this.apiClient,e);return c=lt("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>f4(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B4(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function M1(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>u3(o))),y(e,["parts"],a)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function q4(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=p(t,["expireTime"]);e!==void 0&&a!=null&&y(e,["expireTime"],a);const o=p(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let v=Ps(l);Array.isArray(v)&&(v=v.map(b=>M1(b))),y(e,["contents"],v)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],M1(gr(c)));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let v=d;Array.isArray(v)&&(v=v.map(b=>d3(b))),y(e,["tools"],v)}const h=p(t,["toolConfig"]);if(e!==void 0&&h!=null&&y(e,["toolConfig"],c3(h)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function z4(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=p(t,["expireTime"]);e!==void 0&&a!=null&&y(e,["expireTime"],a);const o=p(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let b=Ps(l);Array.isArray(b)&&(b=b.map(S=>S)),y(e,["contents"],b)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],gr(c));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let b=d;Array.isArray(b)&&(b=b.map(S=>f3(S))),y(e,["tools"],b)}const h=p(t,["toolConfig"]);e!==void 0&&h!=null&&y(e,["toolConfig"],h);const v=p(t,["kmsKeyName"]);return e!==void 0&&v!=null&&y(e,["encryption_spec","kmsKeyName"],v),n}function H4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],ob(t,i));const a=p(e,["config"]);return a!=null&&q4(a,n),n}function G4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],ob(t,i));const a=p(e,["config"]);return a!=null&&z4(a,n),n}function V4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],ko(t,i)),n}function $4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],ko(t,i)),n}function J4(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Y4(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function W4(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function K4(t){const e={},n=p(t,["id"]);n!=null&&y(e,["id"],n);const i=p(t,["args"]);i!=null&&y(e,["args"],i);const a=p(t,["name"]);if(a!=null&&y(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function X4(t){const e={},n=p(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const i=p(t,["mode"]);if(i!=null&&y(e,["mode"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Q4(t){const e={},n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const a=p(t,["parameters"]);a!=null&&y(e,["parameters"],a);const o=p(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);if(c!=null&&y(e,["responseJsonSchema"],c),p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Z4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],ko(t,i)),n}function e3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],ko(t,i)),n}function t3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function n3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function i3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function r3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function s3(t){const e={},n=p(t,["config"]);return n!=null&&i3(n,e),e}function a3(t){const e={},n=p(t,["config"]);return n!=null&&r3(n,e),e}function o3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function l3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function u3(t){const e={},n=p(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=p(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const o=p(t,["fileData"]);o!=null&&y(e,["fileData"],W4(o));const l=p(t,["functionCall"]);l!=null&&y(e,["functionCall"],K4(l));const c=p(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&y(e,["inlineData"],B4(d));const h=p(t,["text"]);h!=null&&y(e,["text"],h);const v=p(t,["thought"]);v!=null&&y(e,["thought"],v);const b=p(t,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=p(t,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function c3(t){const e={},n=p(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const i=p(t,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],X4(i)),e}function d3(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const a=p(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=p(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}const l=p(t,["googleMaps"]);l!=null&&y(e,["googleMaps"],t3(l));const c=p(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],n3(c));const d=p(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function f3(t){const e={},n=p(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const i=p(t,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(t,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const o=p(t,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const l=p(t,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(S=>Q4(S))),y(e,["functionDeclarations"],b)}const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const h=p(t,["googleSearchRetrieval"]);h!=null&&y(e,["googleSearchRetrieval"],h);const v=p(t,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function h3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=p(t,["expireTime"]);return e!==void 0&&a!=null&&y(e,["expireTime"],a),n}function p3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=p(t,["expireTime"]);return e!==void 0&&a!=null&&y(e,["expireTime"],a),n}function m3(t,e){const n={},i=p(e,["name"]);i!=null&&y(n,["_url","name"],ko(t,i));const a=p(e,["config"]);return a!=null&&h3(a,n),n}function g3(t,e){const n={},i=p(e,["name"]);i!=null&&y(n,["_url","name"],ko(t,i));const a=p(e,["config"]);return a!=null&&p3(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v3 extends Co{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _u(To.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=G4(this.apiClient,e);return c=lt("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>v)}else{const h=H4(this.apiClient,e);return c=lt("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>v)}}async get(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=e3(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>v)}else{const h=Z4(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>v)}}async delete(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=$4(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=Y4(v),S=new E1;return Object.assign(S,b),S})}else{const h=V4(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=J4(v),S=new E1;return Object.assign(S,b),S})}}async update(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=g3(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>v)}else{const h=m3(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>v)}}async listInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=a3(e);return c=lt("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=l3(v),S=new C1;return Object.assign(S,b),S})}else{const h=s3(e);return c=lt("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=o3(v),S=new C1;return Object.assign(S,b),S})}}}function mh(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function P1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(t){return this instanceof Bt?(this.v=t,this):new Bt(t)}function la(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(_){return function(T){return Promise.resolve(T).then(_,b)}}function c(_,T){i[_]&&(a[_]=function(k){return new Promise(function(I,C){o.push([_,k,I,C])>1||d(_,k)})},T&&(a[_]=T(a[_])))}function d(_,T){try{h(i[_](T))}catch(k){S(o[0][3],k)}}function h(_){_.value instanceof Bt?Promise.resolve(_.value.v).then(v,b):S(o[0][2],_)}function v(_){d("next",_)}function b(_){d("throw",_)}function S(_,T){_(T),o.shift(),o.length&&d(o[0][0],o[0][1])}}function ua(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof P1=="function"?P1(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,d){l=t[o](l),a(c,d,l.done,l.value)})}}function a(o,l,c,d){Promise.resolve(d).then(function(h){o({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y3(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:xb(n)}function xb(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function b3(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function U1(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const a=[];let o=!0;for(;i<n&&t[i].role==="model";)a.push(t[i]),o&&!xb(t[i])&&(o=!1),i++;o?e.push(...a):e.pop()}return e}class x3{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new w3(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class w3{constructor(e,n,i,a={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=a,this.history=o,this.sendPromise=Promise.resolve(),b3(o)}async sendMessage(e){var n;await this.sendPromise;const i=gr(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const d=await a,h=(l=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,v=d.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let S=[];v!=null&&(S=(c=v.slice(b))!==null&&c!==void 0?c:[]);const _=h?[h]:[];this.recordHistory(i,_,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var n;await this.sendPromise;const i=gr(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const o=await a;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?U1(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return la(this,arguments,function*(){var a,o,l,c,d,h;const v=[];try{for(var b=!0,S=ua(e),_;_=yield Bt(S.next()),a=_.done,!a;b=!0){c=_.value,b=!1;const T=c;if(y3(T)){const k=(h=(d=T.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content;k!==void 0&&v.push(k)}yield yield Bt(T)}}catch(T){o={error:T}}finally{try{!b&&!a&&(l=S.return)&&(yield Bt(l.call(S)))}finally{if(o)throw o.error}}this.recordHistory(n,v)})}recordHistory(e,n,i){let a=[];n.length>0&&n.every(o=>o.role!==void 0)?a=n:a.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...U1(i)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Nh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S3(t){const e={},n=p(t,["file"]);return n!=null&&y(e,["file"],n),e}function _3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function N3(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","file"],hb(n)),e}function A3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function T3(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","file"],hb(n)),e}function E3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function C3(t){const e={},n=p(t,["config"]);return n!=null&&E3(n,e),e}function k3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["files"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R3 extends Co{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _u(To.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=C3(e);return o=lt("files",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>{const h=k3(d),v=new MA;return Object.assign(v,h),v})}}async createInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=S3(e);return o=lt("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=_3(d),v=new PA;return Object.assign(v,h),v})}}async get(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=T3(e);return o=lt("files/{file}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async delete(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=N3(e);return o=lt("files/{file}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>{const h=A3(d),v=new UA;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rh(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function I3(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>J3(o))),y(e,["parts"],a)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function L3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function D3(t){const e={},n=p(t,["id"]);n!=null&&y(e,["id"],n);const i=p(t,["args"]);i!=null&&y(e,["args"],i);const a=p(t,["name"]);if(a!=null&&y(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function M3(t){const e={},n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const a=p(t,["parameters"]);a!=null&&y(e,["parameters"],a);const o=p(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);if(c!=null&&y(e,["responseJsonSchema"],c),p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function P3(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const a=p(t,["audioTimestamp"]);a!=null&&y(e,["audioTimestamp"],a);const o=p(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=p(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&y(e,["maxOutputTokens"],h);const v=p(t,["mediaResolution"]);v!=null&&y(e,["mediaResolution"],v);const b=p(t,["presencePenalty"]);b!=null&&y(e,["presencePenalty"],b);const S=p(t,["responseLogprobs"]);S!=null&&y(e,["responseLogprobs"],S);const _=p(t,["responseMimeType"]);_!=null&&y(e,["responseMimeType"],_);const T=p(t,["responseModalities"]);T!=null&&y(e,["responseModalities"],T);const k=p(t,["responseSchema"]);k!=null&&y(e,["responseSchema"],k);const I=p(t,["routingConfig"]);I!=null&&y(e,["routingConfig"],I);const C=p(t,["seed"]);C!=null&&y(e,["seed"],C);const R=p(t,["speechConfig"]);R!=null&&y(e,["speechConfig"],R);const L=p(t,["stopSequences"]);L!=null&&y(e,["stopSequences"],L);const O=p(t,["temperature"]);O!=null&&y(e,["temperature"],O);const z=p(t,["thinkingConfig"]);z!=null&&y(e,["thinkingConfig"],z);const W=p(t,["topK"]);W!=null&&y(e,["topK"],W);const B=p(t,["topP"]);if(B!=null&&y(e,["topP"],B),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function U3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function O3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function j3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const a=p(t,["responseModalities"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","responseModalities"],a);const o=p(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const v=p(t,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const b=p(t,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],ym(b));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const _=p(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],_);const T=p(t,["systemInstruction"]);e!==void 0&&T!=null&&y(e,["setup","systemInstruction"],I3(gr(T)));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let W=qc(k);Array.isArray(W)&&(W=W.map(B=>W3(Bc(B)))),y(e,["setup","tools"],W)}const I=p(t,["sessionResumption"]);e!==void 0&&I!=null&&y(e,["setup","sessionResumption"],Y3(I));const C=p(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&y(e,["setup","inputAudioTranscription"],C);const R=p(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&y(e,["setup","outputAudioTranscription"],R);const L=p(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&y(e,["setup","realtimeInputConfig"],L);const O=p(t,["contextWindowCompression"]);e!==void 0&&O!=null&&y(e,["setup","contextWindowCompression"],O);const z=p(t,["proactivity"]);if(e!==void 0&&z!=null&&y(e,["setup","proactivity"],z),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function F3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],P3(i));const a=p(t,["responseModalities"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","responseModalities"],a);const o=p(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const v=p(t,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const b=p(t,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],ym(b));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const _=p(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],_);const T=p(t,["systemInstruction"]);e!==void 0&&T!=null&&y(e,["setup","systemInstruction"],gr(T));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let B=qc(k);Array.isArray(B)&&(B=B.map(q=>K3(Bc(q)))),y(e,["setup","tools"],B)}const I=p(t,["sessionResumption"]);e!==void 0&&I!=null&&y(e,["setup","sessionResumption"],I);const C=p(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&y(e,["setup","inputAudioTranscription"],C);const R=p(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&y(e,["setup","outputAudioTranscription"],R);const L=p(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&y(e,["setup","realtimeInputConfig"],L);const O=p(t,["contextWindowCompression"]);e!==void 0&&O!=null&&y(e,["setup","contextWindowCompression"],O);const z=p(t,["proactivity"]);e!==void 0&&z!=null&&y(e,["setup","proactivity"],z);const W=p(t,["explicitVadSignal"]);return e!==void 0&&W!=null&&y(e,["setup","explicitVadSignal"],W),n}function B3(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],fn(t,i));const a=p(e,["config"]);return a!=null&&y(n,["config"],j3(a,n)),n}function q3(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],fn(t,i));const a=p(e,["config"]);return a!=null&&y(n,["config"],F3(a,n)),n}function z3(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function H3(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),y(e,["weightedPrompts"],i)}return e}function G3(t){const e={},n=p(t,["media"]);if(n!=null){let h=lb(n);Array.isArray(h)&&(h=h.map(v=>rh(v))),y(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&y(e,["audio"],rh(cb(i)));const a=p(t,["audioStreamEnd"]);a!=null&&y(e,["audioStreamEnd"],a);const o=p(t,["video"]);o!=null&&y(e,["video"],rh(ub(o)));const l=p(t,["text"]);l!=null&&y(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function V3(t){const e={},n=p(t,["media"]);if(n!=null){let h=lb(n);Array.isArray(h)&&(h=h.map(v=>v)),y(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&y(e,["audio"],cb(i));const a=p(t,["audioStreamEnd"]);a!=null&&y(e,["audioStreamEnd"],a);const o=p(t,["video"]);o!=null&&y(e,["video"],ub(o));const l=p(t,["text"]);l!=null&&y(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function $3(t){const e={},n=p(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const a=p(t,["toolCall"]);a!=null&&y(e,["toolCall"],a);const o=p(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const l=p(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],X3(l));const c=p(t,["goAway"]);c!=null&&y(e,["goAway"],c);const d=p(t,["sessionResumptionUpdate"]);d!=null&&y(e,["sessionResumptionUpdate"],d);const h=p(t,["voiceActivityDetectionSignal"]);return h!=null&&y(e,["voiceActivityDetectionSignal"],h),e}function J3(t){const e={},n=p(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=p(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const o=p(t,["fileData"]);o!=null&&y(e,["fileData"],L3(o));const l=p(t,["functionCall"]);l!=null&&y(e,["functionCall"],D3(l));const c=p(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&y(e,["inlineData"],rh(d));const h=p(t,["text"]);h!=null&&y(e,["text"],h);const v=p(t,["thought"]);v!=null&&y(e,["thought"],v);const b=p(t,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=p(t,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function Y3(t){const e={},n=p(t,["handle"]);if(n!=null&&y(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function W3(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const a=p(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=p(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}const l=p(t,["googleMaps"]);l!=null&&y(e,["googleMaps"],U3(l));const c=p(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],O3(c));const d=p(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function K3(t){const e={},n=p(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const i=p(t,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(t,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const o=p(t,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const l=p(t,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(S=>M3(S))),y(e,["functionDeclarations"],b)}const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const h=p(t,["googleSearchRetrieval"]);h!=null&&y(e,["googleSearchRetrieval"],h);const v=p(t,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function X3(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const a=p(t,["candidatesTokenCount"]);a!=null&&y(e,["responseTokenCount"],a);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const l=p(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=p(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const d=p(t,["promptTokensDetails"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(T=>T)),y(e,["promptTokensDetails"],_)}const h=p(t,["cacheTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(T=>T)),y(e,["cacheTokensDetails"],_)}const v=p(t,["candidatesTokensDetails"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),y(e,["responseTokensDetails"],_)}const b=p(t,["toolUsePromptTokensDetails"]);if(b!=null){let _=b;Array.isArray(_)&&(_=_.map(T=>T)),y(e,["toolUsePromptTokensDetails"],_)}const S=p(t,["trafficType"]);return S!=null&&y(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q3(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Z3(t){const e={},n=p(t,["content"]);n!=null&&y(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],eT(i));const a=p(t,["tokenCount"]);a!=null&&y(e,["tokenCount"],a);const o=p(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=p(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&y(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&y(e,["logprobsResult"],h);const v=p(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(_=>_)),y(e,["safetyRatings"],S)}const b=p(t,["urlContextMetadata"]);return b!=null&&y(e,["urlContextMetadata"],b),e}function eT(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),y(e,["citations"],i)}return e}function tT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let o=Ps(a);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["contents"],o)}return n}function nT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["tokensInfo"],a)}return e}function iT(t){const e={},n=p(t,["values"]);n!=null&&y(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&y(e,["statistics"],rT(i)),e}function rT(t){const e={},n=p(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function Ah(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>hE(o))),y(e,["parts"],a)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function sT(t){const e={},n=p(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function aT(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function oT(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],gr(i));const a=p(t,["tools"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Nb(c))),y(e,["tools"],l)}const o=p(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],QT(o)),n}function lT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let l=Ps(a);Array.isArray(l)&&(l=l.map(c=>Ah(c))),y(n,["contents"],l)}const o=p(e,["config"]);return o!=null&&aT(o),n}function uT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let l=Ps(a);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=p(e,["config"]);return o!=null&&oT(o,n),n}function cT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const a=p(t,["cachedContentTokenCount"]);return a!=null&&y(e,["cachedContentTokenCount"],a),e}function dT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function fT(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],fn(t,i)),n}function hT(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],fn(t,i)),n}function pT(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function mT(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function gT(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const a=p(t,["negativePrompt"]);e!==void 0&&a!=null&&y(e,["parameters","negativePrompt"],a);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const v=p(t,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const b=p(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&y(e,["parameters","includeSafetyAttributes"],b);const S=p(t,["includeRaiReason"]);e!==void 0&&S!=null&&y(e,["parameters","includeRaiReason"],S);const _=p(t,["language"]);e!==void 0&&_!=null&&y(e,["parameters","language"],_);const T=p(t,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const k=p(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&y(e,["parameters","outputOptions","compressionQuality"],k);const I=p(t,["addWatermark"]);e!==void 0&&I!=null&&y(e,["parameters","addWatermark"],I);const C=p(t,["labels"]);e!==void 0&&C!=null&&y(e,["labels"],C);const R=p(t,["editMode"]);e!==void 0&&R!=null&&y(e,["parameters","editMode"],R);const L=p(t,["baseSteps"]);return e!==void 0&&L!=null&&y(e,["parameters","editConfig","baseSteps"],L),n}function vT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const o=p(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>bE(d))),y(n,["instances[0]","referenceImages"],c)}const l=p(e,["config"]);return l!=null&&gT(l,n),n}function yT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Th(o))),y(e,["generatedImages"],a)}return e}function bT(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const a=p(t,["title"]);e!==void 0&&a!=null&&y(e,["requests[]","title"],a);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xT(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const a=p(t,["title"]);e!==void 0&&a!=null&&y(e,["instances[]","title"],a);const o=p(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const l=p(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function wT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let c=mm(t,a);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["requests[]","content"],c)}const o=p(e,["config"]);o!=null&&bT(o,n);const l=p(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],fn(t,l)),n}function ST(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let l=mm(t,a);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const o=p(e,["config"]);return o!=null&&xT(o,n),n}function _T(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["embeddings"],o)}const a=p(t,["metadata"]);return a!=null&&y(e,["metadata"],a),e}function NT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>iT(l))),y(e,["embeddings"],o)}const a=p(t,["metadata"]);return a!=null&&y(e,["metadata"],a),e}function AT(t){const e={},n=p(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function TT(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function ET(t){const e={},n=p(t,["id"]);n!=null&&y(e,["id"],n);const i=p(t,["args"]);i!=null&&y(e,["args"],i);const a=p(t,["name"]);if(a!=null&&y(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CT(t){const e={},n=p(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const i=p(t,["mode"]);if(i!=null&&y(e,["mode"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function kT(t){const e={},n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const a=p(t,["parameters"]);a!=null&&y(e,["parameters"],a);const o=p(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);if(c!=null&&y(e,["responseJsonSchema"],c),p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function RT(t,e,n){const i={},a=p(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],Ah(gr(a)));const o=p(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&y(i,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&y(i,["responseLogprobs"],b);const S=p(e,["logprobs"]);S!=null&&y(i,["logprobs"],S);const _=p(e,["presencePenalty"]);_!=null&&y(i,["presencePenalty"],_);const T=p(e,["frequencyPenalty"]);T!=null&&y(i,["frequencyPenalty"],T);const k=p(e,["seed"]);k!=null&&y(i,["seed"],k);const I=p(e,["responseMimeType"]);I!=null&&y(i,["responseMimeType"],I);const C=p(e,["responseSchema"]);C!=null&&y(i,["responseSchema"],gm(C));const R=p(e,["responseJsonSchema"]);if(R!=null&&y(i,["responseJsonSchema"],R),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=p(e,["safetySettings"]);if(n!==void 0&&L!=null){let ne=L;Array.isArray(ne)&&(ne=ne.map(ie=>xE(ie))),y(n,["safetySettings"],ne)}const O=p(e,["tools"]);if(n!==void 0&&O!=null){let ne=qc(O);Array.isArray(ne)&&(ne=ne.map(ie=>EE(Bc(ie)))),y(n,["tools"],ne)}const z=p(e,["toolConfig"]);if(n!==void 0&&z!=null&&y(n,["toolConfig"],TE(z)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=p(e,["cachedContent"]);n!==void 0&&W!=null&&y(n,["cachedContent"],ko(t,W));const B=p(e,["responseModalities"]);B!=null&&y(i,["responseModalities"],B);const q=p(e,["mediaResolution"]);q!=null&&y(i,["mediaResolution"],q);const ee=p(e,["speechConfig"]);if(ee!=null&&y(i,["speechConfig"],vm(ee)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=p(e,["thinkingConfig"]);ue!=null&&y(i,["thinkingConfig"],ue);const F=p(e,["imageConfig"]);F!=null&&y(i,["imageConfig"],iE(F));const j=p(e,["enableEnhancedCivicAnswers"]);return j!=null&&y(i,["enableEnhancedCivicAnswers"],j),i}function IT(t,e,n){const i={},a=p(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],gr(a));const o=p(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&y(i,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&y(i,["responseLogprobs"],b);const S=p(e,["logprobs"]);S!=null&&y(i,["logprobs"],S);const _=p(e,["presencePenalty"]);_!=null&&y(i,["presencePenalty"],_);const T=p(e,["frequencyPenalty"]);T!=null&&y(i,["frequencyPenalty"],T);const k=p(e,["seed"]);k!=null&&y(i,["seed"],k);const I=p(e,["responseMimeType"]);I!=null&&y(i,["responseMimeType"],I);const C=p(e,["responseSchema"]);C!=null&&y(i,["responseSchema"],gm(C));const R=p(e,["responseJsonSchema"]);R!=null&&y(i,["responseJsonSchema"],R);const L=p(e,["routingConfig"]);L!=null&&y(i,["routingConfig"],L);const O=p(e,["modelSelectionConfig"]);O!=null&&y(i,["modelConfig"],O);const z=p(e,["safetySettings"]);if(n!==void 0&&z!=null){let U=z;Array.isArray(U)&&(U=U.map($=>$)),y(n,["safetySettings"],U)}const W=p(e,["tools"]);if(n!==void 0&&W!=null){let U=qc(W);Array.isArray(U)&&(U=U.map($=>Nb(Bc($)))),y(n,["tools"],U)}const B=p(e,["toolConfig"]);n!==void 0&&B!=null&&y(n,["toolConfig"],B);const q=p(e,["labels"]);n!==void 0&&q!=null&&y(n,["labels"],q);const ee=p(e,["cachedContent"]);n!==void 0&&ee!=null&&y(n,["cachedContent"],ko(t,ee));const ue=p(e,["responseModalities"]);ue!=null&&y(i,["responseModalities"],ue);const F=p(e,["mediaResolution"]);F!=null&&y(i,["mediaResolution"],F);const j=p(e,["speechConfig"]);j!=null&&y(i,["speechConfig"],vm(j));const ne=p(e,["audioTimestamp"]);ne!=null&&y(i,["audioTimestamp"],ne);const ie=p(e,["thinkingConfig"]);ie!=null&&y(i,["thinkingConfig"],ie);const be=p(e,["imageConfig"]);if(be!=null&&y(i,["imageConfig"],rE(be)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function O1(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let l=Ps(a);Array.isArray(l)&&(l=l.map(c=>Ah(c))),y(n,["contents"],l)}const o=p(e,["config"]);return o!=null&&y(n,["generationConfig"],RT(t,o,n)),n}function j1(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let l=Ps(a);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=p(e,["config"]);return o!=null&&y(n,["generationConfig"],IT(t,o,n)),n}function F1(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>Z3(h))),y(e,["candidates"],d)}const a=p(t,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const o=p(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=p(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function B1(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),y(e,["candidates"],h)}const a=p(t,["createTime"]);a!=null&&y(e,["createTime"],a);const o=p(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=p(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=p(t,["responseId"]);c!=null&&y(e,["responseId"],c);const d=p(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function LT(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const o=p(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const d=p(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&y(e,["parameters","includeSafetyAttributes"],d);const h=p(t,["includeRaiReason"]);e!==void 0&&h!=null&&y(e,["parameters","includeRaiReason"],h);const v=p(t,["language"]);e!==void 0&&v!=null&&y(e,["parameters","language"],v);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","mimeType"],b);const S=p(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&y(e,["parameters","outputOptions","compressionQuality"],S),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=p(t,["imageSize"]);if(e!==void 0&&_!=null&&y(e,["parameters","sampleImageSize"],_),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function DT(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const a=p(t,["negativePrompt"]);e!==void 0&&a!=null&&y(e,["parameters","negativePrompt"],a);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const v=p(t,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const b=p(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&y(e,["parameters","includeSafetyAttributes"],b);const S=p(t,["includeRaiReason"]);e!==void 0&&S!=null&&y(e,["parameters","includeRaiReason"],S);const _=p(t,["language"]);e!==void 0&&_!=null&&y(e,["parameters","language"],_);const T=p(t,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const k=p(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&y(e,["parameters","outputOptions","compressionQuality"],k);const I=p(t,["addWatermark"]);e!==void 0&&I!=null&&y(e,["parameters","addWatermark"],I);const C=p(t,["labels"]);e!==void 0&&C!=null&&y(e,["labels"],C);const R=p(t,["imageSize"]);e!==void 0&&R!=null&&y(e,["parameters","sampleImageSize"],R);const L=p(t,["enhancePrompt"]);return e!==void 0&&L!=null&&y(e,["parameters","enhancePrompt"],L),n}function MT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const o=p(e,["config"]);return o!=null&&LT(o,n),n}function PT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const o=p(e,["config"]);return o!=null&&DT(o,n),n}function UT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>YT(l))),y(e,["generatedImages"],o)}const a=p(t,["positivePromptSafetyAttributes"]);return a!=null&&y(e,["positivePromptSafetyAttributes"],Sb(a)),e}function OT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Th(l))),y(e,["generatedImages"],o)}const a=p(t,["positivePromptSafetyAttributes"]);return a!=null&&y(e,["positivePromptSafetyAttributes"],_b(a)),e}function jT(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=p(t,["durationSeconds"]);if(e!==void 0&&a!=null&&y(e,["parameters","durationSeconds"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=p(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=p(t,["negativePrompt"]);e!==void 0&&d!=null&&y(e,["parameters","negativePrompt"],d);const h=p(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&y(e,["parameters","enhancePrompt"],h),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=p(t,["lastFrame"]);e!==void 0&&v!=null&&y(e,["instances[0]","lastFrame"],Eh(v));const b=p(t,["referenceImages"]);if(e!==void 0&&b!=null){let S=b;Array.isArray(S)&&(S=S.map(_=>BE(_))),y(e,["instances[0]","referenceImages"],S)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function FT(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&y(e,["parameters","storageUri"],a);const o=p(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const l=p(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const d=p(t,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const h=p(t,["resolution"]);e!==void 0&&h!=null&&y(e,["parameters","resolution"],h);const v=p(t,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const b=p(t,["pubsubTopic"]);e!==void 0&&b!=null&&y(e,["parameters","pubsubTopic"],b);const S=p(t,["negativePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","negativePrompt"],S);const _=p(t,["enhancePrompt"]);e!==void 0&&_!=null&&y(e,["parameters","enhancePrompt"],_);const T=p(t,["generateAudio"]);e!==void 0&&T!=null&&y(e,["parameters","generateAudio"],T);const k=p(t,["lastFrame"]);e!==void 0&&k!=null&&y(e,["instances[0]","lastFrame"],ca(k));const I=p(t,["referenceImages"]);if(e!==void 0&&I!=null){let L=I;Array.isArray(L)&&(L=L.map(O=>qE(O))),y(e,["instances[0]","referenceImages"],L)}const C=p(t,["mask"]);e!==void 0&&C!=null&&y(e,["instances[0]","mask"],FE(C));const R=p(t,["compressionQuality"]);return e!==void 0&&R!=null&&y(e,["parameters","compressionQuality"],R),n}function BT(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],GT(l)),e}function qT(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response"]);return l!=null&&y(e,["response"],VT(l)),e}function zT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const o=p(e,["image"]);o!=null&&y(n,["instances[0]","image"],Eh(o));const l=p(e,["video"]);l!=null&&y(n,["instances[0]","video"],Ab(l));const c=p(e,["source"]);c!=null&&$T(c,n);const d=p(e,["config"]);return d!=null&&jT(d,n),n}function HT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const o=p(e,["image"]);o!=null&&y(n,["instances[0]","image"],ca(o));const l=p(e,["video"]);l!=null&&y(n,["instances[0]","video"],Tb(l));const c=p(e,["source"]);c!=null&&JT(c,n);const d=p(e,["config"]);return d!=null&&FT(d,n),n}function GT(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>KT(l))),y(e,["generatedVideos"],o)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function VT(t){const e={},n=p(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>XT(l))),y(e,["generatedVideos"],o)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function $T(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=p(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],Eh(a));const o=p(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],Ab(o)),n}function JT(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=p(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],ca(a));const o=p(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],Tb(o)),n}function YT(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["image"],sE(n));const i=p(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const a=p(t,["_self"]);return a!=null&&y(e,["safetyAttributes"],Sb(a)),e}function Th(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["image"],wb(n));const i=p(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const a=p(t,["_self"]);a!=null&&y(e,["safetyAttributes"],_b(a));const o=p(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function WT(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["mask"],wb(n));const i=p(t,["labels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["labels"],a)}return e}function KT(t){const e={},n=p(t,["video"]);return n!=null&&y(e,["video"],OE(n)),e}function XT(t){const e={},n=p(t,["_self"]);return n!=null&&y(e,["video"],jE(n)),e}function QT(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const a=p(t,["audioTimestamp"]);a!=null&&y(e,["audioTimestamp"],a);const o=p(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=p(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&y(e,["maxOutputTokens"],h);const v=p(t,["mediaResolution"]);v!=null&&y(e,["mediaResolution"],v);const b=p(t,["presencePenalty"]);b!=null&&y(e,["presencePenalty"],b);const S=p(t,["responseLogprobs"]);S!=null&&y(e,["responseLogprobs"],S);const _=p(t,["responseMimeType"]);_!=null&&y(e,["responseMimeType"],_);const T=p(t,["responseModalities"]);T!=null&&y(e,["responseModalities"],T);const k=p(t,["responseSchema"]);k!=null&&y(e,["responseSchema"],k);const I=p(t,["routingConfig"]);I!=null&&y(e,["routingConfig"],I);const C=p(t,["seed"]);C!=null&&y(e,["seed"],C);const R=p(t,["speechConfig"]);R!=null&&y(e,["speechConfig"],R);const L=p(t,["stopSequences"]);L!=null&&y(e,["stopSequences"],L);const O=p(t,["temperature"]);O!=null&&y(e,["temperature"],O);const z=p(t,["thinkingConfig"]);z!=null&&y(e,["thinkingConfig"],z);const W=p(t,["topK"]);W!=null&&y(e,["topK"],W);const B=p(t,["topP"]);if(B!=null&&y(e,["topP"],B),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ZT(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],fn(t,i)),n}function eE(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],fn(t,i)),n}function tE(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function nE(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function iE(t){const e={},n=p(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),p(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function rE(t){const e={},n=p(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=p(t,["imageSize"]);i!=null&&y(e,["imageSize"],i);const a=p(t,["personGeneration"]);a!=null&&y(e,["personGeneration"],a);const o=p(t,["outputMimeType"]);o!=null&&y(e,["imageOutputOptions","mimeType"],o);const l=p(t,["outputCompressionQuality"]);return l!=null&&y(e,["imageOutputOptions","compressionQuality"],l),e}function sE(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],Rl(n));const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function wb(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],Rl(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function Eh(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],Rl(n));const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function ca(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],Rl(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function aE(t,e,n){const i={},a=p(e,["pageSize"]);n!==void 0&&a!=null&&y(n,["_query","pageSize"],a);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=p(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],pb(t,c)),i}function oE(t,e,n){const i={},a=p(e,["pageSize"]);n!==void 0&&a!=null&&y(n,["_query","pageSize"],a);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=p(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],pb(t,c)),i}function lE(t,e){const n={},i=p(e,["config"]);return i!=null&&aE(t,i,n),n}function uE(t,e){const n={},i=p(e,["config"]);return i!=null&&oE(t,i,n),n}function cE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["_self"]);if(a!=null){let o=mb(a);Array.isArray(o)&&(o=o.map(l=>P0(l))),y(e,["models"],o)}return e}function dE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["_self"]);if(a!=null){let o=mb(a);Array.isArray(o)&&(o=o.map(l=>U0(l))),y(e,["models"],o)}return e}function fE(t){const e={},n=p(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const a=p(t,["maskDilation"]);return a!=null&&y(e,["dilation"],a),e}function P0(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const a=p(t,["description"]);a!=null&&y(e,["description"],a);const o=p(t,["version"]);o!=null&&y(e,["version"],o);const l=p(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],CE(l));const c=p(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const d=p(t,["outputTokenLimit"]);d!=null&&y(e,["outputTokenLimit"],d);const h=p(t,["supportedGenerationMethods"]);h!=null&&y(e,["supportedActions"],h);const v=p(t,["temperature"]);v!=null&&y(e,["temperature"],v);const b=p(t,["maxTemperature"]);b!=null&&y(e,["maxTemperature"],b);const S=p(t,["topP"]);S!=null&&y(e,["topP"],S);const _=p(t,["topK"]);_!=null&&y(e,["topK"],_);const T=p(t,["thinking"]);return T!=null&&y(e,["thinking"],T),e}function U0(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const a=p(t,["description"]);a!=null&&y(e,["description"],a);const o=p(t,["versionId"]);o!=null&&y(e,["version"],o);const l=p(t,["deployedModels"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(S=>AT(S))),y(e,["endpoints"],b)}const c=p(t,["labels"]);c!=null&&y(e,["labels"],c);const d=p(t,["_self"]);d!=null&&y(e,["tunedModelInfo"],kE(d));const h=p(t,["defaultCheckpointId"]);h!=null&&y(e,["defaultCheckpointId"],h);const v=p(t,["checkpoints"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(S=>S)),y(e,["checkpoints"],b)}return e}function hE(t){const e={},n=p(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=p(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const o=p(t,["fileData"]);o!=null&&y(e,["fileData"],TT(o));const l=p(t,["functionCall"]);l!=null&&y(e,["functionCall"],ET(l));const c=p(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&y(e,["inlineData"],Q3(d));const h=p(t,["text"]);h!=null&&y(e,["text"],h);const v=p(t,["thought"]);v!=null&&y(e,["thought"],v);const b=p(t,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=p(t,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function pE(t){const e={},n=p(t,["productImage"]);return n!=null&&y(e,["image"],ca(n)),e}function mE(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const a=p(t,["baseSteps"]);e!==void 0&&a!=null&&y(e,["parameters","baseSteps"],a);const o=p(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=p(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const h=p(t,["addWatermark"]);e!==void 0&&h!=null&&y(e,["parameters","addWatermark"],h);const v=p(t,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const b=p(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","compressionQuality"],b);const S=p(t,["enhancePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","enhancePrompt"],S);const _=p(t,["labels"]);return e!==void 0&&_!=null&&y(e,["labels"],_),n}function gE(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["source"]);a!=null&&yE(a,n);const o=p(e,["config"]);return o!=null&&mE(o,n),n}function vE(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Th(a))),y(e,["generatedImages"],i)}return e}function yE(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=p(t,["personImage"]);e!==void 0&&a!=null&&y(e,["instances[0]","personImage","image"],ca(a));const o=p(t,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>pE(c))),y(e,["instances[0]","productImages"],l)}return n}function bE(t){const e={},n=p(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],ca(n));const i=p(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const a=p(t,["referenceType"]);a!=null&&y(e,["referenceType"],a);const o=p(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],fE(o));const l=p(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],sT(l));const c=p(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const d=p(t,["subjectImageConfig"]);return d!=null&&y(e,["subjectImageConfig"],d),e}function Sb(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const a=p(t,["contentType"]);return a!=null&&y(e,["contentType"],a),e}function _b(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const a=p(t,["contentType"]);return a!=null&&y(e,["contentType"],a),e}function xE(t){const e={},n=p(t,["category"]);if(n!=null&&y(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function wE(t){const e={},n=p(t,["image"]);return n!=null&&y(e,["image"],ca(n)),e}function SE(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const a=p(t,["maxPredictions"]);e!==void 0&&a!=null&&y(e,["parameters","maxPredictions"],a);const o=p(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const l=p(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const d=p(t,["labels"]);return e!==void 0&&d!=null&&y(e,["labels"],d),n}function _E(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["source"]);a!=null&&AE(a,n);const o=p(e,["config"]);return o!=null&&SE(o,n),n}function NE(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>WT(a))),y(e,["generatedMasks"],i)}return e}function AE(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=p(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],ca(a));const o=p(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],wE(o)),n}function TE(t){const e={},n=p(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const i=p(t,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],CT(i)),e}function EE(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const a=p(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=p(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}const l=p(t,["googleMaps"]);l!=null&&y(e,["googleMaps"],tE(l));const c=p(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],nE(c));const d=p(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function Nb(t){const e={},n=p(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const i=p(t,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(t,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const o=p(t,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const l=p(t,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(S=>kT(S))),y(e,["functionDeclarations"],b)}const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const h=p(t,["googleSearchRetrieval"]);h!=null&&y(e,["googleSearchRetrieval"],h);const v=p(t,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function CE(t){const e={},n=p(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&y(e,["createTime"],i);const a=p(t,["updateTime"]);return a!=null&&y(e,["updateTime"],a),e}function kE(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&y(e,["createTime"],i);const a=p(t,["updateTime"]);return a!=null&&y(e,["updateTime"],a),e}function RE(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const a=p(t,["description"]);e!==void 0&&a!=null&&y(e,["description"],a);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function IE(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const a=p(t,["description"]);e!==void 0&&a!=null&&y(e,["description"],a);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function LE(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","name"],fn(t,i));const a=p(e,["config"]);return a!=null&&RE(a,n),n}function DE(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["config"]);return a!=null&&IE(a,n),n}function ME(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const a=p(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&y(e,["parameters","safetySetting"],a);const o=p(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const l=p(t,["includeRaiReason"]);e!==void 0&&l!=null&&y(e,["parameters","includeRaiReason"],l);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","mimeType"],c);const d=p(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","compressionQuality"],d);const h=p(t,["enhanceInputImage"]);e!==void 0&&h!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],h);const v=p(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const b=p(t,["labels"]);e!==void 0&&b!=null&&y(e,["labels"],b);const S=p(t,["numberOfImages"]);e!==void 0&&S!=null&&y(e,["parameters","sampleCount"],S);const _=p(t,["mode"]);return e!==void 0&&_!=null&&y(e,["parameters","mode"],_),n}function PE(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["image"]);a!=null&&y(n,["instances[0]","image"],ca(a));const o=p(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=p(e,["config"]);return l!=null&&ME(l,n),n}function UE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Th(o))),y(e,["generatedImages"],a)}return e}function OE(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],Rl(i));const a=p(t,["encoding"]);return a!=null&&y(e,["mimeType"],a),e}function jE(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],Rl(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function FE(t){const e={},n=p(t,["image"]);n!=null&&y(e,["_self"],ca(n));const i=p(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function BE(t){const e={},n=p(t,["image"]);n!=null&&y(e,["image"],Eh(n));const i=p(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function qE(t){const e={},n=p(t,["image"]);n!=null&&y(e,["image"],ca(n));const i=p(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function Ab(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],Rl(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["encoding"],a),e}function Tb(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],Rl(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zE(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function HE(t){const e={},n=p(t,["config"]);return n!=null&&zE(n,e),e}function GE(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function VE(t){const e={},n=p(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&GE(i,e),e}function $E(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function JE(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["customMetadata"],o)}const a=p(t,["chunkingConfig"]);return e!==void 0&&a!=null&&y(e,["chunkingConfig"],a),n}function YE(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response"]);return l!=null&&y(e,["response"],KE(l)),e}function WE(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&y(e,["fileName"],i);const a=p(t,["config"]);return a!=null&&JE(a,e),e}function KE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const a=p(t,["documentName"]);return a!=null&&y(e,["documentName"],a),e}function XE(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function QE(t){const e={},n=p(t,["config"]);return n!=null&&XE(n,e),e}function ZE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["fileSearchStores"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["fileSearchStores"],o)}return e}function Eb(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const a=p(t,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const o=p(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["customMetadata"],c)}const l=p(t,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),n}function eC(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&Eb(i,e),e}function tC(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nC="Content-Type",iC="X-Server-Timeout",rC="User-Agent",O0="x-goog-api-client",sC="1.35.0",aC=`google-genai-sdk/${sC}`,oC="v1beta1",lC="v1beta";class uC{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:oC,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:lC,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const a=[this.getRequestUrlInternal(n)];return i&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))a.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,a.toString(),e.abortSignal),this.unaryApiCall(a,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[a,o]of Object.entries(n))typeof o=="object"?i[a]=Object.assign(Object.assign({},i[a]),o):o!==void 0&&(i[a]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,i);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,a.toString(),e.abortSignal),this.streamApiCall(a,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,a){if(n&&n.timeout||a){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}a&&a.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&cC(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await q1(a),new L0(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await q1(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return la(this,arguments,function*(){var i;const a=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let l="";const c="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield Bt(a.read());if(h){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=o.decode(v,{stream:!0});try{const T=JSON.parse(b);if("error"in T){const k=JSON.parse(JSON.stringify(T.error)),I=k.status,C=k.code,R=`got status: ${I}. ${JSON.stringify(T)}`;if(C>=400&&C<600)throw new Nh({message:R,status:C})}}catch(T){if(T.name==="ApiError")throw T}l+=b;let S=-1,_=0;for(;;){S=-1,_=0;for(const I of d){const C=l.indexOf(I);C!==-1&&(S===-1||C<S)&&(S=C,_=I.length)}if(S===-1)break;const T=l.substring(0,S);l=l.substring(S+_);const k=T.trim();if(k.startsWith(c)){const I=k.substring(c.length).trim();try{const C=new Response(I,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Bt(new L0(C))}catch(C){throw new Error(`exception parsing stream chunk ${I}. ${C}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=aC+" "+this.clientOptions.userAgentExtra;return e[rC]=n,e[O0]=n,e[nC]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[a,o]of Object.entries(e.headers))i.append(a,o);e.timeout&&e.timeout>0&&i.append(iC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);a.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=c;const d={file:a},h=this.getFileName(e),v=lt("upload/v1beta/files",d._url),b=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,h,d,n==null?void 0:n.httpOptions);return o.upload(e,b,this)}async uploadFileToFileSearchStore(e,n,i){var a;const o=this.clientOptions.uploader,l=await o.stat(n),c=String(l.size),d=(a=i==null?void 0:i.mimeType)!==null&&a!==void 0?a:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),b={};i!=null&&Eb(i,b);const S=await this.fetchUploadUrl(h,c,d,v,b,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,a,o,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},a?{"X-Goog-Upload-File-Name":a}:{})};const h=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function q1(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(i);throw n>=400&&n<600?new Nh({message:a,status:n}):new Error(a)}}function cC(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const h=l[d],v=c[d];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?c[d]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),c[d]=h)}return c}const a=i(n,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dC="mcp_used/unknown";let fC=!1;function Cb(t){for(const e of t)if(hC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return fC}function kb(t){var e;const n=(e=t[O0])!==null&&e!==void 0?e:"";t[O0]=(n+` ${dC}`).trimStart()}function hC(t){return t!==null&&typeof t=="object"&&t instanceof bm}function pC(t){return la(this,arguments,function*(n,i=100){let a,o=0;for(;o<i;){const l=yield Bt(n.listTools({cursor:a}));for(const c of l.tools)yield yield Bt(c),o++;if(!l.nextCursor)break;a=l.nextCursor}})}class bm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new bm(e,n)}async initialize(){var e,n,i,a;if(this.mcpTools.length>0)return;const o={},l=[];for(const v of this.mcpClients)try{for(var c=!0,d=(n=void 0,ua(pC(v))),h;h=await d.next(),e=h.done,!e;c=!0){a=h.value,c=!1;const b=a;l.push(b);const S=b.name;if(o[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);o[S]=v}}catch(b){n={error:b}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),$A(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await a.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mC(t,e,n){const i=new jA;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(i,a),e(i)}class gC{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=bC(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${a}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const v=new Promise(L=>{h=L}),b=e.callbacks,S=function(){h({})},_=this.apiClient,T={onopen:S,onmessage:L=>{mC(_,b.onmessage,L)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(L){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(L){}},k=this.webSocketFactory.create(d,yC(l),T);k.connect(),await v;const R={setup:{model:fn(this.apiClient,e.model)}};return k.send(JSON.stringify(R)),new vC(k,this.apiClient)}}class vC{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=H3(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=z3(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Lc.PLAY)}pause(){this.sendPlaybackControl(Lc.PAUSE)}stop(){this.sendPlaybackControl(Lc.STOP)}resetContext(){this.sendPlaybackControl(Lc.RESET_CONTEXT)}close(){this.conn.close()}}function yC(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function bC(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function wC(t,e,n){const i=new OA;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const o=JSON.parse(a);if(t.isVertexAI()){const l=$3(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class SC{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new gC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,a,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&Cb(e.config.tools)&&kb(b);const S=TC(b);if(this.apiClient.isVertexAI())v=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const ee=this.apiClient.getApiKey();let ue="BidiGenerateContent",F="key";ee!=null&&ee.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ue="BidiGenerateContentConstrained",F="access_token"),v=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ue}?${F}=${ee}`}let _=()=>{};const T=new Promise(ee=>{_=ee}),k=e.callbacks,I=function(){var ee;(ee=k==null?void 0:k.onopen)===null||ee===void 0||ee.call(k),_({})},C=this.apiClient,R={onopen:I,onmessage:ee=>{wC(C,k.onmessage,ee)},onerror:(n=k==null?void 0:k.onerror)!==null&&n!==void 0?n:function(ee){},onclose:(i=k==null?void 0:k.onclose)!==null&&i!==void 0?i:function(ee){}},L=this.webSocketFactory.create(v,AC(S),R);L.connect(),await T;let O=fn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const ee=this.apiClient.getProject(),ue=this.apiClient.getLocation();O=`projects/${ee}/locations/${ue}/`+O}let z={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[fh.AUDIO]}:e.config.responseModalities=[fh.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],B=[];for(const ee of W)if(this.isCallableTool(ee)){const ue=ee;B.push(await ue.tool())}else B.push(ee);B.length>0&&(e.config.tools=B);const q={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=q3(this.apiClient,q):z=B3(this.apiClient,q),delete z.config,L.send(JSON.stringify(z)),new NC(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const _C={turnComplete:!0};class NC{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Ps(n.turns),e.isVertexAI()||(i=i.map(a=>Ah(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(xC)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},_C),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:V3(e)}:n={realtimeInput:G3(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function AC(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function TC(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z1=10;function H1(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Oc(l)){a=!0;break}if(!a)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Oc(t){return"callTool"in t&&typeof t.callTool=="function"}function EC(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>Oc(a)))!==null&&i!==void 0?i:!1}function G1(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,a)=>{if(Oc(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(a)}),n}function V1(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CC extends Co{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,a,o,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!EC(n)||H1(n.config))return await this.generateContentInternal(d);const h=G1(n);if(h.length>0){const k=h.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let v,b;const S=Ps(d.contents),_=(o=(a=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&o!==void 0?o:z1;let T=0;for(;T<_&&(v=await this.generateContentInternal(d),!(!v.functionCalls||v.functionCalls.length===0));){const k=v.candidates[0].content,I=[];for(const C of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Oc(C)){const L=await C.callTool(v.functionCalls);I.push(...L)}T++,b={role:"user",parts:I},d.contents=Ps(d.contents),d.contents.push(k),d.contents.push(b),V1(d.config)&&(S.push(k),S.push(b))}return V1(d.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async n=>{var i,a,o,l,c;if(this.maybeMoveToResponseJsonSchem(n),H1(n.config)){const b=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(b)}const d=G1(n);if(d.length>0){const b=d.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(o=(a=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,v=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var a;let o;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((a=d==null?void 0:d.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:l.push(d);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new _u(To.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var i,a,o,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,a;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const l=await Promise.all(o.map(async d=>Oc(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&Cb(e.config.tools)){const d=(a=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&a!==void 0?a:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),kb(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var n,i,a;const o=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Oc(l)){const c=l,d=await c.tool();for(const h of(a=d.functionDeclarations)!==null&&a!==void 0?a:[]){if(!h.name)throw new Error("Function declaration name is required.");if(o.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);o.set(h.name,c)}}return o}async processAfcStream(e){var n,i,a;const o=(a=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:z1;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(h,v,b){return la(this,arguments,function*(){for(var S,_,T,k,I,C;c<o;){l&&(c++,l=!1);const z=yield Bt(h.processParamsMaybeAddMcpUsage(b)),W=yield Bt(h.generateContentStreamInternal(z)),B=[],q=[];try{for(var R=!0,L=(_=void 0,ua(W)),O;O=yield Bt(L.next()),S=O.done,!S;R=!0){k=O.value,R=!1;const ee=k;if(yield yield Bt(ee),ee.candidates&&(!((I=ee.candidates[0])===null||I===void 0)&&I.content)){q.push(ee.candidates[0].content);for(const ue of(C=ee.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(c<o&&ue.functionCall){if(!ue.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ue.functionCall.name)){const F=yield Bt(v.get(ue.functionCall.name).callTool([ue.functionCall]));B.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ue.functionCall.name}`)}}}}catch(ee){_={error:ee}}finally{try{!R&&!S&&(T=L.return)&&(yield Bt(T.call(L)))}finally{if(_)throw _.error}}if(B.length>0){l=!0;const ee=new Cd;ee.candidates=[{content:{role:"user",parts:B}}],yield yield Bt(ee);const ue=[];ue.push(...q),ue.push({role:"user",parts:B});const F=Ps(b.contents).concat(ue);b.contents=F}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=j1(this.apiClient,e);return c=lt("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=B1(v),S=new Cd;return Object.assign(S,b),S})}else{const h=O1(this.apiClient,e);return c=lt("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=F1(v),S=new Cd;return Object.assign(S,b),S})}}async generateContentStreamInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=j1(this.apiClient,e);return c=lt("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(b){return la(this,arguments,function*(){var S,_,T,k;try{for(var I=!0,C=ua(b),R;R=yield Bt(C.next()),S=R.done,!S;I=!0){k=R.value,I=!1;const L=k,O=B1(yield Bt(L.json()));O.sdkHttpResponse={headers:L.headers};const z=new Cd;Object.assign(z,O),yield yield Bt(z)}}catch(L){_={error:L}}finally{try{!I&&!S&&(T=C.return)&&(yield Bt(T.call(C)))}finally{if(_)throw _.error}}})})}else{const h=O1(this.apiClient,e);return c=lt("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(b){return la(this,arguments,function*(){var S,_,T,k;try{for(var I=!0,C=ua(b),R;R=yield Bt(C.next()),S=R.done,!S;I=!0){k=R.value,I=!1;const L=k,O=F1(yield Bt(L.json()));O.sdkHttpResponse={headers:L.headers};const z=new Cd;Object.assign(z,O),yield yield Bt(z)}}catch(L){_={error:L}}finally{try{!I&&!S&&(T=C.return)&&(yield Bt(T.call(C)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=ST(this.apiClient,e);return c=lt("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=NT(v),S=new x1;return Object.assign(S,b),S})}else{const h=wT(this.apiClient,e);return c=lt("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=_T(v),S=new x1;return Object.assign(S,b),S})}}async generateImagesInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=PT(this.apiClient,e);return c=lt("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=OT(v),S=new w1;return Object.assign(S,b),S})}else{const h=MT(this.apiClient,e);return c=lt("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=UT(v),S=new w1;return Object.assign(S,b),S})}}async editImageInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=vT(this.apiClient,e);return o=lt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>{const h=yT(d),v=new TA;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=PE(this.apiClient,e);return o=lt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>{const h=UE(d),v=new EA;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=gE(this.apiClient,e);return o=lt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=vE(d),v=new CA;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=_E(this.apiClient,e);return o=lt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=NE(d),v=new kA;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=eE(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>U0(v))}else{const h=ZT(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>P0(v))}}async listInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=uE(this.apiClient,e);return c=lt("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=dE(v),S=new S1;return Object.assign(S,b),S})}else{const h=lE(this.apiClient,e);return c=lt("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=cE(v),S=new S1;return Object.assign(S,b),S})}}async update(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=DE(this.apiClient,e);return c=lt("{model}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>U0(v))}else{const h=LE(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>P0(v))}}async delete(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=hT(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=mT(v),S=new _1;return Object.assign(S,b),S})}else{const h=fT(this.apiClient,e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=pT(v),S=new _1;return Object.assign(S,b),S})}}async countTokens(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=uT(this.apiClient,e);return c=lt("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=dT(v),S=new N1;return Object.assign(S,b),S})}else{const h=lT(this.apiClient,e);return c=lt("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=cT(v),S=new N1;return Object.assign(S,b),S})}}async computeTokens(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=tT(this.apiClient,e);return o=lt("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>{const h=nT(d),v=new RA;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=HT(this.apiClient,e);return c=lt("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>{const b=qT(v),S=new hh;return Object.assign(S,b),S})}else{const h=zT(this.apiClient,e);return c=lt("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>{const b=BT(v),S=new hh;return Object.assign(S,b),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kC extends Co{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=xA(e);return c=lt("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l}else{const h=bA(e);return c=lt("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=fA(e);return o=lt("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RC(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function IC(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>BC(o))),y(e,["parts"],a)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function LC(t,e,n){const i={},a=p(e,["expireTime"]);n!==void 0&&a!=null&&y(n,["expireTime"],a);const o=p(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const l=p(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],FC(t,c));const d=p(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&y(n,["fieldMask"],d),i}function DC(t,e){const n={},i=p(e,["config"]);return i!=null&&y(n,["config"],LC(t,i,n)),n}function MC(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function PC(t){const e={},n=p(t,["id"]);n!=null&&y(e,["id"],n);const i=p(t,["args"]);i!=null&&y(e,["args"],i);const a=p(t,["name"]);if(a!=null&&y(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function UC(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function OC(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function jC(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const a=p(t,["responseModalities"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","responseModalities"],a);const o=p(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const v=p(t,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const b=p(t,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],ym(b));const S=p(t,["thinkingConfig"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","thinkingConfig"],S);const _=p(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],_);const T=p(t,["systemInstruction"]);e!==void 0&&T!=null&&y(e,["setup","systemInstruction"],IC(gr(T)));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let W=qc(k);Array.isArray(W)&&(W=W.map(B=>zC(Bc(B)))),y(e,["setup","tools"],W)}const I=p(t,["sessionResumption"]);e!==void 0&&I!=null&&y(e,["setup","sessionResumption"],qC(I));const C=p(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&y(e,["setup","inputAudioTranscription"],C);const R=p(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&y(e,["setup","outputAudioTranscription"],R);const L=p(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&y(e,["setup","realtimeInputConfig"],L);const O=p(t,["contextWindowCompression"]);e!==void 0&&O!=null&&y(e,["setup","contextWindowCompression"],O);const z=p(t,["proactivity"]);if(e!==void 0&&z!=null&&y(e,["setup","proactivity"],z),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function FC(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],fn(t,i));const a=p(e,["config"]);return a!=null&&y(n,["config"],jC(a,n)),n}function BC(t){const e={},n=p(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=p(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const o=p(t,["fileData"]);o!=null&&y(e,["fileData"],MC(o));const l=p(t,["functionCall"]);l!=null&&y(e,["functionCall"],PC(l));const c=p(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&y(e,["inlineData"],RC(d));const h=p(t,["text"]);h!=null&&y(e,["text"],h);const v=p(t,["thought"]);v!=null&&y(e,["thought"],v);const b=p(t,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const S=p(t,["videoMetadata"]);return S!=null&&y(e,["videoMetadata"],S),e}function qC(t){const e={},n=p(t,["handle"]);if(n!=null&&y(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function zC(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const a=p(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=p(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}const l=p(t,["googleMaps"]);l!=null&&y(e,["googleMaps"],UC(l));const c=p(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],OC(c));const d=p(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HC(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const a=Object.keys(i).map(o=>`${n}.${o}`);e.push(...a)}else e.push(n)}return e.join(",")}function GC(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(n){const o=HC(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];a.length>0&&(c=a.map(h=>l.includes(h)?`generationConfig.${h}`:h));const d=[];o&&d.push(o),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class VC extends Co{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=DC(this.apiClient,e);o=lt("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=GC(c,e.config);return a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $C(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function JC(t){const e={},n=p(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&$C(i,e),e}function YC(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function WC(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function KC(t){const e={},n=p(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&WC(i,e),e}function XC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["documents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QC extends Co{constructor(e){super(),this.apiClient=e,this.list=async n=>new _u(To.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=YC(e);return o=lt("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async delete(e){var n,i;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=JC(e);a=lt("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=KC(e);return o=lt("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=XC(d),v=new IA;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZC extends Co{constructor(e,n=new QC(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new _u(To.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=HE(e);return o=lt("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async get(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$E(e);return o=lt("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async delete(e){var n,i;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=VE(e);a=lt("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=QE(e);return o=lt("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=ZE(d),v=new LA;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=eC(e);return o=lt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=tC(d),v=new DA;return Object.assign(v,h),v})}}async importFile(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=WE(e);return o=lt("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=YE(d),v=new hm;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Rb=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Rb=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const e6=()=>Rb();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const F0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Us extends Error{}class Er extends Us{constructor(e,n,i,a){super(`${Er.makeMessage(e,n,i)}`),this.status=e,this.headers=a,this.error=n}static makeMessage(e,n,i){const a=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,i,a){if(!e||!a)return new Ch({message:i,cause:F0(n)});const o=n;return e===400?new Lb(e,o,i,a):e===401?new Db(e,o,i,a):e===403?new Mb(e,o,i,a):e===404?new Pb(e,o,i,a):e===409?new Ub(e,o,i,a):e===422?new Ob(e,o,i,a):e===429?new jb(e,o,i,a):e>=500?new Fb(e,o,i,a):new Er(e,o,i,a)}}class B0 extends Er{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ch extends Er{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Ib extends Ch{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Lb extends Er{}class Db extends Er{}class Mb extends Er{}class Pb extends Er{}class Ub extends Er{}class Ob extends Er{}class jb extends Er{}class Fb extends Er{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t6=/^[a-z][a-z0-9+.-]*:/i,n6=t=>t6.test(t);let q0=t=>(q0=Array.isArray,q0(t));const i6=q0;let r6=i6;const $1=r6;function s6(t){if(!t)return!0;for(const e in t)return!1;return!0}function a6(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const o6=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Us(`${t} must be an integer`);if(e<0)throw new Us(`${t} must be a positive integer`);return e},l6=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u6=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cc="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const d6=()=>{var t,e,n,i,a;const o=c6();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":Y1(Deno.build.os),"X-Stainless-Arch":J1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":Y1((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":J1((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const l=f6();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function f6(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const a=i[1]||0,o=i[2]||0,l=i[3]||0;return{browser:e,version:`${a}.${o}.${l}`}}}return null}const J1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Y1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Yf;const h6=()=>Yf??(Yf=d6());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bb(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function m6(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Bb({start(){},async pull(n){const{done:i,value:a}=await e.next();i?n.close():n.enqueue(a)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function qb(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function g6(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),a=i.cancel();i.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v6=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zb=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function s0(t,e,n){return zb(),new File(t,e??"unknown_file",n)}function y6(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const b6=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hb=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",x6=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Hb(t),w6=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function S6(t,e,n){if(zb(),t=await t,x6(t))return t instanceof File?t:s0([await t.arrayBuffer()],t.name);if(w6(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),s0(await z0(a),e,n)}const i=await z0(t);if(e||(e=y6(t)),!(n!=null&&n.type)){const a=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof a=="string"&&(n=Object.assign(Object.assign({},n),{type:a}))}return s0(i,e,n)}async function z0(t){var e,n,i,a,o;let l=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)l.push(t);else if(Hb(t))l.push(t instanceof Blob?t:await t.arrayBuffer());else if(b6(t))try{for(var c=!0,d=ua(t),h;h=await d.next(),e=h.done,!e;c=!0){a=h.value,c=!1;const v=a;l.push(...await z0(v))}}catch(v){n={error:v}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}else{const v=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${_6(t)}`)}return l}function _6(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gb{constructor(e){this._client=e}}Gb._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vb(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const W1=Object.freeze(Object.create(null)),N6=(t=Vb)=>(function(n,...i){if(n.length===1)return n[0];let a=!1;const o=[],l=n.reduce((v,b,S)=>{var _,T,k;/[?#]/.test(b)&&(a=!0);const I=i[S];let C=(a?encodeURIComponent:t)(""+I);return S!==i.length&&(I==null||typeof I=="object"&&I.toString===((k=Object.getPrototypeOf((T=Object.getPrototypeOf((_=I.hasOwnProperty)!==null&&_!==void 0?_:W1))!==null&&T!==void 0?T:W1))===null||k===void 0?void 0:k.toString))&&(C=I+"",o.push({start:v.length+b.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(I).slice(8,-1)} is not a valid path parameter`})),v+b+(S===i.length?"":C)},""),c=l.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=d.exec(c))!==null;)o.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(o.sort((v,b)=>v.start-b.start),o.length>0){let v=0;const b=o.reduce((S,_)=>{const T=" ".repeat(_.start-v),k="^".repeat(_.length);return v=_.start+_.length,S+T+k},"");throw new Us(`Path parameters result in path with invalid segments:
${o.map(S=>S.error).join(`
`)}
${l}
${b}`)}return l}),Wf=N6(Vb);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $b extends Gb{create(e,n){var i;const{api_version:a=this._client.apiVersion}=e,o=mh(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Us("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Us("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Wf`/${a}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:a=this._client.apiVersion}=n??{};return this._client.delete(Wf`/${a}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:a=this._client.apiVersion}=n??{};return this._client.post(Wf`/${a}/interactions/${e}/cancel`,i)}get(e,n={},i){var a;const o=n??{},{api_version:l=this._client.apiVersion}=o,c=mh(o,["api_version"]);return this._client.get(Wf`/${l}/interactions/${e}`,Object.assign(Object.assign({query:c},i),{stream:(a=n==null?void 0:n.stream)!==null&&a!==void 0?a:!1}))}}$b._key=Object.freeze(["interactions"]);class Jb extends $b{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A6(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let i=0;for(const a of t)n.set(a,i),i+=a.length;return n}let Kf;function xm(t){let e;return(Kf??(e=new globalThis.TextEncoder,Kf=e.encode.bind(e)))(t)}let Xf;function K1(t){let e;return(Xf??(e=new globalThis.TextDecoder,Xf=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xm(e):e;this.buffer=A6([this.buffer,n]);const i=[];let a;for(;(a=T6(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){i.push(K1(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,l=K1(this.buffer.subarray(0,o));i.push(l),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}kh.NEWLINE_CHARS=new Set([`
`,"\r"]);kh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function T6(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function E6(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gh={off:0,error:200,warn:300,info:400,debug:500},X1=(t,e,n)=>{if(t){if(a6(gh,t))return t;Ar(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(gh))}`)}};function Pd(){}function Qf(t,e,n){return!e||gh[t]>gh[n]?Pd:e[t].bind(e)}const C6={error:Pd,warn:Pd,info:Pd,debug:Pd};let Q1=new WeakMap;function Ar(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return C6;const a=Q1.get(n);if(a&&a[0]===i)return a[1];const o={error:Qf("error",n,i),warn:Qf("warn",n,i),info:Qf("info",n,i),debug:Qf("debug",n,i)};return Q1.set(n,[i,o]),o}const hu=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dc{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let a=!1;const o=i?Ar(i):console;function l(){return la(this,arguments,function*(){var d,h,v,b;if(a)throw new Us("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let S=!1;try{try{for(var _=!0,T=ua(k6(e,n)),k;k=yield Bt(T.next()),d=k.done,!d;_=!0){b=k.value,_=!1;const I=b;if(!S)if(I.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Bt(JSON.parse(I.data))}catch(C){throw o.error("Could not parse message into JSON:",I.data),o.error("From chunk:",I.raw),C}}}catch(I){h={error:I}}finally{try{!_&&!d&&(v=T.return)&&(yield Bt(v.call(T)))}finally{if(h)throw h.error}}S=!0}catch(I){if(j0(I))return yield Bt(void 0);throw I}finally{S||n.abort()}})}return new Dc(l,n,i)}static fromReadableStream(e,n,i){let a=!1;function o(){return la(this,arguments,function*(){var d,h,v,b;const S=new kh,_=qb(e);try{for(var T=!0,k=ua(_),I;I=yield Bt(k.next()),d=I.done,!d;T=!0){b=I.value,T=!1;const C=b;for(const R of S.decode(C))yield yield Bt(R)}}catch(C){h={error:C}}finally{try{!T&&!d&&(v=k.return)&&(yield Bt(v.call(k)))}finally{if(h)throw h.error}}for(const C of S.flush())yield yield Bt(C)})}function l(){return la(this,arguments,function*(){var d,h,v,b;if(a)throw new Us("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let S=!1;try{try{for(var _=!0,T=ua(o()),k;k=yield Bt(T.next()),d=k.done,!d;_=!0){b=k.value,_=!1;const I=b;S||I&&(yield yield Bt(JSON.parse(I)))}}catch(I){h={error:I}}finally{try{!_&&!d&&(v=T.return)&&(yield Bt(v.call(T)))}finally{if(h)throw h.error}}S=!0}catch(I){if(j0(I))return yield Bt(void 0);throw I}finally{S||n.abort()}})}return new Dc(l,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),a=o=>({next:()=>{if(o.length===0){const l=i.next();e.push(l),n.push(l)}return o.shift()}});return[new Dc(()=>a(e),this.controller,this.client),new Dc(()=>a(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Bb({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await n.next();if(o)return i.close();const l=xm(JSON.stringify(a)+`
`);i.enqueue(l)}catch(a){i.error(a)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function k6(t,e){return la(this,arguments,function*(){var i,a,o,l;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Us("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Us("Attempted to iterate over a response with no body");const c=new I6,d=new kh,h=qb(t.body);try{for(var v=!0,b=ua(R6(h)),S;S=yield Bt(b.next()),i=S.done,!i;v=!0){l=S.value,v=!1;const _=l;for(const T of d.decode(_)){const k=c.decode(T);k&&(yield yield Bt(k))}}}catch(_){a={error:_}}finally{try{!v&&!i&&(o=b.return)&&(yield Bt(o.call(b)))}finally{if(a)throw a.error}}for(const _ of d.flush()){const T=c.decode(_);T&&(yield yield Bt(T))}})}function R6(t){return la(this,arguments,function*(){var n,i,a,o;let l=new Uint8Array;try{for(var c=!0,d=ua(t),h;h=yield Bt(d.next()),n=h.done,!n;c=!0){o=h.value,c=!1;const v=o;if(v==null)continue;const b=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?xm(v):v;let S=new Uint8Array(l.length+b.length);S.set(l),S.set(b,l.length),l=S;let _;for(;(_=E6(l))!==-1;)yield yield Bt(l.slice(0,_)),l=l.slice(_)}}catch(v){i={error:v}}finally{try{!c&&!n&&(a=d.return)&&(yield Bt(a.call(d)))}finally{if(i)throw i.error}}l.length>0&&(yield yield Bt(l))})}class I6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,a]=L6(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function L6(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function D6(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:a,startTime:o}=e,l=await(async()=>{var c;if(e.options.stream)return Ar(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Dc.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),h=(c=d==null?void 0:d.split(";")[0])===null||c===void 0?void 0:c.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await n.json():await n.text()})();return Ar(t).debug(`[${i}] response parsed`,hu({retryOfRequestLogID:a,url:n.url,status:n.status,body:l,durationMs:Date.now()-o})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wm extends Promise{constructor(e,n,i=D6){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new wm(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yb=Symbol("brand.privateNullableHeaders");function*M6(t){if(!t)return;if(Yb in t){const{values:i,nulls:a}=t;yield*i.entries();for(const o of a)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():$1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const a=i[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const o=$1(i[1])?i[1]:[i[1]];let l=!1;for(const c of o)c!==void 0&&(e&&!l&&(l=!0,yield[a,null]),yield[a,c])}}const kd=t=>{const e=new Headers,n=new Set;for(const i of t){const a=new Set;for(const[o,l]of M6(i)){const c=o.toLowerCase();a.has(c)||(e.delete(o),a.add(c)),l===null?(e.delete(o),n.add(c)):(e.append(o,l),n.delete(c))}}return{[Yb]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a0=t=>{var e,n,i,a,o,l;if(typeof globalThis.process<"u")return(i=(n=(e=aA)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(o=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||o===void 0?void 0:o.call(a,t))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wb;class Rh{constructor(e){var n,i,a,o,l,c,d,{baseURL:h=a0("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=a0("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:b="v1beta"}=e,S=mh(e,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:v,apiVersion:b},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(i=_.timeout)!==null&&i!==void 0?i:Rh.DEFAULT_TIMEOUT,this.logger=(a=_.logger)!==null&&a!==void 0?a:console;const T="warn";this.logLevel=T,this.logLevel=(l=(o=X1(_.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:X1(a0("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:T,this.fetchOptions=_.fetchOptions,this.maxRetries=(c=_.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(d=_.fetch)!==null&&d!==void 0?d:p6(),this.encoder=v6,this._options=_,this.apiKey=v,this.apiVersion=b,this.clientAdapter=_.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=kd([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return kd([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return kd([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Us(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Cc}`}defaultIdempotencyKey(){return`stainless-node-retry-${e6()}`}makeStatusError(e,n,i,a){return Er.generate(e,n,i,a)}buildURL(e,n,i){const a=!this.baseURLOverridden()&&i||this.baseURL,o=n6(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return s6(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(a=>Object.assign({method:e,path:n},a)))}request(e,n=null){return new wm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var a,o,l;const c=await e,d=(a=c.maxRetries)!==null&&a!==void 0?a:this.maxRetries;n==null&&(n=d),await this.prepareOptions(c);const{req:h,url:v,timeout:b}=await this.buildRequest(c,{retryCount:d-n});await this.prepareRequest(h,{url:v,options:c});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=i===void 0?"":`, retryOf: ${i}`,T=Date.now();if(Ar(this).debug(`[${S}] sending request`,hu({retryOfRequestLogID:i,method:c.method,url:v,options:c,headers:h.headers})),!((o=c.signal)===null||o===void 0)&&o.aborted)throw new B0;const k=new AbortController,I=await this.fetchWithTimeout(v,h,b,k).catch(F0),C=Date.now();if(I instanceof globalThis.Error){const L=`retrying, ${n} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new B0;const O=j0(I)||/timed? ?out/i.test(String(I)+("cause"in I?String(I.cause):""));if(n)return Ar(this).info(`[${S}] connection ${O?"timed out":"failed"} - ${L}`),Ar(this).debug(`[${S}] connection ${O?"timed out":"failed"} (${L})`,hu({retryOfRequestLogID:i,url:v,durationMs:C-T,message:I.message})),this.retryRequest(c,n,i??S);throw Ar(this).info(`[${S}] connection ${O?"timed out":"failed"} - error; no more retries left`),Ar(this).debug(`[${S}] connection ${O?"timed out":"failed"} (error; no more retries left)`,hu({retryOfRequestLogID:i,url:v,durationMs:C-T,message:I.message})),O?new Ib:new Ch({cause:I})}const R=`[${S}${_}] ${h.method} ${v} ${I.ok?"succeeded":"failed"} with status ${I.status} in ${C-T}ms`;if(!I.ok){const L=await this.shouldRetry(I);if(n&&L){const ee=`retrying, ${n} attempts remaining`;return await g6(I.body),Ar(this).info(`${R} - ${ee}`),Ar(this).debug(`[${S}] response error (${ee})`,hu({retryOfRequestLogID:i,url:I.url,status:I.status,headers:I.headers,durationMs:C-T})),this.retryRequest(c,n,i??S,I.headers)}const O=L?"error; no more retries left":"error; not retryable";Ar(this).info(`${R} - ${O}`);const z=await I.text().catch(ee=>F0(ee).message),W=l6(z),B=W?void 0:z;throw Ar(this).debug(`[${S}] response error (${O})`,hu({retryOfRequestLogID:i,url:I.url,status:I.status,headers:I.headers,message:B,durationMs:Date.now()-T})),this.makeStatusError(I.status,W,B,I.headers)}return Ar(this).info(R),Ar(this).debug(`[${S}] response start`,hu({retryOfRequestLogID:i,url:I.url,status:I.status,headers:I.headers,durationMs:C-T})),{response:I,options:c,controller:k,requestLogID:S,retryOfRequestLogID:i,startTime:T}}async fetchWithTimeout(e,n,i,a){const o=n||{},{signal:l,method:c}=o,d=mh(o,["signal","method"]);l&&l.addEventListener("abort",()=>a.abort());const h=setTimeout(()=>a.abort(),i),v=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,b=Object.assign(Object.assign(Object.assign({signal:a.signal},v?{duplex:"half"}:{}),{method:"GET"}),d);c&&(b.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,a){var o;let l;const c=a==null?void 0:a.get("retry-after-ms");if(c){const h=parseFloat(c);Number.isNaN(h)||(l=h)}const d=a==null?void 0:a.get("retry-after");if(d&&!l){const h=parseFloat(d);Number.isNaN(h)?l=Date.parse(d)-Date.now():l=h*1e3}if(!(l&&0<=l&&l<60*1e3)){const h=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,h)}return await u6(l),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,l=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,a,o;const l=Object.assign({},e),{method:c,path:d,query:h,defaultBaseURL:v}=l,b=this.buildURL(d,h,v);"timeout"in l&&o6("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:_}=this.buildBody({options:l}),T=await this.buildHeaders({options:e,method:c,bodyHeaders:S,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:T},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"}),_&&{body:_}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(o=l.fetchOptions)!==null&&o!==void 0?o:{}),url:b,timeout:l.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:a}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let c=kd([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),h6()),this._options.defaultHeaders,i,e.headers,l]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=kd([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:m6(e)}:this.encoder({body:e,headers:i})}}Rh.DEFAULT_TIMEOUT=6e4;class Ji extends Rh{constructor(){super(...arguments),this.interactions=new Jb(this)}}Wb=Ji;Ji.GeminiNextGenAPIClient=Wb;Ji.GeminiNextGenAPIClientError=Us;Ji.APIError=Er;Ji.APIConnectionError=Ch;Ji.APIConnectionTimeoutError=Ib;Ji.APIUserAbortError=B0;Ji.NotFoundError=Pb;Ji.ConflictError=Ub;Ji.RateLimitError=jb;Ji.BadRequestError=Lb;Ji.AuthenticationError=Db;Ji.InternalServerError=Fb;Ji.PermissionDeniedError=Mb;Ji.UnprocessableEntityError=Ob;Ji.toFile=S6;Ji.Interactions=Jb;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P6(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function U6(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function O6(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&y(n,["sdkHttpResponse"],i),n}function j6(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&y(n,["sdkHttpResponse"],i),n}function F6(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=p(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&y(e,["displayName"],a),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=p(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const l=p(t,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const d=p(t,["learningRate"]);if(e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","learningRate"],d),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function B6(t,e,n){const i={};let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const _=p(t,["validationDataset"]);e!==void 0&&_!=null&&y(e,["supervisedTuningSpec"],Z1(_))}else if(a==="PREFERENCE_TUNING"){const _=p(t,["validationDataset"]);e!==void 0&&_!=null&&y(e,["preferenceOptimizationSpec"],Z1(_))}const o=p(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const l=p(t,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const _=p(t,["epochCount"]);e!==void 0&&_!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(c==="PREFERENCE_TUNING"){const _=p(t,["epochCount"]);e!==void 0&&_!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const _=p(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(d==="PREFERENCE_TUNING"){const _=p(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const _=p(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(h==="PREFERENCE_TUNING"){const _=p(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let v=p(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const _=p(t,["adapterSize"]);e!==void 0&&_!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(v==="PREFERENCE_TUNING"){const _=p(t,["adapterSize"]);e!==void 0&&_!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=p(t,["labels"]);e!==void 0&&b!=null&&y(e,["labels"],b);const S=p(t,["beta"]);return e!==void 0&&S!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function q6(t,e){const n={},i=p(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const a=p(t,["preTunedModel"]);a!=null&&y(n,["preTunedModel"],a);const o=p(t,["trainingDataset"]);o!=null&&Q6(o);const l=p(t,["config"]);return l!=null&&F6(l,n),n}function z6(t,e){const n={},i=p(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const a=p(t,["preTunedModel"]);a!=null&&y(n,["preTunedModel"],a);const o=p(t,["trainingDataset"]);o!=null&&Z6(o,n,e);const l=p(t,["config"]);return l!=null&&B6(l,n,e),n}function H6(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function G6(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function V6(t,e,n){const i={},a=p(t,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const o=p(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=p(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function $6(t,e,n){const i={},a=p(t,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const o=p(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=p(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function J6(t,e){const n={},i=p(t,["config"]);return i!=null&&V6(i,n),n}function Y6(t,e){const n={},i=p(t,["config"]);return i!=null&&$6(i,n),n}function W6(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=p(t,["nextPageToken"]);a!=null&&y(n,["nextPageToken"],a);const o=p(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Kb(c))),y(n,["tuningJobs"],l)}return n}function K6(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=p(t,["nextPageToken"]);a!=null&&y(n,["nextPageToken"],a);const o=p(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>H0(c))),y(n,["tuningJobs"],l)}return n}function X6(t,e){const n={},i=p(t,["name"]);i!=null&&y(n,["model"],i);const a=p(t,["name"]);return a!=null&&y(n,["endpoint"],a),n}function Q6(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),y(n,["examples","examples"],a)}return n}function Z6(t,e,n){const i={};let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=p(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Kb(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=p(t,["name"]);a!=null&&y(n,["name"],a);const o=p(t,["state"]);o!=null&&y(n,["state"],fb(o));const l=p(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=p(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const d=p(t,["tuningTask","completeTime"]);d!=null&&y(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(n,["updateTime"],h);const v=p(t,["description"]);v!=null&&y(n,["description"],v);const b=p(t,["baseModel"]);b!=null&&y(n,["baseModel"],b);const S=p(t,["_self"]);return S!=null&&y(n,["tunedModel"],X6(S)),n}function H0(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=p(t,["name"]);a!=null&&y(n,["name"],a);const o=p(t,["state"]);o!=null&&y(n,["state"],fb(o));const l=p(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=p(t,["startTime"]);c!=null&&y(n,["startTime"],c);const d=p(t,["endTime"]);d!=null&&y(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(n,["updateTime"],h);const v=p(t,["error"]);v!=null&&y(n,["error"],v);const b=p(t,["description"]);b!=null&&y(n,["description"],b);const S=p(t,["baseModel"]);S!=null&&y(n,["baseModel"],S);const _=p(t,["tunedModel"]);_!=null&&y(n,["tunedModel"],_);const T=p(t,["preTunedModel"]);T!=null&&y(n,["preTunedModel"],T);const k=p(t,["supervisedTuningSpec"]);k!=null&&y(n,["supervisedTuningSpec"],k);const I=p(t,["preferenceOptimizationSpec"]);I!=null&&y(n,["preferenceOptimizationSpec"],I);const C=p(t,["tuningDataStats"]);C!=null&&y(n,["tuningDataStats"],C);const R=p(t,["encryptionSpec"]);R!=null&&y(n,["encryptionSpec"],R);const L=p(t,["partnerModelTuningSpec"]);L!=null&&y(n,["partnerModelTuningSpec"],L);const O=p(t,["customBaseModel"]);O!=null&&y(n,["customBaseModel"],O);const z=p(t,["experiment"]);z!=null&&y(n,["experiment"],z);const W=p(t,["labels"]);W!=null&&y(n,["labels"],W);const B=p(t,["outputUri"]);B!=null&&y(n,["outputUri"],B);const q=p(t,["pipelineJob"]);q!=null&&y(n,["pipelineJob"],q);const ee=p(t,["serviceAccount"]);ee!=null&&y(n,["serviceAccount"],ee);const ue=p(t,["tunedModelDisplayName"]);ue!=null&&y(n,["tunedModelDisplayName"],ue);const F=p(t,["veoTuningSpec"]);return F!=null&&y(n,["veoTuningSpec"],F),n}function ek(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=p(t,["name"]);a!=null&&y(n,["name"],a);const o=p(t,["metadata"]);o!=null&&y(n,["metadata"],o);const l=p(t,["done"]);l!=null&&y(n,["done"],l);const c=p(t,["error"]);return c!=null&&y(n,["error"],c),n}function Z1(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const a=p(t,["vertexDatasetResource"]);return a!=null&&y(n,["validationDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tk extends Co{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new _u(To.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:a});return o.baseModel=void 0,await this.tuneInternal(o)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),o=await this.tuneMldevInternal(a);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:I0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=G6(e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>H0(v))}else{const h=H6(e);return c=lt("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>Kb(v))}}async listInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Y6(e);return c=lt("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=K6(v),S=new A1;return Object.assign(S,b),S})}else{const h=J6(e);return c=lt("tunedModels",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=W6(v),S=new A1;return Object.assign(S,b),S})}}async cancel(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=U6(e);return c=lt("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=j6(v),S=new T1;return Object.assign(S,b),S})}else{const h=P6(e);return c=lt("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const S=b;return S.sdkHttpResponse={headers:v.headers},S})),l.then(v=>{const b=O6(v),S=new T1;return Object.assign(S,b),S})}}async tuneInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=z6(e,e);return o=lt("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>H0(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=q6(e);return o=lt("tunedModels",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>ek(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nk{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ik=1024*1024*8,rk=3,sk=1e3,ak=2,vh="x-goog-upload-status";async function ok(t,e,n){var i;const a=await Xb(t,e,n),o=await(a==null?void 0:a.json());if(((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[vh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function lk(t,e,n){var i;const a=await Xb(t,e,n),o=await(a==null?void 0:a.json());if(((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[vh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=ab(o),c=new pm;return Object.assign(c,l),c}async function Xb(t,e,n){var i,a;let o=0,l=0,c=new L0(new Response),d="upload";for(o=t.size;l<o;){const h=Math.min(ik,o-l),v=t.slice(l,l+h);l+h>=o&&(d+=", finalize");let b=0,S=sk;for(;b<rk&&(c=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[vh]));)b++,await ck(S),S=S*ak;if(l+=h,((a=c==null?void 0:c.headers)===null||a===void 0?void 0:a[vh])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function uk(t){return{size:t.size,type:t.type}}function ck(t){return new Promise(e=>setTimeout(e,t))}class dk{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ok(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lk(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uk(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fk{create(e,n,i){return new hk(e,n,i)}}class hk{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e2="x-goog-api-key";class pk{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(e2)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(e2,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mk="gl-node/";class gk{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ji({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=cA(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new pk(this.apiKey);this.apiClient=new uC({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:mk+"web",uploader:new dk,downloader:new nk}),this.models=new CC(this.apiClient),this.live=new SC(this.apiClient,a,new fk),this.batches=new F4(this.apiClient),this.chats=new x3(this.models,this.apiClient),this.caches=new v3(this.apiClient),this.files=new R3(this.apiClient),this.operations=new kC(this.apiClient),this.authTokens=new VC(this.apiClient),this.tunings=new tk(this.apiClient),this.fileSearchStores=new ZC(this.apiClient)}}const vk=()=>{try{return""}catch{return""}},t2=vk(),n2=t2?new gk({apiKey:t2}):null,yk=async(t,e,n,i)=>{if(!n2)return`This is a reminder that a balance remains on Invoice ${e}. Please settle this at your earliest convenience.`;try{let a="";i<0?a=`is OVERDUE by ${Math.abs(i)} days. Be firm but professional.`:i===0?a="is DUE TODAY. Be polite and remind them of the deadline.":a=`is UPCOMING in ${i} days. This is a proactive friendly reminder.`;const l=(await n2.models.generateContent({model:"gemini-3-flash-preview",contents:`Draft a payment reminder email for Clonmel Glass & Mirrors. 
      Customer: ${t}. 
      Invoice: ${e}. 
      Balance Due: ${n.toFixed(2)}. 
      Status: The payment ${a}
      Include a request for settlement. Max 3 sentences.`})).text;return typeof l=="string"?l:`This is a reminder that a balance remains on Invoice ${e}.`}catch{return`Reminder for Invoice ${e}: Outstanding balance of ${n.toFixed(2)} needs attention.`}},bk="modulepreload",xk=function(t){return"/"+t},i2={},G0=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=l(n.map(h=>{if(h=xk(h),h in i2)return;i2[h]=!0;const v=h.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":bk,v||(S.as="script"),S.crossOrigin="",S.href=h,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((_,T)=>{S.addEventListener("load",_),S.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return a.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function xn(t){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(t)}var Qr=Uint8Array,Tr=Uint16Array,Kd=Uint32Array,Ih=new Qr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lh=new Qr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),V0=new Qr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qb=function(t,e){for(var n=new Tr(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var a=new Kd(n[30]),i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)a[o]=o-n[i]<<5|i;return[n,a]},Zb=Qb(Ih,2),e5=Zb[0],$0=Zb[1];e5[28]=258,$0[258]=28;var t5=Qb(Lh,0),wk=t5[0],r2=t5[1],J0=new Tr(32768);for(var Hn=0;Hn<32768;++Hn){var gl=(Hn&43690)>>>1|(Hn&21845)<<1;gl=(gl&52428)>>>2|(gl&13107)<<2,gl=(gl&61680)>>>4|(gl&3855)<<4,J0[Hn]=((gl&65280)>>>8|(gl&255)<<8)>>>1}var Va=(function(t,e,n){for(var i=t.length,a=0,o=new Tr(e);a<i;++a)++o[t[a]-1];var l=new Tr(e);for(a=0;a<e;++a)l[a]=l[a-1]+o[a-1]<<1;var c;if(n){c=new Tr(1<<e);var d=15-e;for(a=0;a<i;++a)if(t[a])for(var h=a<<4|t[a],v=e-t[a],b=l[t[a]-1]++<<v,S=b|(1<<v)-1;b<=S;++b)c[J0[b]>>>d]=h}else for(c=new Tr(i),a=0;a<i;++a)c[a]=J0[l[t[a]-1]++]>>>15-t[a];return c}),Cl=new Qr(288);for(var Hn=0;Hn<144;++Hn)Cl[Hn]=8;for(var Hn=144;Hn<256;++Hn)Cl[Hn]=9;for(var Hn=256;Hn<280;++Hn)Cl[Hn]=7;for(var Hn=280;Hn<288;++Hn)Cl[Hn]=8;var Xd=new Qr(32);for(var Hn=0;Hn<32;++Hn)Xd[Hn]=5;var Sk=Va(Cl,9,0),_k=Va(Cl,9,1),Nk=Va(Xd,5,0),Ak=Va(Xd,5,1),o0=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ta=function(t,e,n){var i=e/8>>0;return(t[i]|t[i+1]<<8)>>>(e&7)&n},l0=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(e&7)},Sm=function(t){return(t/8>>0)+(t&7&&1)},n5=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Tr?Tr:t instanceof Kd?Kd:Qr)(n-e);return i.set(t.subarray(e,n)),i},Tk=function(t,e,n){var i=t.length,a=!e||n,o=!n||n.i;n||(n={}),e||(e=new Qr(i*3));var l=function(ae){var de=e.length;if(ae>de){var se=new Qr(Math.max(de*2,ae));se.set(e),e=se}},c=n.f||0,d=n.p||0,h=n.b||0,v=n.l,b=n.d,S=n.m,_=n.n,T=i*8;do{if(!v){n.f=c=ta(t,d,1);var k=ta(t,d+1,3);if(d+=3,k)if(k==1)v=_k,b=Ak,S=9,_=5;else if(k==2){var L=ta(t,d,31)+257,O=ta(t,d+10,15)+4,z=L+ta(t,d+5,31)+1;d+=14;for(var W=new Qr(z),B=new Qr(19),q=0;q<O;++q)B[V0[q]]=ta(t,d+q*3,7);d+=O*3;var ee=o0(B),ue=(1<<ee)-1;if(!o&&d+z*(ee+7)>T)break;for(var F=Va(B,ee,1),q=0;q<z;){var j=F[ta(t,d,ue)];d+=j&15;var I=j>>>4;if(I<16)W[q++]=I;else{var ne=0,ie=0;for(I==16?(ie=3+ta(t,d,3),d+=2,ne=W[q-1]):I==17?(ie=3+ta(t,d,7),d+=3):I==18&&(ie=11+ta(t,d,127),d+=7);ie--;)W[q++]=ne}}var be=W.subarray(0,L),U=W.subarray(L);S=o0(be),_=o0(U),v=Va(be,S,1),b=Va(U,_,1)}else throw"invalid block type";else{var I=Sm(d)+4,C=t[I-4]|t[I-3]<<8,R=I+C;if(R>i){if(o)throw"unexpected EOF";break}a&&l(h+C),e.set(t.subarray(I,R),h),n.b=h+=C,n.p=d=R*8;continue}if(d>T)throw"unexpected EOF"}a&&l(h+131072);for(var $=(1<<S)-1,re=(1<<_)-1,oe=S+_+18;o||d+oe<T;){var ne=v[l0(t,d)&$],pe=ne>>>4;if(d+=ne&15,d>T)throw"unexpected EOF";if(!ne)throw"invalid length/literal";if(pe<256)e[h++]=pe;else if(pe==256){v=null;break}else{var _e=pe-254;if(pe>264){var q=pe-257,D=Ih[q];_e=ta(t,d,(1<<D)-1)+e5[q],d+=D}var H=b[l0(t,d)&re],K=H>>>4;if(!H)throw"invalid distance";d+=H&15;var U=wk[K];if(K>3){var D=Lh[K];U+=l0(t,d)&(1<<D)-1,d+=D}if(d>T)throw"unexpected EOF";a&&l(h+131072);for(var Z=h+_e;h<Z;h+=4)e[h]=e[h-U],e[h+1]=e[h+1-U],e[h+2]=e[h+2-U],e[h+3]=e[h+3-U];h=Z}}n.l=v,n.p=d,n.b=h,v&&(c=1,n.m=S,n.d=b,n.n=_)}while(!c);return h==e.length?e:n5(e,0,h)},So=function(t,e,n){n<<=e&7;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},Rd=function(t,e,n){n<<=e&7;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},u0=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var a=n.length,o=n.slice();if(!a)return[new Qr(0),0];if(a==1){var l=new Qr(n[0].s+1);return l[n[0].s]=1,[l,1]}n.sort(function(z,W){return z.f-W.f}),n.push({s:-1,f:25001});var c=n[0],d=n[1],h=0,v=1,b=2;for(n[0]={s:-1,f:c.f+d.f,l:c,r:d};v!=a-1;)c=n[n[h].f<n[b].f?h++:b++],d=n[h!=v&&n[h].f<n[b].f?h++:b++],n[v++]={s:-1,f:c.f+d.f,l:c,r:d};for(var S=o[0].s,i=1;i<a;++i)o[i].s>S&&(S=o[i].s);var _=new Tr(S+1),T=Y0(n[v-1],_,0);if(T>e){var i=0,k=0,I=T-e,C=1<<I;for(o.sort(function(W,B){return _[B.s]-_[W.s]||W.f-B.f});i<a;++i){var R=o[i].s;if(_[R]>e)k+=C-(1<<T-_[R]),_[R]=e;else break}for(k>>>=I;k>0;){var L=o[i].s;_[L]<e?k-=1<<e-_[L]++-1:++i}for(;i>=0&&k;--i){var O=o[i].s;_[O]==e&&(--_[O],++k)}T=e}return[new Qr(_),T]},Y0=function(t,e,n){return t.s==-1?Math.max(Y0(t.l,e,n+1),Y0(t.r,e,n+1)):e[t.s]=n},s2=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Tr(++e),i=0,a=t[0],o=1,l=function(d){n[i++]=d},c=1;c<=e;++c)if(t[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(a),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(a);o=1,a=t[c]}return[n.subarray(0,i),e]},Id=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},W0=function(t,e,n){var i=n.length,a=Sm(e+2);t[a]=i&255,t[a+1]=i>>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var o=0;o<i;++o)t[a+o+4]=n[o];return(a+4+i)*8},a2=function(t,e,n,i,a,o,l,c,d,h,v){So(e,v++,n),++a[256];for(var b=u0(a,15),S=b[0],_=b[1],T=u0(o,15),k=T[0],I=T[1],C=s2(S),R=C[0],L=C[1],O=s2(k),z=O[0],W=O[1],B=new Tr(19),q=0;q<R.length;++q)B[R[q]&31]++;for(var q=0;q<z.length;++q)B[z[q]&31]++;for(var ee=u0(B,7),ue=ee[0],F=ee[1],j=19;j>4&&!ue[V0[j-1]];--j);var ne=h+5<<3,ie=Id(a,Cl)+Id(o,Xd)+l,be=Id(a,S)+Id(o,k)+l+14+3*j+Id(B,ue)+(2*B[16]+3*B[17]+7*B[18]);if(ne<=ie&&ne<=be)return W0(e,v,t.subarray(d,d+h));var U,$,re,oe;if(So(e,v,1+(be<ie)),v+=2,be<ie){U=Va(S,_,0),$=S,re=Va(k,I,0),oe=k;var pe=Va(ue,F,0);So(e,v,L-257),So(e,v+5,W-1),So(e,v+10,j-4),v+=14;for(var q=0;q<j;++q)So(e,v+3*q,ue[V0[q]]);v+=3*j;for(var _e=[R,z],D=0;D<2;++D)for(var H=_e[D],q=0;q<H.length;++q){var K=H[q]&31;So(e,v,pe[K]),v+=ue[K],K>15&&(So(e,v,H[q]>>>5&127),v+=H[q]>>>12)}}else U=Sk,$=Cl,re=Nk,oe=Xd;for(var q=0;q<c;++q)if(i[q]>255){var K=i[q]>>>18&31;Rd(e,v,U[K+257]),v+=$[K+257],K>7&&(So(e,v,i[q]>>>23&31),v+=Ih[K]);var Z=i[q]&31;Rd(e,v,re[Z]),v+=oe[Z],Z>3&&(Rd(e,v,i[q]>>>5&8191),v+=Lh[Z])}else Rd(e,v,U[i[q]]),v+=$[i[q]];return Rd(e,v,U[256]),v+$[256]},Ek=new Kd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ck=function(t,e,n,i,a,o){var l=t.length,c=new Qr(i+l+5*(1+Math.floor(l/7e3))+a),d=c.subarray(i,c.length-a),h=0;if(!e||l<8)for(var v=0;v<=l;v+=65535){var b=v+65535;b<l?h=W0(d,h,t.subarray(v,b)):(d[v]=o,h=W0(d,h,t.subarray(v,l)))}else{for(var S=Ek[e-1],_=S>>>13,T=S&8191,k=(1<<n)-1,I=new Tr(32768),C=new Tr(k+1),R=Math.ceil(n/3),L=2*R,O=function(st){return(t[st]^t[st+1]<<R^t[st+2]<<L)&k},z=new Kd(25e3),W=new Tr(288),B=new Tr(32),q=0,ee=0,v=0,ue=0,F=0,j=0;v<l;++v){var ne=O(v),ie=v&32767,be=C[ne];if(I[ie]=be,C[ne]=ie,F<=v){var U=l-v;if((q>7e3||ue>24576)&&U>423){h=a2(t,d,0,z,W,B,ee,ue,j,v-j,h),ue=q=ee=0,j=v;for(var $=0;$<286;++$)W[$]=0;for(var $=0;$<30;++$)B[$]=0}var re=2,oe=0,pe=T,_e=ie-be&32767;if(U>2&&ne==O(v-_e))for(var D=Math.min(_,U)-1,H=Math.min(32767,v),K=Math.min(258,U);_e<=H&&--pe&&ie!=be;){if(t[v+re]==t[v+re-_e]){for(var Z=0;Z<K&&t[v+Z]==t[v+Z-_e];++Z);if(Z>re){if(re=Z,oe=_e,Z>D)break;for(var ae=Math.min(_e,Z-2),de=0,$=0;$<ae;++$){var se=v-_e+$+32768&32767,he=I[se],Ae=se-he+32768&32767;Ae>de&&(de=Ae,be=se)}}}ie=be,be=I[ie],_e+=ie-be+32768&32767}if(oe){z[ue++]=268435456|$0[re]<<18|r2[oe];var Me=$0[re]&31,Ke=r2[oe]&31;ee+=Ih[Me]+Lh[Ke],++W[257+Me],++B[Ke],F=v+re,++q}else z[ue++]=t[v],++W[t[v]]}}h=a2(t,d,o,z,W,B,ee,ue,j,v-j,h)}return n5(c,0,i+Sm(h)+a)},kk=function(){var t=1,e=0;return{p:function(n){for(var i=t,a=e,o=n.length,l=0;l!=o;){for(var c=Math.min(l+5552,o);l<c;++l)i+=n[l],a+=i;i%=65521,a%=65521}t=i,e=a},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},Rk=function(t,e,n,i,a){return Ck(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,i,!0)},Ik=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Lk=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;t[0]=120,t[1]=i<<6|(i?32-2*i:1)},Dk=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function K0(t,e){e===void 0&&(e={});var n=kk();n.p(t);var i=Rk(t,e,2,4);return Lk(i,e),Ik(i,i.length-4,n.d()),i}function Mk(t,e){return Tk((Dk(t),t.subarray(2,-4)),e)}var Dt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function c0(){Dt.console&&typeof Dt.console.log=="function"&&Dt.console.log.apply(Dt.console,arguments)}var In={log:c0,warn:function(t){Dt.console&&(typeof Dt.console.warn=="function"?Dt.console.warn.apply(Dt.console,arguments):c0.call(null,arguments))},error:function(t){Dt.console&&(typeof Dt.console.error=="function"?Dt.console.error.apply(Dt.console,arguments):c0(t))}};function d0(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){pu(i.response,e,n)},i.onerror=function(){In.error("could not download file")},i.send()}function o2(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Zf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var jd,X0,pu=Dt.saveAs||((typeof window>"u"?"undefined":xn(window))!=="object"||window!==Dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=Dt.URL||Dt.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?o2(a.href)?d0(t,e,n):Zf(a,a.target="_blank"):Zf(a)):(a.href=i.createObjectURL(t),setTimeout((function(){i.revokeObjectURL(a.href)}),4e4),setTimeout((function(){Zf(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(o2(t))d0(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){Zf(i)}))}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:xn(o)!=="object"&&(In.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return d0(t,e,n);var a=t.type==="application/octet-stream",o=/constructor/i.test(Dt.HTMLElement)||Dt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&o)&&(typeof FileReader>"u"?"undefined":xn(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var v=c.result;v=l?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=v:location=v,i=null},c.readAsDataURL(t)}else{var d=Dt.URL||Dt.webkitURL,h=d.createObjectURL(t);i?i.location=h:location.href=h,i=null,setTimeout((function(){d.revokeObjectURL(h)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function i5(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],i=0;i<n.length;i++){var a=n[i].re,o=n[i].process,l=a.exec(t);l&&(e=o(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),d=this.g.toString(16),h=this.b.toString(16);return c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),"#"+c+d+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function f0(t,e){var n=t[0],i=t[1],a=t[2],o=t[3];n=fr(n,i,a,o,e[0],7,-680876936),o=fr(o,n,i,a,e[1],12,-389564586),a=fr(a,o,n,i,e[2],17,606105819),i=fr(i,a,o,n,e[3],22,-1044525330),n=fr(n,i,a,o,e[4],7,-176418897),o=fr(o,n,i,a,e[5],12,1200080426),a=fr(a,o,n,i,e[6],17,-1473231341),i=fr(i,a,o,n,e[7],22,-45705983),n=fr(n,i,a,o,e[8],7,1770035416),o=fr(o,n,i,a,e[9],12,-1958414417),a=fr(a,o,n,i,e[10],17,-42063),i=fr(i,a,o,n,e[11],22,-1990404162),n=fr(n,i,a,o,e[12],7,1804603682),o=fr(o,n,i,a,e[13],12,-40341101),a=fr(a,o,n,i,e[14],17,-1502002290),n=hr(n,i=fr(i,a,o,n,e[15],22,1236535329),a,o,e[1],5,-165796510),o=hr(o,n,i,a,e[6],9,-1069501632),a=hr(a,o,n,i,e[11],14,643717713),i=hr(i,a,o,n,e[0],20,-373897302),n=hr(n,i,a,o,e[5],5,-701558691),o=hr(o,n,i,a,e[10],9,38016083),a=hr(a,o,n,i,e[15],14,-660478335),i=hr(i,a,o,n,e[4],20,-405537848),n=hr(n,i,a,o,e[9],5,568446438),o=hr(o,n,i,a,e[14],9,-1019803690),a=hr(a,o,n,i,e[3],14,-187363961),i=hr(i,a,o,n,e[8],20,1163531501),n=hr(n,i,a,o,e[13],5,-1444681467),o=hr(o,n,i,a,e[2],9,-51403784),a=hr(a,o,n,i,e[7],14,1735328473),n=pr(n,i=hr(i,a,o,n,e[12],20,-1926607734),a,o,e[5],4,-378558),o=pr(o,n,i,a,e[8],11,-2022574463),a=pr(a,o,n,i,e[11],16,1839030562),i=pr(i,a,o,n,e[14],23,-35309556),n=pr(n,i,a,o,e[1],4,-1530992060),o=pr(o,n,i,a,e[4],11,1272893353),a=pr(a,o,n,i,e[7],16,-155497632),i=pr(i,a,o,n,e[10],23,-1094730640),n=pr(n,i,a,o,e[13],4,681279174),o=pr(o,n,i,a,e[0],11,-358537222),a=pr(a,o,n,i,e[3],16,-722521979),i=pr(i,a,o,n,e[6],23,76029189),n=pr(n,i,a,o,e[9],4,-640364487),o=pr(o,n,i,a,e[12],11,-421815835),a=pr(a,o,n,i,e[15],16,530742520),n=mr(n,i=pr(i,a,o,n,e[2],23,-995338651),a,o,e[0],6,-198630844),o=mr(o,n,i,a,e[7],10,1126891415),a=mr(a,o,n,i,e[14],15,-1416354905),i=mr(i,a,o,n,e[5],21,-57434055),n=mr(n,i,a,o,e[12],6,1700485571),o=mr(o,n,i,a,e[3],10,-1894986606),a=mr(a,o,n,i,e[10],15,-1051523),i=mr(i,a,o,n,e[1],21,-2054922799),n=mr(n,i,a,o,e[8],6,1873313359),o=mr(o,n,i,a,e[15],10,-30611744),a=mr(a,o,n,i,e[6],15,-1560198380),i=mr(i,a,o,n,e[13],21,1309151649),n=mr(n,i,a,o,e[4],6,-145523070),o=mr(o,n,i,a,e[11],10,-1120210379),a=mr(a,o,n,i,e[2],15,718787259),i=mr(i,a,o,n,e[9],21,-343485551),t[0]=Al(n,t[0]),t[1]=Al(i,t[1]),t[2]=Al(a,t[2]),t[3]=Al(o,t[3])}function Dh(t,e,n,i,a,o){return e=Al(Al(e,t),Al(i,o)),Al(e<<a|e>>>32-a,n)}function fr(t,e,n,i,a,o,l){return Dh(e&n|~e&i,t,e,a,o,l)}function hr(t,e,n,i,a,o,l){return Dh(e&i|n&~i,t,e,a,o,l)}function pr(t,e,n,i,a,o,l){return Dh(e^n^i,t,e,a,o,l)}function mr(t,e,n,i,a,o,l){return Dh(n^(e|~i),t,e,a,o,l)}function r5(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)f0(i,Pk(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(f0(i,a),e=0;e<16;e++)a[e]=0;return a[14]=8*n,f0(i,a),i}function Pk(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}jd=Dt.atob.bind(Dt),X0=Dt.btoa.bind(Dt);var l2="0123456789abcdef".split("");function Uk(t){for(var e="",n=0;n<4;n++)e+=l2[t>>8*n+4&15]+l2[t>>8*n&15];return e}function Ok(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Q0(t){return r5(t).map(Ok).join("")}var jk=(function(t){for(var e=0;e<t.length;e++)t[e]=Uk(t[e]);return t.join("")})(r5("hello"))!="5d41402abc4b2a76b9719d911017c592";function Al(t,e){if(jk){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Z0(t,e){var n,i,a,o;if(t!==n){for(var l=(a=t,o=1+(256/t.length>>0),new Array(o+1).join(a)),c=[],d=0;d<256;d++)c[d]=d;var h=0;for(d=0;d<256;d++){var v=c[d];h=(h+v+l.charCodeAt(d))%256,c[d]=c[h],c[h]=v}n=t,i=c}else c=i;var b=e.length,S=0,_=0,T="";for(d=0;d<b;d++)_=(_+(v=c[S=(S+1)%256]))%256,c[S]=c[_],c[_]=v,l=c[(c[S]+c[_])%256],T+=String.fromCharCode(e.charCodeAt(d)^l);return T}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var u2={print:4,modify:8,copy:16,"annot-forms":32};function kc(t,e,n,i){this.v=1,this.r=2;var a=192;t.forEach((function(c){if(u2.perm!==void 0)throw new Error("Invalid permission: "+c);a+=u2[c]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),l=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^a)),this.encryptionKey=Q0(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Z0(this.encryptionKey,this.padding)}function Rc(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var a=t.charCodeAt(i);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=t[i]}return e}function c2(t){if(xn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,i,a){if(a=a||!1,typeof n!="string"||typeof i!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[i,!!a],o},this.unsubscribe=function(n){for(var i in e)if(e[i][n])return delete e[i][n],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[n]){var l=e[n][o];try{l[0].apply(t,i)}catch(c){Dt.console&&In.error("jsPDF PubSub Error",c.message,c)}l[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Qd(t){if(!(this instanceof Qd))return new Qd(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function s5(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Sl(t,e,n,i,a){if(!(this instanceof Sl))return new Sl(t,e,n,i,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,s5.call(this,i,a)}function yu(t,e,n,i,a){if(!(this instanceof yu))return new yu(t,e,n,i,a);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,s5.call(this,i,a)}function Tt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],a=arguments[2],o=arguments[3],l=[],c=1,d=16,h="S",v=null;xn(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,a=t.format||a,o=t.compress||t.compressPdf||o,(v=t.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(d=t.floatPrecision),h=t.defaultPathOperation||"S"),l=t.filters||(o===!0?["FlateEncode"]:l),i=i||"mm",n=(""+(n||"P")).toLowerCase();var b=t.putOnlyUsedFonts||!1,S={},_={internal:{},__private__:{}};_.__private__.PubSub=c2;var T="1.3",k=_.__private__.getPdfVersion=function(){return T};_.__private__.setPdfVersion=function(A){T=A};var I={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return I};var C=_.__private__.getPageFormat=function(A){return I[A]};a=a||"a4";var R={COMPAT:"compat",ADVANCED:"advanced"},L=R.COMPAT;function O(){this.saveGraphicsState(),fe(new xt(it,0,0,-it,0,_a()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),h="n",L=R.ADVANCED}function z(){this.restoreGraphicsState(),h="S",L=R.COMPAT}var W=_.__private__.combineFontStyleAndFontWeight=function(A,V){if(A=="bold"&&V=="normal"||A=="bold"&&V==400||A=="normal"&&V=="italic"||A=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(A=V==400||V==="normal"?A==="italic"?"italic":"normal":V!=700&&V!=="bold"||A!=="normal"?(V==700?"bold":V)+""+A:"bold"),A};_.advancedAPI=function(A){var V=L===R.COMPAT;return V&&O.call(this),typeof A!="function"||(A(this),V&&z.call(this)),this},_.compatAPI=function(A){var V=L===R.ADVANCED;return V&&z.call(this),typeof A!="function"||(A(this),V&&O.call(this)),this},_.isAdvancedAPI=function(){return L===R.ADVANCED};var B,q=function(A){if(L!==R.ADVANCED)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ee=_.roundToPrecision=_.__private__.roundToPrecision=function(A,V){var ce=e||V;if(isNaN(A)||isNaN(ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(ce).replace(/0+$/,"")};B=_.hpf=_.__private__.hpf=typeof d=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(A,d)}:d==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(A,16)};var ue=_.f2=_.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return ee(A,2)},F=_.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return ee(A,3)},j=_.scale=_.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return L===R.COMPAT?A*it:L===R.ADVANCED?A:void 0},ne=function(A){return L===R.COMPAT?_a()-A:L===R.ADVANCED?A:void 0},ie=function(A){return j(ne(A))};_.__private__.setPrecision=_.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var be,U="00000000000000000000000000000000",$=_.__private__.getFileId=function(){return U},re=_.__private__.setFileId=function(A){return U=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():U.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),v!==null&&(Pn=new kc(v.userPermissions,v.userPassword,v.ownerPassword,U)),U};_.setFileId=function(A){return re(A),this},_.getFileId=function(){return $()};var oe=_.__private__.convertDateToPDFDate=function(A){var V=A.getTimezoneOffset(),ce=V<0?"+":"-",ge=Math.floor(Math.abs(V/60)),Ee=Math.abs(V%60),Oe=[ce,K(ge),"'",K(Ee),"'"].join("");return["D:",A.getFullYear(),K(A.getMonth()+1),K(A.getDate()),K(A.getHours()),K(A.getMinutes()),K(A.getSeconds()),Oe].join("")},pe=_.__private__.convertPDFDateToDate=function(A){var V=parseInt(A.substr(2,4),10),ce=parseInt(A.substr(6,2),10)-1,ge=parseInt(A.substr(8,2),10),Ee=parseInt(A.substr(10,2),10),Oe=parseInt(A.substr(12,2),10),Xe=parseInt(A.substr(14,2),10);return new Date(V,ce,ge,Ee,Oe,Xe,0)},_e=_.__private__.setCreationDate=function(A){var V;if(A===void 0&&(A=new Date),A instanceof Date)V=oe(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=A}return be=V},D=_.__private__.getCreationDate=function(A){var V=be;return A==="jsDate"&&(V=pe(be)),V};_.setCreationDate=function(A){return _e(A),this},_.getCreationDate=function(A){return D(A)};var H,K=_.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},Z=_.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},ae=0,de=[],se=[],he=0,Ae=[],Me=[],Ke=!1,Ye=se,st=function(){ae=0,he=0,se=[],de=[],Ae=[],li=Ln(),ln=Ln()};_.__private__.setCustomOutputDestination=function(A){Ke=!0,Ye=A};var Le=function(A){Ke||(Ye=A)};_.__private__.resetCustomOutputDestination=function(){Ke=!1,Ye=se};var fe=_.__private__.out=function(A){return A=A.toString(),he+=A.length+1,Ye.push(A),Ye},Et=_.__private__.write=function(A){return fe(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},ut=_.__private__.getArrayBuffer=function(A){for(var V=A.length,ce=new ArrayBuffer(V),ge=new Uint8Array(ce);V--;)ge[V]=A.charCodeAt(V);return ce},$e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return $e};var Ze=t.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(A){return Ze=L===R.ADVANCED?A/it:A,this};var tt,et=_.__private__.getFontSize=_.getFontSize=function(){return L===R.COMPAT?Ze:Ze*it},We=t.R2L||!1;_.__private__.setR2L=_.setR2L=function(A){return We=A,this},_.__private__.getR2L=_.getR2L=function(){return We};var Se,Qe=_.__private__.setZoomMode=function(A){var V=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))tt=A;else if(isNaN(A)){if(V.indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');tt=A}else tt=parseInt(A,10)};_.__private__.getZoomMode=function(){return tt};var ct,bt=_.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');Se=A};_.__private__.getPageMode=function(){return Se};var Ht=_.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');ct=A};_.__private__.getLayoutMode=function(){return ct},_.__private__.setDisplayMode=_.setDisplayMode=function(A,V,ce){return Qe(A),Ht(V),bt(ce),this};var pt={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(A){if(Object.keys(pt).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pt[A]},_.__private__.getDocumentProperties=function(){return pt},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(A){for(var V in pt)pt.hasOwnProperty(V)&&A[V]&&(pt[V]=A[V]);return this},_.__private__.setDocumentProperty=function(A,V){if(Object.keys(pt).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pt[A]=V};var Nt,it,En,Lt,qt,Pt={},St={},Kn=[],Yt={},Cr={},an={},vi={},Yi=null,on=0,_t=[],Vt=new c2(_),es=t.hotfixes||[],gn={},ji={},yi=[],xt=function A(V,ce,ge,Ee,Oe,Xe){if(!(this instanceof A))return new A(V,ce,ge,Ee,Oe,Xe);isNaN(V)&&(V=1),isNaN(ce)&&(ce=0),isNaN(ge)&&(ge=0),isNaN(Ee)&&(Ee=1),isNaN(Oe)&&(Oe=0),isNaN(Xe)&&(Xe=0),this._matrix=[V,ce,ge,Ee,Oe,Xe]};Object.defineProperty(xt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(xt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(xt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(xt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(xt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(xt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(xt.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(xt.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(xt.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(xt.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(xt.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(xt.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(xt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(xt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(xt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(xt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),xt.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(B).join(A)},xt.prototype.multiply=function(A){var V=A.sx*this.sx+A.shy*this.shx,ce=A.sx*this.shy+A.shy*this.sy,ge=A.shx*this.sx+A.sy*this.shx,Ee=A.shx*this.shy+A.sy*this.sy,Oe=A.tx*this.sx+A.ty*this.shx+this.tx,Xe=A.tx*this.shy+A.ty*this.sy+this.ty;return new xt(V,ce,ge,Ee,Oe,Xe)},xt.prototype.decompose=function(){var A=this.sx,V=this.shy,ce=this.shx,ge=this.sy,Ee=this.tx,Oe=this.ty,Xe=Math.sqrt(A*A+V*V),ot=(A/=Xe)*ce+(V/=Xe)*ge;ce-=A*ot,ge-=V*ot;var yt=Math.sqrt(ce*ce+ge*ge);return ot/=yt,A*(ge/=yt)<V*(ce/=yt)&&(A=-A,V=-V,ot=-ot,Xe=-Xe),{scale:new xt(Xe,0,0,yt,0,0),translate:new xt(1,0,0,1,Ee,Oe),rotate:new xt(A,V,-V,A,0,0),skew:new xt(1,0,ot,1,0,0)}},xt.prototype.toString=function(A){return this.join(" ")},xt.prototype.inversed=function(){var A=this.sx,V=this.shy,ce=this.shx,ge=this.sy,Ee=this.tx,Oe=this.ty,Xe=1/(A*ge-V*ce),ot=ge*Xe,yt=-V*Xe,Ut=-ce*Xe,jt=A*Xe;return new xt(ot,yt,Ut,jt,-ot*Ee-Ut*Oe,-yt*Ee-jt*Oe)},xt.prototype.applyToPoint=function(A){var V=A.x*this.sx+A.y*this.shx+this.tx,ce=A.x*this.shy+A.y*this.sy+this.ty;return new Za(V,ce)},xt.prototype.applyToRectangle=function(A){var V=this.applyToPoint(A),ce=this.applyToPoint(new Za(A.x+A.w,A.y+A.h));return new Gl(V.x,V.y,ce.x-V.x,ce.y-V.y)},xt.prototype.clone=function(){var A=this.sx,V=this.shy,ce=this.shx,ge=this.sy,Ee=this.tx,Oe=this.ty;return new xt(A,V,ce,ge,Ee,Oe)},_.Matrix=xt;var sr=_.matrixMult=function(A,V){return V.multiply(A)},ar=new xt(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=ar;var Ei=function(A,V){if(!Cr[A]){var ce=(V instanceof Sl?"Sh":"P")+(Object.keys(Yt).length+1).toString(10);V.id=ce,Cr[A]=ce,Yt[ce]=V,Vt.publish("addPattern",V)}};_.ShadingPattern=Sl,_.TilingPattern=yu,_.addShadingPattern=function(A,V){return q("addShadingPattern()"),Ei(A,V),this},_.beginTilingPattern=function(A){q("beginTilingPattern()"),Du(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},_.endTilingPattern=function(A,V){q("endTilingPattern()"),V.stream=Me[H].join(`
`),Ei(A,V),Vt.publish("endTilingPattern",V),yi.pop().restore()};var jn=_.__private__.newObject=function(){var A=Ln();return Ci(A,!0),A},Ln=_.__private__.newObjectDeferred=function(){return ae++,de[ae]=function(){return he},ae},Ci=function(A,V){return V=typeof V=="boolean"&&V,de[A]=he,V&&fe(A+" 0 obj"),A},vs=_.__private__.newAdditionalObject=function(){var A={objId:Ln(),content:""};return Ae.push(A),A},li=Ln(),ln=Ln(),wn=_.__private__.decodeColorString=function(A){var V=A.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length===5&&(V[4]==="k"||V[4]==="K")&&(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var ce=parseFloat(V[0]);V=[ce,ce,ce,"r"]}for(var ge="#",Ee=0;Ee<3;Ee++)ge+=("0"+Math.floor(255*parseFloat(V[Ee])).toString(16)).slice(-2);return ge},ui=_.__private__.encodeColorString=function(A){var V;typeof A=="string"&&(A={ch1:A});var ce=A.ch1,ge=A.ch2,Ee=A.ch3,Oe=A.ch4,Xe=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ce=="string"&&ce.charAt(0)!=="#"){var ot=new i5(ce);if(ot.ok)ce=ot.toHex();else if(!/^\d*\.?\d*$/.test(ce))throw new Error('Invalid color "'+ce+'" passed to jsPDF.encodeColorString.')}if(typeof ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ce)&&(ce="#"+ce[1]+ce[1]+ce[2]+ce[2]+ce[3]+ce[3]),typeof ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ce)){var yt=parseInt(ce.substr(1),16);ce=yt>>16&255,ge=yt>>8&255,Ee=255&yt}if(ge===void 0||Oe===void 0&&ce===ge&&ge===Ee)if(typeof ce=="string")V=ce+" "+Xe[0];else switch(A.precision){case 2:V=ue(ce/255)+" "+Xe[0];break;case 3:default:V=F(ce/255)+" "+Xe[0]}else if(Oe===void 0||xn(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return V=["1.","1.","1.",Xe[1]].join(" ");if(typeof ce=="string")V=[ce,ge,Ee,Xe[1]].join(" ");else switch(A.precision){case 2:V=[ue(ce/255),ue(ge/255),ue(Ee/255),Xe[1]].join(" ");break;default:case 3:V=[F(ce/255),F(ge/255),F(Ee/255),Xe[1]].join(" ")}}else if(typeof ce=="string")V=[ce,ge,Ee,Oe,Xe[2]].join(" ");else switch(A.precision){case 2:V=[ue(ce),ue(ge),ue(Ee),ue(Oe),Xe[2]].join(" ");break;case 3:default:V=[F(ce),F(ge),F(Ee),F(Oe),Xe[2]].join(" ")}return V},Be=_.__private__.getFilters=function(){return l},Mt=_.__private__.putStream=function(A){var V=(A=A||{}).data||"",ce=A.filters||Be(),ge=A.alreadyAppliedFilters||[],Ee=A.addLength1||!1,Oe=V.length,Xe=A.objectId,ot=function(ki){return ki};if(v!==null&&Xe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(ot=Pn.encryptor(Xe,0));var yt={};ce===!0&&(ce=["FlateEncode"]);var Ut=A.additionalKeyValues||[],jt=(yt=Tt.API.processDataByFilters!==void 0?Tt.API.processDataByFilters(V,ce):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(yt.data.length!==0&&(Ut.push({key:"Length",value:yt.data.length}),Ee===!0&&Ut.push({key:"Length1",value:Oe})),jt.length!=0)if(jt.split("/").length-1==1)Ut.push({key:"Filter",value:jt});else{Ut.push({key:"Filter",value:"["+jt+"]"});for(var Zt=0;Zt<Ut.length;Zt+=1)if(Ut[Zt].key==="DecodeParms"){for(var Un=[],Bn=0;Bn<yt.reverseChain.split("/").length-1;Bn+=1)Un.push("null");Un.push(Ut[Zt].value),Ut[Zt].value="["+Un.join(" ")+"]"}}fe("<<");for(var Xn=0;Xn<Ut.length;Xn++)fe("/"+Ut[Xn].key+" "+Ut[Xn].value);fe(">>"),yt.data.length!==0&&(fe("stream"),fe(ot(yt.data)),fe("endstream"))},$t=_.__private__.putPage=function(A){var V=A.number,ce=A.data,ge=A.objId,Ee=A.contentsObjId;Ci(ge,!0),fe("<</Type /Page"),fe("/Parent "+A.rootDictionaryObjId+" 0 R"),fe("/Resources "+A.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(B(A.mediaBox.bottomLeftX))+" "+parseFloat(B(A.mediaBox.bottomLeftY))+" "+B(A.mediaBox.topRightX)+" "+B(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&fe("/CropBox ["+B(A.cropBox.bottomLeftX)+" "+B(A.cropBox.bottomLeftY)+" "+B(A.cropBox.topRightX)+" "+B(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&fe("/BleedBox ["+B(A.bleedBox.bottomLeftX)+" "+B(A.bleedBox.bottomLeftY)+" "+B(A.bleedBox.topRightX)+" "+B(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&fe("/TrimBox ["+B(A.trimBox.bottomLeftX)+" "+B(A.trimBox.bottomLeftY)+" "+B(A.trimBox.topRightX)+" "+B(A.trimBox.topRightY)+"]"),A.artBox!==null&&fe("/ArtBox ["+B(A.artBox.bottomLeftX)+" "+B(A.artBox.bottomLeftY)+" "+B(A.artBox.topRightX)+" "+B(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&fe("/UserUnit "+A.userUnit),Vt.publish("putPage",{objId:ge,pageContext:_t[V],pageNumber:V,page:ce}),fe("/Contents "+Ee+" 0 R"),fe(">>"),fe("endobj");var Oe=ce.join(`
`);return L===R.ADVANCED&&(Oe+=`
Q`),Ci(Ee,!0),Mt({data:Oe,filters:Be(),objectId:Ee}),fe("endobj"),ge},Dn=_.__private__.putPages=function(){var A,V,ce=[];for(A=1;A<=on;A++)_t[A].objId=Ln(),_t[A].contentsObjId=Ln();for(A=1;A<=on;A++)ce.push($t({number:A,data:Me[A],objId:_t[A].objId,contentsObjId:_t[A].contentsObjId,mediaBox:_t[A].mediaBox,cropBox:_t[A].cropBox,bleedBox:_t[A].bleedBox,trimBox:_t[A].trimBox,artBox:_t[A].artBox,userUnit:_t[A].userUnit,rootDictionaryObjId:li,resourceDictionaryObjId:ln}));Ci(li,!0),fe("<</Type /Pages");var ge="/Kids [";for(V=0;V<on;V++)ge+=ce[V]+" 0 R ";fe(ge+"]"),fe("/Count "+on),fe(">>"),fe("endobj"),Vt.publish("postPutPages")},Fn=function(A){Vt.publish("putFont",{font:A,out:fe,newObject:jn,putStream:Mt}),A.isAlreadyPutted!==!0&&(A.objectNumber=jn(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+Rc(A.postScriptName)),fe("/Subtype /Type1"),typeof A.encoding=="string"&&fe("/Encoding /"+A.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},ys=function(){for(var A in Pt)Pt.hasOwnProperty(A)&&(b===!1||b===!0&&S.hasOwnProperty(A))&&Fn(Pt[A])},ts=function(A){A.objectNumber=jn();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[B(A.x),B(A.y),B(A.x+A.width),B(A.y+A.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var ce=A.pages[1].join(`
`);Mt({data:ce,additionalKeyValues:V,objectId:A.objectNumber}),fe("endobj")},ns=function(){for(var A in gn)gn.hasOwnProperty(A)&&ts(gn[A])},ha=function(A,V){var ce,ge=[],Ee=1/(V-1);for(ce=0;ce<1;ce+=Ee)ge.push(ce);if(ge.push(1),A[0].offset!=0){var Oe={offset:0,color:A[0].color};A.unshift(Oe)}if(A[A.length-1].offset!=1){var Xe={offset:1,color:A[A.length-1].color};A.push(Xe)}for(var ot="",yt=0,Ut=0;Ut<ge.length;Ut++){for(ce=ge[Ut];ce>A[yt+1].offset;)yt++;var jt=A[yt].offset,Zt=(ce-jt)/(A[yt+1].offset-jt),Un=A[yt].color,Bn=A[yt+1].color;ot+=Z(Math.round((1-Zt)*Un[0]+Zt*Bn[0]).toString(16))+Z(Math.round((1-Zt)*Un[1]+Zt*Bn[1]).toString(16))+Z(Math.round((1-Zt)*Un[2]+Zt*Bn[2]).toString(16))}return ot.trim()},pa=function(A,V){V||(V=21);var ce=jn(),ge=ha(A.colors,V),Ee=[];Ee.push({key:"FunctionType",value:"0"}),Ee.push({key:"Domain",value:"[0.0 1.0]"}),Ee.push({key:"Size",value:"["+V+"]"}),Ee.push({key:"BitsPerSample",value:"8"}),Ee.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ee.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Mt({data:ge,additionalKeyValues:Ee,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ce}),fe("endobj"),A.objectNumber=jn(),fe("<< /ShadingType "+A.type),fe("/ColorSpace /DeviceRGB");var Oe="/Coords ["+B(parseFloat(A.coords[0]))+" "+B(parseFloat(A.coords[1]))+" ";A.type===2?Oe+=B(parseFloat(A.coords[2]))+" "+B(parseFloat(A.coords[3])):Oe+=B(parseFloat(A.coords[2]))+" "+B(parseFloat(A.coords[3]))+" "+B(parseFloat(A.coords[4]))+" "+B(parseFloat(A.coords[5])),fe(Oe+="]"),A.matrix&&fe("/Matrix ["+A.matrix.toString()+"]"),fe("/Function "+ce+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},ni=function(A,V){var ce=Ln(),ge=jn();V.push({resourcesOid:ce,objectOid:ge}),A.objectNumber=ge;var Ee=[];Ee.push({key:"Type",value:"/Pattern"}),Ee.push({key:"PatternType",value:"1"}),Ee.push({key:"PaintType",value:"1"}),Ee.push({key:"TilingType",value:"1"}),Ee.push({key:"BBox",value:"["+A.boundingBox.map(B).join(" ")+"]"}),Ee.push({key:"XStep",value:B(A.xStep)}),Ee.push({key:"YStep",value:B(A.yStep)}),Ee.push({key:"Resources",value:ce+" 0 R"}),A.matrix&&Ee.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),Mt({data:A.stream,additionalKeyValues:Ee,objectId:A.objectNumber}),fe("endobj")},Ja=function(A){var V;for(V in Yt)Yt.hasOwnProperty(V)&&(Yt[V]instanceof Sl?pa(Yt[V]):Yt[V]instanceof yu&&ni(Yt[V],A))},Il=function(A){for(var V in A.objectNumber=jn(),fe("<<"),A)switch(V){case"opacity":fe("/ca "+ue(A[V]));break;case"stroke-opacity":fe("/CA "+ue(A[V]))}fe(">>"),fe("endobj")},js=function(){var A;for(A in an)an.hasOwnProperty(A)&&Il(an[A])},bs=function(){for(var A in fe("/XObject <<"),gn)gn.hasOwnProperty(A)&&gn[A].objectNumber>=0&&fe("/"+A+" "+gn[A].objectNumber+" 0 R");Vt.publish("putXobjectDict"),fe(">>")},Hc=function(){Pn.oid=jn(),fe("<<"),fe("/Filter /Standard"),fe("/V "+Pn.v),fe("/R "+Pn.r),fe("/U <"+Pn.toHexString(Pn.U)+">"),fe("/O <"+Pn.toHexString(Pn.O)+">"),fe("/P "+Pn.P),fe(">>"),fe("endobj")},Ll=function(){for(var A in fe("/Font <<"),Pt)Pt.hasOwnProperty(A)&&(b===!1||b===!0&&S.hasOwnProperty(A))&&fe("/"+A+" "+Pt[A].objectNumber+" 0 R");fe(">>")},Au=function(){if(Object.keys(Yt).length>0){for(var A in fe("/Shading <<"),Yt)Yt.hasOwnProperty(A)&&Yt[A]instanceof Sl&&Yt[A].objectNumber>=0&&fe("/"+A+" "+Yt[A].objectNumber+" 0 R");Vt.publish("putShadingPatternDict"),fe(">>")}},Ro=function(A){if(Object.keys(Yt).length>0){for(var V in fe("/Pattern <<"),Yt)Yt.hasOwnProperty(V)&&Yt[V]instanceof _.TilingPattern&&Yt[V].objectNumber>=0&&Yt[V].objectNumber<A&&fe("/"+V+" "+Yt[V].objectNumber+" 0 R");Vt.publish("putTilingPatternDict"),fe(">>")}},Io=function(){if(Object.keys(an).length>0){var A;for(A in fe("/ExtGState <<"),an)an.hasOwnProperty(A)&&an[A].objectNumber>=0&&fe("/"+A+" "+an[A].objectNumber+" 0 R");Vt.publish("putGStateDict"),fe(">>")}},Mn=function(A){Ci(A.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ll(),Au(),Ro(A.objectOid),Io(),bs(),fe(">>"),fe("endobj")},kr=function(){var A=[];ys(),js(),ns(),Ja(A),Vt.publish("putResources"),A.forEach(Mn),Mn({resourcesOid:ln,objectOid:Number.MAX_SAFE_INTEGER}),Vt.publish("postPutResources")},Wi=function(){Vt.publish("putAdditionalObjects");for(var A=0;A<Ae.length;A++){var V=Ae[A];Ci(V.objId,!0),fe(V.content),fe("endobj")}Vt.publish("postPutAdditionalObjects")},Dl=function(A){St[A.fontName]=St[A.fontName]||{},St[A.fontName][A.fontStyle]=A.id},Ml=function(A,V,ce,ge,Ee){var Oe={id:"F"+(Object.keys(Pt).length+1).toString(10),postScriptName:A,fontName:V,fontStyle:ce,encoding:ge,isStandardFont:Ee||!1,metadata:{}};return Vt.publish("addFont",{font:Oe,instance:this}),Pt[Oe.id]=Oe,Dl(Oe),Oe.id},Pl=function(A){for(var V=0,ce=$e.length;V<ce;V++){var ge=Ml.call(this,A[V][0],A[V][1],A[V][2],$e[V][3],!0);b===!1&&(S[ge]=!0);var Ee=A[V][0].split("-");Dl({id:ge,fontName:Ee[0],fontStyle:Ee[1]||""})}Vt.publish("addFonts",{fonts:Pt,dictionary:St})},Rr=function(A){return A.foo=function(){try{return A.apply(this,arguments)}catch(ge){var V=ge.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var ce="Error in function "+V.split(`
`)[0].split("<")[0]+": "+ge.message;if(!Dt.console)throw new Error(ce);Dt.console.error(ce,ge),Dt.alert&&alert(ce)}},A.foo.bar=A,A.foo},Fs=function(A,V){var ce,ge,Ee,Oe,Xe,ot,yt,Ut,jt;if(Ee=(V=V||{}).sourceEncoding||"Unicode",Xe=V.outputEncoding,(V.autoencode||Xe)&&Pt[Nt].metadata&&Pt[Nt].metadata[Ee]&&Pt[Nt].metadata[Ee].encoding&&(Oe=Pt[Nt].metadata[Ee].encoding,!Xe&&Pt[Nt].encoding&&(Xe=Pt[Nt].encoding),!Xe&&Oe.codePages&&(Xe=Oe.codePages[0]),typeof Xe=="string"&&(Xe=Oe[Xe]),Xe)){for(yt=!1,ot=[],ce=0,ge=A.length;ce<ge;ce++)(Ut=Xe[A.charCodeAt(ce)])?ot.push(String.fromCharCode(Ut)):ot.push(A[ce]),ot[ce].charCodeAt(0)>>8&&(yt=!0);A=ot.join("")}for(ce=A.length;yt===void 0&&ce!==0;)A.charCodeAt(ce-1)>>8&&(yt=!0),ce--;if(!yt)return A;for(ot=V.noBOM?[]:[254,255],ce=0,ge=A.length;ce<ge;ce++){if((jt=(Ut=A.charCodeAt(ce))>>8)>>8)throw new Error("Character at position "+ce+" of string '"+A+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ot.push(jt),ot.push(Ut-(jt<<8))}return String.fromCharCode.apply(void 0,ot)},or=_.__private__.pdfEscape=_.pdfEscape=function(A,V){return Fs(A,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fi=_.__private__.beginPage=function(A){Me[++on]=[],_t[on]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},Do(on),Le(Me[H])},Lo=function(A,V){var ce,ge,Ee;switch(n=V||n,typeof A=="string"&&(ce=C(A.toLowerCase()),Array.isArray(ce)&&(ge=ce[0],Ee=ce[1])),Array.isArray(A)&&(ge=A[0]*it,Ee=A[1]*it),isNaN(ge)&&(ge=a[0],Ee=a[1]),(ge>14400||Ee>14400)&&(In.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),Ee=Math.min(14400,Ee)),a=[ge,Ee],n.substr(0,1)){case"l":Ee>ge&&(a=[Ee,ge]);break;case"p":ge>Ee&&(a=[Ee,ge])}Fi(a),Xa(bi),fe(as),zl!==0&&fe(zl+" J"),Hl!==0&&fe(Hl+" j"),Vt.publish("addPage",{pageNumber:on})},Tu=function(A){A>0&&A<=on&&(Me.splice(A,1),_t.splice(A,1),on--,H>on&&(H=on),this.setPage(H))},Do=function(A){A>0&&A<=on&&(H=A)},ma=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return Me.length-1},Ul=function(A,V,ce){var ge,Ee=void 0;return ce=ce||{},A=A!==void 0?A:Pt[Nt].fontName,V=V!==void 0?V:Pt[Nt].fontStyle,ge=A.toLowerCase(),St[ge]!==void 0&&St[ge][V]!==void 0?Ee=St[ge][V]:St[A]!==void 0&&St[A][V]!==void 0?Ee=St[A][V]:ce.disableWarning===!1&&In.warn("Unable to look up font label for font '"+A+"', '"+V+"'. Refer to getFontList() for available fonts."),Ee||ce.noFallback||(Ee=St.times[V])==null&&(Ee=St.times.normal),Ee},Eu=_.__private__.putInfo=function(){var A=jn(),V=function(ge){return ge};for(var ce in v!==null&&(V=Pn.encryptor(A,0)),fe("<<"),fe("/Producer ("+or(V("jsPDF "+Tt.version))+")"),pt)pt.hasOwnProperty(ce)&&pt[ce]&&fe("/"+ce.substr(0,1).toUpperCase()+ce.substr(1)+" ("+or(V(pt[ce]))+")");fe("/CreationDate ("+or(V(be))+")"),fe(">>"),fe("endobj")},xs=_.__private__.putCatalog=function(A){var V=(A=A||{}).rootDictionaryObjId||li;switch(jn(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+V+" 0 R"),tt||(tt="fullwidth"),tt){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ce=""+tt;ce.substr(ce.length-1)==="%"&&(tt=parseInt(tt)/100),typeof tt=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+ue(tt)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}Se&&fe("/PageMode /"+Se),Vt.publish("putCatalog"),fe(">>"),fe("endobj")},Gc=_.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ae+1)),fe("/Root "+ae+" 0 R"),fe("/Info "+(ae-1)+" 0 R"),v!==null&&fe("/Encrypt "+Pn.oid+" 0 R"),fe("/ID [ <"+U+"> <"+U+"> ]"),fe(">>")},Cu=_.__private__.putHeader=function(){fe("%PDF-"+T),fe("%")},ku=_.__private__.putXRef=function(){var A="0000000000";fe("xref"),fe("0 "+(ae+1)),fe("0000000000 65535 f ");for(var V=1;V<=ae;V++)typeof de[V]=="function"?fe((A+de[V]()).slice(-10)+" 00000 n "):de[V]!==void 0?fe((A+de[V]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},is=_.__private__.buildDocument=function(){st(),Le(se),Vt.publish("buildDocument"),Cu(),Dn(),Wi(),kr(),v!==null&&Hc(),Eu(),xs();var A=he;return ku(),Gc(),fe("startxref"),fe(""+A),fe("%%EOF"),Le(Me[H]),se.join(`
`)},Mo=_.__private__.getBlob=function(A){return new Blob([ut(A)],{type:"application/pdf"})},Po=_.output=_.__private__.output=Rr((function(A,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",A){case void 0:return is();case"save":_.save(V.filename);break;case"arraybuffer":return ut(is());case"blob":return Mo(is());case"bloburi":case"bloburl":if(Dt.URL!==void 0&&typeof Dt.URL.createObjectURL=="function")return Dt.URL&&Dt.URL.createObjectURL(Mo(is()))||void 0;In.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ce="",ge=is();try{ce=X0(ge)}catch{ce=X0(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+V.filename+";base64,"+ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var Ee="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(Ee=V.pdfObjectUrl,Oe="");var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ee+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",ot=Dt.open();return ot!==null&&ot.document.write(Xe),ot}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',Ut=Dt.open();if(Ut!==null){Ut.document.write(yt);var jt=this;Ut.document.documentElement.querySelector("#pdfViewer").onload=function(){Ut.document.title=V.filename,Ut.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(jt.output("bloburl"))}}return Ut}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',Un=Dt.open();if(Un!==null&&(Un.document.write(Zt),Un.document.title=V.filename),Un||typeof safari>"u")return Un;break;case"datauri":case"dataurl":return Dt.document.location.href=this.output("datauristring",V);default:return null}})),Ya=function(A){return Array.isArray(es)===!0&&es.indexOf(A)>-1};switch(i){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=Ya("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);it=i}var Pn=null;_e(),re();var Ol=function(A){return v!==null?Pn.encryptor(A,0):function(V){return V}},Uo=_.__private__.getPageInfo=_.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:_t[A].objId,pageNumber:A,pageContext:_t[A]}},At=_.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in _t)if(_t[V].objId===A)break;return Uo(V)},ga=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:_t[H].objId,pageNumber:H,pageContext:_t[H]}};_.addPage=function(){return Lo.apply(this,arguments),this},_.setPage=function(){return Do.apply(this,arguments),Le.call(this,Me[H]),this},_.insertPage=function(A){return this.addPage(),this.movePage(H,A),this},_.movePage=function(A,V){var ce,ge;if(A>V){ce=Me[A],ge=_t[A];for(var Ee=A;Ee>V;Ee--)Me[Ee]=Me[Ee-1],_t[Ee]=_t[Ee-1];Me[V]=ce,_t[V]=ge,this.setPage(V)}else if(A<V){ce=Me[A],ge=_t[A];for(var Oe=A;Oe<V;Oe++)Me[Oe]=Me[Oe+1],_t[Oe]=_t[Oe+1];Me[V]=ce,_t[V]=ge,this.setPage(V)}return this},_.deletePage=function(){return Tu.apply(this,arguments),this},_.__private__.text=_.text=function(A,V,ce,ge,Ee){var Oe,Xe,ot,yt,Ut,jt,Zt,Un,Bn,Xn=(ge=ge||{}).scope||this;if(typeof A=="number"&&typeof V=="number"&&(typeof ce=="string"||Array.isArray(ce))){var ki=ce;ce=V,V=A,A=ki}if(arguments[3]instanceof xt?(q("The transform parameter of text() with a Matrix value"),Bn=Ee):(ot=arguments[4],yt=arguments[5],xn(Zt=arguments[3])==="object"&&Zt!==null||(typeof ot=="string"&&(yt=ot,ot=null),typeof Zt=="string"&&(yt=Zt,Zt=null),typeof Zt=="number"&&(ot=Zt,Zt=null),ge={flags:Zt,angle:ot,align:yt})),isNaN(V)||isNaN(ce)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return Xn;var ci="",Bi=!1,vr=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:xa,qs=Xn.internal.scaleFactor;function Mu(Sn){return Sn=Sn.split("	").join(Array(ge.TabLen||9).join(" ")),or(Sn,Zt)}function zo(Sn){for(var _n,Qn=Sn.concat(),ii=[],As=Qn.length;As--;)typeof(_n=Qn.shift())=="string"?ii.push(_n):Array.isArray(Sn)&&(_n.length===1||_n[1]===void 0&&_n[2]===void 0)?ii.push(_n[0]):ii.push([_n[0],_n[1],_n[2]]);return ii}function Ho(Sn,_n){var Qn;if(typeof Sn=="string")Qn=_n(Sn)[0];else if(Array.isArray(Sn)){for(var ii,As,Ts=Sn.concat(),zi=[],no=Ts.length;no--;)typeof(ii=Ts.shift())=="string"?zi.push(_n(ii)[0]):Array.isArray(ii)&&typeof ii[0]=="string"&&(As=_n(ii[0],ii[1],ii[2]),zi.push([As[0],As[1],As[2]]));Qn=zi}return Qn}var Ss=!1,zs=!0;if(typeof A=="string")Ss=!0;else if(Array.isArray(A)){var Jl=A.concat();Xe=[];for(var Hs,Ki=Jl.length;Ki--;)(typeof(Hs=Jl.shift())!="string"||Array.isArray(Hs)&&typeof Hs[0]!="string")&&(zs=!1);Ss=zs}if(Ss===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var to=Ze/Xn.internal.scaleFactor,Na=to*(vr-1);switch(ge.baseline){case"bottom":ce-=Na;break;case"top":ce+=to-Na;break;case"hanging":ce+=to-2*Na;break;case"middle":ce+=to/2-Na}if((jt=ge.maxWidth||0)>0&&(typeof A=="string"?A=Xn.splitTextToSize(A,jt):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce((function(Sn,_n){return Sn.concat(Xn.splitTextToSize(_n,jt))}),[]))),Oe={text:A,x:V,y:ce,options:ge,mutex:{pdfEscape:or,activeFontKey:Nt,fonts:Pt,activeFontSize:Ze}},Vt.publish("preProcessText",Oe),A=Oe.text,ot=(ge=Oe.options).angle,!(Bn instanceof xt)&&ot&&typeof ot=="number"){ot*=Math.PI/180,ge.rotationDirection===0&&(ot=-ot),L===R.ADVANCED&&(ot=-ot);var Aa=Math.cos(ot),Go=Math.sin(ot);Bn=new xt(Aa,Go,-Go,Aa,0,0)}else ot&&ot instanceof xt&&(Bn=ot);L!==R.ADVANCED||Bn||(Bn=ar),(Ut=ge.charSpace||Bo)!==void 0&&(ci+=B(j(Ut))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Un=ge.horizontalScale)!==void 0&&(ci+=B(100*Un)+` Tz
`),ge.lang;var Xi=-1,Pu=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,Yl=Xn.internal.getCurrentPageInfo().pageContext;switch(Pu){case 0:case!1:case"fill":Xi=0;break;case 1:case!0:case"stroke":Xi=1;break;case 2:case"fillThenStroke":Xi=2;break;case 3:case"invisible":Xi=3;break;case 4:case"fillAndAddForClipping":Xi=4;break;case 5:case"strokeAndAddPathForClipping":Xi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Xi=6;break;case 7:case"addToPathForClipping":Xi=7}var Uu=Yl.usedRenderingMode!==void 0?Yl.usedRenderingMode:-1;Xi!==-1?ci+=Xi+` Tr
`:Uu!==-1&&(ci+=`0 Tr
`),Xi!==-1&&(Yl.usedRenderingMode=Xi),yt=ge.align||"left";var os,Wl=Ze*vr,Jc=Xn.internal.pageSize.getWidth(),Qi=Pt[Nt];Ut=ge.charSpace||Bo,jt=ge.maxWidth||0,Zt=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var Mr=[];if(Object.prototype.toString.call(A)==="[object Array]"){var yr;Xe=zo(A),yt!=="left"&&(os=Xe.map((function(Sn){return Xn.getStringUnitWidth(Sn,{font:Qi,charSpace:Ut,fontSize:Ze,doKerning:!1})*Ze/qs})));var Pr,Gs=0;if(yt==="right"){V-=os[0],A=[],Ki=Xe.length;for(var ls=0;ls<Ki;ls++)ls===0?(Pr=ss(V),yr=Dr(ce)):(Pr=j(Gs-os[ls]),yr=-Wl),A.push([Xe[ls],Pr,yr]),Gs=os[ls]}else if(yt==="center"){V-=os[0]/2,A=[],Ki=Xe.length;for(var us=0;us<Ki;us++)us===0?(Pr=ss(V),yr=Dr(ce)):(Pr=j((Gs-os[us])/2),yr=-Wl),A.push([Xe[us],Pr,yr]),Gs=os[us]}else if(yt==="left"){A=[],Ki=Xe.length;for(var Vo=0;Vo<Ki;Vo++)A.push(Xe[Vo])}else{if(yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');A=[],Ki=Xe.length,jt=jt!==0?jt:Jc;for(var qi=0;qi<Ki;qi++)yr=qi===0?Dr(ce):-Wl,Pr=qi===0?ss(V):0,qi<Ki-1?Mr.push(B(j((jt-os[qi])/(Xe[qi].split(" ").length-1)))):Mr.push(0),A.push([Xe[qi],Pr,yr])}}var Ta=typeof ge.R2L=="boolean"?ge.R2L:We;Ta===!0&&(A=Ho(A,(function(Sn,_n,Qn){return[Sn.split("").reverse().join(""),_n,Qn]}))),Oe={text:A,x:V,y:ce,options:ge,mutex:{pdfEscape:or,activeFontKey:Nt,fonts:Pt,activeFontSize:Ze}},Vt.publish("postProcessText",Oe),A=Oe.text,Bi=Oe.mutex.isHex||!1;var Vs=Pt[Nt].encoding;Vs!=="WinAnsiEncoding"&&Vs!=="StandardEncoding"||(A=Ho(A,(function(Sn,_n,Qn){return[Mu(Sn),_n,Qn]}))),Xe=zo(A),A=[];for(var _s,Ur,Zi,Or=0,Ea=1,Ca=Array.isArray(Xe[0])?Ea:Or,ur="",$o=function(Sn,_n,Qn){var ii="";return Qn instanceof xt?(Qn=typeof ge.angle=="number"?sr(Qn,new xt(1,0,0,1,Sn,_n)):sr(new xt(1,0,0,1,Sn,_n),Qn),L===R.ADVANCED&&(Qn=sr(new xt(1,0,0,-1,0,0),Qn)),ii=Qn.join(" ")+` Tm
`):ii=B(Sn)+" "+B(_n)+` Td
`,ii},br=0;br<Xe.length;br++){switch(ur="",Ca){case Ea:Zi=(Bi?"<":"(")+Xe[br][0]+(Bi?">":")"),_s=parseFloat(Xe[br][1]),Ur=parseFloat(Xe[br][2]);break;case Or:Zi=(Bi?"<":"(")+Xe[br]+(Bi?">":")"),_s=ss(V),Ur=Dr(ce)}Mr!==void 0&&Mr[br]!==void 0&&(ur=Mr[br]+` Tw
`),br===0?A.push(ur+$o(_s,Ur,Bn)+Zi):Ca===Or?A.push(ur+Zi):Ca===Ea&&A.push(ur+$o(_s,Ur,Bn)+Zi)}A=Ca===Or?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var Ns=`BT
/`;return Ns+=Nt+" "+Ze+` Tf
`,Ns+=B(Ze*vr)+` TL
`,Ns+=Qa+`
`,Ns+=ci,Ns+=A,fe(Ns+="ET"),S[Nt]=!0,Xn};var Ru=_.__private__.clip=_.clip=function(A){return fe(A==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return Ru("evenodd")},_.__private__.discardPath=_.discardPath=function(){return fe("n"),this};var Ir=_.__private__.isValidStyle=function(A){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(V=!0),V};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(A){return Ir(A)&&(h=A),this};var jl=_.__private__.getStyle=_.getStyle=function(A){var V=h;switch(A){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=A}return V},va=_.close=function(){return fe("h"),this};_.stroke=function(){return fe("S"),this},_.fill=function(A){return lr("f",A),this},_.fillEvenOdd=function(A){return lr("f*",A),this},_.fillStroke=function(A){return lr("B",A),this},_.fillStrokeEvenOdd=function(A){return lr("B*",A),this};var lr=function(A,V){xn(V)==="object"?ws(V,A):fe(A)},Wa=function(A){A===null||L===R.ADVANCED&&A===void 0||(A=jl(A),fe(A))};function Ka(A,V,ce,ge,Ee){var Oe=new yu(V||this.boundingBox,ce||this.xStep,ge||this.yStep,this.gState,Ee||this.matrix);Oe.stream=this.stream;var Xe=A+"$$"+this.cloneIndex+++"$$";return Ei(Xe,Oe),Oe}var ws=function(A,V){var ce=Cr[A.key],ge=Yt[ce];if(ge instanceof Sl)fe("q"),fe(Fl(V)),ge.gState&&_.setGState(ge.gState),fe(A.matrix.toString()+" cm"),fe("/"+ce+" sh"),fe("Q");else if(ge instanceof yu){var Ee=new xt(1,0,0,-1,0,_a());A.matrix&&(Ee=Ee.multiply(A.matrix||ar),ce=Ka.call(ge,A.key,A.boundingBox,A.xStep,A.yStep,Ee).id),fe("q"),fe("/Pattern cs"),fe("/"+ce+" scn"),ge.gState&&_.setGState(ge.gState),fe(V),fe("Q")}},Fl=function(A){switch(A){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ya=_.moveTo=function(A,V){return fe(B(j(A))+" "+B(ie(V))+" m"),this},ba=_.lineTo=function(A,V){return fe(B(j(A))+" "+B(ie(V))+" l"),this},rs=_.curveTo=function(A,V,ce,ge,Ee,Oe){return fe([B(j(A)),B(ie(V)),B(j(ce)),B(ie(ge)),B(j(Ee)),B(ie(Oe)),"c"].join(" ")),this};_.__private__.line=_.line=function(A,V,ce,ge,Ee){if(isNaN(A)||isNaN(V)||isNaN(ce)||isNaN(ge)||!Ir(Ee))throw new Error("Invalid arguments passed to jsPDF.line");return L===R.COMPAT?this.lines([[ce-A,ge-V]],A,V,[1,1],Ee||"S"):this.lines([[ce-A,ge-V]],A,V,[1,1]).stroke()},_.__private__.lines=_.lines=function(A,V,ce,ge,Ee,Oe){var Xe,ot,yt,Ut,jt,Zt,Un,Bn,Xn,ki,ci,Bi;if(typeof A=="number"&&(Bi=ce,ce=V,V=A,A=Bi),ge=ge||[1,1],Oe=Oe||!1,isNaN(V)||isNaN(ce)||!Array.isArray(A)||!Array.isArray(ge)||!Ir(Ee)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ya(V,ce),Xe=ge[0],ot=ge[1],Ut=A.length,ki=V,ci=ce,yt=0;yt<Ut;yt++)(jt=A[yt]).length===2?(ki=jt[0]*Xe+ki,ci=jt[1]*ot+ci,ba(ki,ci)):(Zt=jt[0]*Xe+ki,Un=jt[1]*ot+ci,Bn=jt[2]*Xe+ki,Xn=jt[3]*ot+ci,ki=jt[4]*Xe+ki,ci=jt[5]*ot+ci,rs(Zt,Un,Bn,Xn,ki,ci));return Oe&&va(),Wa(Ee),this},_.path=function(A){for(var V=0;V<A.length;V++){var ce=A[V],ge=ce.c;switch(ce.op){case"m":ya(ge[0],ge[1]);break;case"l":ba(ge[0],ge[1]);break;case"c":rs.apply(this,ge);break;case"h":va()}}return this},_.__private__.rect=_.rect=function(A,V,ce,ge,Ee){if(isNaN(A)||isNaN(V)||isNaN(ce)||isNaN(ge)||!Ir(Ee))throw new Error("Invalid arguments passed to jsPDF.rect");return L===R.COMPAT&&(ge=-ge),fe([B(j(A)),B(ie(V)),B(j(ce)),B(j(ge)),"re"].join(" ")),Wa(Ee),this},_.__private__.triangle=_.triangle=function(A,V,ce,ge,Ee,Oe,Xe){if(isNaN(A)||isNaN(V)||isNaN(ce)||isNaN(ge)||isNaN(Ee)||isNaN(Oe)||!Ir(Xe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ce-A,ge-V],[Ee-ce,Oe-ge],[A-Ee,V-Oe]],A,V,[1,1],Xe,!0),this},_.__private__.roundedRect=_.roundedRect=function(A,V,ce,ge,Ee,Oe,Xe){if(isNaN(A)||isNaN(V)||isNaN(ce)||isNaN(ge)||isNaN(Ee)||isNaN(Oe)||!Ir(Xe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ot=4/3*(Math.SQRT2-1);return Ee=Math.min(Ee,.5*ce),Oe=Math.min(Oe,.5*ge),this.lines([[ce-2*Ee,0],[Ee*ot,0,Ee,Oe-Oe*ot,Ee,Oe],[0,ge-2*Oe],[0,Oe*ot,-Ee*ot,Oe,-Ee,Oe],[2*Ee-ce,0],[-Ee*ot,0,-Ee,-Oe*ot,-Ee,-Oe],[0,2*Oe-ge],[0,-Oe*ot,Ee*ot,-Oe,Ee,-Oe]],A+Ee,V,[1,1],Xe,!0),this},_.__private__.ellipse=_.ellipse=function(A,V,ce,ge,Ee){if(isNaN(A)||isNaN(V)||isNaN(ce)||isNaN(ge)||!Ir(Ee))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*ce,Xe=4/3*(Math.SQRT2-1)*ge;return ya(A+ce,V),rs(A+ce,V-Xe,A+Oe,V-ge,A,V-ge),rs(A-Oe,V-ge,A-ce,V-Xe,A-ce,V),rs(A-ce,V+Xe,A-Oe,V+ge,A,V+ge),rs(A+Oe,V+ge,A+ce,V+Xe,A+ce,V),Wa(Ee),this},_.__private__.circle=_.circle=function(A,V,ce,ge){if(isNaN(A)||isNaN(V)||isNaN(ce)||!Ir(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,V,ce,ce,ge)},_.setFont=function(A,V,ce){return ce&&(V=W(V,ce)),Nt=Ul(A,V,{disableWarning:!1}),this};var Oo=_.__private__.getFont=_.getFont=function(){return Pt[Ul.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var A,V,ce={};for(A in St)if(St.hasOwnProperty(A))for(V in ce[A]=[],St[A])St[A].hasOwnProperty(V)&&ce[A].push(V);return ce},_.addFont=function(A,V,ce,ge,Ee){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?Ee=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(ce=W(ce,ge)),Ee=Ee||"Identity-H",Ml.call(this,A,V,ce,Ee)};var xa,bi=t.lineWidth||.200025,Lr=_.__private__.getLineWidth=_.getLineWidth=function(){return bi},Xa=_.__private__.setLineWidth=_.setLineWidth=function(A){return bi=A,fe(B(j(A))+" w"),this};_.__private__.setLineDash=Tt.API.setLineDash=Tt.API.setLineDashPattern=function(A,V){if(A=A||[],V=V||0,isNaN(V)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map((function(ce){return B(j(ce))})).join(" "),V=B(j(V)),fe("["+A+"] "+V+" d"),this};var wa=_.__private__.getLineHeight=_.getLineHeight=function(){return Ze*xa};_.__private__.getLineHeight=_.getLineHeight=function(){return Ze*xa};var Iu=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(xa=A),this},jo=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return xa};Iu(t.lineHeight);var ss=_.__private__.getHorizontalCoordinate=function(A){return j(A)},Dr=_.__private__.getVerticalCoordinate=function(A){return L===R.ADVANCED?A:_t[H].mediaBox.topRightY-_t[H].mediaBox.bottomLeftY-j(A)},Fo=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(A){return B(ss(A))},Bs=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(A){return B(Dr(A))},as=t.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return wn(as)},_.__private__.setStrokeColor=_.setDrawColor=function(A,V,ce,ge){return as=ui({ch1:A,ch2:V,ch3:ce,ch4:ge,pdfColorType:"draw",precision:2}),fe(as),this};var Bl=t.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return wn(Bl)},_.__private__.setFillColor=_.setFillColor=function(A,V,ce,ge){return Bl=ui({ch1:A,ch2:V,ch3:ce,ch4:ge,pdfColorType:"fill",precision:2}),fe(Bl),this};var Qa=t.textColor||"0 g",ql=_.__private__.getTextColor=_.getTextColor=function(){return wn(Qa)};_.__private__.setTextColor=_.setTextColor=function(A,V,ce,ge){return Qa=ui({ch1:A,ch2:V,ch3:ce,ch4:ge,pdfColorType:"text",precision:3}),this};var Bo=t.charSpace,Vc=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Bo||0)};_.__private__.setCharSpace=_.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Bo=A,this};var zl=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(A){var V=_.CapJoinStyles[A];if(V===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zl=V,fe(V+" J"),this};var Hl=0;_.__private__.setLineJoin=_.setLineJoin=function(A){var V=_.CapJoinStyles[A];if(V===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hl=V,fe(V+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(B(j(A))+" M"),this},_.GState=Qd,_.setGState=function(A){(A=typeof A=="string"?an[vi[A]]:Lu(null,A)).equals(Yi)||(fe("/"+A.id+" gs"),Yi=A)};var Lu=function(A,V){if(!A||!vi[A]){var ce=!1;for(var ge in an)if(an.hasOwnProperty(ge)&&an[ge].equals(V)){ce=!0;break}if(ce)V=an[ge];else{var Ee="GS"+(Object.keys(an).length+1).toString(10);an[Ee]=V,V.id=Ee}return A&&(vi[A]=V.id),Vt.publish("addGState",V),V}};_.addGState=function(A,V){return Lu(A,V),this},_.saveGraphicsState=function(){return fe("q"),Kn.push({key:Nt,size:Ze,color:Qa}),this},_.restoreGraphicsState=function(){fe("Q");var A=Kn.pop();return Nt=A.key,Ze=A.size,Qa=A.color,Yi=null,this},_.setCurrentTransformationMatrix=function(A){return fe(A.toString()+" cm"),this},_.comment=function(A){return fe("#"+A),this};var Za=function(A,V){var ce=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ce},set:function(Oe){isNaN(Oe)||(ce=parseFloat(Oe))}});var ge=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(Oe){isNaN(Oe)||(ge=parseFloat(Oe))}});var Ee="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ee},set:function(Oe){Ee=Oe.toString()}}),this},Gl=function(A,V,ce,ge){Za.call(this,A,V),this.type="rect";var Ee=ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ee},set:function(Xe){isNaN(Xe)||(Ee=parseFloat(Xe))}});var Oe=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(Xe){isNaN(Xe)||(Oe=parseFloat(Xe))}}),this},Vl=function(){this.page=on,this.currentPage=H,this.pages=Me.slice(0),this.pagesContext=_t.slice(0),this.x=En,this.y=Lt,this.matrix=qt,this.width=eo(H),this.height=_a(H),this.outputDestination=Ye,this.id="",this.objectNumber=-1};Vl.prototype.restore=function(){on=this.page,H=this.currentPage,_t=this.pagesContext,Me=this.pages,En=this.x,Lt=this.y,qt=this.matrix,$l(H,this.width),qo(H,this.height),Ye=this.outputDestination};var Du=function(A,V,ce,ge,Ee){yi.push(new Vl),on=H=0,Me=[],En=A,Lt=V,qt=Ee,Fi([ce,ge])},$c=function(A){if(ji[A])yi.pop().restore();else{var V=new Vl,ce="Xo"+(Object.keys(gn).length+1).toString(10);V.id=ce,ji[A]=ce,gn[ce]=V,Vt.publish("addFormObject",V),yi.pop().restore()}};for(var Sa in _.beginFormObject=function(A,V,ce,ge,Ee){return Du(A,V,ce,ge,Ee),this},_.endFormObject=function(A){return $c(A),this},_.doFormObject=function(A,V){var ce=gn[ji[A]];return fe("q"),fe(V.toString()+" cm"),fe("/"+ce.id+" Do"),fe("Q"),this},_.getFormObject=function(A){var V=gn[ji[A]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},_.save=function(A,V){return A=A||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(pu(Mo(is()),A),typeof pu.unload=="function"&&Dt.setTimeout&&setTimeout(pu.unload,911),this):new Promise((function(ce,ge){try{var Ee=pu(Mo(is()),A);typeof pu.unload=="function"&&Dt.setTimeout&&setTimeout(pu.unload,911),ce(Ee)}catch(Oe){ge(Oe.message)}}))},Tt.API)Tt.API.hasOwnProperty(Sa)&&(Sa==="events"&&Tt.API.events.length?(function(A,V){var ce,ge,Ee;for(Ee=V.length-1;Ee!==-1;Ee--)ce=V[Ee][0],ge=V[Ee][1],A.subscribe.apply(A,[ce].concat(typeof ge=="function"?[ge]:ge))})(Vt,Tt.API.events):_[Sa]=Tt.API[Sa]);var eo=_.getPageWidth=function(A){return(_t[A=A||H].mediaBox.topRightX-_t[A].mediaBox.bottomLeftX)/it},$l=_.setPageWidth=function(A,V){_t[A].mediaBox.topRightX=V*it+_t[A].mediaBox.bottomLeftX},_a=_.getPageHeight=function(A){return(_t[A=A||H].mediaBox.topRightY-_t[A].mediaBox.bottomLeftY)/it},qo=_.setPageHeight=function(A,V){_t[A].mediaBox.topRightY=V*it+_t[A].mediaBox.bottomLeftY};return _.internal={pdfEscape:or,getStyle:jl,getFont:Oo,getFontSize:et,getCharSpace:Vc,getTextColor:ql,getLineHeight:wa,getLineHeightFactor:jo,getLineWidth:Lr,write:Et,getHorizontalCoordinate:ss,getVerticalCoordinate:Dr,getCoordinateString:Fo,getVerticalCoordinateString:Bs,collections:{},newObject:jn,newAdditionalObject:vs,newObjectDeferred:Ln,newObjectDeferredBegin:Ci,getFilters:Be,putStream:Mt,events:Vt,scaleFactor:it,pageSize:{getWidth:function(){return eo(H)},setWidth:function(A){$l(H,A)},getHeight:function(){return _a(H)},setHeight:function(A){qo(H,A)}},encryptionOptions:v,encryption:Pn,getEncryptor:Ol,output:Po,getNumberOfPages:ma,pages:Me,out:fe,f2:ue,f3:F,getPageInfo:Uo,getPageInfoByObjId:At,getCurrentPageInfo:ga,getPDFVersion:k,Point:Za,Rectangle:Gl,Matrix:xt,hasHotfix:Ya},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return eo(H)},set:function(A){$l(H,A)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return _a(H)},set:function(A){qo(H,A)},enumerable:!0,configurable:!0}),Pl.call(_,$e),Nt="F1",Lo(a,n),Vt.publish("initialized"),_}kc.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},kc.prototype.toHexString=function(t){return t.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},kc.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},kc.prototype.processOwnerPassword=function(t,e){return Z0(Q0(e).substr(0,5),t)},kc.prototype.encryptor=function(t,e){var n=Q0(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return Z0(n,i)}},Qd.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||xn(t)!==xn(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return i===0},Tt.API={events:[]},Tt.version="2.5.1";var ai=Tt.API,_m=1,Nu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_c=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zt=function(t){return t.toFixed(2)},vl=function(t){return t.toFixed(5)};ai.__acroform__={};var Zr=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},d2=function(t){return t*_m},za=function(t){var e=new o5,n=ft.internal.getHeight(t)||0,i=ft.internal.getWidth(t)||0;return e.BBox=[0,0,Number(zt(i)),Number(zt(n))],e},Fk=ai.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Bk=ai.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},qk=ai.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},pi=ai.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qk(t,e-1)},mi=ai.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Fk(t,e-1)},gi=ai.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Bk(t,e-1)},zk=ai.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,a=t[0],o=t[1],l=t[2],c=t[3],d={};return d.lowerLeft_X=n(a)||0,d.lowerLeft_Y=i(o+c)||0,d.upperRight_X=n(a+l)||0,d.upperRight_Y=i(o)||0,[Number(zt(d.lowerLeft_X)),Number(zt(d.lowerLeft_Y)),Number(zt(d.upperRight_X)),Number(zt(d.upperRight_Y))]},Hk=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=em(t,n),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+zt(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=za(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},em=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map((function(F){return F.split(`
`)})):a.map((function(F){return[F]}));var o=n,l=ft.internal.getHeight(t)||0;l=l<0?-l:l;var c=ft.internal.getWidth(t)||0;c=c<0?-c:c;var d=function(F,j,ne){if(F+1<a.length){var ie=j+" "+a[F+1][0];return eh(ie,t,ne).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var h,v,b=eh("3",t,o).height,S=t.multiline?l-o:(l-b)/2,_=S+=2,T=0,k=0,I=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+eh(e,t,o=12).width+", FieldWidth:"+c+`
`;break}for(var C="",R=0,L=0;L<a.length;L++)if(a.hasOwnProperty(L)){var O=!1;if(a[L].length!==1&&I!==a[L].length-1){if((b+2)*(R+2)+2>l)continue e;C+=a[L][I],O=!0,k=L,L--}else{C=(C+=a[L][I]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var z=parseInt(L),W=d(z,C,o),B=L>=a.length-1;if(W&&!B){C+=" ",I=0;continue}if(W||B){if(B)k=z;else if(t.multiline&&(b+2)*(R+2)+2>l)continue e}else{if(!t.multiline||(b+2)*(R+2)+2>l)continue e;k=z}}for(var q="",ee=T;ee<=k;ee++){var ue=a[ee];if(t.multiline){if(ee===k){q+=ue[I]+" ",I=(I+1)%ue.length;continue}if(ee===T){q+=ue[ue.length-1]+" ";continue}}q+=ue[0]+" "}switch(q=q.substr(q.length-1)==" "?q.substr(0,q.length-1):q,v=eh(q,t,o).width,t.textAlign){case"right":h=c-v-2;break;case"center":h=(c-v)/2;break;case"left":default:h=2}e+=zt(h)+" "+zt(_)+` Td
`,e+="("+Nu(q)+`) Tj
`,e+=-zt(h)+` 0 Td
`,_=-(o+2),v=0,T=O?k:k+1,R++,C=""}break}return i.text=e,i.fontSize=o,i},eh=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},Gk={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Vk=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find((function(i){return i.type===n.type&&i.object===n.object}))===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},$k=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,a=t[n];e.internal.newObjectDeferredBegin(a.objId,!0),xn(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete t[i]}},Jk=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(da.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Gk)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_m=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new l5,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)})),t.internal.events.subscribe("buildDocument",(function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];o.objId=void 0,o.hasAnnotation&&Vk(o,n)}})(t)})),t.internal.events.subscribe("putCatalog",(function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)})),t.internal.events.subscribe("postPutPages",(function(n){(function(i,a){var o=!i;for(var l in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var c=i[l],d=[],h=c.Rect;if(c.Rect&&(c.Rect=zk(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=ft.createDefaultAppearanceStream(c),xn(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(d=c.getKeyValueListForStream()),c.Rect=h,c.hasAppearanceStream&&!c.appearanceStreamContent){var v=Hk(c);d.push({key:"AP",value:"<</N "+v+">>"}),a.internal.acroformPlugin.xForms.push(v)}if(c.appearanceStreamContent){var b="";for(var S in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(S)){var _=c.appearanceStreamContent[S];if(b+="/"+S+" ",b+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var l in _)if(_.hasOwnProperty(l)){var T=_[l];typeof T=="function"&&(T=T.call(a,c)),b+="/"+l+" "+T+" ",a.internal.acroformPlugin.xForms.indexOf(T)>=0||a.internal.acroformPlugin.xForms.push(T)}}else typeof(T=_)=="function"&&(T=T.call(a,c)),b+="/"+l+" "+T,a.internal.acroformPlugin.xForms.indexOf(T)>=0||a.internal.acroformPlugin.xForms.push(T);b+=">>"}d.push({key:"AP",value:`<<
`+b+">>"})}a.internal.putStream({additionalKeyValues:d,objectId:c.objId}),a.internal.out("endobj")}o&&$k(a.internal.acroformPlugin.xForms,a)})(n,t)})),t.internal.acroformPlugin.isInitialized=!0}},a5=ai.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(l){return l};if(Array.isArray(t)){for(var a="[",o=0;o<t.length;o++)switch(o!==0&&(a+=" "),xn(t[o])){case"boolean":case"number":case"object":a+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(i=n.internal.getEncryptor(e)),a+="("+Nu(i(t[o].toString()))+")"):a+=t[o].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},h0=function(t,e,n){var i=function(a){return a};return e!==void 0&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Nu(i(t))+")"},Ga=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ga.prototype.toString=function(){return this.objId+" 0 R"},Ga.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ga.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"}));for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var i=e[n],a=this[i];a&&(Array.isArray(a)?t.push({key:i,value:a5(a,this.objId,this.scope)}):a instanceof Ga?(a.scope=this.scope,t.push({key:i,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:i,value:a}))}return t};var o5=function(){Ga.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Zr(o5,Ga);var l5=function(){Ga.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Nu(n(t))+")"}},set:function(n){t=n}})};Zr(l5,Ga);var da=function t(){Ga.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!pi(e,3)},set:function(C){C?this.F=mi(e,3):this.F=gi(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');n=C}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(C){i=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(C){i[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(C){i[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(C){i[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(C){i[3]=C}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof yh)return;o="FieldObject"+t.FieldNum++}var C=function(R){return R};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Nu(C(o))+")"},set:function(C){o=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(C){o=C}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(C){l=C}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(C){d=C}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/_m:h},set:function(C){h=C}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(C){v=C}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof yh||this instanceof Tl))return h0(b,this.objId,this.scope)},set:function(C){C=C.toString(),b=C}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Oi?S:h0(S,this.objId,this.scope)},set:function(C){C=C.toString(),S=this instanceof Oi?C:C.substr(0,1)==="("?_c(C.substr(1,C.length-2)):_c(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oi?_c(S.substr(1,S.length-1)):S},set:function(C){C=C.toString(),S=this instanceof Oi?"/"+C:C}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Oi?_:h0(_,this.objId,this.scope)},set:function(C){C=C.toString(),_=this instanceof Oi?C:C.substr(0,1)==="("?_c(C.substr(1,C.length-2)):_c(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oi?_c(_.substr(1,_.length-1)):_},set:function(C){C=C.toString(),_=this instanceof Oi?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var T,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(C){C=!!C,k=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(T)return T},set:function(C){T=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,1)},set:function(C){C?this.Ff=mi(this.Ff,1):this.Ff=gi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,2)},set:function(C){C?this.Ff=mi(this.Ff,2):this.Ff=gi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,3)},set:function(C){C?this.Ff=mi(this.Ff,3):this.Ff=gi(this.Ff,3)}});var I=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(I!==null)return I},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');I=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(I){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:I=2;break;case"center":case 1:I=1;break;case"left":case 0:default:I=0}}})};Zr(da,Ga);var bu=function(){da.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return a5(e,this.objId,this.scope)},set:function(n){var i,a;a=[],typeof(i=n)=="string"&&(a=(function(o,l,c){c||(c=1);for(var d,h=[];d=l.exec(o);)h.push(d[c]);return h})(i,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,18)},set:function(n){n?this.Ff=mi(this.Ff,18):this.Ff=gi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=mi(this.Ff,19):this.Ff=gi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,20)},set:function(n){n?(this.Ff=mi(this.Ff,20),e.sort()):this.Ff=gi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,22)},set:function(n){n?this.Ff=mi(this.Ff,22):this.Ff=gi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,23)},set:function(n){n?this.Ff=mi(this.Ff,23):this.Ff=gi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,27)},set:function(n){n?this.Ff=mi(this.Ff,27):this.Ff=gi(this.Ff,27)}}),this.hasAppearanceStream=!1};Zr(bu,da);var xu=function(){bu.call(this),this.fontName="helvetica",this.combo=!1};Zr(xu,bu);var wu=function(){xu.call(this),this.combo=!0};Zr(wu,xu);var Fd=function(){wu.call(this),this.edit=!0};Zr(Fd,wu);var Oi=function(){da.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,15)},set:function(n){n?this.Ff=mi(this.Ff,15):this.Ff=gi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,16)},set:function(n){n?this.Ff=mi(this.Ff,16):this.Ff=gi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,17)},set:function(n){n?this.Ff=mi(this.Ff,17):this.Ff=gi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,26)},set:function(n){n?this.Ff=mi(this.Ff,26):this.Ff=gi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,a=[];for(i in a.push("<<"),e)a.push("/"+i+" ("+Nu(n(e[i]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){xn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Zr(Oi,da);var Bd=function(){Oi.call(this),this.pushButton=!0};Zr(Bd,Oi);var Su=function(){Oi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Zr(Su,Oi);var yh=function(){var t,e;da.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),i)l.push("/"+o+" ("+Nu(a(i[o]))+")");return l.push(">>"),l.join(`
`)},set:function(a){xn(a)==="object"&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){typeof a=="string"&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ft.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Zr(yh,da),Su.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Su.prototype.createOption=function(t){var e=new yh;return e.Parent=this,e.optionName=t,this.Kids.push(e),Yk.call(this.scope,e),e};var qd=function(){Oi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ft.CheckBox.createAppearanceStream()};Zr(qd,Oi);var Tl=function(){da.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,13)},set:function(e){e?this.Ff=mi(this.Ff,13):this.Ff=gi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,21)},set:function(e){e?this.Ff=mi(this.Ff,21):this.Ff=gi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,23)},set:function(e){e?this.Ff=mi(this.Ff,23):this.Ff=gi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,24)},set:function(e){e?this.Ff=mi(this.Ff,24):this.Ff=gi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,25)},set:function(e){e?this.Ff=mi(this.Ff,25):this.Ff=gi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,26)},set:function(e){e?this.Ff=mi(this.Ff,26):this.Ff=gi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Zr(Tl,da);var zd=function(){Tl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,14)},set:function(t){t?this.Ff=mi(this.Ff,14):this.Ff=gi(this.Ff,14)}}),this.password=!0};Zr(zd,Tl);var ft={CheckBox:{createAppearanceStream:function(){return{N:{On:ft.CheckBox.YesNormal},D:{On:ft.CheckBox.YesPushDown,Off:ft.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=za(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),o=em(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+zt(ft.internal.getWidth(t))+" "+zt(ft.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+zt(o.fontSize)+" Tf "+a),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=za(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=[],o=ft.internal.getHeight(t),l=ft.internal.getWidth(t),c=em(t,t.caption);return a.push("1 g"),a.push("0 0 "+zt(l)+" "+zt(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+zt(l-1)+" "+zt(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+zt(c.fontSize)+" Tf "+i),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=za(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+zt(ft.internal.getWidth(t))+" "+zt(ft.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ft.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ft.RadioButton.Circle.YesNormal,e.D[t]=ft.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=za(t);e.scope=t.scope;var n=[],i=ft.internal.getWidth(t)<=ft.internal.getHeight(t)?ft.internal.getWidth(t)/4:ft.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var a=ft.internal.Bezier_C,o=Number((i*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+vl(ft.internal.getWidth(t)/2)+" "+vl(ft.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=za(t);e.scope=t.scope;var n=[],i=ft.internal.getWidth(t)<=ft.internal.getHeight(t)?ft.internal.getWidth(t)/4:ft.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),o=Number((a*ft.internal.Bezier_C).toFixed(5)),l=Number((i*ft.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+vl(ft.internal.getWidth(t)/2)+" "+vl(ft.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+vl(ft.internal.getWidth(t)/2)+" "+vl(ft.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=za(t);e.scope=t.scope;var n=[],i=ft.internal.getWidth(t)<=ft.internal.getHeight(t)?ft.internal.getWidth(t)/4:ft.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),o=Number((a*ft.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+vl(ft.internal.getWidth(t)/2)+" "+vl(ft.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ft.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ft.RadioButton.Cross.YesNormal,e.D[t]=ft.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=za(t);e.scope=t.scope;var n=[],i=ft.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+zt(ft.internal.getWidth(t)-2)+" "+zt(ft.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(zt(i.x1.x)+" "+zt(i.x1.y)+" m"),n.push(zt(i.x2.x)+" "+zt(i.x2.y)+" l"),n.push(zt(i.x4.x)+" "+zt(i.x4.y)+" m"),n.push(zt(i.x3.x)+" "+zt(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=za(t);e.scope=t.scope;var n=ft.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+zt(ft.internal.getWidth(t))+" "+zt(ft.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+zt(ft.internal.getWidth(t)-2)+" "+zt(ft.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(zt(n.x1.x)+" "+zt(n.x1.y)+" m"),i.push(zt(n.x2.x)+" "+zt(n.x2.y)+" l"),i.push(zt(n.x4.x)+" "+zt(n.x4.y)+" m"),i.push(zt(n.x3.x)+" "+zt(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=za(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+zt(ft.internal.getWidth(t))+" "+zt(ft.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ft.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ft.internal.getWidth(t),n=ft.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},ft.internal.getWidth=function(t){var e=0;return xn(t)==="object"&&(e=d2(t.Rect[2])),e},ft.internal.getHeight=function(t){var e=0;return xn(t)==="object"&&(e=d2(t.Rect[3])),e};var Yk=ai.addField=function(t){if(Jk(this,t),!(t instanceof da))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ai.AcroFormChoiceField=bu,ai.AcroFormListBox=xu,ai.AcroFormComboBox=wu,ai.AcroFormEditBox=Fd,ai.AcroFormButton=Oi,ai.AcroFormPushButton=Bd,ai.AcroFormRadioButton=Su,ai.AcroFormCheckBox=qd,ai.AcroFormTextField=Tl,ai.AcroFormPasswordField=zd,ai.AcroFormAppearance=ft,ai.AcroForm={ChoiceField:bu,ListBox:xu,ComboBox:wu,EditBox:Fd,Button:Oi,PushButton:Bd,RadioButton:Su,CheckBox:qd,TextField:Tl,PasswordField:zd,Appearance:ft},Tt.AcroForm={ChoiceField:bu,ListBox:xu,ComboBox:wu,EditBox:Fd,Button:Oi,PushButton:Bd,RadioButton:Su,CheckBox:qd,TextField:Tl,PasswordField:zd,Appearance:ft};var Wk=Tt.AcroForm;function u5(t){return t.reduce((function(e,n,i){return e[n]=i,e}),{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(F,j){var ne,ie,be,U,$,re=e;if((j=j||e)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(W(F))for($ in n)for(be=n[$],ne=0;ne<be.length;ne+=1){for(U=!0,ie=0;ie<be[ne].length;ie+=1)if(be[ne][ie]!==void 0&&be[ne][ie]!==F[ie]){U=!1;break}if(U===!0){re=$;break}}else for($ in n)for(be=n[$],ne=0;ne<be.length;ne+=1){for(U=!0,ie=0;ie<be[ne].length;ie+=1)if(be[ne][ie]!==void 0&&be[ne][ie]!==F.charCodeAt(ie)){U=!1;break}if(U===!0){re=$;break}}return re===e&&j!==e&&(re=j),re},a=function F(j){for(var ne=this.internal.write,ie=this.internal.putStream,be=(0,this.internal.getFilters)();be.indexOf("FlateEncode")!==-1;)be.splice(be.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:j.width}),U.push({key:"Height",value:j.height}),j.colorSpace===I.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===I.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)){for(var $="",re=0,oe=j.transparency.length;re<oe;re++)$+=j.transparency[re]+" "+j.transparency[re]+" ";U.push({key:"Mask",value:"["+$+"]"})}j.sMask!==void 0&&U.push({key:"SMask",value:j.objectId+1+" 0 R"});var pe=j.filter!==void 0?["/"+j.filter]:void 0;if(ie({data:j.data,additionalKeyValues:U,alreadyAppliedFilters:pe,objectId:j.objectId}),ne("endobj"),"sMask"in j&&j.sMask!==void 0){var _e="/Predictor "+j.predictor+" /Colors 1 /BitsPerComponent "+j.bitsPerComponent+" /Columns "+j.width,D={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:j.bitsPerComponent,decodeParameters:_e,data:j.sMask};"filter"in j&&(D.filter=j.filter),F.call(this,D)}if(j.colorSpace===I.INDEXED){var H=this.internal.newObject();ie({data:q(new Uint8Array(j.palette)),objectId:H}),ne("endobj")}},o=function(){var F=this.internal.collections.addImage_images;for(var j in F)a.call(this,F[j])},l=function(){var F,j=this.internal.collections.addImage_images,ne=this.internal.write;for(var ie in j)ne("/I"+(F=j[ie]).index,F.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var F=this.internal.collections.addImage_images;return c.call(this),F},h=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function(F){return typeof t["process"+F.toUpperCase()]=="function"},b=function(F){return xn(F)==="object"&&F.nodeType===1},S=function(F,j){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var ne=""+F.getAttribute("src");if(ne.indexOf("data:image/")===0)return jd(unescape(ne).split("base64,").pop());var ie=t.loadFile(ne,!0);if(ie!==void 0)return ie}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var be;switch(j){case"PNG":be="image/png";break;case"WEBP":be="image/webp";break;case"JPEG":case"JPG":default:be="image/jpeg"}return jd(F.toDataURL(be,1).split("base64,").pop())}},_=function(F){var j=this.internal.collections.addImage_images;if(j){for(var ne in j)if(F===j[ne].alias)return j[ne]}},T=function(F,j,ne){return F||j||(F=-96,j=-96),F<0&&(F=-1*ne.width*72/F/this.internal.scaleFactor),j<0&&(j=-1*ne.height*72/j/this.internal.scaleFactor),F===0&&(F=j*ne.width/ne.height),j===0&&(j=F*ne.height/ne.width),[F,j]},k=function(F,j,ne,ie,be,U){var $=T.call(this,ne,ie,be),re=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,pe=d.call(this);if(ne=$[0],ie=$[1],pe[be.index]=be,U){U*=Math.PI/180;var _e=Math.cos(U),D=Math.sin(U),H=function(Z){return Z.toFixed(4)},K=[H(_e),H(D),H(-1*D),H(_e),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,re(F),oe(j+ie),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([re(ne),"0","0",re(ie),"0","0","cm"].join(" "))):this.internal.write([re(ne),"0","0",re(ie),re(F),oe(j+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+be.index+" Do"),this.internal.write("Q")},I=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=t.__addimage__.sHashCode=function(F){var j,ne,ie=0;if(typeof F=="string")for(ne=F.length,j=0;j<ne;j++)ie=(ie<<5)-ie+F.charCodeAt(j),ie|=0;else if(W(F))for(ne=F.byteLength/2,j=0;j<ne;j++)ie=(ie<<5)-ie+F[j],ie|=0;return ie},L=t.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var j=!0;return F.length===0&&(j=!1),F.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(j=!1),j},O=t.__addimage__.extractImageFromDataUrl=function(F){var j=(F=F||"").split("base64,"),ne=null;if(j.length===2){var ie=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(j[0]);Array.isArray(ie)&&(ne={mimeType:ie[1],charset:ie[2],data:j[1]})}return ne},z=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(F){return z()&&F instanceof ArrayBuffer};var W=t.__addimage__.isArrayBufferView=function(F){return z()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},B=t.__addimage__.binaryStringToUint8Array=function(F){for(var j=F.length,ne=new Uint8Array(j),ie=0;ie<j;ie++)ne[ie]=F.charCodeAt(ie);return ne},q=t.__addimage__.arrayBufferToBinaryString=function(F){for(var j="",ne=W(F)?F:new Uint8Array(F),ie=0;ie<ne.length;ie+=8192)j+=String.fromCharCode.apply(null,ne.subarray(ie,ie+8192));return j};t.addImage=function(){var F,j,ne,ie,be,U,$,re,oe;if(typeof arguments[1]=="number"?(j=e,ne=arguments[1],ie=arguments[2],be=arguments[3],U=arguments[4],$=arguments[5],re=arguments[6],oe=arguments[7]):(j=arguments[1],ne=arguments[2],ie=arguments[3],be=arguments[4],U=arguments[5],$=arguments[6],re=arguments[7],oe=arguments[8]),xn(F=arguments[0])==="object"&&!b(F)&&"imageData"in F){var pe=F;F=pe.imageData,j=pe.format||j||e,ne=pe.x||ne||0,ie=pe.y||ie||0,be=pe.w||pe.width||be,U=pe.h||pe.height||U,$=pe.alias||$,re=pe.compression||re,oe=pe.rotation||pe.angle||oe}var _e=this.internal.getFilters();if(re===void 0&&_e.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(ne)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var D=ee.call(this,F,j,$,re);return k.call(this,ne,ie,be,U,D,oe),this};var ee=function(F,j,ne,ie){var be,U,$;if(typeof F=="string"&&i(F)===e){F=unescape(F);var re=ue(F,!1);(re!==""||(re=t.loadFile(F,!0))!==void 0)&&(F=re)}if(b(F)&&(F=S(F,j)),j=i(F,j),!v(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if((($=ne)==null||$.length===0)&&(ne=(function(oe){return typeof oe=="string"||W(oe)?R(oe):W(oe.data)?R(oe.data):null})(F)),(be=_.call(this,ne))||(z()&&(F instanceof Uint8Array||j==="RGBA"||(U=F,F=B(F))),be=this["process"+j.toUpperCase()](F,h.call(this),ne,(function(oe){return oe&&typeof oe=="string"&&(oe=oe.toUpperCase()),oe in t.image_compression?oe:C.NONE})(ie),U)),!be)throw new Error("An unknown error occurred whilst processing the image.");return be},ue=t.__addimage__.convertBase64ToBinaryString=function(F,j){var ne;j=typeof j!="boolean"||j;var ie,be="";if(typeof F=="string"){ie=(ne=O(F))!==null?ne.data:F;try{be=jd(ie)}catch(U){if(j)throw L(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return be};t.getImageProperties=function(F){var j,ne,ie="";if(b(F)&&(F=S(F)),typeof F=="string"&&i(F)===e&&((ie=ue(F,!1))===""&&(ie=t.loadFile(F)||""),F=ie),ne=i(F),!v(ne))throw new Error("addImage does not support files of type '"+ne+"', please ensure that a plugin for '"+ne+"' support is added.");if(!z()||F instanceof Uint8Array||(F=B(F)),!(j=this["process"+ne.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=ne,j}})(Tt.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Tt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,a,o,l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,v=!1,b=0;b<h.length&&!v;b++)switch((i=h[b]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var S=0;S<h.length;S++){i=h[S];var _=this.internal.pdfEscape,T=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),I=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(k.objId),R=i.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y)+"] ")+"/Contents ("+_(C(i.contents))+")",o+=" /Popup "+I.objId+" 0 R",o+=" /P "+d.objId+" 0 R",o+=" /T ("+_(C(R))+") >>",k.content=o;var L=k.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(i.bounds.x+30)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+c(i.bounds.y)+"] ")+" /Parent "+L,i.open&&(o+=" /Open true"),o+=" >>",I.content=o,this.internal.write(k.objId,"0 R",I.objId,"0 R");break;case"freetext":a="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y+i.bounds.h)+"] ";var O=i.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+_(T(i.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(i.options.name){var z=this.annotations._nameMap[i.options.name];i.options.pageNumber=z.page,i.options.top=z.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",o="",i.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+_(T(i.options.url))+") >>";else if(i.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,o+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var W=c(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),o+=" /XYZ "+i.options.left+" "+W+" "+i.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,a,o,l){var c=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:d(n),y:h(i),w:d(n+a),h:h(i+o)},options:l,type:"link"})},t.textWithLink=function(n,i,a,o){var l,c,d=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var v=this.splitTextToSize(n,c).length;l=Math.ceil(h*v)}else c=d,l=h;return this.text(n,i,a,o),a+=.2*h,o.align==="center"&&(i-=d/2),o.align==="right"&&(i-=d),this.link(i,a-h,c,l,o),d},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}})(Tt.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(k){return e[k.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},c=t.__arabicParser__.isArabicEndLetter=function(k){return l(k)&&o(k)&&e[k.charCodeAt(0)].length<=2},d=t.__arabicParser__.isArabicAlfLetter=function(k){return l(k)&&a.indexOf(k.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return l(k)&&o(k)&&e[k.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(k){return l(k)&&o(k)&&e[k.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(k){return l(k)&&o(k)&&e[k.charCodeAt(0)].length>=3};var v=t.__arabicParser__.arabicLetterHasMedialForm=function(k){return l(k)&&o(k)&&e[k.charCodeAt(0)].length==4},b=t.__arabicParser__.resolveLigatures=function(k){var I=0,C=n,R="",L=0;for(I=0;I<k.length;I+=1)C[k.charCodeAt(I)]!==void 0?(L++,typeof(C=C[k.charCodeAt(I)])=="number"&&(R+=String.fromCharCode(C),C=n,L=0),I===k.length-1&&(C=n,R+=k.charAt(I-(L-1)),I-=L-1,L=0)):(C=n,R+=k.charAt(I-L),I-=L,L=0);return R};t.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&i[k.charCodeAt(0)]!==void 0};var S=t.__arabicParser__.getCorrectForm=function(k,I,C){return l(k)?o(k)===!1?-1:!h(k)||!l(I)&&!l(C)||!l(C)&&c(I)||c(k)&&!l(I)||c(k)&&d(I)||c(k)&&c(I)?0:v(k)&&l(I)&&!c(I)&&l(C)&&h(C)?3:c(k)||!l(C)?1:2:-1},_=function(k){var I=0,C=0,R=0,L="",O="",z="",W=(k=k||"").split("\\s+"),B=[];for(I=0;I<W.length;I+=1){for(B.push(""),C=0;C<W[I].length;C+=1)L=W[I][C],O=W[I][C-1],z=W[I][C+1],l(L)?(R=S(L,O,z),B[I]+=R!==-1?String.fromCharCode(e[L.charCodeAt(0)][R]):L):B[I]+=L;B[I]=b(B[I])}return B.join(" ")},T=t.__arabicParser__.processArabic=t.processArabic=function(){var k,I=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(I)){var R=0;for(C=[],R=0;R<I.length;R+=1)Array.isArray(I[R])?C.push([_(I[R][0]),I[R][1],I[R][2]]):C.push([_(I[R])]);k=C}else k=_(I);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};t.events.push(["preProcessText",T])})(Tt.API),Tt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(c){l=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,i){var a;if((n=n||"2d")!=="2d")return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Tt.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(k){d=k}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(k){h=k}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(k){v=k}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(k){b=k}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(k){S=k}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(k){_=k}});var T=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return T},set:function(k){T=k}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(d){return i.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},t.getTextDimensions=function(d,h){i.call(this);var v=(h=h||{}).fontSize||this.getFontSize(),b=h.font||this.getFont(),S=h.scaleFactor||this.internal.scaleFactor,_=0,T=0,k=0,I=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var C=h.maxWidth;C>0?typeof d=="string"?d=this.splitTextToSize(d,C):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce((function(L,O){return L.concat(I.splitTextToSize(O,C))}),[])):d=Array.isArray(d)?d:[d];for(var R=0;R<d.length;R++)_<(k=this.getStringUnitWidth(d[R],{font:b})*v)&&(_=k);return _!==0&&(T=d.length),{w:_/=S,h:Math.max((T*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/S,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var d=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var d;d=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var h=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===d.lineNumber?(d.x=(h.x||0)+(h.width||0),d.y=h.y||0):h.y+h.height+d.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=b.top,_&&S&&(this.printHeaderRow(d.lineNumber,!0),d.y+=S[0].height)):d.y=h.y+h.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,n===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-v,d.y+v,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+v,{align:"center",baseline:"top",maxWidth:d.width-v-v}):this.text(d.text,d.x+v,d.y+v,{align:"left",baseline:"top",maxWidth:d.width-v-v})),this.internal.__cell__.lastCell=d,this};t.table=function(d,h,v,b,S){if(i.call(this),!v)throw new Error("No data for PDF table.");var _,T,k,I,C=[],R=[],L=[],O={},z={},W=[],B=[],q=(S=S||{}).autoSize||!1,ee=S.printHeaders!==!1,ue=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,F=S.margins||Object.assign({width:this.getPageWidth()},e),j=typeof S.padding=="number"?S.padding:3,ne=S.headerBackgroundColor||"#c8c8c8",ie=S.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=ee,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=ue,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=ne,this.internal.__cell__.headerTextColor=ie,this.setFontSize(ue),b==null)R=C=Object.keys(v[0]),L=C.map((function(){return"left"}));else if(Array.isArray(b)&&xn(b[0])==="object")for(C=b.map((function(pe){return pe.name})),R=b.map((function(pe){return pe.prompt||pe.name||""})),L=b.map((function(pe){return pe.align||"left"})),_=0;_<b.length;_+=1)z[b[_].name]=b[_].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(R=C=b,L=C.map((function(){return"left"})));if(q||Array.isArray(b)&&typeof b[0]=="string")for(_=0;_<C.length;_+=1){for(O[I=C[_]]=v.map((function(pe){return pe[I]})),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(R[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),T=O[I],this.setFont(void 0,"normal"),k=0;k<T.length;k+=1)W.push(this.getTextDimensions(T[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[I]=Math.max.apply(null,W)+j+j,W=[]}if(ee){var be={};for(_=0;_<C.length;_+=1)be[C[_]]={},be[C[_]].text=R[_],be[C[_]].align=L[_];var U=c.call(this,be,z);B=C.map((function(pe){return new o(d,h,z[pe],U,be[pe].text,void 0,be[pe].align)})),this.setTableHeaderRow(B),this.printHeaderRow(1,!1)}var $=b.reduce((function(pe,_e){return pe[_e.name]=_e.align,pe}),{});for(_=0;_<v.length;_+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:_,data:v[_]},this);var re=c.call(this,v[_],z);for(k=0;k<C.length;k+=1){var oe=v[_][C[k]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:_,col:k,data:oe},this),l.call(this,new o(d,h,z[C[k]],re,oe,_+2,$[C[k]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=h,this};var c=function(d,h){var v=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(d).map((function(_){var T=d[_];return this.splitTextToSize(T.hasOwnProperty("text")?T.text:T,h[_]-v-v)}),this).map((function(_){return this.getLineHeightFactor()*_.length*b/S+v+v}),this).reduce((function(_,T){return Math.max(_,T)}),0)};t.setTableHeaderRow=function(d){i.call(this),this.internal.__cell__.tableHeaderRow=d},t.printHeaderRow=function(d,h){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){v=this.internal.__cell__.tableHeaderRow[_].clone(),h&&(v.y=this.internal.__cell__.margins.top||0,S.push(v)),v.lineNumber=d;var T=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,v),this.setTextColor(T)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),n=!1}})(Tt.API);var c5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},d5=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],tm=u5(d5),f5=[100,200,300,400,500,600,700,800,900],Kk=u5(f5);function nm(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return c5[o=o||"normal"]?o:"normal"})(t.style),i=(function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}})(t.weight),a=(function(o){return typeof tm[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:n,weight:i,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,n,i].join(" ")}}}function f2(t,e,n,i){var a;for(a=n;a>=0&&a<e.length;a+=i)if(t[e[a]])return t[e[a]];for(a=n;a>=0&&a<e.length;a-=i)if(t[e[a]])return t[e[a]]}var Xk={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},h2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function p2(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Qk(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",a=Object.assign({},Xk,n.genericFontFamilies||{}),o=null,l=null,c=0;c<e.length;++c)if(a[(o=nm(e[c])).family]&&(o.family=a[o.family]),t.hasOwnProperty(o.family)){l=t[o.family];break}if(!(l=l||t[i]))throw new Error("Could not find a font-family for the rule '"+p2(o)+"' and default family '"+i+"'.");if(l=(function(d,h){if(h[d])return h[d];var v=tm[d],b=v<=tm.normal?-1:1,S=f2(h,d5,v,b);if(!S)throw new Error("Could not find a matching font-stretch value for "+d);return S})(o.stretch,l),l=(function(d,h){if(h[d])return h[d];for(var v=c5[d],b=0;b<v.length;++b)if(h[v[b]])return h[v[b]];throw new Error("Could not find a matching font-style for "+d)})(o.style,l),!(l=(function(d,h){if(h[d])return h[d];if(d===400&&h[500])return h[500];if(d===500&&h[400])return h[400];var v=Kk[d],b=f2(h,f5,v,d<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+d);return b})(o.weight,l)))throw new Error("Failed to resolve a font for the rule '"+p2(o)+"'.");return l}function m2(t){return t.trimLeft()}function Zk(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function eR(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var th,g2,v2,p0=["times"];(function(t){var e,n,i,a,o,l,c,d,h,v=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new d,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new l,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new l,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,c=this.internal.Rectangle,d=this.internal.Matrix,h=new v}]);var b=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=D;Object.defineProperty(this,"pdf",{get:function(){return H}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(Le){K=!!Le}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(Le){Z=!!Le}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Le){isNaN(Le)||(ae=Le)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(Le){isNaN(Le)||(de=Le)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(Le){var fe;typeof Le=="number"?fe=[Le,Le,Le,Le]:((fe=new Array(4))[0]=Le[0],fe[1]=Le.length>=2?Le[1]:fe[0],fe[2]=Le.length>=3?Le[2]:fe[0],fe[3]=Le.length>=4?Le[3]:fe[1]),h.margin=fe}});var se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return se},set:function(Le){se=Le}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(Le){he=Le}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(Le){Ae=Le}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(Le){Le instanceof v&&(h=Le)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(Le){h.path=Le}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(Le){Me=Le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Le){var fe;fe=S(Le),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Le){var fe=S(Le);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Le){["butt","round","square"].indexOf(Le)!==-1&&(this.ctx.lineCap=Le,this.pdf.setLineCap(Le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Le){isNaN(Le)||(this.ctx.lineWidth=Le,this.pdf.setLineWidth(Le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Le){["bevel","round","miter"].indexOf(Le)!==-1&&(this.ctx.lineJoin=Le,this.pdf.setLineJoin(Le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Le){isNaN(Le)||(this.ctx.miterLimit=Le,this.pdf.setMiterLimit(Le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Le){this.ctx.textBaseline=Le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Le){["right","end","center","left","start"].indexOf(Le)!==-1&&(this.ctx.textAlign=Le)}});var Ke=null;function Ye(Le,fe){if(Ke===null){var Et=(function(ut){var $e=[];return Object.keys(ut).forEach((function(Ze){ut[Ze].forEach((function(tt){var et=null;switch(tt){case"bold":et={family:Ze,weight:"bold"};break;case"italic":et={family:Ze,style:"italic"};break;case"bolditalic":et={family:Ze,weight:"bold",style:"italic"};break;case"":case"normal":et={family:Ze}}et!==null&&(et.ref={name:Ze,style:tt},$e.push(et))}))})),$e})(Le.getFontList());Ke=(function(ut){for(var $e={},Ze=0;Ze<ut.length;++Ze){var tt=nm(ut[Ze]),et=tt.family,We=tt.stretch,Se=tt.style,Qe=tt.weight;$e[et]=$e[et]||{},$e[et][We]=$e[et][We]||{},$e[et][We][Se]=$e[et][We][Se]||{},$e[et][We][Se][Qe]=tt}return $e})(Et.concat(fe))}return Ke}var st=null;Object.defineProperty(this,"fontFaces",{get:function(){return st},set:function(Le){Ke=null,st=Le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Le){var fe;if(this.ctx.font=Le,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Le))!==null){var Et=fe[1],ut=(fe[2],fe[3]),$e=fe[4],Ze=(fe[5],fe[6]),tt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(tt==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:tt==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var et=(function(pt){var Nt,it,En=[],Lt=pt.trim();if(Lt==="")return p0;if(Lt in h2)return[h2[Lt]];for(;Lt!=="";){switch(it=null,Nt=(Lt=m2(Lt)).charAt(0)){case'"':case"'":it=Zk(Lt.substring(1),Nt);break;default:it=eR(Lt)}if(it===null||(En.push(it[0]),(Lt=m2(it[1]))!==""&&Lt.charAt(0)!==","))return p0;Lt=Lt.replace(/^,/,"")}return En})(Ze);if(this.fontFaces){var We=Qk(Ye(this.pdf,this.fontFaces),et.map((function(pt){return{family:pt,stretch:"normal",weight:ut,style:Et}})));this.pdf.setFont(We.ref.name,We.ref.style)}else{var Se="";(ut==="bold"||parseInt(ut,10)>=700||Et==="bold")&&(Se="bold"),Et==="italic"&&(Se+="italic"),Se.length===0&&(Se="normal");for(var Qe="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},bt=0;bt<et.length;bt++){if(this.pdf.internal.getFont(et[bt],Se,{noFallback:!0,disableWarning:!0})!==void 0){Qe=et[bt];break}if(Se==="bolditalic"&&this.pdf.internal.getFont(et[bt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Qe=et[bt],Se="bold";else if(this.pdf.internal.getFont(et[bt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Qe=et[bt],Se="normal";break}}if(Qe===""){for(var Ht=0;Ht<et.length;Ht++)if(ct[et[Ht]]){Qe=ct[et[Ht]];break}}Qe=Qe===""?"Times":Qe,this.pdf.setFont(Qe,Se)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Le){this.ctx.globalCompositeOperation=Le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Le){this.ctx.globalAlpha=Le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Le){this.ctx.lineDashOffset=Le,_e.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Le){this.ctx.lineDash=Le,_e.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Le){this.ctx.ignoreClearRect=!!Le}})};b.prototype.setLineDash=function(D){this.lineDash=D},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){O.call(this,"fill",!1)},b.prototype.stroke=function(){O.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(D,H){if(isNaN(D)||isNaN(H))throw In.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new l(D,H));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new l(D,H)},b.prototype.closePath=function(){var D=new l(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&xn(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){D=new l(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(D.x,D.y)},b.prototype.lineTo=function(D,H){if(isNaN(D)||isNaN(H))throw In.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new l(D,H));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new l(K.x,K.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},b.prototype.quadraticCurveTo=function(D,H,K,Z){if(isNaN(K)||isNaN(Z)||isNaN(D)||isNaN(H))throw In.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new l(K,Z)),de=this.ctx.transform.applyToPoint(new l(D,H));this.path.push({type:"qct",x1:de.x,y1:de.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new l(ae.x,ae.y)},b.prototype.bezierCurveTo=function(D,H,K,Z,ae,de){if(isNaN(ae)||isNaN(de)||isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z))throw In.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var se=this.ctx.transform.applyToPoint(new l(ae,de)),he=this.ctx.transform.applyToPoint(new l(D,H)),Ae=this.ctx.transform.applyToPoint(new l(K,Z));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:Ae.x,y2:Ae.y,x:se.x,y:se.y}),this.ctx.lastPoint=new l(se.x,se.y)},b.prototype.arc=function(D,H,K,Z,ae,de){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z)||isNaN(ae))throw In.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var se=this.ctx.transform.applyToPoint(new l(D,H));D=se.x,H=se.y;var he=this.ctx.transform.applyToPoint(new l(0,K)),Ae=this.ctx.transform.applyToPoint(new l(0,0));K=Math.sqrt(Math.pow(he.x-Ae.x,2)+Math.pow(he.y-Ae.y,2))}Math.abs(ae-Z)>=2*Math.PI&&(Z=0,ae=2*Math.PI),this.path.push({type:"arc",x:D,y:H,radius:K,startAngle:Z,endAngle:ae,counterclockwise:de})},b.prototype.arcTo=function(D,H,K,Z,ae){throw new Error("arcTo not implemented.")},b.prototype.rect=function(D,H,K,Z){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z))throw In.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,H),this.lineTo(D+K,H),this.lineTo(D+K,H+Z),this.lineTo(D,H+Z),this.lineTo(D,H),this.lineTo(D+K,H),this.lineTo(D,H)},b.prototype.fillRect=function(D,H,K,Z){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z))throw In.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,H,K,Z),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},b.prototype.strokeRect=function(D,H,K,Z){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z))throw In.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");T.call(this)||(this.beginPath(),this.rect(D,H,K,Z),this.stroke())},b.prototype.clearRect=function(D,H,K,Z){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z))throw In.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,H,K,Z))},b.prototype.save=function(D){D=typeof D!="boolean"||D;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},b.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(H),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(D){var H,K,Z,ae;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))H=0,K=0,Z=0,ae=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(de!==null)H=parseInt(de[1]),K=parseInt(de[2]),Z=parseInt(de[3]),ae=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)H=parseInt(de[1]),K=parseInt(de[2]),Z=parseInt(de[3]),ae=parseFloat(de[4]);else{if(ae=1,typeof D=="string"&&D.charAt(0)!=="#"){var se=new i5(D);D=se.ok?se.toHex():"#000000"}D.length===4?(H=D.substring(1,2),H+=H,K=D.substring(2,3),K+=K,Z=D.substring(3,4),Z+=Z):(H=D.substring(1,3),K=D.substring(3,5),Z=D.substring(5,7)),H=parseInt(H,16),K=parseInt(K,16),Z=parseInt(Z,16)}}return{r:H,g:K,b:Z,a:ae,style:D}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},T=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(D,H,K,Z){if(isNaN(H)||isNaN(K)||typeof D!="string")throw In.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!_.call(this)){var ae=re(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;j.call(this,{text:D,x:H,y:K,scale:de,angle:ae,align:this.textAlign,maxWidth:Z})}},b.prototype.strokeText=function(D,H,K,Z){if(isNaN(H)||isNaN(K)||typeof D!="string")throw In.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!T.call(this)){Z=isNaN(Z)?void 0:Z;var ae=re(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;j.call(this,{text:D,x:H,y:K,scale:de,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:Z})}},b.prototype.measureText=function(D){if(typeof D!="string")throw In.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,K=this.pdf.internal.scaleFactor,Z=H.internal.getFontSize(),ae=H.getStringUnitWidth(D)*Z/H.internal.scaleFactor,de=function(se){var he=(se=se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this};return new de({width:ae*=Math.round(96*K/72*1e4)/1e4})},b.prototype.scale=function(D,H){if(isNaN(D)||isNaN(H))throw In.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new d(D,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},b.prototype.rotate=function(D){if(isNaN(D))throw In.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new d(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},b.prototype.translate=function(D,H){if(isNaN(D)||isNaN(H))throw In.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new d(1,0,0,1,D,H);this.ctx.transform=this.ctx.transform.multiply(K)},b.prototype.transform=function(D,H,K,Z,ae,de){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z)||isNaN(ae)||isNaN(de))throw In.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var se=new d(D,H,K,Z,ae,de);this.ctx.transform=this.ctx.transform.multiply(se)},b.prototype.setTransform=function(D,H,K,Z,ae,de){D=isNaN(D)?1:D,H=isNaN(H)?0:H,K=isNaN(K)?0:K,Z=isNaN(Z)?1:Z,ae=isNaN(ae)?0:ae,de=isNaN(de)?0:de,this.ctx.transform=new d(D,H,K,Z,ae,de)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(D,H,K,Z,ae,de,se,he,Ae){var Me=this.pdf.getImageProperties(D),Ke=1,Ye=1,st=1,Le=1;Z!==void 0&&he!==void 0&&(st=he/Z,Le=Ae/ae,Ke=Me.width/Z*he/Z,Ye=Me.height/ae*Ae/ae),de===void 0&&(de=H,se=K,H=0,K=0),Z!==void 0&&he===void 0&&(he=Z,Ae=ae),Z===void 0&&he===void 0&&(he=Me.width,Ae=Me.height);for(var fe,Et=this.ctx.transform.decompose(),ut=re(Et.rotate.shx),$e=new d,Ze=($e=($e=($e=$e.multiply(Et.translate)).multiply(Et.skew)).multiply(Et.scale)).applyToRectangle(new c(de-H*st,se-K*Le,Z*Ke,ae*Ye)),tt=I.call(this,Ze),et=[],We=0;We<tt.length;We+=1)et.indexOf(tt[We])===-1&&et.push(tt[We]);if(L(et),this.autoPaging)for(var Se=et[0],Qe=et[et.length-1],ct=Se;ct<Qe+1;ct++){this.pdf.setPage(ct);var bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=ct===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=ct===1?0:pt+(ct-2)*Nt;if(this.ctx.clip_path.length!==0){var En=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(fe,this.posX+this.margin[3],-it+Ht+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=En}var Lt=JSON.parse(JSON.stringify(Ze));Lt=R([Lt],this.posX+this.margin[3],-it+Ht+this.ctx.prevPageLastElemOffset)[0];var qt=(ct>Se||ct<Qe)&&k.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,Nt,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Lt.x,Lt.y,Lt.w,Lt.h,null,null,ut),qt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,ut)};var I=function(D,H,K){var Z=[];H=H||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":Z.push(Math.floor((D.y+ae)/K)+1);break;case"arc":Z.push(Math.floor((D.y+ae-D.radius)/K)+1),Z.push(Math.floor((D.y+ae+D.radius)/K)+1);break;case"qct":var de=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);Z.push(Math.floor((de.y+ae)/K)+1),Z.push(Math.floor((de.y+de.h+ae)/K)+1);break;case"bct":var se=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);Z.push(Math.floor((se.y+ae)/K)+1),Z.push(Math.floor((se.y+se.h+ae)/K)+1);break;case"rect":Z.push(Math.floor((D.y+ae)/K)+1),Z.push(Math.floor((D.y+D.h+ae)/K)+1)}for(var he=0;he<Z.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<Z[he];)C.call(this);return Z},C=function(){var D=this.fillStyle,H=this.strokeStyle,K=this.font,Z=this.lineCap,ae=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=H,this.font=K,this.lineCap=Z,this.lineWidth=ae,this.lineJoin=de},R=function(D,H,K){for(var Z=0;Z<D.length;Z++)switch(D[Z].type){case"bct":D[Z].x2+=H,D[Z].y2+=K;case"qct":D[Z].x1+=H,D[Z].y1+=K;case"mt":case"lt":case"arc":default:D[Z].x+=H,D[Z].y+=K}return D},L=function(D){return D.sort((function(H,K){return H-K}))},O=function(D,H){for(var K,Z,ae=this.fillStyle,de=this.strokeStyle,se=this.lineCap,he=this.lineWidth,Ae=Math.abs(he*this.ctx.transform.scaleX),Me=this.lineJoin,Ke=JSON.parse(JSON.stringify(this.path)),Ye=JSON.parse(JSON.stringify(this.path)),st=[],Le=0;Le<Ye.length;Le++)if(Ye[Le].x!==void 0)for(var fe=I.call(this,Ye[Le]),Et=0;Et<fe.length;Et+=1)st.indexOf(fe[Et])===-1&&st.push(fe[Et]);for(var ut=0;ut<st.length;ut++)for(;this.pdf.internal.getNumberOfPages()<st[ut];)C.call(this);if(L(st),this.autoPaging)for(var $e=st[0],Ze=st[st.length-1],tt=$e;tt<Ze+1;tt++){this.pdf.setPage(tt),this.fillStyle=ae,this.strokeStyle=de,this.lineCap=se,this.lineWidth=Ae,this.lineJoin=Me;var et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],We=tt===1?this.posY+this.margin[0]:this.margin[0],Se=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=tt===1?0:Se+(tt-2)*Qe;if(this.ctx.clip_path.length!==0){var bt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(K,this.posX+this.margin[3],-ct+We+this.ctx.prevPageLastElemOffset),z.call(this,D,!0),this.path=bt}if(Z=JSON.parse(JSON.stringify(Ke)),this.path=R(Z,this.posX+this.margin[3],-ct+We+this.ctx.prevPageLastElemOffset),H===!1||tt===0){var Ht=(tt>$e||tt<Ze)&&k.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,Qe,null).clip().discardPath()),z.call(this,D,H),Ht&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=Ae,z.call(this,D,H),this.lineWidth=he;this.path=Ke},z=function(D,H){if((D!=="stroke"||H||!T.call(this))&&(D==="stroke"||H||!_.call(this))){for(var K,Z,ae=[],de=this.path,se=0;se<de.length;se++){var he=de[se];switch(he.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:he,deltas:[],abs:[]});break;case"lt":var Ae=ae.length;if(de[se-1]&&!isNaN(de[se-1].x)&&(K=[he.x-de[se-1].x,he.y-de[se-1].y],Ae>0)){for(;Ae>=0;Ae--)if(ae[Ae-1].close!==!0&&ae[Ae-1].begin!==!0){ae[Ae-1].deltas.push(K),ae[Ae-1].abs.push(he);break}}break;case"bct":K=[he.x1-de[se-1].x,he.y1-de[se-1].y,he.x2-de[se-1].x,he.y2-de[se-1].y,he.x-de[se-1].x,he.y-de[se-1].y],ae[ae.length-1].deltas.push(K);break;case"qct":var Me=de[se-1].x+2/3*(he.x1-de[se-1].x),Ke=de[se-1].y+2/3*(he.y1-de[se-1].y),Ye=he.x+2/3*(he.x1-he.x),st=he.y+2/3*(he.y1-he.y),Le=he.x,fe=he.y;K=[Me-de[se-1].x,Ke-de[se-1].y,Ye-de[se-1].x,st-de[se-1].y,Le-de[se-1].x,fe-de[se-1].y],ae[ae.length-1].deltas.push(K);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(he)}}Z=H?null:D==="stroke"?"stroke":"fill";for(var Et=!1,ut=0;ut<ae.length;ut++)if(ae[ut].arc)for(var $e=ae[ut].abs,Ze=0;Ze<$e.length;Ze++){var tt=$e[Ze];tt.type==="arc"?q.call(this,tt.x,tt.y,tt.radius,tt.startAngle,tt.endAngle,tt.counterclockwise,void 0,H,!Et):ne.call(this,tt.x,tt.y),Et=!0}else if(ae[ut].close===!0)this.pdf.internal.out("h"),Et=!1;else if(ae[ut].begin!==!0){var et=ae[ut].start.x,We=ae[ut].start.y;ie.call(this,ae[ut].deltas,et,We),Et=!0}Z&&ee.call(this,Z),H&&ue.call(this)}},W=function(D){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-K;case"top":return D+H-K;case"hanging":return D+H-2*K;case"middle":return D+H/2-K;case"ideographic":return D;case"alphabetic":default:return D}},B=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(H,K){this.colorStops.push([H,K])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var q=function(D,H,K,Z,ae,de,se,he,Ae){for(var Me=U.call(this,K,Z,ae,de),Ke=0;Ke<Me.length;Ke++){var Ye=Me[Ke];Ke===0&&(Ae?F.call(this,Ye.x1+D,Ye.y1+H):ne.call(this,Ye.x1+D,Ye.y1+H)),be.call(this,D,H,Ye.x2,Ye.y2,Ye.x3,Ye.y3,Ye.x4,Ye.y4)}he?ue.call(this):ee.call(this,se)},ee=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ue=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(D,H){this.pdf.internal.out(n(D)+" "+i(H)+" m")},j=function(D){var H;switch(D.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var K=this.pdf.getTextDimensions(D.text),Z=W.call(this,D.y),ae=B.call(this,Z)-K.h,de=this.ctx.transform.applyToPoint(new l(D.x,Z)),se=this.ctx.transform.decompose(),he=new d;he=(he=(he=he.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var Ae,Me,Ke,Ye=this.ctx.transform.applyToRectangle(new c(D.x,Z,K.w,K.h)),st=he.applyToRectangle(new c(D.x,ae,K.w,K.h)),Le=I.call(this,st),fe=[],Et=0;Et<Le.length;Et+=1)fe.indexOf(Le[Et])===-1&&fe.push(Le[Et]);if(L(fe),this.autoPaging)for(var ut=fe[0],$e=fe[fe.length-1],Ze=ut;Ze<$e+1;Ze++){this.pdf.setPage(Ze);var tt=Ze===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[2],Se=We-this.margin[0],Qe=this.pdf.internal.pageSize.width-this.margin[1],ct=Qe-this.margin[3],bt=Ze===1?0:et+(Ze-2)*Se;if(this.ctx.clip_path.length!==0){var Ht=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Ae,this.posX+this.margin[3],-1*bt+tt),z.call(this,"fill",!0),this.path=Ht}var pt=R([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-bt+tt+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*D.scale),Ke=this.lineWidth,this.lineWidth=Ke*D.scale);var Nt=this.autoPaging!=="text";if(Nt||pt.y+pt.h<=We){if(Nt||pt.y>=tt&&pt.x<=Qe){var it=Nt?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Qe-pt.x)[0],En=R([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-bt+tt+this.ctx.prevPageLastElemOffset)[0],Lt=Nt&&(Ze>ut||Ze<$e)&&k.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Se,null).clip().discardPath()),this.pdf.text(it,En.x,En.y,{angle:D.angle,align:H,renderingMode:D.renderingMode}),Lt&&this.pdf.restoreGraphicsState()}}else pt.y<We&&(this.ctx.prevPageLastElemOffset+=We-pt.y);D.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ke)}else D.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*D.scale),Ke=this.lineWidth,this.lineWidth=Ke*D.scale),this.pdf.text(D.text,de.x+this.posX,de.y+this.posY,{angle:D.angle,align:H,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ke)},ne=function(D,H,K,Z){K=K||0,Z=Z||0,this.pdf.internal.out(n(D+K)+" "+i(H+Z)+" l")},ie=function(D,H,K){return this.pdf.lines(D,H,K,null,null)},be=function(D,H,K,Z,ae,de,se,he){this.pdf.internal.out([e(a(K+D)),e(o(Z+H)),e(a(ae+D)),e(o(de+H)),e(a(se+D)),e(o(he+H)),"c"].join(" "))},U=function(D,H,K,Z){for(var ae=2*Math.PI,de=Math.PI/2;H>K;)H-=ae;var se=Math.abs(K-H);se<ae&&Z&&(se=ae-se);for(var he=[],Ae=Z?-1:1,Me=H;se>1e-5;){var Ke=Me+Ae*Math.min(se,de);he.push($.call(this,D,Me,Ke)),se-=Math.abs(Ke-Me),Me=Ke}return he},$=function(D,H,K){var Z=(K-H)/2,ae=D*Math.cos(Z),de=D*Math.sin(Z),se=ae,he=-de,Ae=se*se+he*he,Me=Ae+se*ae+he*de,Ke=4/3*(Math.sqrt(2*Ae*Me)-Me)/(se*de-he*ae),Ye=se-Ke*he,st=he+Ke*se,Le=Ye,fe=-st,Et=Z+H,ut=Math.cos(Et),$e=Math.sin(Et);return{x1:D*Math.cos(H),y1:D*Math.sin(H),x2:Ye*ut-st*$e,y2:Ye*$e+st*ut,x3:Le*ut-fe*$e,y3:Le*$e+fe*ut,x4:D*Math.cos(K),y4:D*Math.sin(K)}},re=function(D){return 180*D/Math.PI},oe=function(D,H,K,Z,ae,de){var se=D+.5*(K-D),he=H+.5*(Z-H),Ae=ae+.5*(K-ae),Me=de+.5*(Z-de),Ke=Math.min(D,ae,se,Ae),Ye=Math.max(D,ae,se,Ae),st=Math.min(H,de,he,Me),Le=Math.max(H,de,he,Me);return new c(Ke,st,Ye-Ke,Le-st)},pe=function(D,H,K,Z,ae,de,se,he){var Ae,Me,Ke,Ye,st,Le,fe,Et,ut,$e,Ze,tt,et,We,Se=K-D,Qe=Z-H,ct=ae-K,bt=de-Z,Ht=se-ae,pt=he-de;for(Me=0;Me<41;Me++)ut=(fe=(Ke=D+(Ae=Me/40)*Se)+Ae*((st=K+Ae*ct)-Ke))+Ae*(st+Ae*(ae+Ae*Ht-st)-fe),$e=(Et=(Ye=H+Ae*Qe)+Ae*((Le=Z+Ae*bt)-Ye))+Ae*(Le+Ae*(de+Ae*pt-Le)-Et),Me==0?(Ze=ut,tt=$e,et=ut,We=$e):(Ze=Math.min(Ze,ut),tt=Math.min(tt,$e),et=Math.max(et,ut),We=Math.max(We,$e));return new c(Math.round(Ze),Math.round(tt),Math.round(et-Ze),Math.round(We-tt))},_e=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,H,K=(D=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:H}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Tt.API),(function(t){var e=function(o){var l,c,d,h,v,b,S,_,T,k;for(c=[],d=0,h=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;h>d;d+=4)(v=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(b=(v=((v=((v=((v=(v-(k=v%85))/85)-(T=v%85))/85)-(_=v%85))/85)-(S=v%85))/85)%85,c.push(b+33,S+33,_+33,T+33,k+33)):c.push(122);return(function(I,C){for(var R=C;R>0;R--)I.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(o){var l,c,d,h,v,b=String,S="length",_=255,T="charCodeAt",k="slice",I="replace";for(o[k](-2),o=o[k](0,-2)[I](/\s/g,"")[I]("z","!!!!!"),d=[],h=0,v=(o+=l="uuuuu"[k](o[S]%5||5))[S];v>h;h+=5)c=52200625*(o[T](h)-33)+614125*(o[T](h+1)-33)+7225*(o[T](h+2)-33)+85*(o[T](h+3)-33)+(o[T](h+4)-33),d.push(_&c>>24,_&c>>16,_&c>>8,_&c);return(function(C,R){for(var L=R;L>0;L--)C.pop()})(d,l[S]),b.fromCharCode.apply(b,d)},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},a=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return o=(l=K0(l)).reduce((function(d,h){return d+String.fromCharCode(h)}),"")};t.processDataByFilters=function(o,l){var c=0,d=o||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map((function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)})).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=a(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}})(Tt.API),(function(t){t.loadFile=function(e,n,i){return(function(a,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var c=void 0;try{c=(function(d,h,v){var b=new XMLHttpRequest,S=0,_=function(T){var k=T.length,I=[],C=String.fromCharCode;for(S=0;S<k;S+=1)I.push(C(255&T.charCodeAt(S)));return I.join("")};if(b.open("GET",d,!h),b.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(b.onload=function(){b.status===200?v(_(this.responseText)):v(void 0)}),b.send(null),h&&b.status===200)return _(b.responseText)})(a,o,l)}catch{}return c})(e,n,i)},t.loadImageFile=t.loadFile})(Tt.API),(function(t){function e(){return(Dt.html2canvas?Promise.resolve(Dt.html2canvas):G0(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))})).then((function(l){return l.default?l.default:l}))}function n(){return(Dt.DOMPurify?Promise.resolve(Dt.DOMPurify):G0(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(l){return Promise.reject(new Error("Could not load dompurify: "+l))})).then((function(l){return l.default?l.default:l}))}var i=function(l){var c=xn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var d=document.createElement(l);for(var h in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[h]=c.style[h];return d},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),d);return h=(h=h.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then((function(){switch(c=c||(function(d){switch(i(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l)){case"string":return this.then(n).then((function(d){return this.set({src:a("div",{innerHTML:l,dompurify:d})})}));case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=(function d(h,v){for(var b=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),S=h.firstChild;S;S=S.nextSibling)v!==!0&&S.nodeType===1&&S.nodeName==="SCRIPT"||b.appendChild(d(S,v));return h.nodeType===1&&(h.nodeName==="CANVAS"?(b.width=h.width,b.height=h.height,b.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(b.value=h.value),b.addEventListener("load",(function(){b.scrollTop=h.scrollTop,b.scrollLeft=h.scrollLeft}),!0)),b})(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then((function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)})).then((function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then((function(c){var d=this.opt.jsPDF,h=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var S=0;S<h.length;++S){var _=h[S],T=_.src.find((function(k){return k.format==="truetype"}));T&&d.addFont(T.url,_.ref.name,_.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,d.context2d.save(!0),c(this.prop.container,b)})).then((function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(l,c)}))},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}}))},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(l){if(i(l)!=="object")return this;var c=Object.keys(l||{}).map((function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}}),this);return this.then((function(){return this.thenList(c)}))},o.prototype.get=function(l,c){return this.then((function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d}))},o.prototype.setMargin=function(l){return this.then((function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l})).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,h){return Math.floor(d*h/72*96)}return this.then((function(){(l=l||Tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l}))},o.prototype.setProgress=function(l,c,d,h){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,h){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,(function(h,v){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,(function(b){return d.updateProgress(null,h),b})).then(h,v).then((function(b){return d.updateProgress(1),b}))}))},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then,l&&(l=l.bind(this)),c&&(c=c.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),v=d.call(h,l,c);return o.convert(v,this.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach((function(d){c=c.thenCore(d)})),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then((function(){throw new Error(l)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Tt.getPageSize=function(l,c,d){if(xn(l)==="object"){var h=l;l=h.orientation,c=h.unit||c,d=h.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var v,b=(""+d).toLowerCase(),S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+c}var _,T=0,k=0;if(S.hasOwnProperty(b))T=S[b][1]/v,k=S[b][0]/v;else try{T=d[1],k=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",k>T&&(_=k,k=T,T=_);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",T>k&&(_=k,k=T,T=_)}return{width:k,height:T,unit:c,k:v,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(nm):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}})(Tt.API),Tt.API.addJS=function(t){return v2=t,this.internal.events.subscribe("postPutResources",(function(){th=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(th+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),g2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+v2+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){th!==void 0&&g2!==void 0&&this.internal.out("/Names <</JavaScript "+th+" 0 R>>")})),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),o=0;o<a.length;o++){var l=a[o],c=i.exec(l);if(c!=null){var d=c[1];n.internal.newObjectDeferredBegin(d,!1)}n.internal.write(l)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,v=[];for(o=0;o<h;o++){var b=n.internal.newObject();v.push(b);var S=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var _=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<v.length;o++)n.internal.write("(page_"+(o+1)+")"+v[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+_+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,a,o){var l={title:a,options:o,children:[]};return i==null&&(i=this.root),i.children.push(l),l},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<i.children.length;o++){var l=i.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),o>0&&this.line("/Prev "+this.makeRef(i.children[o-1])),o<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var c=this.count=this.count_r({count:0},l);if(c>0&&this.line("/Count "+c),l.options&&l.options.pageNumber){var d=n.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var h=0;h<i.children.length;h++)this.renderItems(i.children[h])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,a){for(var o=0;o<a.children.length;o++)i.count++,this.count_r(i,a.children[o]);return i.count}}])})(Tt.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,a,o,l,c){var d,h=this.decode.DCT_DECODE,v=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=l||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(d=(function(b){for(var S,_=256*b.charCodeAt(4)+b.charCodeAt(5),T=b.length,k={width:0,height:0,numcomponents:1},I=4;I<T;I+=2){if(I+=_,e.indexOf(b.charCodeAt(I+1))!==-1){S=256*b.charCodeAt(I+5)+b.charCodeAt(I+6),k={width:256*b.charCodeAt(I+7)+b.charCodeAt(I+8),height:S,numcomponents:b.charCodeAt(I+9)};break}_=256*b.charCodeAt(I+2)+b.charCodeAt(I+3)}return k})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}v={data:n,width:d.width,height:d.height,colorSpace:c,bitsPerComponent:8,filter:h,index:i,alias:a}}return v}})(Tt.API);var Nc,nh,y2,b2,x2,tR=(function(){var t,e,n;function i(o){var l,c,d,h,v,b,S,_,T,k,I,C,R,L;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(l=this.readUInt32(),T=(function(){var O,z;for(z=[],O=0;O<4;++O)z.push(String.fromCharCode(this.data[this.pos++]));return z}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),h=this.readUInt16()||100,b.delay=1e3*v/h,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(T==="fdAT"&&(this.pos+=4,l-=4),o=(b!=null?b.data:void 0)||this.imgData,C=0;0<=l?C<l:C>l;0<=l?++C:--C)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((k=d-this.transparency.indexed.length)>0)for(R=0;0<=k?R<k:R>k;0<=k?++R:--R)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":S=(I=this.read(l)).indexOf(0),_=String.fromCharCode.apply(String,I.slice(0,S)),this.text[_]=String.fromCharCode.apply(String,I.slice(S+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(o){var l,c;for(c=[],l=0;0<=o?l<o:l>o;0<=o?++l:--l)c.push(this.data[this.pos++]);return c},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(o){var l=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*l),d=0,h=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function v(b,S,_,T){var k,I,C,R,L,O,z,W,B,q,ee,ue,F,j,ne,ie,be,U,$,re,oe,pe=Math.ceil((h.width-b)/_),_e=Math.ceil((h.height-S)/T),D=h.width==pe&&h.height==_e;for(j=l*pe,ue=D?c:new Uint8Array(j*_e),O=o.length,F=0,I=0;F<_e&&d<O;){switch(o[d++]){case 0:for(R=be=0;be<j;R=be+=1)ue[I++]=o[d++];break;case 1:for(R=U=0;U<j;R=U+=1)k=o[d++],L=R<l?0:ue[I-l],ue[I++]=(k+L)%256;break;case 2:for(R=$=0;$<j;R=$+=1)k=o[d++],C=(R-R%l)/l,ne=F&&ue[(F-1)*j+C*l+R%l],ue[I++]=(ne+k)%256;break;case 3:for(R=re=0;re<j;R=re+=1)k=o[d++],C=(R-R%l)/l,L=R<l?0:ue[I-l],ne=F&&ue[(F-1)*j+C*l+R%l],ue[I++]=(k+Math.floor((L+ne)/2))%256;break;case 4:for(R=oe=0;oe<j;R=oe+=1)k=o[d++],C=(R-R%l)/l,L=R<l?0:ue[I-l],F===0?ne=ie=0:(ne=ue[(F-1)*j+C*l+R%l],ie=C&&ue[(F-1)*j+(C-1)*l+R%l]),z=L+ne-ie,W=Math.abs(z-L),q=Math.abs(z-ne),ee=Math.abs(z-ie),B=W<=q&&W<=ee?L:q<=ee?ne:ie,ue[I++]=(k+B)%256;break;default:throw new Error("Invalid filter algorithm: "+o[d-1])}if(!D){var H=((S+F*T)*h.width+b)*l,K=F*j;for(R=0;R<pe;R+=1){for(var Z=0;Z<l;Z+=1)c[H++]=ue[K++];H+=(_-1)*l}}F++}}return o=Mk(o),h.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),c},i.prototype.decodePalette=function(){var o,l,c,d,h,v,b,S,_;for(c=this.palette,v=this.transparency.indexed||[],h=new Uint8Array((v.length||0)+c.length),d=0,o=0,l=b=0,S=c.length;b<S;l=b+=3)h[d++]=c[l],h[d++]=c[l+1],h[d++]=c[l+2],h[d++]=(_=v[o++])!=null?_:255;return h},i.prototype.copyToImageData=function(o,l){var c,d,h,v,b,S,_,T,k,I,C;if(d=this.colors,k=null,c=this.hasAlphaChannel,this.palette.length&&(k=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),d=4,c=!0),T=(h=o.data||o).length,b=k||l,v=S=0,d===1)for(;v<T;)_=k?4*l[v/4]:S,I=b[_++],h[v++]=I,h[v++]=I,h[v++]=I,h[v++]=c?b[_++]:255,S=_;else for(;v<T;)_=k?4*l[v/4]:S,h[v++]=b[_++],h[v++]=b[_++],h[v++]=b[_++],h[v++]=c?b[_++]:255,S=_},i.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var a=function(){if(Object.prototype.toString.call(Dt)==="[object Window]"){try{e=Dt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),t=function(o){var l;if(a()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(l=new Image).src=e.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(o){var l,c,d,h,v,b,S,_;if(this.animation){for(_=[],c=v=0,b=(S=this.animation.frames).length;v<b;c=++v)l=S[c],d=o.createImageData(l.width,l.height),h=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(d,h),l.imageData=d,_.push(l.image=t(d));return _}},i.prototype.renderFrame=function(o,l){var c,d,h;return c=(d=this.animation.frames)[l],h=d[l-1],l===0&&o.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?o.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&o.putImageData(h.imageData,h.xOffset,h.yOffset),c.blendOp===0&&o.clearRect(c.xOffset,c.yOffset,c.width,c.height),o.drawImage(c.image,c.xOffset,c.yOffset)},i.prototype.animate=function(o){var l,c,d,h,v,b,S=this;return c=0,b=this.animation,h=b.numFrames,d=b.frames,v=b.numPlays,(l=function(){var _,T;if(_=c++%h,T=d[_],S.renderFrame(o,_),h>1&&c/h<v)return S.animation._timeout=setTimeout(l,T.delay)})()},i.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},i.prototype.render=function(o){var l,c;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,l=o.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(c=l.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),l.putImageData(c,0,0))},i})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function nR(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,a=t[e++],o=a>>7,l=1<<(7&a)+1;t[e++],t[e++];var c=null,d=null;o&&(c=e,d=l,e+=3*l);var h=!0,v=[],b=0,S=null,_=0,T=null;for(this.width=n,this.height=i;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,T=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var k=t[e++];b=t[e++]|t[e++]<<8,S=t[e++],(1&k)==0&&(S=null),_=k>>2&7,e++;break;case 254:for(;;){if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var I=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,L=t[e++]|t[e++]<<8,O=t[e++],z=O>>6&1,W=1<<(7&O)+1,B=c,q=d,ee=!1;O>>7&&(ee=!0,B=e,q=W,e+=3*W);var ue=e;for(e++;;){var F;if(!((F=t[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}v.push({x:I,y:C,width:R,height:L,has_local_palette:ee,palette_offset:B,palette_size:q,data_offset:ue,data_length:e-ue,transparent_index:S,interlaced:!!z,delay:b,disposal:_});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return T},this.frameInfo=function(j){if(j<0||j>=v.length)throw new Error("Frame index out of range.");return v[j]},this.decodeAndBlitFrameBGRA=function(j,ne){var ie=this.frameInfo(j),be=ie.width*ie.height,U=new Uint8Array(be);w2(t,ie.data_offset,U,be);var $=ie.palette_offset,re=ie.transparent_index;re===null&&(re=256);var oe=ie.width,pe=n-oe,_e=oe,D=4*(ie.y*n+ie.x),H=4*((ie.y+ie.height)*n+ie.x),K=D,Z=4*pe;ie.interlaced===!0&&(Z+=4*n*7);for(var ae=8,de=0,se=U.length;de<se;++de){var he=U[de];if(_e===0&&(_e=oe,(K+=Z)>=H&&(Z=4*pe+4*n*(ae-1),K=D+(oe+pe)*(ae<<1),ae>>=1)),he===re)K+=4;else{var Ae=t[$+3*he],Me=t[$+3*he+1],Ke=t[$+3*he+2];ne[K++]=Ke,ne[K++]=Me,ne[K++]=Ae,ne[K++]=255}--_e}},this.decodeAndBlitFrameRGBA=function(j,ne){var ie=this.frameInfo(j),be=ie.width*ie.height,U=new Uint8Array(be);w2(t,ie.data_offset,U,be);var $=ie.palette_offset,re=ie.transparent_index;re===null&&(re=256);var oe=ie.width,pe=n-oe,_e=oe,D=4*(ie.y*n+ie.x),H=4*((ie.y+ie.height)*n+ie.x),K=D,Z=4*pe;ie.interlaced===!0&&(Z+=4*n*7);for(var ae=8,de=0,se=U.length;de<se;++de){var he=U[de];if(_e===0&&(_e=oe,(K+=Z)>=H&&(Z=4*pe+4*n*(ae-1),K=D+(oe+pe)*(ae<<1),ae>>=1)),he===re)K+=4;else{var Ae=t[$+3*he],Me=t[$+3*he+1],Ke=t[$+3*he+2];ne[K++]=Ae,ne[K++]=Me,ne[K++]=Ke,ne[K++]=255}--_e}}}function w2(t,e,n,i){for(var a=t[e++],o=1<<a,l=o+1,c=l+1,d=a+1,h=(1<<d)-1,v=0,b=0,S=0,_=t[e++],T=new Int32Array(4096),k=null;;){for(;v<16&&_!==0;)b|=t[e++]<<v,v+=8,_===1?_=t[e++]:--_;if(v<d)break;var I=b&h;if(b>>=d,v-=d,I!==o){if(I===l)break;for(var C=I<c?I:k,R=0,L=C;L>o;)L=T[L]>>8,++R;var O=L;if(S+R+(C!==I?1:0)>i)return void In.log("Warning, gif stream longer than expected.");n[S++]=O;var z=S+=R;for(C!==I&&(n[S++]=O),L=C;R--;)L=T[L],n[--z]=255&L,L>>=8;k!==null&&c<4096&&(T[c++]=k<<8|O,c>=h+1&&d<12&&(++d,h=h<<1|1)),k=I}else c=l+1,h=(1<<(d=a+1))-1,k=null}return S!==i&&In.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function m0(t){var e,n,i,a,o,l=Math.floor,c=new Array(64),d=new Array(64),h=new Array(64),v=new Array(64),b=new Array(65535),S=new Array(65535),_=new Array(64),T=new Array(64),k=[],I=0,C=7,R=new Array(64),L=new Array(64),O=new Array(64),z=new Array(256),W=new Array(2048),B=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],ue=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ne=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],be=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(D,H){for(var K=0,Z=0,ae=new Array,de=1;de<=16;de++){for(var se=1;se<=D[de];se++)ae[H[Z]]=[],ae[H[Z]][0]=K,ae[H[Z]][1]=de,Z++,K++;K*=2}return ae}function $(D){for(var H=D[0],K=D[1]-1;K>=0;)H&1<<K&&(I|=1<<C),K--,--C<0&&(I==255?(re(255),re(0)):re(I),C=7,I=0)}function re(D){k.push(D)}function oe(D){re(D>>8&255),re(255&D)}function pe(D,H,K,Z,ae){for(var de,se=ae[0],he=ae[240],Ae=(function($e,Ze){var tt,et,We,Se,Qe,ct,bt,Ht,pt,Nt,it=0;for(pt=0;pt<8;++pt){tt=$e[it],et=$e[it+1],We=$e[it+2],Se=$e[it+3],Qe=$e[it+4],ct=$e[it+5],bt=$e[it+6];var En=tt+(Ht=$e[it+7]),Lt=tt-Ht,qt=et+bt,Pt=et-bt,St=We+ct,Kn=We-ct,Yt=Se+Qe,Cr=Se-Qe,an=En+Yt,vi=En-Yt,Yi=qt+St,on=qt-St;$e[it]=an+Yi,$e[it+4]=an-Yi;var _t=.707106781*(on+vi);$e[it+2]=vi+_t,$e[it+6]=vi-_t;var Vt=.382683433*((an=Cr+Kn)-(on=Pt+Lt)),es=.5411961*an+Vt,gn=1.306562965*on+Vt,ji=.707106781*(Yi=Kn+Pt),yi=Lt+ji,xt=Lt-ji;$e[it+5]=xt+es,$e[it+3]=xt-es,$e[it+1]=yi+gn,$e[it+7]=yi-gn,it+=8}for(it=0,pt=0;pt<8;++pt){tt=$e[it],et=$e[it+8],We=$e[it+16],Se=$e[it+24],Qe=$e[it+32],ct=$e[it+40],bt=$e[it+48];var sr=tt+(Ht=$e[it+56]),ar=tt-Ht,Ei=et+bt,jn=et-bt,Ln=We+ct,Ci=We-ct,vs=Se+Qe,li=Se-Qe,ln=sr+vs,wn=sr-vs,ui=Ei+Ln,Be=Ei-Ln;$e[it]=ln+ui,$e[it+32]=ln-ui;var Mt=.707106781*(Be+wn);$e[it+16]=wn+Mt,$e[it+48]=wn-Mt;var $t=.382683433*((ln=li+Ci)-(Be=jn+ar)),Dn=.5411961*ln+$t,Fn=1.306562965*Be+$t,ys=.707106781*(ui=Ci+jn),ts=ar+ys,ns=ar-ys;$e[it+40]=ns+Dn,$e[it+24]=ns-Dn,$e[it+8]=ts+Fn,$e[it+56]=ts-Fn,it++}for(pt=0;pt<64;++pt)Nt=$e[pt]*Ze[pt],_[pt]=Nt>0?Nt+.5|0:Nt-.5|0;return _})(D,H),Me=0;Me<64;++Me)T[B[Me]]=Ae[Me];var Ke=T[0]-K;K=T[0],Ke==0?$(Z[0]):($(Z[S[de=32767+Ke]]),$(b[de]));for(var Ye=63;Ye>0&&T[Ye]==0;)Ye--;if(Ye==0)return $(se),K;for(var st,Le=1;Le<=Ye;){for(var fe=Le;T[Le]==0&&Le<=Ye;)++Le;var Et=Le-fe;if(Et>=16){st=Et>>4;for(var ut=1;ut<=st;++ut)$(he);Et&=15}de=32767+T[Le],$(ae[(Et<<4)+S[de]]),$(b[de]),Le++}return Ye!=63&&$(se),K}function _e(D){D=Math.min(Math.max(D,1),100),o!=D&&((function(H){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var ae=l((K[Z]*H+50)/100);ae=Math.min(Math.max(ae,1),255),c[B[Z]]=ae}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],se=0;se<64;se++){var he=l((de[se]*H+50)/100);he=Math.min(Math.max(he,1),255),d[B[se]]=he}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,Ke=0;Ke<8;Ke++)for(var Ye=0;Ye<8;Ye++)h[Me]=1/(c[B[Me]]*Ae[Ke]*Ae[Ye]*8),v[Me]=1/(d[B[Me]]*Ae[Ke]*Ae[Ye]*8),Me++})(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),o=D)}this.encode=function(D,H){H&&_e(H),k=new Array,I=0,C=7,oe(65496),oe(65504),oe(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),oe(1),oe(1),re(0),re(0),(function(){oe(65499),oe(132),re(0);for(var et=0;et<64;et++)re(c[et]);re(1);for(var We=0;We<64;We++)re(d[We])})(),(function(et,We){oe(65472),oe(17),re(8),oe(We),oe(et),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)})(D.width,D.height),(function(){oe(65476),oe(418),re(0);for(var et=0;et<16;et++)re(q[et+1]);for(var We=0;We<=11;We++)re(ee[We]);re(16);for(var Se=0;Se<16;Se++)re(ue[Se+1]);for(var Qe=0;Qe<=161;Qe++)re(F[Qe]);re(1);for(var ct=0;ct<16;ct++)re(j[ct+1]);for(var bt=0;bt<=11;bt++)re(ne[bt]);re(17);for(var Ht=0;Ht<16;Ht++)re(ie[Ht+1]);for(var pt=0;pt<=161;pt++)re(be[pt])})(),oe(65498),oe(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var K=0,Z=0,ae=0;I=0,C=7,this.encode.displayName="_encode_";for(var de,se,he,Ae,Me,Ke,Ye,st,Le,fe=D.data,Et=D.width,ut=D.height,$e=4*Et,Ze=0;Ze<ut;){for(de=0;de<$e;){for(Me=$e*Ze+de,Ye=-1,st=0,Le=0;Le<64;Le++)Ke=Me+(st=Le>>3)*$e+(Ye=4*(7&Le)),Ze+st>=ut&&(Ke-=$e*(Ze+1+st-ut)),de+Ye>=$e&&(Ke-=de+Ye-$e+4),se=fe[Ke++],he=fe[Ke++],Ae=fe[Ke++],R[Le]=(W[se]+W[he+256>>0]+W[Ae+512>>0]>>16)-128,L[Le]=(W[se+768>>0]+W[he+1024>>0]+W[Ae+1280>>0]>>16)-128,O[Le]=(W[se+1280>>0]+W[he+1536>>0]+W[Ae+1792>>0]>>16)-128;K=pe(R,h,K,e,i),Z=pe(L,v,Z,n,a),ae=pe(O,v,ae,n,a),de+=32}Ze+=8}if(C>=0){var tt=[];tt[1]=C+1,tt[0]=(1<<C+1)-1,$(tt)}return oe(65497),new Uint8Array(k)},t=t||50,(function(){for(var D=String.fromCharCode,H=0;H<256;H++)z[H]=D(H)})(),e=U(q,ee),n=U(j,ne),i=U(ue,F),a=U(ie,be),(function(){for(var D=1,H=2,K=1;K<=15;K++){for(var Z=D;Z<H;Z++)S[32767+Z]=K,b[32767+Z]=[],b[32767+Z][1]=K,b[32767+Z][0]=Z;for(var ae=-(H-1);ae<=-D;ae++)S[32767+ae]=K,b[32767+ae]=[],b[32767+ae][1]=K,b[32767+ae][0]=H-1+ae;D<<=1,H<<=1}})(),(function(){for(var D=0;D<256;D++)W[D]=19595*D,W[D+256>>0]=38470*D,W[D+512>>0]=7471*D+32768,W[D+768>>0]=-11059*D,W[D+1024>>0]=-21709*D,W[D+1280>>0]=32768*D+8421375,W[D+1536>>0]=-27439*D,W[D+1792>>0]=-5329*D})(),_e(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function na(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function S2(t){function e(q){if(!q)throw Error("assert :P")}function n(q,ee,ue){for(var F=0;4>F;F++)if(q[ee+F]!=ue.charCodeAt(F))return!0;return!1}function i(q,ee,ue,F,j){for(var ne=0;ne<j;ne++)q[ee+ne]=ue[F+ne]}function a(q,ee,ue,F){for(var j=0;j<F;j++)q[ee+j]=ue}function o(q){return new Int32Array(q)}function l(q,ee){for(var ue=[],F=0;F<q;F++)ue.push(new ee);return ue}function c(q,ee){var ue=[];return(function F(j,ne,ie){for(var be=ie[ne],U=0;U<be&&(j.push(ie.length>ne+1?[]:new ee),!(ie.length<ne+1));U++)F(j[U],ne+1,ie)})(ue,0,q),ue}var d=function(){var q=this;function ee(m,w){for(var E=1<<w-1>>>0;m&E;)E>>>=1;return E?(m&E-1)+E:m}function ue(m,w,E,M,G){e(!(M%E));do m[w+(M-=E)]=G;while(0<M)}function F(m,w,E,M,G){if(e(2328>=G),512>=G)var J=o(512);else if((J=o(G))==null)return 0;return(function(Y,X,te,le,ve,ke){var Ce,Ne,Ge=X,Ue=1<<te,ye=o(16),we=o(16);for(e(ve!=0),e(le!=null),e(Y!=null),e(0<te),Ne=0;Ne<ve;++Ne){if(15<le[Ne])return 0;++ye[le[Ne]]}if(ye[0]==ve)return 0;for(we[1]=0,Ce=1;15>Ce;++Ce){if(ye[Ce]>1<<Ce)return 0;we[Ce+1]=we[Ce]+ye[Ce]}for(Ne=0;Ne<ve;++Ne)Ce=le[Ne],0<le[Ne]&&(ke[we[Ce]++]=Ne);if(we[15]==1)return(le=new j).g=0,le.value=ke[0],ue(Y,Ge,1,Ue,le),Ue;var ze,Je=-1,qe=Ue-1,at=0,nt=1,mt=1,rt=1<<te;for(Ne=0,Ce=1,ve=2;Ce<=te;++Ce,ve<<=1){if(nt+=mt<<=1,0>(mt-=ye[Ce]))return 0;for(;0<ye[Ce];--ye[Ce])(le=new j).g=Ce,le.value=ke[Ne++],ue(Y,Ge+at,ve,rt,le),at=ee(at,Ce)}for(Ce=te+1,ve=2;15>=Ce;++Ce,ve<<=1){if(nt+=mt<<=1,0>(mt-=ye[Ce]))return 0;for(;0<ye[Ce];--ye[Ce]){if(le=new j,(at&qe)!=Je){for(Ge+=rt,ze=1<<(Je=Ce)-te;15>Je&&!(0>=(ze-=ye[Je]));)++Je,ze<<=1;Ue+=rt=1<<(ze=Je-te),Y[X+(Je=at&qe)].g=ze+te,Y[X+Je].value=Ge-X-Je}le.g=Ce-te,le.value=ke[Ne++],ue(Y,Ge+(at>>te),ve,rt,le),at=ee(at,Ce)}}return nt!=2*we[15]-1?0:Ue})(m,w,E,M,G,J)}function j(){this.value=this.g=0}function ne(){this.value=this.g=0}function ie(){this.G=l(5,j),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Ki,ne)}function be(m,w,E,M){e(m!=null),e(w!=null),e(2147483648>M),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=w,m.pa=E,m.Jd=w,m.Yc=E+M,m.Zc=4<=M?E+M-4+1:E,de(m)}function U(m,w){for(var E=0;0<w--;)E|=he(m,128)<<w;return E}function $(m,w){var E=U(m,w);return se(m)?-E:E}function re(m,w,E,M){var G,J=0;for(e(m!=null),e(w!=null),e(4294967288>M),m.Sb=M,m.Ra=0,m.u=0,m.h=0,4<M&&(M=4),G=0;G<M;++G)J+=w[E+G]<<8*G;m.Ra=J,m.bb=M,m.oa=w,m.pa=E}function oe(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Aa-8>>>0,++m.bb,m.u-=8;K(m)&&(m.h=1,m.u=0)}function pe(m,w){if(e(0<=w),!m.h&&w<=Na){var E=H(m)&to[w];return m.u+=w,oe(m),E}return m.h=1,m.u=0}function _e(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(m){return m.Ra>>>(m.u&Aa-1)>>>0}function K(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Aa}function Z(m,w){m.u=w,m.h=K(m)}function ae(m){m.u>=Go&&(e(m.u>=Go),oe(m))}function de(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function se(m){return U(m,1)}function he(m,w){var E=m.Ca;0>m.b&&de(m);var M=m.b,G=E*w>>>8,J=(m.I>>>M>G)+0;for(J?(E-=G,m.I-=G+1<<M>>>0):E=G+1,M=E,G=0;256<=M;)G+=8,M>>=8;return M=7^G+Xi[M],m.b-=M,m.Ca=(E<<M)-1,J}function Ae(m,w,E){m[w+0]=E>>24&255,m[w+1]=E>>16&255,m[w+2]=E>>8&255,m[w+3]=E>>0&255}function Me(m,w){return m[w+0]<<0|m[w+1]<<8}function Ke(m,w){return Me(m,w)|m[w+2]<<16}function Ye(m,w){return Me(m,w)|Me(m,w+2)<<16}function st(m,w){var E=1<<w;return e(m!=null),e(0<w),m.X=o(E),m.X==null?0:(m.Mb=32-w,m.Xa=w,1)}function Le(m,w){e(m!=null),e(w!=null),e(m.Xa==w.Xa),i(w.X,0,m.X,0,1<<w.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function Et(m,w,E,M){e(E!=null),e(M!=null);var G=E[0],J=M[0];return G==0&&(G=(m*J+w/2)/w),J==0&&(J=(w*G+m/2)/m),0>=G||0>=J?0:(E[0]=G,M[0]=J,1)}function ut(m,w){return m+(1<<w)-1>>>w}function $e(m,w){return((4278255360&m)+(4278255360&w)>>>0&4278255360)+((16711935&m)+(16711935&w)>>>0&16711935)>>>0}function Ze(m,w){q[w]=function(E,M,G,J,Y,X,te){var le;for(le=0;le<Y;++le){var ve=q[m](X[te+le-1],G,J+le);X[te+le]=$e(E[M+le],ve)}}}function tt(){this.ud=this.hd=this.jd=0}function et(m,w){return((4278124286&(m^w))>>>1)+(m&w)>>>0}function We(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function Se(m,w){return We(m+(m-w+.5>>1))}function Qe(m,w,E){return Math.abs(w-E)-Math.abs(m-E)}function ct(m,w,E,M,G,J,Y){for(M=J[Y-1],E=0;E<G;++E)J[Y+E]=M=$e(m[w+E],M)}function bt(m,w,E,M,G){var J;for(J=0;J<E;++J){var Y=m[w+J],X=Y>>8&255,te=16711935&(te=(te=16711935&Y)+((X<<16)+X));M[G+J]=(4278255360&Y)+te>>>0}}function Ht(m,w){w.jd=m>>0&255,w.hd=m>>8&255,w.ud=m>>16&255}function pt(m,w,E,M,G,J){var Y;for(Y=0;Y<M;++Y){var X=w[E+Y],te=X>>>8,le=X,ve=255&(ve=(ve=X>>>16)+((m.jd<<24>>24)*(te<<24>>24)>>>5));le=255&(le=(le=le+((m.hd<<24>>24)*(te<<24>>24)>>>5))+((m.ud<<24>>24)*(ve<<24>>24)>>>5)),G[J+Y]=(4278255360&X)+(ve<<16)+le}}function Nt(m,w,E,M,G){q[w]=function(J,Y,X,te,le,ve,ke,Ce,Ne){for(te=ke;te<Ce;++te)for(ke=0;ke<Ne;++ke)le[ve++]=G(X[M(J[Y++])])},q[m]=function(J,Y,X,te,le,ve,ke){var Ce=8>>J.b,Ne=J.Ea,Ge=J.K[0],Ue=J.w;if(8>Ce)for(J=(1<<J.b)-1,Ue=(1<<Ce)-1;Y<X;++Y){var ye,we=0;for(ye=0;ye<Ne;++ye)ye&J||(we=M(te[le++])),ve[ke++]=G(Ge[we&Ue]),we>>=Ce}else q["VP8LMapColor"+E](te,le,Ge,Ue,ve,ke,Y,X,Ne)}}function it(m,w,E,M,G){for(E=w+E;w<E;){var J=m[w++];M[G++]=J>>16&255,M[G++]=J>>8&255,M[G++]=J>>0&255}}function En(m,w,E,M,G){for(E=w+E;w<E;){var J=m[w++];M[G++]=J>>16&255,M[G++]=J>>8&255,M[G++]=J>>0&255,M[G++]=J>>24&255}}function Lt(m,w,E,M,G){for(E=w+E;w<E;){var J=(Y=m[w++])>>16&240|Y>>12&15,Y=Y>>0&240|Y>>28&15;M[G++]=J,M[G++]=Y}}function qt(m,w,E,M,G){for(E=w+E;w<E;){var J=(Y=m[w++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;M[G++]=J,M[G++]=Y}}function Pt(m,w,E,M,G){for(E=w+E;w<E;){var J=m[w++];M[G++]=J>>0&255,M[G++]=J>>8&255,M[G++]=J>>16&255}}function St(m,w,E,M,G,J){if(J==0)for(E=w+E;w<E;)Ae(M,((J=m[w++])[0]>>24|J[1]>>8&65280|J[2]<<8&16711680|J[3]<<24)>>>0),G+=32;else i(M,G,m,w,E)}function Kn(m,w){q[w][0]=q[m+"0"],q[w][1]=q[m+"1"],q[w][2]=q[m+"2"],q[w][3]=q[m+"3"],q[w][4]=q[m+"4"],q[w][5]=q[m+"5"],q[w][6]=q[m+"6"],q[w][7]=q[m+"7"],q[w][8]=q[m+"8"],q[w][9]=q[m+"9"],q[w][10]=q[m+"10"],q[w][11]=q[m+"11"],q[w][12]=q[m+"12"],q[w][13]=q[m+"13"],q[w][14]=q[m+"0"],q[w][15]=q[m+"0"]}function Yt(m){return m==eu||m==qu||m==Yo||m==zu}function Cr(){this.eb=[],this.size=this.A=this.fb=0}function an(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Cr,this.f.kb=new an,this.sd=null}function Yi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function on(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function _t(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Vt(m,w){var E=m.T,M=w.ba.f.RGBA,G=M.eb,J=M.fb+m.ka*M.A,Y=Li[w.ba.S],X=m.y,te=m.O,le=m.f,ve=m.N,ke=m.ea,Ce=m.W,Ne=w.cc,Ge=w.dc,Ue=w.Mc,ye=w.Nc,we=m.ka,ze=m.ka+m.T,Je=m.U,qe=Je+1>>1;for(we==0?Y(X,te,null,null,le,ve,ke,Ce,le,ve,ke,Ce,G,J,null,null,Je):(Y(w.ec,w.fc,X,te,Ne,Ge,Ue,ye,le,ve,ke,Ce,G,J-M.A,G,J,Je),++E);we+2<ze;we+=2)Ne=le,Ge=ve,Ue=ke,ye=Ce,ve+=m.Rc,Ce+=m.Rc,J+=2*M.A,Y(X,(te+=2*m.fa)-m.fa,X,te,Ne,Ge,Ue,ye,le,ve,ke,Ce,G,J-M.A,G,J,Je);return te+=m.fa,m.j+ze<m.o?(i(w.ec,w.fc,X,te,Je),i(w.cc,w.dc,le,ve,qe),i(w.Mc,w.Nc,ke,Ce,qe),E--):1&ze||Y(X,te,null,null,le,ve,ke,Ce,le,ve,ke,Ce,G,J+M.A,null,null,Je),E}function es(m,w,E){var M=m.F,G=[m.J];if(M!=null){var J=m.U,Y=w.ba.S,X=Y==Zl||Y==Yo;w=w.ba.f.RGBA;var te=[0],le=m.ka;te[0]=m.T,m.Kb&&(le==0?--te[0]:(--le,G[0]-=m.width),m.j+m.ka+m.T==m.o&&(te[0]=m.o-m.j-le));var ve=w.eb;le=w.fb+le*w.A,m=no(M,G[0],m.width,J,te,ve,le+(X?0:3),w.A),e(E==te),m&&Yt(Y)&&Ts(ve,le,X,J,te,w.A)}return 0}function gn(m){var w=m.ma,E=w.ba.S,M=11>E,G=E==Gi||E==jr||E==Zl||E==Jo||E==12||Yt(E);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!zs(w.Oa,m,G?11:12))return 0;if(G&&Yt(E)&&Xe(),m.da)alert("todo:use_scaling");else{if(M){if(w.Ib=_t,m.Kb){if(E=m.U+1>>1,w.memory=o(m.U+2*E),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+m.U,w.Mc=w.cc,w.Nc=w.dc+E,w.Ib=Vt,Xe()}}else alert("todo:EmitYUV");G&&(w.Jb=es,M&&Ee())}if(M&&!Pa){for(m=0;256>m;++m)Di[m]=89858*(m-128)+Xo>>Gr,Mh[m]=-22014*(m-128)+Xo,nf[m]=-45773*(m-128),Ju[m]=113618*(m-128)+Xo>>Gr;for(m=ao;m<Ma;++m)w=76283*(m-16)+Xo>>Gr,Ph[m-ao]=vr(w,255),Uh[m-ao]=vr(w+8>>4,15);Pa=1}return 1}function ji(m){var w=m.ma,E=m.U,M=m.T;return e(!(1&m.ka)),0>=E||0>=M?0:(E=w.Ib(m,w),w.Jb!=null&&w.Jb(m,w,E),w.Dc+=E,1)}function yi(m){m.ma.memory=null}function xt(m,w,E,M){return pe(m,8)!=47?0:(w[0]=pe(m,14)+1,E[0]=pe(m,14)+1,M[0]=pe(m,1),pe(m,3)!=0?0:!m.h)}function sr(m,w){if(4>m)return m+1;var E=m-2>>1;return(2+(1&m)<<E)+pe(w,E)+1}function ar(m,w){return 120<w?w-120:1<=(E=((E=Br[w-1])>>4)*m+(8-(15&E)))?E:1;var E}function Ei(m,w,E){var M=H(E),G=m[w+=255&M].g-8;return 0<G&&(Z(E,E.u+8),M=H(E),w+=m[w].value,w+=M&(1<<G)-1),Z(E,E.u+m[w].g),m[w].value}function jn(m,w,E){return E.g+=m.g,E.value+=m.value<<w>>>0,e(8>=E.g),m.g}function Ln(m,w,E){var M=m.xc;return e((w=M==0?0:m.vc[m.md*(E>>M)+(w>>M)])<m.Wb),m.Ya[w]}function Ci(m,w,E,M){var G=m.ab,J=m.c*w,Y=m.C;w=Y+w;var X=E,te=M;for(M=m.Ta,E=m.Ua;0<G--;){var le=m.gc[G],ve=Y,ke=w,Ce=X,Ne=te,Ge=(te=M,X=E,le.Ea);switch(e(ve<ke),e(ke<=le.nc),le.hc){case 2:Uu(Ce,Ne,(ke-ve)*Ge,te,X);break;case 0:var Ue=ve,ye=ke,we=te,ze=X,Je=(rt=le).Ea;Ue==0&&(Pu(Ce,Ne,null,null,1,we,ze),ct(Ce,Ne+1,0,0,Je-1,we,ze+1),Ne+=Je,ze+=Je,++Ue);for(var qe=1<<rt.b,at=qe-1,nt=ut(Je,rt.b),mt=rt.K,rt=rt.w+(Ue>>rt.b)*nt;Ue<ye;){var sn=mt,Kt=rt,en=1;for(Yl(Ce,Ne,we,ze-Je,1,we,ze);en<Je;){var Ft=(en&~at)+qe;Ft>Je&&(Ft=Je),(0,Mr[sn[Kt++]>>8&15])(Ce,Ne+ +en,we,ze+en-Je,Ft-en,we,ze+en),en=Ft}Ne+=Je,ze+=Je,++Ue&at||(rt+=nt)}ke!=le.nc&&i(te,X-Ge,te,X+(ke-ve-1)*Ge,Ge);break;case 1:for(Ge=Ce,ye=Ne,Je=(Ce=le.Ea)-(ze=Ce&~(we=(Ne=1<<le.b)-1)),Ue=ut(Ce,le.b),qe=le.K,le=le.w+(ve>>le.b)*Ue;ve<ke;){for(at=qe,nt=le,mt=new tt,rt=ye+ze,sn=ye+Ce;ye<rt;)Ht(at[nt++],mt),yr(mt,Ge,ye,Ne,te,X),ye+=Ne,X+=Ne;ye<sn&&(Ht(at[nt++],mt),yr(mt,Ge,ye,Je,te,X),ye+=Je,X+=Je),++ve&we||(le+=Ue)}break;case 3:if(Ce==te&&Ne==X&&0<le.b){for(ye=te,Ce=Ge=X+(ke-ve)*Ge-(ze=(ke-ve)*ut(le.Ea,le.b)),Ne=te,we=X,Ue=[],ze=(Je=ze)-1;0<=ze;--ze)Ue[ze]=Ne[we+ze];for(ze=Je-1;0<=ze;--ze)ye[Ce+ze]=Ue[ze];os(le,ve,ke,te,Ge,te,X)}else os(le,ve,ke,Ce,Ne,te,X)}X=M,te=E}te!=E&&i(M,E,X,te,J)}function vs(m,w){var E=m.V,M=m.Ba+m.c*m.C,G=w-m.C;if(e(w<=m.l.o),e(16>=G),0<G){var J=m.l,Y=m.Ta,X=m.Ua,te=J.width;if(Ci(m,G,E,M),G=X=[X],e((E=m.C)<(M=w)),e(J.v<J.va),M>J.o&&(M=J.o),E<J.j){var le=J.j-E;E=J.j,G[0]+=le*te}if(E>=M?E=0:(G[0]+=4*J.v,J.ka=E-J.j,J.U=J.va-J.v,J.T=M-E,E=1),E){if(X=X[0],11>(E=m.ca).S){var ve=E.f.RGBA,ke=(M=E.S,G=J.U,J=J.T,le=ve.eb,ve.A),Ce=J;for(ve=ve.fb+m.Ma*ve.A;0<Ce--;){var Ne=Y,Ge=X,Ue=G,ye=le,we=ve;switch(M){case Fu:Pr(Ne,Ge,Ue,ye,we);break;case Gi:Gs(Ne,Ge,Ue,ye,we);break;case eu:Gs(Ne,Ge,Ue,ye,we),Ts(ye,we,0,Ue,1,0);break;case Bu:Vo(Ne,Ge,Ue,ye,we);break;case jr:St(Ne,Ge,Ue,ye,we,1);break;case qu:St(Ne,Ge,Ue,ye,we,1),Ts(ye,we,0,Ue,1,0);break;case Zl:St(Ne,Ge,Ue,ye,we,0);break;case Yo:St(Ne,Ge,Ue,ye,we,0),Ts(ye,we,1,Ue,1,0);break;case Jo:ls(Ne,Ge,Ue,ye,we);break;case zu:ls(Ne,Ge,Ue,ye,we),zi(ye,we,Ue,1,0);break;case ka:us(Ne,Ge,Ue,ye,we);break;default:e(0)}X+=te,ve+=ke}m.Ma+=J}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=E.height)}}m.C=w,e(m.C<=m.i)}function li(m){var w;if(0<m.ua)return 0;for(w=0;w<m.Wb;++w){var E=m.Ya[w].G,M=m.Ya[w].H;if(0<E[1][M[1]+0].g||0<E[2][M[2]+0].g||0<E[3][M[3]+0].g)return 0}return 1}function ln(m,w,E,M,G,J){if(m.Z!=0){var Y=m.qd,X=m.rd;for(e(Js[m.Z]!=null);w<E;++w)Js[m.Z](Y,X,M,G,M,G,J),Y=M,X=G,G+=J;m.qd=Y,m.rd=X}}function wn(m,w){var E=m.l.ma,M=E.Z==0||E.Z==1?m.l.j:m.C;if(M=m.C<M?M:m.C,e(w<=m.l.o),w>M){var G=m.l.width,J=E.ca,Y=E.tb+G*M,X=m.V,te=m.Ba+m.c*M,le=m.gc;e(m.ab==1),e(le[0].hc==3),Jc(le[0],M,w,X,te,J,Y),ln(E,M,w,J,Y,G)}m.C=m.Ma=w}function ui(m,w,E,M,G,J,Y){var X=m.$/M,te=m.$%M,le=m.m,ve=m.s,ke=E+m.$,Ce=ke;G=E+M*G;var Ne=E+M*J,Ge=280+ve.ua,Ue=m.Pb?X:16777216,ye=0<ve.ua?ve.Wa:null,we=ve.wc,ze=ke<Ne?Ln(ve,te,X):null;e(m.C<J),e(Ne<=G);var Je=!1;e:for(;;){for(;Je||ke<Ne;){var qe=0;if(X>=Ue){var at=ke-E;e((Ue=m).Pb),Ue.wd=Ue.m,Ue.xd=at,0<Ue.s.ua&&Le(Ue.s.Wa,Ue.s.vb),Ue=X+Ra}if(te&we||(ze=Ln(ve,te,X)),e(ze!=null),ze.Qb&&(w[ke]=ze.qb,Je=!0),!Je)if(ae(le),ze.jc){qe=le,at=w;var nt=ke,mt=ze.pd[H(qe)&Ki-1];e(ze.jc),256>mt.g?(Z(qe,qe.u+mt.g),at[nt]=mt.value,qe=0):(Z(qe,qe.u+mt.g-256),e(256<=mt.value),qe=mt.value),qe==0&&(Je=!0)}else qe=Ei(ze.G[0],ze.H[0],le);if(le.h)break;if(Je||256>qe){if(!Je)if(ze.nd)w[ke]=(ze.qb|qe<<8)>>>0;else{if(ae(le),Je=Ei(ze.G[1],ze.H[1],le),ae(le),at=Ei(ze.G[2],ze.H[2],le),nt=Ei(ze.G[3],ze.H[3],le),le.h)break;w[ke]=(nt<<24|Je<<16|qe<<8|at)>>>0}if(Je=!1,++ke,++te>=M&&(te=0,++X,Y!=null&&X<=J&&!(X%16)&&Y(m,X),ye!=null))for(;Ce<ke;)qe=w[Ce++],ye.X[(506832829*qe&4294967295)>>>ye.Mb]=qe}else if(280>qe){if(qe=sr(qe-256,le),at=Ei(ze.G[4],ze.H[4],le),ae(le),at=ar(M,at=sr(at,le)),le.h)break;if(ke-E<at||G-ke<qe)break e;for(nt=0;nt<qe;++nt)w[ke+nt]=w[ke+nt-at];for(ke+=qe,te+=qe;te>=M;)te-=M,++X,Y!=null&&X<=J&&!(X%16)&&Y(m,X);if(e(ke<=G),te&we&&(ze=Ln(ve,te,X)),ye!=null)for(;Ce<ke;)qe=w[Ce++],ye.X[(506832829*qe&4294967295)>>>ye.Mb]=qe}else{if(!(qe<Ge))break e;for(Je=qe-280,e(ye!=null);Ce<ke;)qe=w[Ce++],ye.X[(506832829*qe&4294967295)>>>ye.Mb]=qe;qe=ke,e(!(Je>>>(at=ye).Xa)),w[qe]=at.X[Je],Je=!0}Je||e(le.h==K(le))}if(m.Pb&&le.h&&ke<G)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Le(m.s.vb,m.s.Wa);else{if(le.h)break e;Y!=null&&Y(m,X>J?J:X),m.a=0,m.$=ke-E}return 1}return m.a=3,0}function Be(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var w=m.Wa;w!=null&&(w.X=null),m.vb=null,e(m!=null)}function Mt(){var m=new $c;return m==null?null:(m.a=0,m.xb=Wc,Kn("Predictor","VP8LPredictors"),Kn("Predictor","VP8LPredictors_C"),Kn("PredictorAdd","VP8LPredictorsAdd"),Kn("PredictorAdd","VP8LPredictorsAdd_C"),Uu=bt,yr=pt,Pr=it,Gs=En,ls=Lt,us=qt,Vo=Pt,q.VP8LMapColor32b=Wl,q.VP8LMapColor8b=Qi,m)}function $t(m,w,E,M,G){var J=1,Y=[m],X=[w],te=M.m,le=M.s,ve=null,ke=0;e:for(;;){if(E)for(;J&&pe(te,1);){var Ce=Y,Ne=X,Ge=M,Ue=1,ye=Ge.m,we=Ge.gc[Ge.ab],ze=pe(ye,2);if(Ge.Oc&1<<ze)J=0;else{switch(Ge.Oc|=1<<ze,we.hc=ze,we.Ea=Ce[0],we.nc=Ne[0],we.K=[null],++Ge.ab,e(4>=Ge.ab),ze){case 0:case 1:we.b=pe(ye,3)+2,Ue=$t(ut(we.Ea,we.b),ut(we.nc,we.b),0,Ge,we.K),we.K=we.K[0];break;case 3:var Je,qe=pe(ye,8)+1,at=16<qe?0:4<qe?1:2<qe?2:3;if(Ce[0]=ut(we.Ea,at),we.b=at,Je=Ue=$t(qe,1,0,Ge,we.K)){var nt,mt=qe,rt=we,sn=1<<(8>>rt.b),Kt=o(sn);if(Kt==null)Je=0;else{var en=rt.K[0],Ft=rt.w;for(Kt[0]=rt.K[0][0],nt=1;nt<1*mt;++nt)Kt[nt]=$e(en[Ft+nt],Kt[nt-1]);for(;nt<4*sn;++nt)Kt[nt]=0;rt.K[0]=null,rt.K[0]=Kt,Je=1}}Ue=Je;break;case 2:break;default:e(0)}J=Ue}}if(Y=Y[0],X=X[0],J&&pe(te,1)&&!(J=1<=(ke=pe(te,4))&&11>=ke)){M.a=3;break e}var hn;if(hn=J)t:{var un,Ct,vn,xi=M,Vn=Y,Vi=X,rn=ke,Mi=E,cr=xi.m,di=xi.s,$n=[null],wi=1,Sr=0,Vr=qr[rn];n:for(;;){if(Mi&&pe(cr,1)){var ri=pe(cr,3)+2,ei=ut(Vn,ri),Si=ut(Vi,ri),_r=ei*Si;if(!$t(ei,Si,0,xi,$n))break n;for($n=$n[0],di.xc=ri,un=0;un<_r;++un){var Cs=$n[un]>>8&65535;$n[un]=Cs,Cs>=wi&&(wi=Cs+1)}}if(cr.h)break n;for(Ct=0;5>Ct;++Ct){var qn=ro[Ct];!Ct&&0<rn&&(qn+=1<<rn),Sr<qn&&(Sr=qn)}var ks=l(wi*Vr,j),dr=wi,Jn=l(dr,ie);if(Jn==null)var oo=null;else e(65536>=dr),oo=Jn;var Nr=o(Sr);if(oo==null||Nr==null||ks==null){xi.a=1;break n}var Ot=ks;for(un=vn=0;un<wi;++un){var Jt=oo[un],kn=Jt.G,Ys=Jt.H,lo=0,Rs=1,ru=0;for(Ct=0;5>Ct;++Ct){qn=ro[Ct],kn[Ct]=Ot,Ys[Ct]=vn,!Ct&&0<rn&&(qn+=1<<rn);r:{var Ua,Oa=qn,Wu=xi,Nn=Nr,Xc=Ot,Qc=vn,Ku=0,Ws=Wu.m,Oh=pe(Ws,1);if(a(Nn,0,0,Oa),Oh){var Zc=pe(Ws,1)+1,ed=pe(Ws,1),Xu=pe(Ws,ed==0?1:8);Nn[Xu]=1,Zc==2&&(Nn[Xu=pe(Ws,8)]=1);var _i=1}else{var Yn=o(19),su=pe(Ws,4)+4;if(19<su){Wu.a=3;var ja=0;break r}for(Ua=0;Ua<su;++Ua)Yn[tu[Ua]]=pe(Ws,3);var Zo=void 0,uo=void 0,Is=Wu,Qu=Yn,el=Oa,Zu=Nn,ec=0,Ks=Is.m,td=8,nd=l(128,j);i:for(;F(nd,0,7,Qu,19);){if(pe(Ks,1)){var rf=2+2*pe(Ks,3);if((Zo=2+pe(Ks,rf))>el)break i}else Zo=el;for(uo=0;uo<el&&Zo--;){ae(Ks);var id=nd[0+(127&H(Ks))];Z(Ks,Ks.u+id.g);var Fa=id.value;if(16>Fa)Zu[uo++]=Fa,Fa!=0&&(td=Fa);else{var sf=Fa==16,af=Fa-16,of=Wo[af],rd=pe(Ks,Fr[af])+of;if(uo+rd>el)break i;for(var lf=sf?td:0;0<rd--;)Zu[uo++]=lf}}ec=1;break i}ec||(Is.a=3),_i=ec}(_i=_i&&!Ws.h)&&(Ku=F(Xc,Qc,8,Nn,Oa)),_i&&Ku!=0?ja=Ku:(Wu.a=3,ja=0)}if(ja==0)break n;if(Rs&&Hu[Ct]==1&&(Rs=Ot[vn].g==0),lo+=Ot[vn].g,vn+=ja,3>=Ct){var co,tc=Nr[0];for(co=1;co<qn;++co)Nr[co]>tc&&(tc=Nr[co]);ru+=tc}}if(Jt.nd=Rs,Jt.Qb=0,Rs&&(Jt.qb=(kn[3][Ys[3]+0].value<<24|kn[1][Ys[1]+0].value<<16|kn[2][Ys[2]+0].value)>>>0,lo==0&&256>kn[0][Ys[0]+0].value&&(Jt.Qb=1,Jt.qb+=kn[0][Ys[0]+0].value<<8)),Jt.jc=!Jt.Qb&&6>ru,Jt.jc){var au,Ls=Jt;for(au=0;au<Ki;++au){var Xs=au,Qs=Ls.pd[Xs],nc=Ls.G[0][Ls.H[0]+Xs];256<=nc.value?(Qs.g=nc.g+256,Qs.value=nc.value):(Qs.g=0,Qs.value=0,Xs>>=jn(nc,8,Qs),Xs>>=jn(Ls.G[1][Ls.H[1]+Xs],16,Qs),Xs>>=jn(Ls.G[2][Ls.H[2]+Xs],0,Qs),jn(Ls.G[3][Ls.H[3]+Xs],24,Qs))}}}di.vc=$n,di.Wb=wi,di.Ya=oo,di.yc=ks,hn=1;break t}hn=0}if(!(J=hn)){M.a=3;break e}if(0<ke){if(le.ua=1<<ke,!st(le.Wa,ke)){M.a=1,J=0;break e}}else le.ua=0;var ic=M,fo=Y,uf=X,tl=ic.s,nl=tl.xc;if(ic.c=fo,ic.i=uf,tl.md=ut(fo,nl),tl.wc=nl==0?-1:(1<<nl)-1,E){M.xb=Ia;break e}if((ve=o(Y*X))==null){M.a=1,J=0;break e}J=(J=ui(M,ve,0,Y,X,X,null))&&!te.h;break e}return J?(G!=null?G[0]=ve:(e(ve==null),e(E)),M.$=0,E||Be(le)):Be(le),J}function Dn(m,w){var E=m.c*m.i,M=E+w+16*w;return e(m.c<=w),m.V=o(M),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+E+w,1)}function Fn(m,w){var E=m.C,M=w-E,G=m.V,J=m.Ba+m.c*E;for(e(w<=m.l.o);0<M;){var Y=16<M?16:M,X=m.l.ma,te=m.l.width,le=te*Y,ve=X.ca,ke=X.tb+te*E,Ce=m.Ta,Ne=m.Ua;Ci(m,Y,G,J),xr(Ce,Ne,ve,ke,le),ln(X,E,E+Y,ve,ke,te),M-=Y,G+=Y*m.c,E+=Y}e(E==w),m.C=m.Ma=w}function ys(){this.ub=this.yd=this.td=this.Rb=0}function ts(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ns(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function ha(){this.Yb=(function(){var m=[];return(function w(E,M,G){for(var J=G[M],Y=0;Y<J&&(E.push(G.length>M+1?[]:0),!(G.length<M+1));Y++)w(E[Y],M+1,G)})(m,0,[3,11]),m})()}function pa(){this.jb=o(3),this.Wc=c([4,8],ha),this.Xc=c([4,17],ha)}function ni(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ja(){this.ld=this.La=this.dd=this.tc=0}function Il(){this.Na=this.la=0}function js(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bs(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Hc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ja),this.Y=0,this.ya=Array(new bs),this.aa=0,this.l=new Ro}function Ll(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Au(){this.cb=this.a=0,this.sc="",this.m=new _e,this.Od=new ys,this.Kc=new ts,this.ed=new ni,this.Qa=new ns,this.Ic=this.$c=this.Aa=0,this.D=new Hc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,_e),this.ia=0,this.pb=l(4,js),this.Pa=new pa,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ll),this.Hd=0,this.rb=Array(new Il),this.sb=0,this.wa=Array(new Ja),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bs),this.L=this.aa=0,this.gd=c([4,2],Ja),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ro(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Io(){var m=new Au;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,wr||(wr=Dl)),m}function Mn(m,w,E){return m.a==0&&(m.a=w,m.sc=E,m.cb=0),0}function kr(m,w,E){return 3<=E&&m[w+0]==157&&m[w+1]==1&&m[w+2]==42}function Wi(m,w){if(m==null)return 0;if(m.a=0,m.sc="OK",w==null)return Mn(m,2,"null VP8Io passed to VP8GetHeaders()");var E=w.data,M=w.w,G=w.ha;if(4>G)return Mn(m,7,"Truncated header.");var J=E[M+0]|E[M+1]<<8|E[M+2]<<16,Y=m.Od;if(Y.Rb=!(1&J),Y.td=J>>1&7,Y.yd=J>>4&1,Y.ub=J>>5,3<Y.td)return Mn(m,3,"Incorrect keyframe parameters.");if(!Y.yd)return Mn(m,4,"Frame not displayable.");M+=3,G-=3;var X=m.Kc;if(Y.Rb){if(7>G)return Mn(m,7,"cannot parse picture header");if(!kr(E,M,G))return Mn(m,3,"Bad code word");X.c=16383&(E[M+4]<<8|E[M+3]),X.Td=E[M+4]>>6,X.i=16383&(E[M+6]<<8|E[M+5]),X.Ud=E[M+6]>>6,M+=7,G-=7,m.za=X.c+15>>4,m.Ub=X.i+15>>4,w.width=X.c,w.height=X.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,a((J=m.Pa).jb,0,255,J.jb.length),e((J=m.Qa)!=null),J.Cb=0,J.Bb=0,J.Fb=1,a(J.Zb,0,0,J.Zb.length),a(J.Lb,0,0,J.Lb)}if(Y.ub>G)return Mn(m,7,"bad partition length");be(J=m.m,E,M,Y.ub),M+=Y.ub,G-=Y.ub,Y.Rb&&(X.Ld=se(J),X.Kd=se(J)),X=m.Qa;var te,le=m.Pa;if(e(J!=null),e(X!=null),X.Cb=se(J),X.Cb){if(X.Bb=se(J),se(J)){for(X.Fb=se(J),te=0;4>te;++te)X.Zb[te]=se(J)?$(J,7):0;for(te=0;4>te;++te)X.Lb[te]=se(J)?$(J,6):0}if(X.Bb)for(te=0;3>te;++te)le.jb[te]=se(J)?U(J,8):255}else X.Bb=0;if(J.Ka)return Mn(m,3,"cannot parse segment header");if((X=m.ed).zd=se(J),X.Tb=U(J,6),X.wb=U(J,3),X.Pc=se(J),X.Pc&&se(J)){for(le=0;4>le;++le)se(J)&&(X.vd[le]=$(J,6));for(le=0;4>le;++le)se(J)&&(X.od[le]=$(J,6))}if(m.L=X.Tb==0?0:X.zd?1:2,J.Ka)return Mn(m,3,"cannot parse filter header");var ve=G;if(G=te=M,M=te+ve,X=ve,m.Xb=(1<<U(m.m,2))-1,ve<3*(le=m.Xb))E=7;else{for(te+=3*le,X-=3*le,ve=0;ve<le;++ve){var ke=E[G+0]|E[G+1]<<8|E[G+2]<<16;ke>X&&(ke=X),be(m.Jc[+ve],E,te,ke),te+=ke,X-=ke,G+=3}be(m.Jc[+le],E,te,X),E=te<M?0:5}if(E!=0)return Mn(m,E,"cannot parse partitions");for(E=U(te=m.m,7),G=se(te)?$(te,4):0,M=se(te)?$(te,4):0,X=se(te)?$(te,4):0,le=se(te)?$(te,4):0,te=se(te)?$(te,4):0,ve=m.Qa,ke=0;4>ke;++ke){if(ve.Cb){var Ce=ve.Zb[ke];ve.Fb||(Ce+=E)}else{if(0<ke){m.pb[ke]=m.pb[0];continue}Ce=E}var Ne=m.pb[ke];Ne.Sc[0]=zr[vr(Ce+G,127)],Ne.Sc[1]=Hr[vr(Ce+0,127)],Ne.Eb[0]=2*zr[vr(Ce+M,127)],Ne.Eb[1]=101581*Hr[vr(Ce+X,127)]>>16,8>Ne.Eb[1]&&(Ne.Eb[1]=8),Ne.Qc[0]=zr[vr(Ce+le,117)],Ne.Qc[1]=Hr[vr(Ce+te,127)],Ne.lc=Ce+te}if(!Y.Rb)return Mn(m,4,"Not a key frame.");for(se(J),Y=m.Pa,E=0;4>E;++E){for(G=0;8>G;++G)for(M=0;3>M;++M)for(X=0;11>X;++X)le=he(J,Cn[E][G][M][X])?U(J,8):tf[E][G][M][X],Y.Wc[E][G].Yb[M][X]=le;for(G=0;17>G;++G)Y.Xc[E][G]=Y.Wc[E][Wt[G]]}return m.kc=se(J),m.kc&&(m.Bd=U(J,8)),m.cb=1}function Dl(m,w,E,M,G,J,Y){var X=w[G].Yb[E];for(E=0;16>G;++G){if(!he(m,X[E+0]))return G;for(;!he(m,X[E+1]);)if(X=w[++G].Yb[0],E=0,G==16)return 16;var te=w[G+1].Yb;if(he(m,X[E+2])){var le=m,ve=0;if(he(le,(Ce=X)[(ke=E)+3]))if(he(le,Ce[ke+6])){for(X=0,ke=2*(ve=he(le,Ce[ke+8]))+(Ce=he(le,Ce[ke+9+ve])),ve=0,Ce=ef[ke];Ce[X];++X)ve+=ve+he(le,Ce[X]);ve+=3+(8<<ke)}else he(le,Ce[ke+7])?(ve=7+2*he(le,165),ve+=he(le,145)):ve=5+he(le,159);else ve=he(le,Ce[ke+4])?3+he(le,Ce[ke+5]):2;X=te[2]}else ve=1,X=te[1];te=Y+Yc[G],0>(le=m).b&&de(le);var ke,Ce=le.b,Ne=(ke=le.Ca>>1)-(le.I>>Ce)>>31;--le.b,le.Ca+=Ne,le.Ca|=1,le.I-=(ke+1&Ne)<<Ce,J[te]=((ve^Ne)-Ne)*M[(0<G)+0]}return 16}function Ml(m){var w=m.rb[m.sb-1];w.la=0,w.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function Pl(m,w){if(m==null)return 0;if(w==null)return Mn(m,2,"NULL VP8Io parameter in VP8Decode().");if(!m.cb&&!Wi(m,w))return 0;if(e(m.cb),w.ac==null||w.ac(w)){w.ob&&(m.L=0);var E=Qo[m.L];if(m.L==2?(m.yb=0,m.zb=0):(m.yb=w.v-E>>4,m.zb=w.j-E>>4,0>m.yb&&(m.yb=0),0>m.zb&&(m.zb=0)),m.Va=w.o+15+E>>4,m.Hb=w.va+15+E>>4,m.Hb>m.za&&(m.Hb=m.za),m.Va>m.Ub&&(m.Va=m.Ub),0<m.L){var M=m.ed;for(E=0;4>E;++E){var G;if(m.Qa.Cb){var J=m.Qa.Lb[E];m.Qa.Fb||(J+=M.Tb)}else J=M.Tb;for(G=0;1>=G;++G){var Y=m.gd[E][G],X=J;if(M.Pc&&(X+=M.vd[0],G&&(X+=M.od[0])),0<(X=0>X?0:63<X?63:X)){var te=X;0<M.wb&&(te=4<M.wb?te>>2:te>>1)>9-M.wb&&(te=9-M.wb),1>te&&(te=1),Y.dd=te,Y.tc=2*X+te,Y.ld=40<=X?2:15<=X?1:0}else Y.tc=0;Y.La=G}}}E=0}else Mn(m,6,"Frame setup failed"),E=m.a;if(E=E==0){if(E){m.$c=0,0<m.Aa||(m.Ic=iu);e:{E=m.Ic,M=4*(te=m.za);var le=32*te,ve=te+1,ke=0<m.L?te*(0<m.Aa?2:1):0,Ce=(m.Aa==2?2:1)*te;if((Y=M+832+(G=3*(16*E+Qo[m.L])/2*le)+(J=m.Fa!=null&&0<m.Fa.length?m.Kc.c*m.Kc.i:0))!=Y)E=0;else{if(Y>m.Vb){if(m.Vb=0,m.Ec=o(Y),m.Fc=0,m.Ec==null){E=Mn(m,1,"no memory during frame initialization.");break e}m.Vb=Y}Y=m.Ec,X=m.Fc,m.Ac=Y,m.Bc=X,X+=M,m.Gd=l(le,Ll),m.Hd=0,m.rb=l(ve+1,Il),m.sb=1,m.wa=ke?l(ke,Ja):null,m.Y=0,m.D.Nb=0,m.D.wa=m.wa,m.D.Y=m.Y,0<m.Aa&&(m.D.Y+=te),e(!0),m.oc=Y,m.pc=X,X+=832,m.ya=l(Ce,bs),m.aa=0,m.D.ya=m.ya,m.D.aa=m.aa,m.Aa==2&&(m.D.aa+=te),m.R=16*te,m.B=8*te,te=(le=Qo[m.L])*m.R,le=le/2*m.B,m.sa=Y,m.ta=X+te,m.qa=m.sa,m.ra=m.ta+16*E*m.R+le,m.Ha=m.qa,m.Ia=m.ra+8*E*m.B+le,m.$c=0,X+=G,m.mb=J?Y:null,m.nb=J?X:null,e(X+J<=m.Fc+m.Vb),Ml(m),a(m.Ac,m.Bc,0,M),E=1}}if(E){if(w.ka=0,w.y=m.sa,w.O=m.ta,w.f=m.qa,w.N=m.ra,w.ea=m.Ha,w.Vd=m.Ia,w.fa=m.R,w.Rc=m.B,w.F=null,w.J=0,!ju){for(E=-255;255>=E;++E)io[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)Ou[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)Kl[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)Xl[255+E]=0>E?0:255<E?255:E;ju=1}qi=Eu,Ta=Tu,_s=Do,Ur=ma,Zi=Ul,Vs=Lo,Or=Bl,Ea=Qa,Ca=Vc,ur=zl,$o=ql,br=Bo,Ns=Hl,Sn=Lu,_n=jo,Qn=ss,ii=Dr,As=Fo,Gn[0]=Ir,Gn[1]=Gc,Gn[2]=ga,Gn[3]=Ru,Gn[4]=jl,Gn[5]=lr,Gn[6]=va,Gn[7]=Wa,Gn[8]=ws,Gn[9]=Ka,er[0]=Ya,er[1]=ku,er[2]=is,er[3]=Mo,er[4]=Pn,er[5]=Ol,er[6]=Uo,cs[0]=rs,cs[1]=Cu,cs[2]=Fl,cs[3]=ya,cs[4]=xa,cs[5]=Oo,cs[6]=bi,E=1}else E=0}E&&(E=(function(Ne,Ge){for(Ne.M=0;Ne.M<Ne.Va;++Ne.M){var Ue,ye=Ne.Jc[Ne.M&Ne.Xb],we=Ne.m,ze=Ne;for(Ue=0;Ue<ze.za;++Ue){var Je=we,qe=ze,at=qe.Ac,nt=qe.Bc+4*Ue,mt=qe.zc,rt=qe.ya[qe.aa+Ue];if(qe.Qa.Bb?rt.$b=he(Je,qe.Pa.jb[0])?2+he(Je,qe.Pa.jb[2]):he(Je,qe.Pa.jb[1]):rt.$b=0,qe.kc&&(rt.Ad=he(Je,qe.Bd)),rt.Za=!he(Je,145)+0,rt.Za){var sn=rt.Ob,Kt=0;for(qe=0;4>qe;++qe){var en,Ft=mt[0+qe];for(en=0;4>en;++en){Ft=Ii[at[nt+en]][Ft];for(var hn=Gu[he(Je,Ft[0])];0<hn;)hn=Gu[2*hn+he(Je,Ft[hn])];Ft=-hn,at[nt+en]=Ft}i(sn,Kt,at,nt,4),Kt+=4,mt[0+qe]=Ft}}else Ft=he(Je,156)?he(Je,128)?1:3:he(Je,163)?2:0,rt.Ob[0]=Ft,a(at,nt,Ft,4),a(mt,0,Ft,4);rt.Dd=he(Je,142)?he(Je,114)?he(Je,183)?1:3:2:0}if(ze.m.Ka)return Mn(Ne,7,"Premature end-of-partition0 encountered.");for(;Ne.ja<Ne.za;++Ne.ja){if(ze=ye,Je=(we=Ne).rb[we.sb-1],at=we.rb[we.sb+we.ja],Ue=we.ya[we.aa+we.ja],nt=we.kc?Ue.Ad:0)Je.la=at.la=0,Ue.Za||(Je.Na=at.Na=0),Ue.Hc=0,Ue.Gc=0,Ue.ia=0;else{var un,Ct;if(Je=at,at=ze,nt=we.Pa.Xc,mt=we.ya[we.aa+we.ja],rt=we.pb[mt.$b],qe=mt.ad,sn=0,Kt=we.rb[we.sb-1],Ft=en=0,a(qe,sn,0,384),mt.Za)var vn=0,xi=nt[3];else{hn=o(16);var Vn=Je.Na+Kt.Na;if(Vn=wr(at,nt[1],Vn,rt.Eb,0,hn,0),Je.Na=Kt.Na=(0<Vn)+0,1<Vn)qi(hn,0,qe,sn);else{var Vi=hn[0]+3>>3;for(hn=0;256>hn;hn+=16)qe[sn+hn]=Vi}vn=1,xi=nt[0]}var rn=15&Je.la,Mi=15&Kt.la;for(hn=0;4>hn;++hn){var cr=1&Mi;for(Vi=Ct=0;4>Vi;++Vi)rn=rn>>1|(cr=(Vn=wr(at,xi,Vn=cr+(1&rn),rt.Sc,vn,qe,sn))>vn)<<7,Ct=Ct<<2|(3<Vn?3:1<Vn?2:qe[sn+0]!=0),sn+=16;rn>>=4,Mi=Mi>>1|cr<<7,en=(en<<8|Ct)>>>0}for(xi=rn,vn=Mi>>4,un=0;4>un;un+=2){for(Ct=0,rn=Je.la>>4+un,Mi=Kt.la>>4+un,hn=0;2>hn;++hn){for(cr=1&Mi,Vi=0;2>Vi;++Vi)Vn=cr+(1&rn),rn=rn>>1|(cr=0<(Vn=wr(at,nt[2],Vn,rt.Qc,0,qe,sn)))<<3,Ct=Ct<<2|(3<Vn?3:1<Vn?2:qe[sn+0]!=0),sn+=16;rn>>=2,Mi=Mi>>1|cr<<5}Ft|=Ct<<4*un,xi|=rn<<4<<un,vn|=(240&Mi)<<un}Je.la=xi,Kt.la=vn,mt.Hc=en,mt.Gc=Ft,mt.ia=43690&Ft?0:rt.ia,nt=!(en|Ft)}if(0<we.L&&(we.wa[we.Y+we.ja]=we.gd[Ue.$b][Ue.Za],we.wa[we.Y+we.ja].La|=!nt),ze.Ka)return Mn(Ne,7,"Premature end-of-file encountered.")}if(Ml(Ne),we=Ge,ze=1,Ue=(ye=Ne).D,Je=0<ye.L&&ye.M>=ye.zb&&ye.M<=ye.Va,ye.Aa==0)e:{if(Ue.M=ye.M,Ue.uc=Je,Ho(ye,Ue),ze=1,Ue=(Ct=ye.D).Nb,Je=(Ft=Qo[ye.L])*ye.R,at=Ft/2*ye.B,hn=16*Ue*ye.R,Vi=8*Ue*ye.B,nt=ye.sa,mt=ye.ta-Je+hn,rt=ye.qa,qe=ye.ra-at+Vi,sn=ye.Ha,Kt=ye.Ia-at+Vi,Mi=(rn=Ct.M)==0,en=rn>=ye.Va-1,ye.Aa==2&&Ho(ye,Ct),Ct.uc)for(cr=(Vn=ye).D.M,e(Vn.D.uc),Ct=Vn.yb;Ct<Vn.Hb;++Ct){vn=Ct,xi=cr;var di=($n=(qn=Vn).D).Nb;un=qn.R;var $n=$n.wa[$n.Y+vn],wi=qn.sa,Sr=qn.ta+16*di*un+16*vn,Vr=$n.dd,ri=$n.tc;if(ri!=0)if(e(3<=ri),qn.L==1)0<vn&&Qn(wi,Sr,un,ri+4),$n.La&&As(wi,Sr,un,ri),0<xi&&_n(wi,Sr,un,ri+4),$n.La&&ii(wi,Sr,un,ri);else{var ei=qn.B,Si=qn.qa,_r=qn.ra+8*di*ei+8*vn,Cs=qn.Ha,qn=qn.Ia+8*di*ei+8*vn;di=$n.ld,0<vn&&(Ea(wi,Sr,un,ri+4,Vr,di),ur(Si,_r,Cs,qn,ei,ri+4,Vr,di)),$n.La&&(br(wi,Sr,un,ri,Vr,di),Sn(Si,_r,Cs,qn,ei,ri,Vr,di)),0<xi&&(Or(wi,Sr,un,ri+4,Vr,di),Ca(Si,_r,Cs,qn,ei,ri+4,Vr,di)),$n.La&&($o(wi,Sr,un,ri,Vr,di),Ns(Si,_r,Cs,qn,ei,ri,Vr,di))}}if(ye.ia&&alert("todo:DitherRow"),we.put!=null){if(Ct=16*rn,rn=16*(rn+1),Mi?(we.y=ye.sa,we.O=ye.ta+hn,we.f=ye.qa,we.N=ye.ra+Vi,we.ea=ye.Ha,we.W=ye.Ia+Vi):(Ct-=Ft,we.y=nt,we.O=mt,we.f=rt,we.N=qe,we.ea=sn,we.W=Kt),en||(rn-=Ft),rn>we.o&&(rn=we.o),we.F=null,we.J=null,ye.Fa!=null&&0<ye.Fa.length&&Ct<rn&&(we.J=qo(ye,we,Ct,rn-Ct),we.F=ye.mb,we.F==null&&we.F.length==0)){ze=Mn(ye,3,"Could not decode alpha data.");break e}Ct<we.j&&(Ft=we.j-Ct,Ct=we.j,e(!(1&Ft)),we.O+=ye.R*Ft,we.N+=ye.B*(Ft>>1),we.W+=ye.B*(Ft>>1),we.F!=null&&(we.J+=we.width*Ft)),Ct<rn&&(we.O+=we.v,we.N+=we.v>>1,we.W+=we.v>>1,we.F!=null&&(we.J+=we.v),we.ka=Ct-we.j,we.U=we.va-we.v,we.T=rn-Ct,ze=we.put(we))}Ue+1!=ye.Ic||en||(i(ye.sa,ye.ta-Je,nt,mt+16*ye.R,Je),i(ye.qa,ye.ra-at,rt,qe+8*ye.B,at),i(ye.Ha,ye.Ia-at,sn,Kt+8*ye.B,at))}if(!ze)return Mn(Ne,6,"Output aborted.")}return 1})(m,w)),w.bc!=null&&w.bc(w),E&=1}return E?(m.cb=0,E):0}function Rr(m,w,E,M,G){G=m[w+E+32*M]+(G>>3),m[w+E+32*M]=-256&G?0>G?0:255:G}function Fs(m,w,E,M,G,J){Rr(m,w,0,E,M+G),Rr(m,w,1,E,M+J),Rr(m,w,2,E,M-J),Rr(m,w,3,E,M-G)}function or(m){return(20091*m>>16)+m}function Fi(m,w,E,M){var G,J=0,Y=o(16);for(G=0;4>G;++G){var X=m[w+0]+m[w+8],te=m[w+0]-m[w+8],le=(35468*m[w+4]>>16)-or(m[w+12]),ve=or(m[w+4])+(35468*m[w+12]>>16);Y[J+0]=X+ve,Y[J+1]=te+le,Y[J+2]=te-le,Y[J+3]=X-ve,J+=4,w++}for(G=J=0;4>G;++G)X=(m=Y[J+0]+4)+Y[J+8],te=m-Y[J+8],le=(35468*Y[J+4]>>16)-or(Y[J+12]),Rr(E,M,0,0,X+(ve=or(Y[J+4])+(35468*Y[J+12]>>16))),Rr(E,M,1,0,te+le),Rr(E,M,2,0,te-le),Rr(E,M,3,0,X-ve),J++,M+=32}function Lo(m,w,E,M){var G=m[w+0]+4,J=35468*m[w+4]>>16,Y=or(m[w+4]),X=35468*m[w+1]>>16;Fs(E,M,0,G+Y,m=or(m[w+1]),X),Fs(E,M,1,G+J,m,X),Fs(E,M,2,G-J,m,X),Fs(E,M,3,G-Y,m,X)}function Tu(m,w,E,M,G){Fi(m,w,E,M),G&&Fi(m,w+16,E,M+4)}function Do(m,w,E,M){Ta(m,w+0,E,M,1),Ta(m,w+32,E,M+128,1)}function ma(m,w,E,M){var G;for(m=m[w+0]+4,G=0;4>G;++G)for(w=0;4>w;++w)Rr(E,M,w,G,m)}function Ul(m,w,E,M){m[w+0]&&Ur(m,w+0,E,M),m[w+16]&&Ur(m,w+16,E,M+4),m[w+32]&&Ur(m,w+32,E,M+128),m[w+48]&&Ur(m,w+48,E,M+128+4)}function Eu(m,w,E,M){var G,J=o(16);for(G=0;4>G;++G){var Y=m[w+0+G]+m[w+12+G],X=m[w+4+G]+m[w+8+G],te=m[w+4+G]-m[w+8+G],le=m[w+0+G]-m[w+12+G];J[0+G]=Y+X,J[8+G]=Y-X,J[4+G]=le+te,J[12+G]=le-te}for(G=0;4>G;++G)Y=(m=J[0+4*G]+3)+J[3+4*G],X=J[1+4*G]+J[2+4*G],te=J[1+4*G]-J[2+4*G],le=m-J[3+4*G],E[M+0]=Y+X>>3,E[M+16]=le+te>>3,E[M+32]=Y-X>>3,E[M+48]=le-te>>3,M+=64}function xs(m,w,E){var M,G=w-32,J=Hi,Y=255-m[G-1];for(M=0;M<E;++M){var X,te=J,le=Y+m[w-1];for(X=0;X<E;++X)m[w+X]=te[le+m[G+X]];w+=32}}function Gc(m,w){xs(m,w,4)}function Cu(m,w){xs(m,w,8)}function ku(m,w){xs(m,w,16)}function is(m,w){var E;for(E=0;16>E;++E)i(m,w+32*E,m,w-32,16)}function Mo(m,w){var E;for(E=16;0<E;--E)a(m,w,m[w-1],16),w+=32}function Po(m,w,E){var M;for(M=0;16>M;++M)a(w,E+32*M,m,16)}function Ya(m,w){var E,M=16;for(E=0;16>E;++E)M+=m[w-1+32*E]+m[w+E-32];Po(M>>5,m,w)}function Pn(m,w){var E,M=8;for(E=0;16>E;++E)M+=m[w-1+32*E];Po(M>>4,m,w)}function Ol(m,w){var E,M=8;for(E=0;16>E;++E)M+=m[w+E-32];Po(M>>4,m,w)}function Uo(m,w){Po(128,m,w)}function At(m,w,E){return m+2*w+E+2>>2}function ga(m,w){var E,M=w-32;for(M=new Uint8Array([At(m[M-1],m[M+0],m[M+1]),At(m[M+0],m[M+1],m[M+2]),At(m[M+1],m[M+2],m[M+3]),At(m[M+2],m[M+3],m[M+4])]),E=0;4>E;++E)i(m,w+32*E,M,0,M.length)}function Ru(m,w){var E=m[w-1],M=m[w-1+32],G=m[w-1+64],J=m[w-1+96];Ae(m,w+0,16843009*At(m[w-1-32],E,M)),Ae(m,w+32,16843009*At(E,M,G)),Ae(m,w+64,16843009*At(M,G,J)),Ae(m,w+96,16843009*At(G,J,J))}function Ir(m,w){var E,M=4;for(E=0;4>E;++E)M+=m[w+E-32]+m[w-1+32*E];for(M>>=3,E=0;4>E;++E)a(m,w+32*E,M,4)}function jl(m,w){var E=m[w-1+0],M=m[w-1+32],G=m[w-1+64],J=m[w-1-32],Y=m[w+0-32],X=m[w+1-32],te=m[w+2-32],le=m[w+3-32];m[w+0+96]=At(M,G,m[w-1+96]),m[w+1+96]=m[w+0+64]=At(E,M,G),m[w+2+96]=m[w+1+64]=m[w+0+32]=At(J,E,M),m[w+3+96]=m[w+2+64]=m[w+1+32]=m[w+0+0]=At(Y,J,E),m[w+3+64]=m[w+2+32]=m[w+1+0]=At(X,Y,J),m[w+3+32]=m[w+2+0]=At(te,X,Y),m[w+3+0]=At(le,te,X)}function va(m,w){var E=m[w+1-32],M=m[w+2-32],G=m[w+3-32],J=m[w+4-32],Y=m[w+5-32],X=m[w+6-32],te=m[w+7-32];m[w+0+0]=At(m[w+0-32],E,M),m[w+1+0]=m[w+0+32]=At(E,M,G),m[w+2+0]=m[w+1+32]=m[w+0+64]=At(M,G,J),m[w+3+0]=m[w+2+32]=m[w+1+64]=m[w+0+96]=At(G,J,Y),m[w+3+32]=m[w+2+64]=m[w+1+96]=At(J,Y,X),m[w+3+64]=m[w+2+96]=At(Y,X,te),m[w+3+96]=At(X,te,te)}function lr(m,w){var E=m[w-1+0],M=m[w-1+32],G=m[w-1+64],J=m[w-1-32],Y=m[w+0-32],X=m[w+1-32],te=m[w+2-32],le=m[w+3-32];m[w+0+0]=m[w+1+64]=J+Y+1>>1,m[w+1+0]=m[w+2+64]=Y+X+1>>1,m[w+2+0]=m[w+3+64]=X+te+1>>1,m[w+3+0]=te+le+1>>1,m[w+0+96]=At(G,M,E),m[w+0+64]=At(M,E,J),m[w+0+32]=m[w+1+96]=At(E,J,Y),m[w+1+32]=m[w+2+96]=At(J,Y,X),m[w+2+32]=m[w+3+96]=At(Y,X,te),m[w+3+32]=At(X,te,le)}function Wa(m,w){var E=m[w+0-32],M=m[w+1-32],G=m[w+2-32],J=m[w+3-32],Y=m[w+4-32],X=m[w+5-32],te=m[w+6-32],le=m[w+7-32];m[w+0+0]=E+M+1>>1,m[w+1+0]=m[w+0+64]=M+G+1>>1,m[w+2+0]=m[w+1+64]=G+J+1>>1,m[w+3+0]=m[w+2+64]=J+Y+1>>1,m[w+0+32]=At(E,M,G),m[w+1+32]=m[w+0+96]=At(M,G,J),m[w+2+32]=m[w+1+96]=At(G,J,Y),m[w+3+32]=m[w+2+96]=At(J,Y,X),m[w+3+64]=At(Y,X,te),m[w+3+96]=At(X,te,le)}function Ka(m,w){var E=m[w-1+0],M=m[w-1+32],G=m[w-1+64],J=m[w-1+96];m[w+0+0]=E+M+1>>1,m[w+2+0]=m[w+0+32]=M+G+1>>1,m[w+2+32]=m[w+0+64]=G+J+1>>1,m[w+1+0]=At(E,M,G),m[w+3+0]=m[w+1+32]=At(M,G,J),m[w+3+32]=m[w+1+64]=At(G,J,J),m[w+3+64]=m[w+2+64]=m[w+0+96]=m[w+1+96]=m[w+2+96]=m[w+3+96]=J}function ws(m,w){var E=m[w-1+0],M=m[w-1+32],G=m[w-1+64],J=m[w-1+96],Y=m[w-1-32],X=m[w+0-32],te=m[w+1-32],le=m[w+2-32];m[w+0+0]=m[w+2+32]=E+Y+1>>1,m[w+0+32]=m[w+2+64]=M+E+1>>1,m[w+0+64]=m[w+2+96]=G+M+1>>1,m[w+0+96]=J+G+1>>1,m[w+3+0]=At(X,te,le),m[w+2+0]=At(Y,X,te),m[w+1+0]=m[w+3+32]=At(E,Y,X),m[w+1+32]=m[w+3+64]=At(M,E,Y),m[w+1+64]=m[w+3+96]=At(G,M,E),m[w+1+96]=At(J,G,M)}function Fl(m,w){var E;for(E=0;8>E;++E)i(m,w+32*E,m,w-32,8)}function ya(m,w){var E;for(E=0;8>E;++E)a(m,w,m[w-1],8),w+=32}function ba(m,w,E){var M;for(M=0;8>M;++M)a(w,E+32*M,m,8)}function rs(m,w){var E,M=8;for(E=0;8>E;++E)M+=m[w+E-32]+m[w-1+32*E];ba(M>>4,m,w)}function Oo(m,w){var E,M=4;for(E=0;8>E;++E)M+=m[w+E-32];ba(M>>3,m,w)}function xa(m,w){var E,M=4;for(E=0;8>E;++E)M+=m[w-1+32*E];ba(M>>3,m,w)}function bi(m,w){ba(128,m,w)}function Lr(m,w,E){var M=m[w-E],G=m[w+0],J=3*(G-M)+$s[1020+m[w-2*E]-m[w+E]],Y=Ql[112+(J+4>>3)];m[w-E]=Hi[255+M+Ql[112+(J+3>>3)]],m[w+0]=Hi[255+G-Y]}function Xa(m,w,E,M){var G=m[w+0],J=m[w+E];return Ri[255+m[w-2*E]-m[w-E]]>M||Ri[255+J-G]>M}function wa(m,w,E,M){return 4*Ri[255+m[w-E]-m[w+0]]+Ri[255+m[w-2*E]-m[w+E]]<=M}function Iu(m,w,E,M,G){var J=m[w-3*E],Y=m[w-2*E],X=m[w-E],te=m[w+0],le=m[w+E],ve=m[w+2*E],ke=m[w+3*E];return 4*Ri[255+X-te]+Ri[255+Y-le]>M?0:Ri[255+m[w-4*E]-J]<=G&&Ri[255+J-Y]<=G&&Ri[255+Y-X]<=G&&Ri[255+ke-ve]<=G&&Ri[255+ve-le]<=G&&Ri[255+le-te]<=G}function jo(m,w,E,M){var G=2*M+1;for(M=0;16>M;++M)wa(m,w+M,E,G)&&Lr(m,w+M,E)}function ss(m,w,E,M){var G=2*M+1;for(M=0;16>M;++M)wa(m,w+M*E,1,G)&&Lr(m,w+M*E,1)}function Dr(m,w,E,M){var G;for(G=3;0<G;--G)jo(m,w+=4*E,E,M)}function Fo(m,w,E,M){var G;for(G=3;0<G;--G)ss(m,w+=4,E,M)}function Bs(m,w,E,M,G,J,Y,X){for(J=2*J+1;0<G--;){if(Iu(m,w,E,J,Y))if(Xa(m,w,E,X))Lr(m,w,E);else{var te=m,le=w,ve=E,ke=te[le-2*ve],Ce=te[le-ve],Ne=te[le+0],Ge=te[le+ve],Ue=te[le+2*ve],ye=27*(ze=$s[1020+3*(Ne-Ce)+$s[1020+ke-Ge]])+63>>7,we=18*ze+63>>7,ze=9*ze+63>>7;te[le-3*ve]=Hi[255+te[le-3*ve]+ze],te[le-2*ve]=Hi[255+ke+we],te[le-ve]=Hi[255+Ce+ye],te[le+0]=Hi[255+Ne-ye],te[le+ve]=Hi[255+Ge-we],te[le+2*ve]=Hi[255+Ue-ze]}w+=M}}function as(m,w,E,M,G,J,Y,X){for(J=2*J+1;0<G--;){if(Iu(m,w,E,J,Y))if(Xa(m,w,E,X))Lr(m,w,E);else{var te=m,le=w,ve=E,ke=te[le-ve],Ce=te[le+0],Ne=te[le+ve],Ge=Ql[112+((Ue=3*(Ce-ke))+4>>3)],Ue=Ql[112+(Ue+3>>3)],ye=Ge+1>>1;te[le-2*ve]=Hi[255+te[le-2*ve]+ye],te[le-ve]=Hi[255+ke+Ue],te[le+0]=Hi[255+Ce-Ge],te[le+ve]=Hi[255+Ne-ye]}w+=M}}function Bl(m,w,E,M,G,J){Bs(m,w,E,1,16,M,G,J)}function Qa(m,w,E,M,G,J){Bs(m,w,1,E,16,M,G,J)}function ql(m,w,E,M,G,J){var Y;for(Y=3;0<Y;--Y)as(m,w+=4*E,E,1,16,M,G,J)}function Bo(m,w,E,M,G,J){var Y;for(Y=3;0<Y;--Y)as(m,w+=4,1,E,16,M,G,J)}function Vc(m,w,E,M,G,J,Y,X){Bs(m,w,G,1,8,J,Y,X),Bs(E,M,G,1,8,J,Y,X)}function zl(m,w,E,M,G,J,Y,X){Bs(m,w,1,G,8,J,Y,X),Bs(E,M,1,G,8,J,Y,X)}function Hl(m,w,E,M,G,J,Y,X){as(m,w+4*G,G,1,8,J,Y,X),as(E,M+4*G,G,1,8,J,Y,X)}function Lu(m,w,E,M,G,J,Y,X){as(m,w+4,1,G,8,J,Y,X),as(E,M+4,1,G,8,J,Y,X)}function Za(){this.ba=new vi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new on,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Gl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Du(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new j}function $c(){this.xb=this.a=0,this.l=new Ro,this.ca=new vi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Du,this.ab=0,this.gc=l(4,Vl),this.Oc=0}function Sa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ro,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function eo(m,w,E,M,G,J,Y){for(m=m==null?0:m[w+0],w=0;w<Y;++w)G[J+w]=m+E[M+w]&255,m=G[J+w]}function $l(m,w,E,M,G,J,Y){var X;if(m==null)eo(null,null,E,M,G,J,Y);else for(X=0;X<Y;++X)G[J+X]=m[w+X]+E[M+X]&255}function _a(m,w,E,M,G,J,Y){if(m==null)eo(null,null,E,M,G,J,Y);else{var X,te=m[w+0],le=te,ve=te;for(X=0;X<Y;++X)le=ve+(te=m[w+X])-le,ve=E[M+X]+(-256&le?0>le?0:255:le)&255,le=te,G[J+X]=ve}}function qo(m,w,E,M){var G=w.width,J=w.o;if(e(m!=null&&w!=null),0>E||0>=M||E+M>J)return null;if(!m.Cc){if(m.ga==null){var Y;if(m.ga=new Sa,(Y=m.ga==null)||(Y=w.width*w.o,e(m.Gb.length==0),m.Gb=o(Y),m.Uc=0,m.Gb==null?Y=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,Y=1),Y=!Y),!Y){Y=m.ga;var X=m.Fa,te=m.P,le=m.qc,ve=m.mb,ke=m.nb,Ce=te+1,Ne=le-1,Ge=Y.l;if(e(X!=null&&ve!=null&&w!=null),Js[0]=null,Js[1]=eo,Js[2]=$l,Js[3]=_a,Y.ca=ve,Y.tb=ke,Y.c=w.width,Y.i=w.height,e(0<Y.c&&0<Y.i),1>=le)w=0;else if(Y.$a=X[te+0]>>0&3,Y.Z=X[te+0]>>2&3,Y.Lc=X[te+0]>>4&3,te=X[te+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||te)w=0;else if(Ge.put=ji,Ge.ac=gn,Ge.bc=yi,Ge.ma=Y,Ge.width=w.width,Ge.height=w.height,Ge.Da=w.Da,Ge.v=w.v,Ge.va=w.va,Ge.j=w.j,Ge.o=w.o,Y.$a)e:{e(Y.$a==1),w=Mt();t:for(;;){if(w==null){w=0;break e}if(e(Y!=null),Y.mc=w,w.c=Y.c,w.i=Y.i,w.l=Y.l,w.l.ma=Y,w.l.width=Y.c,w.l.height=Y.i,w.a=0,re(w.m,X,Ce,Ne),!$t(Y.c,Y.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&li(w.s)?(Y.ic=1,X=w.c*w.i,w.Ta=null,w.Ua=0,w.V=o(X),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(Y.ic=0,w=Dn(w,Y.c)),!w))break t;w=1;break e}Y.mc=null,w=0}else w=Ne>=Y.c*Y.i;Y=!w}if(Y)return null;m.ga.Lc!=1?m.Ga=0:M=J-E}e(m.ga!=null),e(E+M<=J);e:{if(w=(X=m.ga).c,J=X.l.o,X.$a==0){if(Ce=m.rc,Ne=m.Vc,Ge=m.Fa,te=m.P+1+E*w,le=m.mb,ve=m.nb+E*w,e(te<=m.P+m.qc),X.Z!=0)for(e(Js[X.Z]!=null),Y=0;Y<M;++Y)Js[X.Z](Ce,Ne,Ge,te,le,ve,w),Ce=le,Ne=ve,ve+=w,te+=w;else for(Y=0;Y<M;++Y)i(le,ve,Ge,te,w),Ce=le,Ne=ve,ve+=w,te+=w;m.rc=Ce,m.Vc=Ne}else{if(e(X.mc!=null),w=E+M,e((Y=X.mc)!=null),e(w<=Y.i),Y.C>=w)w=1;else if(X.ic||Ee(),X.ic){X=Y.V,Ce=Y.Ba,Ne=Y.c;var Ue=Y.i,ye=(Ge=1,te=Y.$/Ne,le=Y.$%Ne,ve=Y.m,ke=Y.s,Y.$),we=Ne*Ue,ze=Ne*w,Je=ke.wc,qe=ye<ze?Ln(ke,le,te):null;e(ye<=we),e(w<=Ue),e(li(ke));t:for(;;){for(;!ve.h&&ye<ze;){if(le&Je||(qe=Ln(ke,le,te)),e(qe!=null),ae(ve),256>(Ue=Ei(qe.G[0],qe.H[0],ve)))X[Ce+ye]=Ue,++ye,++le>=Ne&&(le=0,++te<=w&&!(te%16)&&wn(Y,te));else{if(!(280>Ue)){Ge=0;break t}Ue=sr(Ue-256,ve);var at,nt=Ei(qe.G[4],qe.H[4],ve);if(ae(ve),!(ye>=(nt=ar(Ne,nt=sr(nt,ve)))&&we-ye>=Ue)){Ge=0;break t}for(at=0;at<Ue;++at)X[Ce+ye+at]=X[Ce+ye+at-nt];for(ye+=Ue,le+=Ue;le>=Ne;)le-=Ne,++te<=w&&!(te%16)&&wn(Y,te);ye<ze&&le&Je&&(qe=Ln(ke,le,te))}e(ve.h==K(ve))}wn(Y,te>w?w:te);break t}!Ge||ve.h&&ye<we?(Ge=0,Y.a=ve.h?5:3):Y.$=ye,w=Ge}else w=ui(Y,Y.V,Y.Ba,Y.c,Y.i,w,Fn);if(!w){M=0;break e}}E+M>=J&&(m.Cc=1),M=1}if(!M)return null;if(m.Cc&&((M=m.ga)!=null&&(M.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+E*G}function A(m,w,E,M,G,J){for(;0<G--;){var Y,X=m,te=w+(E?1:0),le=m,ve=w+(E?0:3);for(Y=0;Y<M;++Y){var ke=le[ve+4*Y];ke!=255&&(ke*=32897,X[te+4*Y+0]=X[te+4*Y+0]*ke>>23,X[te+4*Y+1]=X[te+4*Y+1]*ke>>23,X[te+4*Y+2]=X[te+4*Y+2]*ke>>23)}w+=J}}function V(m,w,E,M,G){for(;0<M--;){var J;for(J=0;J<E;++J){var Y=m[w+2*J+0],X=15&(le=m[w+2*J+1]),te=4369*X,le=(240&le|le>>4)*te>>16;m[w+2*J+0]=(240&Y|Y>>4)*te>>16&240|(15&Y|Y<<4)*te>>16>>4&15,m[w+2*J+1]=240&le|X}w+=G}}function ce(m,w,E,M,G,J,Y,X){var te,le,ve=255;for(le=0;le<G;++le){for(te=0;te<M;++te){var ke=m[w+te];J[Y+4*te]=ke,ve&=ke}w+=E,Y+=X}return ve!=255}function ge(m,w,E,M,G){var J;for(J=0;J<G;++J)E[M+J]=m[w+J]>>8}function Ee(){Ts=A,zi=V,no=ce,xr=ge}function Oe(m,w,E){q[m]=function(M,G,J,Y,X,te,le,ve,ke,Ce,Ne,Ge,Ue,ye,we,ze,Je){var qe,at=Je-1>>1,nt=X[te+0]|le[ve+0]<<16,mt=ke[Ce+0]|Ne[Ge+0]<<16;e(M!=null);var rt=3*nt+mt+131074>>2;for(w(M[G+0],255&rt,rt>>16,Ue,ye),J!=null&&(rt=3*mt+nt+131074>>2,w(J[Y+0],255&rt,rt>>16,we,ze)),qe=1;qe<=at;++qe){var sn=X[te+qe]|le[ve+qe]<<16,Kt=ke[Ce+qe]|Ne[Ge+qe]<<16,en=nt+sn+mt+Kt+524296,Ft=en+2*(sn+mt)>>3;rt=Ft+nt>>1,nt=(en=en+2*(nt+Kt)>>3)+sn>>1,w(M[G+2*qe-1],255&rt,rt>>16,Ue,ye+(2*qe-1)*E),w(M[G+2*qe-0],255&nt,nt>>16,Ue,ye+(2*qe-0)*E),J!=null&&(rt=en+mt>>1,nt=Ft+Kt>>1,w(J[Y+2*qe-1],255&rt,rt>>16,we,ze+(2*qe-1)*E),w(J[Y+2*qe+0],255&nt,nt>>16,we,ze+(2*qe+0)*E)),nt=sn,mt=Kt}1&Je||(rt=3*nt+mt+131074>>2,w(M[G+Je-1],255&rt,rt>>16,Ue,ye+(Je-1)*E),J!=null&&(rt=3*mt+nt+131074>>2,w(J[Y+Je-1],255&rt,rt>>16,we,ze+(Je-1)*E)))}}function Xe(){Li[Fu]=so,Li[Gi]=Ko,Li[Bu]=Kc,Li[jr]=Vu,Li[Zl]=La,Li[Jo]=Es,Li[ka]=Da,Li[eu]=Ko,Li[qu]=Vu,Li[Yo]=La,Li[zu]=Es}function ot(m){return m&-16384?0>m?0:255:m>>$u}function yt(m,w){return ot((19077*m>>8)+(26149*w>>8)-14234)}function Ut(m,w,E){return ot((19077*m>>8)-(6419*w>>8)-(13320*E>>8)+8708)}function jt(m,w){return ot((19077*m>>8)+(33050*w>>8)-17685)}function Zt(m,w,E,M,G){M[G+0]=yt(m,E),M[G+1]=Ut(m,w,E),M[G+2]=jt(m,w)}function Un(m,w,E,M,G){M[G+0]=jt(m,w),M[G+1]=Ut(m,w,E),M[G+2]=yt(m,E)}function Bn(m,w,E,M,G){var J=Ut(m,w,E);w=J<<3&224|jt(m,w)>>3,M[G+0]=248&yt(m,E)|J>>5,M[G+1]=w}function Xn(m,w,E,M,G){var J=240&jt(m,w)|15;M[G+0]=240&yt(m,E)|Ut(m,w,E)>>4,M[G+1]=J}function ki(m,w,E,M,G){M[G+0]=255,Zt(m,w,E,M,G+1)}function ci(m,w,E,M,G){Un(m,w,E,M,G),M[G+3]=255}function Bi(m,w,E,M,G){Zt(m,w,E,M,G),M[G+3]=255}function vr(m,w){return 0>m?0:m>w?w:m}function qs(m,w,E){q[m]=function(M,G,J,Y,X,te,le,ve,ke){for(var Ce=ve+(-2&ke)*E;ve!=Ce;)w(M[G+0],J[Y+0],X[te+0],le,ve),w(M[G+1],J[Y+0],X[te+0],le,ve+E),G+=2,++Y,++te,ve+=2*E;1&ke&&w(M[G+0],J[Y+0],X[te+0],le,ve)}}function Mu(m,w,E){return E==0?m==0?w==0?6:5:w==0?4:0:E}function zo(m,w,E,M,G){switch(m>>>30){case 3:Ta(w,E,M,G,0);break;case 2:Vs(w,E,M,G);break;case 1:Ur(w,E,M,G)}}function Ho(m,w){var E,M,G=w.M,J=w.Nb,Y=m.oc,X=m.pc+40,te=m.oc,le=m.pc+584,ve=m.oc,ke=m.pc+600;for(E=0;16>E;++E)Y[X+32*E-1]=129;for(E=0;8>E;++E)te[le+32*E-1]=129,ve[ke+32*E-1]=129;for(0<G?Y[X-1-32]=te[le-1-32]=ve[ke-1-32]=129:(a(Y,X-32-1,127,21),a(te,le-32-1,127,9),a(ve,ke-32-1,127,9)),M=0;M<m.za;++M){var Ce=w.ya[w.aa+M];if(0<M){for(E=-1;16>E;++E)i(Y,X+32*E-4,Y,X+32*E+12,4);for(E=-1;8>E;++E)i(te,le+32*E-4,te,le+32*E+4,4),i(ve,ke+32*E-4,ve,ke+32*E+4,4)}var Ne=m.Gd,Ge=m.Hd+M,Ue=Ce.ad,ye=Ce.Hc;if(0<G&&(i(Y,X-32,Ne[Ge].y,0,16),i(te,le-32,Ne[Ge].f,0,8),i(ve,ke-32,Ne[Ge].ea,0,8)),Ce.Za){var we=Y,ze=X-32+16;for(0<G&&(M>=m.za-1?a(we,ze,Ne[Ge].y[15],4):i(we,ze,Ne[Ge+1].y,0,4)),E=0;4>E;E++)we[ze+128+E]=we[ze+256+E]=we[ze+384+E]=we[ze+0+E];for(E=0;16>E;++E,ye<<=2)we=Y,ze=X+Zn[E],Gn[Ce.Ob[E]](we,ze),zo(ye,Ue,16*+E,we,ze)}else if(we=Mu(M,G,Ce.Ob[0]),er[we](Y,X),ye!=0)for(E=0;16>E;++E,ye<<=2)zo(ye,Ue,16*+E,Y,X+Zn[E]);for(E=Ce.Gc,we=Mu(M,G,Ce.Dd),cs[we](te,le),cs[we](ve,ke),ye=Ue,we=te,ze=le,255&(Ce=E>>0)&&(170&Ce?_s(ye,256,we,ze):Zi(ye,256,we,ze)),Ce=ve,ye=ke,255&(E>>=8)&&(170&E?_s(Ue,320,Ce,ye):Zi(Ue,320,Ce,ye)),G<m.Ub-1&&(i(Ne[Ge].y,0,Y,X+480,16),i(Ne[Ge].f,0,te,le+224,8),i(Ne[Ge].ea,0,ve,ke+224,8)),E=8*J*m.B,Ne=m.sa,Ge=m.ta+16*M+16*J*m.R,Ue=m.qa,Ce=m.ra+8*M+E,ye=m.Ha,we=m.Ia+8*M+E,E=0;16>E;++E)i(Ne,Ge+E*m.R,Y,X+32*E,16);for(E=0;8>E;++E)i(Ue,Ce+E*m.B,te,le+32*E,8),i(ye,we+E*m.B,ve,ke+32*E,8)}}function Ss(m,w,E,M,G,J,Y,X,te){var le=[0],ve=[0],ke=0,Ce=te!=null?te.kd:0,Ne=te??new Gl;if(m==null||12>E)return 7;Ne.data=m,Ne.w=w,Ne.ha=E,w=[w],E=[E],Ne.gb=[Ne.gb];e:{var Ge=w,Ue=E,ye=Ne.gb;if(e(m!=null),e(Ue!=null),e(ye!=null),ye[0]=0,12<=Ue[0]&&!n(m,Ge[0],"RIFF")){if(n(m,Ge[0]+8,"WEBP")){ye=3;break e}var we=Ye(m,Ge[0]+4);if(12>we||4294967286<we){ye=3;break e}if(Ce&&we>Ue[0]-8){ye=7;break e}ye[0]=we,Ge[0]+=12,Ue[0]-=12}ye=0}if(ye!=0)return ye;for(we=0<Ne.gb[0],E=E[0];;){e:{var ze=m;Ue=w,ye=E;var Je=le,qe=ve,at=Ge=[0];if((rt=ke=[ke])[0]=0,8>ye[0])ye=7;else{if(!n(ze,Ue[0],"VP8X")){if(Ye(ze,Ue[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var nt=Ye(ze,Ue[0]+8),mt=1+Ke(ze,Ue[0]+12);if(2147483648<=mt*(ze=1+Ke(ze,Ue[0]+15))){ye=3;break e}at!=null&&(at[0]=nt),Je!=null&&(Je[0]=mt),qe!=null&&(qe[0]=ze),Ue[0]+=18,ye[0]-=18,rt[0]=1}ye=0}}if(ke=ke[0],Ge=Ge[0],ye!=0)return ye;if(Ue=!!(2&Ge),!we&&ke)return 3;if(J!=null&&(J[0]=!!(16&Ge)),Y!=null&&(Y[0]=Ue),X!=null&&(X[0]=0),Y=le[0],Ge=ve[0],ke&&Ue&&te==null){ye=0;break}if(4>E){ye=7;break}if(we&&ke||!we&&!ke&&!n(m,w[0],"ALPH")){E=[E],Ne.na=[Ne.na],Ne.P=[Ne.P],Ne.Sa=[Ne.Sa];e:{nt=m,ye=w,we=E;var rt=Ne.gb;Je=Ne.na,qe=Ne.P,at=Ne.Sa,mt=22,e(nt!=null),e(we!=null),ze=ye[0];var sn=we[0];for(e(Je!=null),e(at!=null),Je[0]=null,qe[0]=null,at[0]=0;;){if(ye[0]=ze,we[0]=sn,8>sn){ye=7;break e}var Kt=Ye(nt,ze+4);if(4294967286<Kt){ye=3;break e}var en=8+Kt+1&-2;if(mt+=en,0<rt&&mt>rt){ye=3;break e}if(!n(nt,ze,"VP8 ")||!n(nt,ze,"VP8L")){ye=0;break e}if(sn[0]<en){ye=7;break e}n(nt,ze,"ALPH")||(Je[0]=nt,qe[0]=ze+8,at[0]=Kt),ze+=en,sn-=en}}if(E=E[0],Ne.na=Ne.na[0],Ne.P=Ne.P[0],Ne.Sa=Ne.Sa[0],ye!=0)break}E=[E],Ne.Ja=[Ne.Ja],Ne.xa=[Ne.xa];e:if(rt=m,ye=w,we=E,Je=Ne.gb[0],qe=Ne.Ja,at=Ne.xa,nt=ye[0],ze=!n(rt,nt,"VP8 "),mt=!n(rt,nt,"VP8L"),e(rt!=null),e(we!=null),e(qe!=null),e(at!=null),8>we[0])ye=7;else{if(ze||mt){if(rt=Ye(rt,nt+4),12<=Je&&rt>Je-12){ye=3;break e}if(Ce&&rt>we[0]-8){ye=7;break e}qe[0]=rt,ye[0]+=8,we[0]-=8,at[0]=mt}else at[0]=5<=we[0]&&rt[nt+0]==47&&!(rt[nt+4]>>5),qe[0]=we[0];ye=0}if(E=E[0],Ne.Ja=Ne.Ja[0],Ne.xa=Ne.xa[0],w=w[0],ye!=0)break;if(4294967286<Ne.Ja)return 3;if(X==null||Ue||(X[0]=Ne.xa?2:1),Y=[Y],Ge=[Ge],Ne.xa){if(5>E){ye=7;break}X=Y,Ce=Ge,Ue=J,m==null||5>E?m=0:5<=E&&m[w+0]==47&&!(m[w+4]>>5)?(we=[0],rt=[0],Je=[0],re(qe=new D,m,w,E),xt(qe,we,rt,Je)?(X!=null&&(X[0]=we[0]),Ce!=null&&(Ce[0]=rt[0]),Ue!=null&&(Ue[0]=Je[0]),m=1):m=0):m=0}else{if(10>E){ye=7;break}X=Ge,m==null||10>E||!kr(m,w+3,E-3)?m=0:(Ce=m[w+0]|m[w+1]<<8|m[w+2]<<16,Ue=16383&(m[w+7]<<8|m[w+6]),m=16383&(m[w+9]<<8|m[w+8]),1&Ce||3<(Ce>>1&7)||!(Ce>>4&1)||Ce>>5>=Ne.Ja||!Ue||!m?m=0:(Y&&(Y[0]=Ue),X&&(X[0]=m),m=1))}if(!m||(Y=Y[0],Ge=Ge[0],ke&&(le[0]!=Y||ve[0]!=Ge)))return 3;te!=null&&(te[0]=Ne,te.offset=w-te.w,e(4294967286>w-te.w),e(te.offset==te.ha-E));break}return ye==0||ye==7&&ke&&te==null?(J!=null&&(J[0]|=Ne.na!=null&&0<Ne.na.length),M!=null&&(M[0]=Y),G!=null&&(G[0]=Ge),0):ye}function zs(m,w,E){var M=w.width,G=w.height,J=0,Y=0,X=M,te=G;if(w.Da=m!=null&&0<m.Da,w.Da&&(X=m.cd,te=m.bd,J=m.v,Y=m.j,11>E||(J&=-2,Y&=-2),0>J||0>Y||0>=X||0>=te||J+X>M||Y+te>G))return 0;if(w.v=J,w.j=Y,w.va=J+X,w.o=Y+te,w.U=X,w.T=te,w.da=m!=null&&0<m.da,w.da){if(!Et(X,te,E=[m.ib],J=[m.hb]))return 0;w.ib=E[0],w.hb=J[0]}return w.ob=m!=null&&m.ob,w.Kb=m==null||!m.Sd,w.da&&(w.ob=w.ib<3*M/4&&w.hb<3*G/4,w.Kb=0),1}function Jl(m){if(m==null)return 2;if(11>m.S){var w=m.f.RGBA;w.fb+=(m.height-1)*w.A,w.A=-w.A}else w=m.f.kb,m=m.height,w.O+=(m-1)*w.fa,w.fa=-w.fa,w.N+=(m-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(m-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(m-1)*w.lb,w.lb=-w.lb);return 0}function Hs(m,w,E,M){if(M==null||0>=m||0>=w)return 2;if(E!=null){if(E.Da){var G=E.cd,J=E.bd,Y=-2&E.v,X=-2&E.j;if(0>Y||0>X||0>=G||0>=J||Y+G>m||X+J>w)return 2;m=G,w=J}if(E.da){if(!Et(m,w,G=[E.ib],J=[E.hb]))return 2;m=G[0],w=J[0]}}M.width=m,M.height=w;e:{var te=M.width,le=M.height;if(m=M.S,0>=te||0>=le||!(m>=Fu&&13>m))m=2;else{if(0>=M.Rd&&M.sd==null){Y=J=G=w=0;var ve=(X=te*Yu[m])*le;if(11>m||(J=(le+1)/2*(w=(te+1)/2),m==12&&(Y=(G=te)*le)),(le=o(ve+2*J+Y))==null){m=1;break e}M.sd=le,11>m?((te=M.f.RGBA).eb=le,te.fb=0,te.A=X,te.size=ve):((te=M.f.kb).y=le,te.O=0,te.fa=X,te.Fd=ve,te.f=le,te.N=0+ve,te.Ab=w,te.Cd=J,te.ea=le,te.W=0+ve+J,te.Db=w,te.Ed=J,m==12&&(te.F=le,te.J=0+ve+2*J),te.Tc=Y,te.lb=G)}if(w=1,G=M.S,J=M.width,Y=M.height,G>=Fu&&13>G)if(11>G)m=M.f.RGBA,w&=(X=Math.abs(m.A))*(Y-1)+J<=m.size,w&=X>=J*Yu[G],w&=m.eb!=null;else{m=M.f.kb,X=(J+1)/2,ve=(Y+1)/2,te=Math.abs(m.fa),le=Math.abs(m.Ab);var ke=Math.abs(m.Db),Ce=Math.abs(m.lb),Ne=Ce*(Y-1)+J;w&=te*(Y-1)+J<=m.Fd,w&=le*(ve-1)+X<=m.Cd,w=(w&=ke*(ve-1)+X<=m.Ed)&te>=J&le>=X&ke>=X,w&=m.y!=null,w&=m.f!=null,w&=m.ea!=null,G==12&&(w&=Ce>=J,w&=Ne<=m.Tc,w&=m.F!=null)}else w=0;m=w?0:2}}return m!=0||E!=null&&E.fd&&(m=Jl(M)),m}var Ki=64,to=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Na=24,Aa=32,Go=8,Xi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ze("Predictor0","PredictorAdd0"),q.Predictor0=function(){return 4278190080},q.Predictor1=function(m){return m},q.Predictor2=function(m,w,E){return w[E+0]},q.Predictor3=function(m,w,E){return w[E+1]},q.Predictor4=function(m,w,E){return w[E-1]},q.Predictor5=function(m,w,E){return et(et(m,w[E+1]),w[E+0])},q.Predictor6=function(m,w,E){return et(m,w[E-1])},q.Predictor7=function(m,w,E){return et(m,w[E+0])},q.Predictor8=function(m,w,E){return et(w[E-1],w[E+0])},q.Predictor9=function(m,w,E){return et(w[E+0],w[E+1])},q.Predictor10=function(m,w,E){return et(et(m,w[E-1]),et(w[E+0],w[E+1]))},q.Predictor11=function(m,w,E){var M=w[E+0];return 0>=Qe(M>>24&255,m>>24&255,(w=w[E-1])>>24&255)+Qe(M>>16&255,m>>16&255,w>>16&255)+Qe(M>>8&255,m>>8&255,w>>8&255)+Qe(255&M,255&m,255&w)?M:m},q.Predictor12=function(m,w,E){var M=w[E+0];return(We((m>>24&255)+(M>>24&255)-((w=w[E-1])>>24&255))<<24|We((m>>16&255)+(M>>16&255)-(w>>16&255))<<16|We((m>>8&255)+(M>>8&255)-(w>>8&255))<<8|We((255&m)+(255&M)-(255&w)))>>>0},q.Predictor13=function(m,w,E){var M=w[E-1];return(Se((m=et(m,w[E+0]))>>24&255,M>>24&255)<<24|Se(m>>16&255,M>>16&255)<<16|Se(m>>8&255,M>>8&255)<<8|Se(m>>0&255,M>>0&255))>>>0};var Pu=q.PredictorAdd0;q.PredictorAdd1=ct,Ze("Predictor2","PredictorAdd2"),Ze("Predictor3","PredictorAdd3"),Ze("Predictor4","PredictorAdd4"),Ze("Predictor5","PredictorAdd5"),Ze("Predictor6","PredictorAdd6"),Ze("Predictor7","PredictorAdd7"),Ze("Predictor8","PredictorAdd8"),Ze("Predictor9","PredictorAdd9"),Ze("Predictor10","PredictorAdd10"),Ze("Predictor11","PredictorAdd11"),Ze("Predictor12","PredictorAdd12"),Ze("Predictor13","PredictorAdd13");var Yl=q.PredictorAdd2;Nt("ColorIndexInverseTransform","MapARGB","32b",(function(m){return m>>8&255}),(function(m){return m})),Nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(m){return m}),(function(m){return m>>8&255}));var Uu,os=q.ColorIndexInverseTransform,Wl=q.MapARGB,Jc=q.VP8LColorIndexInverseTransformAlpha,Qi=q.MapAlpha,Mr=q.VP8LPredictorsAdd=[];Mr.length=16,(q.VP8LPredictors=[]).length=16,(q.VP8LPredictorsAdd_C=[]).length=16,(q.VP8LPredictors_C=[]).length=16;var yr,Pr,Gs,ls,us,Vo,qi,Ta,Vs,_s,Ur,Zi,Or,Ea,Ca,ur,$o,br,Ns,Sn,_n,Qn,ii,As,Ts,zi,no,xr,io=o(511),Ou=o(2041),Kl=o(225),Xl=o(767),ju=0,$s=Ou,Ql=Kl,Hi=Xl,Ri=io,Fu=0,Gi=1,Bu=2,jr=3,Zl=4,Jo=5,ka=6,eu=7,qu=8,Yo=9,zu=10,Fr=[2,3,7],Wo=[3,3,11],ro=[280,256,256,256,40],Hu=[0,1,1,1,0],tu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Br=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ra=8,zr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Hr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],wr=null,ef=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Yc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Gu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],tf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ii=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Cn=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Wt=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],er=[],Gn=[],cs=[],Ia=1,Wc=2,Js=[],Li=[];Oe("UpsampleRgbLinePair",Zt,3),Oe("UpsampleBgrLinePair",Un,3),Oe("UpsampleRgbaLinePair",Bi,4),Oe("UpsampleBgraLinePair",ci,4),Oe("UpsampleArgbLinePair",ki,4),Oe("UpsampleRgba4444LinePair",Xn,2),Oe("UpsampleRgb565LinePair",Bn,2);var so=q.UpsampleRgbLinePair,Kc=q.UpsampleBgrLinePair,Ko=q.UpsampleRgbaLinePair,Vu=q.UpsampleBgraLinePair,La=q.UpsampleArgbLinePair,Es=q.UpsampleRgba4444LinePair,Da=q.UpsampleRgb565LinePair,Gr=16,Xo=1<<Gr-1,ao=-227,Ma=482,$u=6,Pa=0,Di=o(256),Ju=o(256),nf=o(256),Mh=o(256),Ph=o(Ma-ao),Uh=o(Ma-ao);qs("YuvToRgbRow",Zt,3),qs("YuvToBgrRow",Un,3),qs("YuvToRgbaRow",Bi,4),qs("YuvToBgraRow",ci,4),qs("YuvToArgbRow",ki,4),qs("YuvToRgba4444Row",Xn,2),qs("YuvToRgb565Row",Bn,2);var Zn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Qo=[0,2,8],nu=[8,7,6,4,4,2,2,2,1,1,1,1],iu=1;this.WebPDecodeRGBA=function(m,w,E,M,G){var J=Gi,Y=new Za,X=new vi;Y.ba=X,X.S=J,X.width=[X.width],X.height=[X.height];var te=X.width,le=X.height,ve=new Yi;if(ve==null||m==null)var ke=2;else e(ve!=null),ke=Ss(m,w,E,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(ke!=0?te=0:(te!=null&&(te[0]=ve.width[0]),le!=null&&(le[0]=ve.height[0]),te=1),te){X.width=X.width[0],X.height=X.height[0],M!=null&&(M[0]=X.width),G!=null&&(G[0]=X.height);e:{if(M=new Ro,(G=new Gl).data=m,G.w=w,G.ha=E,G.kd=1,w=[0],e(G!=null),((m=Ss(G.data,G.w,G.ha,null,null,null,w,null,G))==0||m==7)&&w[0]&&(m=4),(w=m)==0){if(e(Y!=null),M.data=G.data,M.w=G.w+G.offset,M.ha=G.ha-G.offset,M.put=ji,M.ac=gn,M.bc=yi,M.ma=Y,G.xa){if((m=Mt())==null){Y=1;break e}if((function(Ce,Ne){var Ge=[0],Ue=[0],ye=[0];t:for(;;){if(Ce==null)return 0;if(Ne==null)return Ce.a=2,0;if(Ce.l=Ne,Ce.a=0,re(Ce.m,Ne.data,Ne.w,Ne.ha),!xt(Ce.m,Ge,Ue,ye)){Ce.a=3;break t}if(Ce.xb=Wc,Ne.width=Ge[0],Ne.height=Ue[0],!$t(Ge[0],Ue[0],1,Ce,null))break t;return 1}return e(Ce.a!=0),0})(m,M)){if(M=(w=Hs(M.width,M.height,Y.Oa,Y.ba))==0){t:{M=m;n:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((E=M.l)!=null),e((G=E.ma)!=null),M.xb!=0){if(M.ca=G.ba,M.tb=G.tb,e(M.ca!=null),!zs(G.Oa,E,jr)){M.a=2;break n}if(!Dn(M,E.width)||E.da)break n;if((E.da||Yt(M.ca.S))&&Ee(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&Ee()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!st(M.s.vb,M.s.Wa.Xa)){M.a=1;break n}M.xb=0}if(!ui(M,M.V,M.Ba,M.c,M.i,E.o,vs))break n;G.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(w=m.a)}else w=m.a}else{if((m=new Io)==null){Y=1;break e}if(m.Fa=G.na,m.P=G.P,m.qc=G.Sa,Wi(m,M)){if((w=Hs(M.width,M.height,Y.Oa,Y.ba))==0){if(m.Aa=0,E=Y.Oa,e((G=m)!=null),E!=null){if(0<(te=0>(te=E.Md)?0:100<te?255:255*te/100)){for(le=ve=0;4>le;++le)12>(ke=G.pb[le]).lc&&(ke.ia=te*nu[0>ke.lc?0:ke.lc]>>3),ve|=ke.ia;ve&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=E.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}Pl(m,M)||(w=m.a)}}else w=m.a}w==0&&Y.Oa!=null&&Y.Oa.fd&&(w=Jl(Y.ba))}Y=w}J=Y!=0?null:11>J?X.f.RGBA.eb:X.f.kb.y}else J=null;return J};var Yu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(q,ee){for(var ue="",F=0;F<4;F++)ue+=String.fromCharCode(q[ee++]);return ue}function v(q,ee){return(q[ee+0]<<0|q[ee+1]<<8|q[ee+2]<<16)>>>0}function b(q,ee){return(q[ee+0]<<0|q[ee+1]<<8|q[ee+2]<<16|q[ee+3]<<24)>>>0}new d;var S=[0],_=[0],T=[],k=new d,I=t,C=(function(q,ee){var ue={},F=0,j=!1,ne=0,ie=0;if(ue.frames=[],!(function(H,K,Z,ae){for(var de=0;de<ae;de++)if(H[K+de]!=Z.charCodeAt(de))return!0;return!1})(q,ee,"RIFF",4)){var be,U;for(b(q,ee+=4),ee+=8;ee<q.length;){var $=h(q,ee),re=b(q,ee+=4);ee+=4;var oe=re+(1&re);switch($){case"VP8 ":case"VP8L":ue.frames[F]===void 0&&(ue.frames[F]={}),(D=ue.frames[F]).src_off=j?ie:ee-8,D.src_size=ne+re+8,F++,j&&(j=!1,ne=0,ie=0);break;case"VP8X":(D=ue.header={}).feature_flags=q[ee];var pe=ee+4;D.canvas_width=1+v(q,pe),pe+=3,D.canvas_height=1+v(q,pe),pe+=3;break;case"ALPH":j=!0,ne=oe+8,ie=ee-8;break;case"ANIM":(D=ue.header).bgcolor=b(q,ee),pe=ee+4,D.loop_count=(be=q)[(U=pe)+0]<<0|be[U+1]<<8,pe+=2;break;case"ANMF":var _e,D;(D=ue.frames[F]={}).offset_x=2*v(q,ee),ee+=3,D.offset_y=2*v(q,ee),ee+=3,D.width=1+v(q,ee),ee+=3,D.height=1+v(q,ee),ee+=3,D.duration=v(q,ee),ee+=3,_e=q[ee++],D.dispose=1&_e,D.blend=_e>>1&1}$!="ANMF"&&(ee+=oe)}return ue}})(I,0);C.response=I,C.rgbaoutput=!0,C.dataurl=!1;var R=C.header?C.header:null,L=C.frames?C.frames:null;if(R){R.loop_counter=R.loop_count,S=[R.canvas_height],_=[R.canvas_width];for(var O=0;O<L.length&&L[O].blend!=0;O++);}var z=L[0],W=k.WebPDecodeRGBA(I,z.src_off,z.src_size,_,S);z.rgba=W,z.imgwidth=_[0],z.imgheight=S[0];for(var B=0;B<_[0]*S[0]*4;B++)T[B]=W[B];return this.width=_,this.height=S,this.data=T,this}(function(t){var e=function(){return typeof K0=="function"},n=function(S,_,T,k){var I=4,C=l;switch(k){case t.image_compression.FAST:I=1,C=o;break;case t.image_compression.MEDIUM:I=6,C=c;break;case t.image_compression.SLOW:I=9,C=d}S=i(S,_,T,C);var R=K0(S,{level:I});return t.__addimage__.arrayBufferToBinaryString(R)},i=function(S,_,T,k){for(var I,C,R,L=S.length/_,O=new Uint8Array(S.length+L),z=v(),W=0;W<L;W+=1){if(R=W*_,I=S.subarray(R,R+_),k)O.set(k(I,T,C),R+W);else{for(var B,q=z.length,ee=[];B<q;B+=1)ee[B]=z[B](I,T,C);var ue=b(ee.concat());O.set(ee[ue],R+W)}C=I}return O},a=function(S){var _=Array.apply([],S);return _.unshift(0),_},o=function(S,_){var T,k=[],I=S.length;k[0]=1;for(var C=0;C<I;C+=1)T=S[C-_]||0,k[C+1]=S[C]-T+256&255;return k},l=function(S,_,T){var k,I=[],C=S.length;I[0]=2;for(var R=0;R<C;R+=1)k=T&&T[R]||0,I[R+1]=S[R]-k+256&255;return I},c=function(S,_,T){var k,I,C=[],R=S.length;C[0]=3;for(var L=0;L<R;L+=1)k=S[L-_]||0,I=T&&T[L]||0,C[L+1]=S[L]+256-(k+I>>>1)&255;return C},d=function(S,_,T){var k,I,C,R,L=[],O=S.length;L[0]=4;for(var z=0;z<O;z+=1)k=S[z-_]||0,I=T&&T[z]||0,C=T&&T[z-_]||0,R=h(k,I,C),L[z+1]=S[z]-R+256&255;return L},h=function(S,_,T){if(S===_&&_===T)return S;var k=Math.abs(_-T),I=Math.abs(S-T),C=Math.abs(S+_-T-T);return k<=I&&k<=C?S:I<=C?_:T},v=function(){return[a,o,l,c,d]},b=function(S){var _=S.map((function(T){return T.reduce((function(k,I){return k+Math.abs(I)}),0)}));return _.indexOf(Math.min.apply(null,_))};t.processPNG=function(S,_,T,k){var I,C,R,L,O,z,W,B,q,ee,ue,F,j,ne,ie,be=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(S)&&(S=new Uint8Array(S)),this.__addimage__.isArrayBufferView(S)){if(S=(R=new tR(S)).imgData,C=R.bits,I=R.colorSpace,O=R.colors,[4,6].indexOf(R.colorType)!==-1){if(R.bits===8){q=(B=R.pixelBitlength==32?new Uint32Array(R.decodePixels().buffer):R.pixelBitlength==16?new Uint16Array(R.decodePixels().buffer):new Uint8Array(R.decodePixels().buffer)).length,ue=new Uint8Array(q*R.colors),ee=new Uint8Array(q);var $,re=R.pixelBitlength-R.bits;for(ne=0,ie=0;ne<q;ne++){for(j=B[ne],$=0;$<re;)ue[ie++]=j>>>$&255,$+=R.bits;ee[ne]=j>>>$&255}}if(R.bits===16){q=(B=new Uint32Array(R.decodePixels().buffer)).length,ue=new Uint8Array(q*(32/R.pixelBitlength)*R.colors),ee=new Uint8Array(q*(32/R.pixelBitlength)),F=R.colors>1,ne=0,ie=0;for(var oe=0;ne<q;)j=B[ne++],ue[ie++]=j>>>0&255,F&&(ue[ie++]=j>>>16&255,j=B[ne++],ue[ie++]=j>>>0&255),ee[oe++]=j>>>16&255;C=8}k!==t.image_compression.NONE&&e()?(S=n(ue,R.width*R.colors,R.colors,k),W=n(ee,R.width,1,k)):(S=ue,W=ee,be=void 0)}if(R.colorType===3&&(I=this.color_spaces.INDEXED,z=R.palette,R.transparency.indexed)){var pe=R.transparency.indexed,_e=0;for(ne=0,q=pe.length;ne<q;++ne)_e+=pe[ne];if((_e/=255)===q-1&&pe.indexOf(0)!==-1)L=[pe.indexOf(0)];else if(_e!==q){for(B=R.decodePixels(),ee=new Uint8Array(B.length),ne=0,q=B.length;ne<q;ne++)ee[ne]=pe[B[ne]];W=n(ee,R.width,1)}}var D=(function(H){var K;switch(H){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K})(k);return be===this.decode.FLATE_DECODE&&(U="/Predictor "+D+" "),U+="/Colors "+O+" /BitsPerComponent "+C+" /Columns "+R.width,(this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),(W&&this.__addimage__.isArrayBuffer(W)||this.__addimage__.isArrayBufferView(W))&&(W=this.__addimage__.arrayBufferToBinaryString(W)),{alias:T,data:S,index:_,filter:be,decodeParameters:U,transparency:L,palette:z,sMask:W,predictor:D,width:R.width,height:R.height,bitsPerComponent:C,colorSpace:I}}}})(Tt.API),(function(t){t.processGIF89A=function(e,n,i,a){var o=new nR(e),l=o.width,c=o.height,d=[];o.decodeAndBlitFrameRGBA(0,d);var h={data:d,width:l,height:c},v=new m0(100).encode(h,100);return t.processJPEG.call(this,v,n,i,a)},t.processGIF87A=t.processGIF89A})(Tt.API),na.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},na.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){In.log("bit decode error:"+n)}},na.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var d=this.palette[o>>7-c&1];this.data[l+4*c]=d.blue,this.data[l+4*c+1]=d.green,this.data[l+4*c+2]=d.red,this.data[l+4*c+3]=255}n!==0&&(this.pos+=4-n)}},na.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<t;a++){var o=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*a*4,c=o>>4,d=15&o,h=this.palette[c];if(this.data[l]=h.blue,this.data[l+1]=h.green,this.data[l+2]=h.red,this.data[l+3]=255,2*a+1>=this.width)break;h=this.palette[d],this.data[l+4]=h.blue,this.data[l+4+1]=h.green,this.data[l+4+2]=h.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},na.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(a<this.palette.length){var l=this.palette[a];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},na.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,d=(o>>10&e)/e*255|0,h=o>>15?255:0,v=i*this.width*4+4*a;this.data[v]=d,this.data[v+1]=c,this.data[v+2]=l,this.data[v+3]=h}this.pos+=t}},na.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,d=(l>>5&n)/n*255|0,h=(l>>11)/e*255|0,v=a*this.width*4+4*o;this.data[v]=h,this.data[v+1]=d,this.data[v+2]=c,this.data[v+3]=255}this.pos+=t}},na.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=o,this.data[l+1]=a,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},na.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=i,this.data[c+3]=l}},na.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,i,a){var o=new na(e,!1),l=o.width,c=o.height,d={data:o.getData(),width:l,height:c},h=new m0(100).encode(d,100);return t.processJPEG.call(this,h,n,i,a)}})(Tt.API),S2.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,i,a){var o=new S2(e),l=o.width,c=o.height,d={data:o.getData(),width:l,height:c},h=new m0(100).encode(d,100);return t.processJPEG.call(this,h,n,i,a)}})(Tt.API),Tt.API.processRGBA=function(t,e,n){for(var i=t.data,a=i.length,o=new Uint8Array(a/4*3),l=new Uint8Array(a/4),c=0,d=0,h=0;h<a;h+=4){var v=i[h],b=i[h+1],S=i[h+2],_=i[h+3];o[c++]=v,o[c++]=b,o[c++]=S,l[d++]=_}var T=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:T,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Tt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Nc=Tt.API,nh=Nc.getCharWidthsArray=function(t,e){var n,i,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,d=c.fof?c.fof:1,h=e.kerning?e.kerning:a.metadata.Unicode.kerning,v=h.fof?h.fof:1,b=e.doKerning!==!1,S=0,_=t.length,T=0,k=c[0]||d,I=[];for(n=0;n<_;n++)i=t.charCodeAt(n),typeof a.metadata.widthOfString=="function"?I.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+l*(1e3/o)||0)/1e3):(S=b&&xn(h[i])==="object"&&!isNaN(parseInt(h[i][T],10))?h[i][T]/v:0,I.push((c[i]||k)/d+S)),T=i;return I},y2=Nc.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Nc.processArabic&&(t=Nc.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,a)/n:nh.apply(this,arguments).reduce((function(o,l){return o+l}),0)},b2=function(t,e,n,i){for(var a=[],o=0,l=t.length,c=0;o!==l&&c+e[o]<n;)c+=e[o],o++;a.push(t.slice(0,o));var d=o;for(c=0;o!==l;)c+e[o]>i&&(a.push(t.slice(d,o)),c=0,d=o),c+=e[o],o++;return d!==o&&a.push(t.slice(d,o)),a},x2=function(t,e,n){n||(n={});var i,a,o,l,c,d,h,v=[],b=[v],S=n.textIndent||0,_=0,T=0,k=t.split(" "),I=nh.apply(this,[" ",n])[0];if(d=n.lineIndent===-1?k[0].length+2:n.lineIndent||0){var C=Array(d).join(" "),R=[];k.map((function(O){(O=O.split(/\s*\n/)).length>1?R=R.concat(O.map((function(z,W){return(W&&z.length?`
`:"")+z}))):R.push(O[0])})),k=R,d=y2.apply(this,[C,n])}for(o=0,l=k.length;o<l;o++){var L=0;if(i=k[o],d&&i[0]==`
`&&(i=i.substr(1),L=1),S+_+(T=(a=nh.apply(this,[i,n])).reduce((function(O,z){return O+z}),0))>e||L){if(T>e){for(c=b2.apply(this,[i,a,e-(S+_),e]),v.push(c.shift()),v=[c.pop()];c.length;)b.push([c.shift()]);T=a.slice(i.length-(v[0]?v[0].length:0)).reduce((function(O,z){return O+z}),0)}else v=[i];b.push(v),S=T+d,_=I}else v.push(i),S+=_+T,_=I}return h=d?function(O,z){return(z?C:"")+O.join(" ")}:function(O){return O.join(" ")},b.map(h)},Nc.splitTextToSize=function(t,e,n){var i,a=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var b=this.internal.getFont(v.fontName,v.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/a;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=n.lineIndent;var c,d,h=[];for(c=0,d=i.length;c<d;c++)h=h.concat(x2.apply(this,[i[c],l,o]));return h},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},a=0;a<e.length;a++)n[e[a]]="0123456789abcdef"[a],i["0123456789abcdef"[a]]=e[a];var o=function(b){return"0x"+parseInt(b,10).toString(16)},l=t.__fontmetrics__.compress=function(b){var S,_,T,k,I=["{"];for(var C in b){if(S=b[C],isNaN(parseInt(C,10))?_="'"+C+"'":(C=parseInt(C,10),_=(_=o(C).slice(2)).slice(0,-1)+i[_.slice(-1)]),typeof S=="number")S<0?(T=o(S).slice(3),k="-"):(T=o(S).slice(2),k=""),T=k+T.slice(0,-1)+i[T.slice(-1)];else{if(xn(S)!=="object")throw new Error("Don't know what to do with value type "+xn(S)+".");T=l(S)}I.push(_+T)}return I.push("}"),I.join("")},c=t.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var S,_,T,k,I={},C=1,R=I,L=[],O="",z="",W=b.length-1,B=1;B<W;B+=1)(k=b[B])=="'"?S?(T=S.join(""),S=void 0):S=[]:S?S.push(k):k=="{"?(L.push([R,T]),R={},T=void 0):k=="}"?((_=L.pop())[0][_[1]]=R,T=void 0,R=_[0]):k=="-"?C=-1:T===void 0?n.hasOwnProperty(k)?(O+=n[k],T=parseInt(O,16)*C,C=1,O=""):O+=k:n.hasOwnProperty(k)?(z+=n[k],R[T]=parseInt(z,16)*C,C=1,T=void 0,z=""):z+=k;return I},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},v={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(b){var S=b.font,_=v.Unicode[S.postScriptName];_&&(S.metadata.Unicode={},S.metadata.Unicode.widths=_.widths,S.metadata.Unicode.kerning=_.kerning);var T=h.Unicode[S.postScriptName];T&&(S.metadata.Unicode.encoding=T,S.encoding=T.codePages[0])}])})(Tt.API),(function(t){var e=function(n){for(var i=n.length,a=new Uint8Array(i),o=0;o<i;o++)a[o]=n.charCodeAt(o);return a};t.API.events.push(["addFont",function(n){var i=void 0,a=n.font,o=n.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(i=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(jd(c)),l.metadata=t.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,i)}}])})(Tt),(function(t){function e(){return(Dt.canvg?Promise.resolve(Dt.canvg):G0(()=>import("./index.es-B5jZ1AWu.js"),__vite__mapDeps([0,1,2]))).catch((function(n){return Promise.reject(new Error("Could not load canvg: "+n))})).then((function(n){return n.default?n.default:n}))}Tt.API.addSvgAsImage=function(n,i,a,o,l,c,d,h){if(isNaN(i)||isNaN(a))throw In.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(l))throw In.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=o,v.height=l;var b=v.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,v.width,v.height);var S={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return e().then((function(T){return T.fromString(b,n,S)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(T){return T.render(S)})).then((function(){_.addImage(v.toDataURL("image/jpeg",1),i,a,o,l,d,h)}))}})(),Tt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(e,n);return this},Tt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,a,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),d=[],h=0,v=0,b=0;function S(T,k){var I,C=!1;for(I=0;I<T.length;I+=1)T[I]===k&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var _=c.length;for(b=0;b<_;b+=1)n[c[b]].value=n[c[b]].defaultValue,n[c[b]].explicitSet=!1}if(xn(t)==="object"){for(a in t)if(o=t[a],S(c,a)&&o!==void 0){if(n[a].type==="boolean"&&typeof o=="boolean")n[a].value=o;else if(n[a].type==="name"&&S(n[a].valueSet,o))n[a].value=o;else if(n[a].type==="integer"&&Number.isInteger(o))n[a].value=o;else if(n[a].type==="array"){for(h=0;h<o.length;h+=1)if(i=!0,o[h].length===1&&typeof o[h][0]=="number")d.push(String(o[h]-1));else if(o[h].length>1){for(v=0;v<o[h].length;v+=1)typeof o[h][v]!="number"&&(i=!1);i===!0&&d.push([o[h][0]-1,o[h][1]-1].join(" "))}n[a].value="["+d.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var T,k=[];for(T in n)n[T].explicitSet===!0&&(n[T].type==="name"?k.push("/"+T+" /"+n[T].value):k.push("/"+T+" "+n[T].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),h=o.length+l.length+c.length+a.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(a+o+l+c+d),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(Tt.API),(function(t){var e=t.API,n=e.pdfEscape16=function(o,l){for(var c,d=l.metadata.Unicode.widths,h=["","0","00","000","0000"],v=[""],b=0,S=o.length;b<S;++b){if(c=l.metadata.characterToGlyph(o.charCodeAt(b)),l.metadata.glyIdsUsed.push(c),l.metadata.toUnicode[c]=o.charCodeAt(b),d.indexOf(c)==-1&&(d.push(c),d.push([parseInt(l.metadata.widthOfGlyph(c),10)])),c=="0")return v.join("");c=c.toString(16),v.push(h[4-c.length],c)}return v.join("")},i=function(o){var l,c,d,h,v,b,S;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],b=0,S=(c=Object.keys(o).sort((function(_,T){return _-T}))).length;b<S;b++)l=c[b],d.length>=100&&(v+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(h=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),d.push("<"+l+"><"+h+">"));return d.length&&(v+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(l){var c=l.font,d=l.out,h=l.newObject,v=l.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var b=c.metadata.Unicode.widths,S=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),_="",T=0;T<S.length;T++)_+=String.fromCharCode(S[T]);var k=h();v({data:_,addLength1:!0,objectId:k}),d("endobj");var I=h();v({data:i(c.metadata.toUnicode),addLength1:!0,objectId:I}),d("endobj");var C=h();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Rc(c.fontName)),d("/FontFile2 "+k+" 0 R"),d("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),d("/Flags "+c.metadata.flags),d("/StemV "+c.metadata.stemV),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d(">>"),d("endobj");var R=h();d("<<"),d("/Type /Font"),d("/BaseFont /"+Rc(c.fontName)),d("/FontDescriptor "+C+" 0 R"),d("/W "+t.API.PDFObject.convert(b)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+c.encoding+")"),d(">>"),d(">>"),d("endobj"),c.objectNumber=h(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+I+" 0 R"),d("/BaseFont /"+Rc(c.fontName)),d("/Encoding /"+c.encoding),d("/DescendantFonts ["+R+" 0 R]"),d(">>"),d("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(l){var c=l.font,d=l.out,h=l.newObject,v=l.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var b=c.metadata.rawData,S="",_=0;_<b.length;_++)S+=String.fromCharCode(b[_]);var T=h();v({data:S,addLength1:!0,objectId:T}),d("endobj");var k=h();v({data:i(c.metadata.toUnicode),addLength1:!0,objectId:k}),d("endobj");var I=h();d("<<"),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d("/StemV "+c.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+T+" 0 R"),d("/Flags 96"),d("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),d("/FontName /"+Rc(c.fontName)),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d(">>"),d("endobj"),c.objectNumber=h();for(var C=0;C<c.metadata.hmtx.widths.length;C++)c.metadata.hmtx.widths[C]=parseInt(c.metadata.hmtx.widths[C]*(1e3/c.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Rc(c.fontName)+"/FontDescriptor "+I+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),d("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var l,c=o.text||"",d=o.x,h=o.y,v=o.options||{},b=o.mutex||{},S=b.pdfEscape,_=b.activeFontKey,T=b.fonts,k=_,I="",C=0,R="",L=T[k].encoding;if(T[k].encoding!=="Identity-H")return{text:c,x:d,y:h,options:v,mutex:b};for(R=c,k=_,Array.isArray(c)&&(R=c[0]),C=0;C<R.length;C+=1)T[k].metadata.hasOwnProperty("cmap")&&(l=T[k].metadata.cmap.unicode.codeMap[R[C].charCodeAt(0)]),l||R[C].charCodeAt(0)<256&&T[k].metadata.hasOwnProperty("Unicode")?I+=R[C]:I+="";var O="";return parseInt(k.slice(1))<14||L==="WinAnsiEncoding"?O=S(I,k).split("").map((function(z){return z.charCodeAt(0).toString(16)})).join(""):L==="Identity-H"&&(O=n(I,T[k])),b.isHex=!0,{text:O,x:d,y:h,options:v,mutex:b}};e.events.push(["postProcessText",function(o){var l=o.text||"",c=[],d={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var h=0;for(h=0;h<l.length;h+=1)Array.isArray(l[h])&&l[h].length===3?c.push([a(Object.assign({},d,{text:l[h][0]})).text,l[h][1],l[h][2]]):c.push(a(Object.assign({},d,{text:l[h]})).text);o.text=c}else o.text=a(Object.assign({},d,{text:l})).text}])})(Tt),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return e.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Tt.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var a,o,l,c,d,h,v,b=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],T={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},I=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,L=0;this.__bidiEngine__={};var O=function(F){var j=F.charCodeAt(),ne=j>>8,ie=k[ne];return ie!==void 0?b[256*ie+(255&j)]:ne===252||ne===253?"AL":C.test(ne)?"L":ne===8?"R":"N"},z=function(F){for(var j,ne=0;ne<F.length;ne++){if((j=O(F.charAt(ne)))==="L")return!1;if(j==="R")return!0}return!1},W=function(F,j,ne,ie){var be,U,$,re,oe=j[ie];switch(oe){case"L":case"R":R=!1;break;case"N":case"AN":break;case"EN":R&&(oe="AN");break;case"AL":R=!0,oe="R";break;case"WS":oe="N";break;case"CS":ie<1||ie+1>=j.length||(be=ne[ie-1])!=="EN"&&be!=="AN"||(U=j[ie+1])!=="EN"&&U!=="AN"?oe="N":R&&(U="AN"),oe=U===be?U:"N";break;case"ES":oe=(be=ie>0?ne[ie-1]:"B")==="EN"&&ie+1<j.length&&j[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&ne[ie-1]==="EN"){oe="EN";break}if(R){oe="N";break}for($=ie+1,re=j.length;$<re&&j[$]==="ET";)$++;oe=$<re&&j[$]==="EN"?"EN":"N";break;case"NSM":if(l&&!c){for(re=j.length,$=ie+1;$<re&&j[$]==="NSM";)$++;if($<re){var pe=F[ie],_e=pe>=1425&&pe<=2303||pe===64286;if(be=j[$],_e&&(be==="R"||be==="AL")){oe="R";break}}}oe=ie<1||(be=j[ie-1])==="B"?"N":ne[ie-1];break;case"B":R=!1,a=!0,oe=L;break;case"S":o=!0,oe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"BN":oe="N"}return oe},B=function(F,j,ne){var ie=F.split("");return ne&&q(ie,ne,{hiLevel:L}),ie.reverse(),j&&j.reverse(),ie.join("")},q=function(F,j,ne){var ie,be,U,$,re,oe=-1,pe=F.length,_e=0,D=[],H=L?_:S,K=[];for(R=!1,a=!1,o=!1,be=0;be<pe;be++)K[be]=O(F[be]);for(U=0;U<pe;U++){if(re=_e,D[U]=W(F,K,D,U),ie=240&(_e=H[re][T[D[U]]]),_e&=15,j[U]=$=H[_e][5],ie>0)if(ie===16){for(be=oe;be<U;be++)j[be]=1;oe=-1}else oe=-1;if(H[_e][6])oe===-1&&(oe=U);else if(oe>-1){for(be=oe;be<U;be++)j[be]=$;oe=-1}K[U]==="B"&&(j[U]=0),ne.hiLevel|=$}o&&(function(Z,ae,de){for(var se=0;se<de;se++)if(Z[se]==="S"){ae[se]=L;for(var he=se-1;he>=0&&Z[he]==="WS";he--)ae[he]=L}})(K,j,pe)},ee=function(F,j,ne,ie,be){if(!(be.hiLevel<F)){if(F===1&&L===1&&!a)return j.reverse(),void(ne&&ne.reverse());for(var U,$,re,oe,pe=j.length,_e=0;_e<pe;){if(ie[_e]>=F){for(re=_e+1;re<pe&&ie[re]>=F;)re++;for(oe=_e,$=re-1;oe<$;oe++,$--)U=j[oe],j[oe]=j[$],j[$]=U,ne&&(U=ne[oe],ne[oe]=ne[$],ne[$]=U);_e=re}_e++}}},ue=function(F,j,ne){var ie=F.split(""),be={hiLevel:L};return ne||(ne=[]),q(ie,ne,be),(function(U,$,re){if(re.hiLevel!==0&&v)for(var oe,pe=0;pe<U.length;pe++)$[pe]===1&&(oe=I.indexOf(U[pe]))>=0&&(U[pe]=I[oe+1])})(ie,ne,be),ee(2,ie,j,ne,be),ee(1,ie,j,ne,be),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(F,j,ne){if((function(be,U){if(U)for(var $=0;$<be.length;$++)U[$]=$;c===void 0&&(c=z(be)),h===void 0&&(h=z(be))})(F,j),l||!d||h)if(l&&d&&c^h)L=c?1:0,F=B(F,j,ne);else if(!l&&d&&h)L=c?1:0,F=ue(F,j,ne),F=B(F,j);else if(!l||c||d||h){if(l&&!d&&c^h)F=B(F,j),c?(L=0,F=ue(F,j,ne)):(L=1,F=ue(F,j,ne),F=B(F,j));else if(l&&c&&!d&&h)L=1,F=ue(F,j,ne),F=B(F,j);else if(!l&&!d&&c^h){var ie=v;c?(L=1,F=ue(F,j,ne),L=0,v=!1,F=ue(F,j,ne),v=ie):(L=0,F=ue(F,j,ne),F=B(F,j),L=1,v=!1,F=ue(F,j,ne),v=ie,F=B(F,j))}}else L=0,F=ue(F,j,ne);else L=c?1:0,F=ue(F,j,ne);return F},this.__bidiEngine__.setOptions=function(F){F&&(l=F.isInputVisual,d=F.isOutputVisual,c=F.isInputRtl,h=F.isOutputRtl,v=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var a=i.text,o=(i.x,i.y,i.options||{}),l=(i.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(l=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?l.push([n.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):l.push([n.doBidiReorder(a[c])]);i.text=l}else i.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])})(Tt),Tt.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new kl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new vR(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new iR(this.contents),this.head=new sR(this),this.name=new cR(this),this.cmap=new h5(this),this.toUnicode={},this.hhea=new aR(this),this.maxp=new dR(this),this.hmtx=new fR(this),this.post=new lR(this),this.os2=new oR(this),this.loca=new gR(this),this.glyf=new hR(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,i,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,c,d,h;for(h=[],l=0,c=(d=this.bbox).length;l<c;l++)e=d[l],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),(32768&(n=a>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,i){var a,o,l,c;for(l=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/n)||0;return l*(n/1e3)},t.prototype.lineHeight=function(e,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t})();var fa,kl=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,i;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var n,i,a;for(a=[],n=0,i=e.length;0<=i?n<i:n>i;n=0<=i?++n:--n)a.push(this.writeByte(e.charCodeAt(n)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,i,a,o,l,c,d;return e=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),d=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^o)+65536*(255^l)+256*(255^c)+(255^d)+1):72057594037927940*e+281474976710656*n+1099511627776*i+4294967296*a+16777216*o+65536*l+256*c+d},t.prototype.writeLongLong=function(e){var n,i;return n=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,i;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(e){var n,i,a,o;for(o=[],i=0,a=e.length;i<a;i++)n=e[i],o.push(this.writeByte(n));return o},t})(),iR=(function(){var t;function e(n){var i,a,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(n){var i,a,o,l,c,d,h,v,b,S,_,T,k;for(k in _=Object.keys(n).length,d=Math.log(2),b=16*Math.floor(Math.log(_)/d),l=Math.floor(b/d),v=16*_-b,(a=new kl).writeInt(this.scalarType),a.writeShort(_),a.writeShort(b),a.writeShort(l),a.writeShort(v),o=16*_,h=a.pos+o,c=null,T=[],n)for(S=n[k],a.writeString(k),a.writeInt(t(S)),a.writeInt(h),a.writeInt(S.length),T=T.concat(S),k==="head"&&(c=h),h+=S.length;h%4;)T.push(0),h++;return a.write(T),i=2981146554-t(a.data),a.pos=c+8,a.writeUInt32(i),a.data},t=function(n){var i,a,o,l;for(n=p5.call(n);n.length%4;)n.push(0);for(o=new kl(n),a=0,i=0,l=n.length;i<l;i=i+=4)a+=o.readUInt32();return 4294967295&a},e})(),rR={}.hasOwnProperty,$a=function(t,e){for(var n in e)rR.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};fa=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var sR=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,fa),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new kl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e})(),_2=(function(){function t(e,n){var i,a,o,l,c,d,h,v,b,S,_,T,k,I,C,R,L;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=e.readByte();break;case 4:for(_=e.readUInt16(),S=_/2,e.pos+=6,o=(function(){var O,z;for(z=[],d=O=0;0<=S?O<S:O>S;d=0<=S?++O:--O)z.push(e.readUInt16());return z})(),e.pos+=2,k=(function(){var O,z;for(z=[],d=O=0;0<=S?O<S:O>S;d=0<=S?++O:--O)z.push(e.readUInt16());return z})(),h=(function(){var O,z;for(z=[],d=O=0;0<=S?O<S:O>S;d=0<=S?++O:--O)z.push(e.readUInt16());return z})(),v=(function(){var O,z;for(z=[],d=O=0;0<=S?O<S:O>S;d=0<=S?++O:--O)z.push(e.readUInt16());return z})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var O,z;for(z=[],d=O=0;0<=a?O<a:O>a;d=0<=a?++O:--O)z.push(e.readUInt16());return z})(),d=C=0,L=o.length;C<L;d=++C)for(I=o[d],i=R=T=k[d];T<=I?R<=I:R>=I;i=T<=I?++R:--R)v[d]===0?l=i+h[d]:(l=c[v[d]/2+(i-T)-(S-d)]||0)!==0&&(l+=h[d]),this.codeMap[i]=65535&l}e.pos=b}return t.encode=function(e,n){var i,a,o,l,c,d,h,v,b,S,_,T,k,I,C,R,L,O,z,W,B,q,ee,ue,F,j,ne,ie,be,U,$,re,oe,pe,_e,D,H,K,Z,ae,de,se,he,Ae,Me,Ke;switch(ie=new kl,l=Object.keys(e).sort((function(Ye,st){return Ye-st})),n){case"macroman":for(k=0,I=(function(){var Ye=[];for(T=0;T<256;++T)Ye.push(0);return Ye})(),R={0:0},o={},be=0,oe=l.length;be<oe;be++)R[he=e[a=l[be]]]==null&&(R[he]=++k),o[a]={old:e[a],new:R[e[a]]},I[a]=R[e[a]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(I),{charMap:o,subtable:ie.data,maxGlyphID:k+1};case"unicode":for(j=[],b=[],L=0,R={},i={},C=h=null,U=0,pe=l.length;U<pe;U++)R[z=e[a=l[U]]]==null&&(R[z]=++L),i[a]={old:z,new:R[z]},c=R[z]-a,C!=null&&c===h||(C&&b.push(C),j.push(a),h=c),C=a;for(C&&b.push(C),b.push(65535),j.push(65535),ue=2*(ee=j.length),q=2*Math.pow(Math.log(ee)/Math.LN2,2),S=Math.log(q/2)/Math.LN2,B=2*ee-q,d=[],W=[],_=[],T=$=0,_e=j.length;$<_e;T=++$){if(F=j[T],v=b[T],F===65535){d.push(0),W.push(0);break}if(F-(ne=i[F].new)>=32768)for(d.push(0),W.push(2*(_.length+ee-T)),a=re=F;F<=v?re<=v:re>=v;a=F<=v?++re:--re)_.push(i[a].new);else d.push(ne-F),W.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*ee+2*_.length),ie.writeUInt16(0),ie.writeUInt16(ue),ie.writeUInt16(q),ie.writeUInt16(S),ie.writeUInt16(B),de=0,D=b.length;de<D;de++)a=b[de],ie.writeUInt16(a);for(ie.writeUInt16(0),se=0,H=j.length;se<H;se++)a=j[se],ie.writeUInt16(a);for(Ae=0,K=d.length;Ae<K;Ae++)c=d[Ae],ie.writeUInt16(c);for(Me=0,Z=W.length;Me<Z;Me++)O=W[Me],ie.writeUInt16(O);for(Ke=0,ae=_.length;Ke<ae;Ke++)k=_[Ke],ie.writeUInt16(k);return{charMap:i,subtable:ie.data,maxGlyphID:L+1}}},t})(),h5=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,fa),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,a,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)i=new _2(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var a,o;return i==null&&(i="macroman"),a=_2.encode(n,i),(o=new kl).writeUInt16(0),o.writeUInt16(1),a.table=o.data.concat(a.subtable),a},e})(),aR=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,fa),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),oR=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,fa),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var i,a;for(a=[],i=0;i<10;++i)a.push(n.readByte());return a})(),this.charRange=(function(){var i,a;for(a=[],i=0;i<4;++i)a.push(n.readInt());return a})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var i,a;for(a=[],i=0;i<2;i=++i)a.push(n.readInt());return a})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),lR=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,fa),e.prototype.tag="post",e.prototype.parse=function(n){var i,a,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var l;for(a=n.readUInt16(),this.glyphNameIndex=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)i=n.readByte(),o.push(this.names.push(n.readString(i)));return o;case 151552:return a=n.readUInt16(),this.offsets=n.read(a);case 196608:break;case 262144:return this.map=(function(){var c,d,h;for(h=[],l=c=0,d=this.file.maxp.numGlyphs;0<=d?c<d:c>d;l=0<=d?++c:--c)h.push(n.readUInt32());return h}).call(this)}},e})(),uR=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},cR=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,fa),e.prototype.tag="name",e.prototype.parse=function(n){var i,a,o,l,c,d,h,v,b,S,_;for(n.pos=this.offset,n.readShort(),i=n.readShort(),d=n.readShort(),a=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)a.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+d+n.readShort()});for(h={},l=b=0,S=a.length;b<S;l=++b)o=a[l],n.pos=o.offset,v=n.readString(o.length),c=new uR(v,o),h[_=o.nameID]==null&&(h[_]=[]),h[o.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e})(),dR=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,fa),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),fR=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,fa),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,a,o,l,c,d,h;for(n.pos=this.offset,this.metrics=[],i=0,d=this.file.hhea.numberOfMetrics;0<=d?i<d:i>d;i=0<=d?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var v,b;for(b=[],i=v=0;0<=o?v<o:v>o;i=0<=o?++v:--v)b.push(n.readInt16());return b})(),this.widths=(function(){var v,b,S,_;for(_=[],v=0,b=(S=this.metrics).length;v<b;v++)l=S[v],_.push(l.advance);return _}).call(this),a=this.widths[this.widths.length-1],h=[],i=c=0;0<=o?c<o:c>o;i=0<=o?++c:--c)h.push(this.widths.push(a));return h},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),p5=[].slice,hR=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,fa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,a,o,l,c,d,h,v,b,S;return n in this.cache?this.cache[n]:(l=this.file.loca,i=this.file.contents,a=l.indexOf(n),(o=l.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+a,c=(d=new kl(i.read(o))).readShort(),v=d.readShort(),S=d.readShort(),h=d.readShort(),b=d.readShort(),this.cache[n]=c===-1?new mR(d,v,S,h,b):new pR(d,c,v,S,h,b),this.cache[n]))},e.prototype.encode=function(n,i,a){var o,l,c,d,h;for(c=[],l=[],d=0,h=i.length;d<h;d++)o=n[i[d]],l.push(c.length),o&&(c=c.concat(o.encode(a)));return l.push(c.length),{table:c,offsets:l}},e})(),pR=(function(){function t(e,n,i,a,o,l){this.raw=e,this.numberOfContours=n,this.xMin=i,this.yMin=a,this.xMax=o,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),mR=(function(){function t(e,n,i,a,o){var l,c;for(this.raw=e,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;c=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&c;)l.pos+=1&c?4:2,128&c?l.pos+=8:64&c?l.pos+=4:8&c&&(l.pos+=2)}return t.prototype.encode=function(){var e,n,i;for(n=new kl(p5.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),gR=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,fa),e.prototype.tag="loca",e.prototype.parse=function(n){var i,a;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=2)l.push(2*n.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=4)l.push(n.readUInt32());return l}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var a=new Uint32Array(this.offsets.length),o=0,l=0,c=0;c<a.length;++c)if(a[c]=o,l<i.length&&i[l]==c){++l,a[c]=o;var d=this.offsets[c],h=this.offsets[c+1]-d;h>0&&(o+=h)}for(var v=new Array(4*a.length),b=0;b<a.length;++b)v[4*b+3]=255&a[b],v[4*b+2]=(65280&a[b])>>8,v[4*b+1]=(16711680&a[b])>>16,v[4*b]=(4278190080&a[b])>>24;return v},e})(),vR=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,i,a,o;for(n in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)i=o[n],e[n]=a[i];return e},t.prototype.glyphsFor=function(e){var n,i,a,o,l,c,d;for(a={},l=0,c=e.length;l<c;l++)a[o=e[l]]=this.font.glyf.glyphFor(o);for(o in n=[],a)(i=a[o])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(o in d=this.glyphsFor(n))i=d[o],a[o]=i;return a},t.prototype.encode=function(e,n){var i,a,o,l,c,d,h,v,b,S,_,T,k,I,C;for(a in i=h5.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),_={0:0},C=i.charMap)_[(d=C[a]).old]=d.new;for(T in S=i.maxGlyphID,l)T in _||(_[T]=S++);return v=(function(R){var L,O;for(L in O={},R)O[R[L]]=L;return O})(_),b=Object.keys(v).sort((function(R,L){return R-L})),k=(function(){var R,L,O;for(O=[],R=0,L=b.length;R<L;R++)c=b[R],O.push(v[c]);return O})(),o=this.font.glyf.encode(l,k,_),h=this.font.loca.encode(o.offsets,k),I={cmap:this.font.cmap.raw(),glyf:o.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(I["OS/2"]=this.font.os2.raw()),this.font.directory.encode(I)},t})();Tt.API.PDFObject=(function(){var t;function e(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},e.convert=function(n){var i,a,o,l;if(Array.isArray(n))return"["+(function(){var c,d,h;for(h=[],c=0,d=n.length;c<d;c++)i=n[c],h.push(e.convert(i));return h})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in o=["<<"],n)l=n[a],o.push("/"+a+" "+e.convert(l));return o.push(">>"),o.join(`
`)}return""+n},e})();const yR=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Wk,AcroFormAppearance:ft,AcroFormButton:Oi,AcroFormCheckBox:qd,AcroFormChoiceField:bu,AcroFormComboBox:wu,AcroFormEditBox:Fd,AcroFormListBox:xu,AcroFormPasswordField:zd,AcroFormPushButton:Bd,AcroFormRadioButton:Su,AcroFormTextField:Tl,GState:Qd,ShadingPattern:Sl,TilingPattern:yu,default:Tt,jsPDF:Tt},Symbol.toStringTag,{value:"Module"}));var sh={exports:{}};const bR=Ux(yR);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.1
 *
 *               Copyright (c) 2023 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var N2=sh.exports,A2;function xR(){return A2||(A2=1,(function(t,e){(function(i,a){t.exports=a((function(){try{return bR}catch{}})())})(typeof globalThis<"u"?globalThis:typeof N2<"u"?N2:typeof window<"u"?window:typeof self<"u"?self:Ox,function(n){return(function(){var i={662:(function(c,d){var h=this&&this.__extends||(function(){var S=function(_,T){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,I){k.__proto__=I}||function(k,I){for(var C in I)Object.prototype.hasOwnProperty.call(I,C)&&(k[C]=I[C])},S(_,T)};return function(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");S(_,T);function k(){this.constructor=_}_.prototype=T===null?Object.create(T):(k.prototype=T.prototype,new k)}})();Object.defineProperty(d,"__esModule",{value:!0}),d.CellHookData=d.HookData=void 0;var v=(function(){function S(_,T,k){this.table=T,this.pageNumber=T.pageNumber,this.pageCount=this.pageNumber,this.settings=T.settings,this.cursor=k,this.doc=_.getDocument()}return S})();d.HookData=v;var b=(function(S){h(_,S);function _(T,k,I,C,R,L){var O=S.call(this,T,k,L)||this;return O.cell=I,O.row=C,O.column=R,O.section=C.section,O}return _})(v);d.CellHookData=b}),790:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0});var v=h(148),b=h(938),S=h(323),_=h(587),T=h(49),k=h(858);function I(C){C.API.autoTable=function(){for(var R=[],L=0;L<arguments.length;L++)R[L]=arguments[L];var O;R.length===1?O=R[0]:(console.error("Use of deprecated autoTable initiation"),O=R[2]||{},O.columns=R[0],O.body=R[1]);var z=(0,_.parseInput)(this,O),W=(0,k.createTable)(this,z);return(0,T.drawTable)(this,W),this},C.API.lastAutoTable=!1,C.API.previousAutoTable=!1,C.API.autoTable.previous=!1,C.API.autoTableText=function(R,L,O,z){(0,b.default)(R,L,O,z,this)},C.API.autoTableSetDefaults=function(R){return S.DocHandler.setDefaults(R,this),this},C.autoTableSetDefaults=function(R,L){S.DocHandler.setDefaults(R,L)},C.API.autoTableHtmlToJson=function(R,L){if(L===void 0&&(L=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var O=new S.DocHandler(this),z=(0,v.parseHtml)(O,R,window,L,!1),W=z.head,B=z.body,q=W[0].map(function(ee){return ee.content});return{columns:q,rows:B,data:B}},C.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var R=this.lastAutoTable;return R&&R.finalY?R.finalY:0},C.API.autoTableAddPageContent=function(R){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),C.API.autoTable.globalDefaults||(C.API.autoTable.globalDefaults={}),C.API.autoTable.globalDefaults.addPageContent=R,this},C.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}d.default=I}),938:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0});function h(v,b,S,_,T){_=_||{};var k=1.15,I=T.internal.scaleFactor,C=T.internal.getFontSize()/I,R=T.getLineHeightFactor?T.getLineHeightFactor():k,L=C*R,O=/\r\n|\r|\n/g,z="",W=1;if((_.valign==="middle"||_.valign==="bottom"||_.halign==="center"||_.halign==="right")&&(z=typeof v=="string"?v.split(O):v,W=z.length||1),S+=C*(2-k),_.valign==="middle"?S-=W/2*L:_.valign==="bottom"&&(S-=W*L),_.halign==="center"||_.halign==="right"){var B=C;if(_.halign==="center"&&(B*=.5),z&&W>=1){for(var q=0;q<z.length;q++)T.text(z[q],b-T.getStringUnitWidth(z[q])*B,S),S+=L;return T}b-=T.getStringUnitWidth(v)*B}return _.halign==="justify"?T.text(v,b,S,{maxWidth:_.maxWidth||100,align:"justify"}):T.text(v,b,S),T}d.default=h}),200:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.getPageAvailableWidth=d.parseSpacing=d.getFillStyle=d.addTableBorder=d.getStringWidth=void 0;function h(T,k,I){I.applyStyles(k,!0);var C=Array.isArray(T)?T:[T],R=C.map(function(L){return I.getTextWidth(L)}).reduce(function(L,O){return Math.max(L,O)},0);return R}d.getStringWidth=h;function v(T,k,I,C){var R=k.settings.tableLineWidth,L=k.settings.tableLineColor;T.applyStyles({lineWidth:R,lineColor:L});var O=b(R,!1);O&&T.rect(I.x,I.y,k.getWidth(T.pageSize().width),C.y-I.y,O)}d.addTableBorder=v;function b(T,k){var I=T>0,C=k||k===0;return I&&C?"DF":I?"S":C?"F":null}d.getFillStyle=b;function S(T,k){var I,C,R,L;if(T=T||k,Array.isArray(T)){if(T.length>=4)return{top:T[0],right:T[1],bottom:T[2],left:T[3]};if(T.length===3)return{top:T[0],right:T[1],bottom:T[2],left:T[1]};if(T.length===2)return{top:T[0],right:T[1],bottom:T[0],left:T[1]};T.length===1?T=T[0]:T=k}return typeof T=="object"?(typeof T.vertical=="number"&&(T.top=T.vertical,T.bottom=T.vertical),typeof T.horizontal=="number"&&(T.right=T.horizontal,T.left=T.horizontal),{left:(I=T.left)!==null&&I!==void 0?I:k,top:(C=T.top)!==null&&C!==void 0?C:k,right:(R=T.right)!==null&&R!==void 0?R:k,bottom:(L=T.bottom)!==null&&L!==void 0?L:k}):(typeof T!="number"&&(T=k),{top:T,right:T,bottom:T,left:T})}d.parseSpacing=S;function _(T,k){var I=S(k.settings.margin,0);return T.pageSize().width-(I.left+I.right)}d.getPageAvailableWidth=_}),913:(function(c,d){var h=this&&this.__extends||(function(){var _=function(T,k){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,C){I.__proto__=C}||function(I,C){for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(I[R]=C[R])},_(T,k)};return function(T,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");_(T,k);function I(){this.constructor=T}T.prototype=k===null?Object.create(k):(I.prototype=k.prototype,new I)}})();Object.defineProperty(d,"__esModule",{value:!0}),d.getTheme=d.defaultStyles=d.HtmlRowInput=void 0;var v=(function(_){h(T,_);function T(k){var I=_.call(this)||this;return I._element=k,I}return T})(Array);d.HtmlRowInput=v;function b(_){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/_,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}d.defaultStyles=b;function S(_){var T={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return T[_]}d.getTheme=S}),259:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.parseCss=void 0;var v=h(200);function b(I,C,R,L,O){var z={},W=1.3333333333333333,B=_(C,function(oe){return O.getComputedStyle(oe).backgroundColor});B!=null&&(z.fillColor=B);var q=_(C,function(oe){return O.getComputedStyle(oe).color});q!=null&&(z.textColor=q);var ee=k(L,R);ee&&(z.cellPadding=ee);var ue="borderTopColor",F=W*R,j=L.borderTopWidth;if(L.borderBottomWidth===j&&L.borderRightWidth===j&&L.borderLeftWidth===j){var ne=(parseFloat(j)||0)/F;ne&&(z.lineWidth=ne)}else z.lineWidth={top:(parseFloat(L.borderTopWidth)||0)/F,right:(parseFloat(L.borderRightWidth)||0)/F,bottom:(parseFloat(L.borderBottomWidth)||0)/F,left:(parseFloat(L.borderLeftWidth)||0)/F},z.lineWidth.top||(z.lineWidth.right?ue="borderRightColor":z.lineWidth.bottom?ue="borderBottomColor":z.lineWidth.left&&(ue="borderLeftColor"));console.log(z.lineWidth);var ie=_(C,function(oe){return O.getComputedStyle(oe)[ue]});ie!=null&&(z.lineColor=ie);var be=["left","right","center","justify"];be.indexOf(L.textAlign)!==-1&&(z.halign=L.textAlign),be=["middle","bottom","top"],be.indexOf(L.verticalAlign)!==-1&&(z.valign=L.verticalAlign);var U=parseInt(L.fontSize||"");isNaN(U)||(z.fontSize=U/W);var $=S(L);$&&(z.fontStyle=$);var re=(L.fontFamily||"").toLowerCase();return I.indexOf(re)!==-1&&(z.font=re),z}d.parseCss=b;function S(I){var C="";return(I.fontWeight==="bold"||I.fontWeight==="bolder"||parseInt(I.fontWeight)>=700)&&(C="bold"),(I.fontStyle==="italic"||I.fontStyle==="oblique")&&(C+="italic"),C}function _(I,C){var R=T(I,C);if(!R)return null;var L=R.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!L||!Array.isArray(L))return null;var O=[parseInt(L[1]),parseInt(L[2]),parseInt(L[3])],z=parseInt(L[4]);return z===0||isNaN(O[0])||isNaN(O[1])||isNaN(O[2])?null:O}function T(I,C){var R=C(I);return R==="rgba(0, 0, 0, 0)"||R==="transparent"||R==="initial"||R==="inherit"?I.parentElement==null?null:T(I.parentElement,C):R}function k(I,C){var R=[I.paddingTop,I.paddingRight,I.paddingBottom,I.paddingLeft],L=96/(72/C),O=(parseInt(I.lineHeight)-parseInt(I.fontSize))/C/2,z=R.map(function(B){return parseInt(B||"0")/L}),W=(0,v.parseSpacing)(z,0);return O>W.top&&(W.top=O),O>W.bottom&&(W.bottom=O),W}}),323:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.DocHandler=void 0;var h={},v=(function(){function b(S){this.jsPDFDocument=S,this.userStyles={textColor:S.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:S.internal.getFontSize(),fontStyle:S.internal.getFont().fontStyle,font:S.internal.getFont().fontName,lineWidth:S.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:S.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return b.setDefaults=function(S,_){_===void 0&&(_=null),_?_.__autoTableDocumentDefaults=S:h=S},b.unifyColor=function(S){return Array.isArray(S)?S:typeof S=="number"?[S,S,S]:typeof S=="string"?[S]:null},b.prototype.applyStyles=function(S,_){var T,k,I;_===void 0&&(_=!1),S.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(S.fontStyle);var C=this.jsPDFDocument.internal.getFont(),R=C.fontStyle,L=C.fontName;if(S.font&&(L=S.font),S.fontStyle){R=S.fontStyle;var O=this.getFontList()[L];O&&O.indexOf(R)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(O[0]),R=O[0])}if(this.jsPDFDocument.setFont(L,R),S.fontSize&&this.jsPDFDocument.setFontSize(S.fontSize),!_){var z=b.unifyColor(S.fillColor);z&&(T=this.jsPDFDocument).setFillColor.apply(T,z),z=b.unifyColor(S.textColor),z&&(k=this.jsPDFDocument).setTextColor.apply(k,z),z=b.unifyColor(S.lineColor),z&&(I=this.jsPDFDocument).setDrawColor.apply(I,z),typeof S.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(S.lineWidth)}},b.prototype.splitTextToSize=function(S,_,T){return this.jsPDFDocument.splitTextToSize(S,_,T)},b.prototype.rect=function(S,_,T,k,I){return this.jsPDFDocument.rect(S,_,T,k,I)},b.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},b.prototype.getTextWidth=function(S){return this.jsPDFDocument.getTextWidth(S)},b.prototype.getDocument=function(){return this.jsPDFDocument},b.prototype.setPage=function(S){this.jsPDFDocument.setPage(S)},b.prototype.addPage=function(){return this.jsPDFDocument.addPage()},b.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},b.prototype.getGlobalOptions=function(){return h||{}},b.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},b.prototype.pageSize=function(){var S=this.jsPDFDocument.internal.pageSize;return S.width==null&&(S={width:S.getWidth(),height:S.getHeight()}),S},b.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},b.prototype.getLineHeightFactor=function(){var S=this.jsPDFDocument;return S.getLineHeightFactor?S.getLineHeightFactor():1.15},b.prototype.getLineHeight=function(S){return S/this.scaleFactor()*this.getLineHeightFactor()},b.prototype.pageNumber=function(){var S=this.jsPDFDocument.internal.getCurrentPageInfo();return S?S.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},b})();d.DocHandler=v}),148:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.parseHtml=void 0;var v=h(259),b=h(913);function S(k,I,C,R,L){var O,z;R===void 0&&(R=!1),L===void 0&&(L=!1);var W;typeof I=="string"?W=C.document.querySelector(I):W=I;var B=Object.keys(k.getFontList()),q=k.scaleFactor(),ee=[],ue=[],F=[];if(!W)return console.error("Html table could not be found with input: ",I),{head:ee,body:ue,foot:F};for(var j=0;j<W.rows.length;j++){var ne=W.rows[j],ie=(z=(O=ne==null?void 0:ne.parentElement)===null||O===void 0?void 0:O.tagName)===null||z===void 0?void 0:z.toLowerCase(),be=_(B,q,C,ne,R,L);be&&(ie==="thead"?ee.push(be):ie==="tfoot"?F.push(be):ue.push(be))}return{head:ee,body:ue,foot:F}}d.parseHtml=S;function _(k,I,C,R,L,O){for(var z=new b.HtmlRowInput(R),W=0;W<R.cells.length;W++){var B=R.cells[W],q=C.getComputedStyle(B);if(L||q.display!=="none"){var ee=void 0;O&&(ee=(0,v.parseCss)(k,B,I,q,C)),z.push({rowSpan:B.rowSpan,colSpan:B.colSpan,styles:ee,_element:B,content:T(B)})}}var ue=C.getComputedStyle(R);if(z.length>0&&(L||ue.display!=="none"))return z}function T(k){var I=k.cloneNode(!0);return I.innerHTML=I.innerHTML.replace(/\n/g,"").replace(/ +/g," "),I.innerHTML=I.innerHTML.split(/<br.*?>/).map(function(C){return C.trim()}).join(`
`),I.innerText||I.textContent||""}}),587:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.parseInput=void 0;var v=h(148),b=h(360),S=h(200),_=h(323),T=h(291);function k(W,B){var q=new _.DocHandler(W),ee=q.getDocumentOptions(),ue=q.getGlobalOptions();(0,T.default)(q,ue,ee,B);var F=(0,b.assign)({},ue,ee,B),j;typeof window<"u"&&(j=window);var ne=I(ue,ee,B),ie=C(ue,ee,B),be=R(q,F),U=O(q,F,j);return{id:B.tableId,content:U,hooks:ie,styles:ne,settings:be}}d.parseInput=k;function I(W,B,q){for(var ee={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},ue=function(ie){if(ie==="columnStyles"){var be=W[ie],U=B[ie],$=q[ie];ee.columnStyles=(0,b.assign)({},be,U,$)}else{var re=[W,B,q],oe=re.map(function(pe){return pe[ie]||{}});ee[ie]=(0,b.assign)({},oe[0],oe[1],oe[2])}},F=0,j=Object.keys(ee);F<j.length;F++){var ne=j[F];ue(ne)}return ee}function C(W,B,q){for(var ee=[W,B,q],ue={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},F=0,j=ee;F<j.length;F++){var ne=j[F];ne.didParseCell&&ue.didParseCell.push(ne.didParseCell),ne.willDrawCell&&ue.willDrawCell.push(ne.willDrawCell),ne.didDrawCell&&ue.didDrawCell.push(ne.didDrawCell),ne.willDrawPage&&ue.willDrawPage.push(ne.willDrawPage),ne.didDrawPage&&ue.didDrawPage.push(ne.didDrawPage)}return ue}function R(W,B){var q,ee,ue,F,j,ne,ie,be,U,$,re,oe,pe=(0,S.parseSpacing)(B.margin,40/W.scaleFactor()),_e=(q=L(W,B.startY))!==null&&q!==void 0?q:pe.top,D;B.showFoot===!0?D="everyPage":B.showFoot===!1?D="never":D=(ee=B.showFoot)!==null&&ee!==void 0?ee:"everyPage";var H;B.showHead===!0?H="everyPage":B.showHead===!1?H="never":H=(ue=B.showHead)!==null&&ue!==void 0?ue:"everyPage";var K=(F=B.useCss)!==null&&F!==void 0?F:!1,Z=B.theme||(K?"plain":"striped"),ae=!!B.horizontalPageBreak,de=(j=B.horizontalPageBreakRepeat)!==null&&j!==void 0?j:null;return{includeHiddenHtml:(ne=B.includeHiddenHtml)!==null&&ne!==void 0?ne:!1,useCss:K,theme:Z,startY:_e,margin:pe,pageBreak:(ie=B.pageBreak)!==null&&ie!==void 0?ie:"auto",rowPageBreak:(be=B.rowPageBreak)!==null&&be!==void 0?be:"auto",tableWidth:(U=B.tableWidth)!==null&&U!==void 0?U:"auto",showHead:H,showFoot:D,tableLineWidth:($=B.tableLineWidth)!==null&&$!==void 0?$:0,tableLineColor:(re=B.tableLineColor)!==null&&re!==void 0?re:200,horizontalPageBreak:ae,horizontalPageBreakRepeat:de,horizontalPageBreakBehaviour:(oe=B.horizontalPageBreakBehaviour)!==null&&oe!==void 0?oe:"afterAllRows"}}function L(W,B){var q=W.getLastAutoTable(),ee=W.scaleFactor(),ue=W.pageNumber(),F=!1;if(q&&q.startPageNumber){var j=q.startPageNumber+q.pageNumber-1;F=j===ue}return typeof B=="number"?B:(B==null||B===!1)&&F&&(q==null?void 0:q.finalY)!=null?q.finalY+20/ee:null}function O(W,B,q){var ee=B.head||[],ue=B.body||[],F=B.foot||[];if(B.html){var j=B.includeHiddenHtml;if(q){var ne=(0,v.parseHtml)(W,B.html,q,j,B.useCss)||{};ee=ne.head||ee,ue=ne.body||ee,F=ne.foot||ee}else console.error("Cannot parse html in non browser environment")}var ie=B.columns||z(ee,ue,F);return{columns:ie,head:ee,body:ue,foot:F}}function z(W,B,q){var ee=W[0]||B[0]||q[0]||[],ue=[];return Object.keys(ee).filter(function(F){return F!=="_element"}).forEach(function(F){var j=1,ne;Array.isArray(ee)?ne=ee[parseInt(F)]:ne=ee[F],typeof ne=="object"&&!Array.isArray(ne)&&(j=(ne==null?void 0:ne.colSpan)||1);for(var ie=0;ie<j;ie++){var be=void 0;Array.isArray(ee)?be=ue.length:be=F+(ie>0?"_".concat(ie):"");var U={dataKey:be};ue.push(U)}}),ue}}),291:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0});function h(b,S,_,T){for(var k=function(L){L&&typeof L!="object"&&console.error("The options parameter should be of type object, is: "+typeof L),typeof L.extendWidth<"u"&&(L.tableWidth=L.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof L.margins<"u"&&(typeof L.margin>"u"&&(L.margin=L.margins),console.error("Use of deprecated option: margins, use margin instead.")),L.startY&&typeof L.startY!="number"&&(console.error("Invalid value for startY option",L.startY),delete L.startY),!L.didDrawPage&&(L.afterPageContent||L.beforePageContent||L.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),L.didDrawPage=function(F){b.applyStyles(b.userStyles),L.beforePageContent&&L.beforePageContent(F),b.applyStyles(b.userStyles),L.afterPageContent&&L.afterPageContent(F),b.applyStyles(b.userStyles),L.afterPageAdd&&F.pageNumber>1&&F.afterPageAdd(F),b.applyStyles(b.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(F){L[F]&&console.error('The "'.concat(F,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(F){var j=F[0],ne=F[1];L[ne]&&(console.error("Use of deprecated option ".concat(ne,". Use ").concat(j," instead")),L[j]=L[ne])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(F){var j=typeof F=="string"?F:F[0],ne=typeof F=="string"?F:F[1];typeof L[j]<"u"&&(typeof L.styles[ne]>"u"&&(L.styles[ne]=L[j]),console.error("Use of deprecated option: "+j+", use the style "+ne+" instead."))});for(var O=0,z=["styles","bodyStyles","headStyles","footStyles"];O<z.length;O++){var W=z[O];v(L[W]||{})}for(var B=L.columnStyles||{},q=0,ee=Object.keys(B);q<ee.length;q++){var ue=ee[q];v(B[ue]||{})}},I=0,C=[S,_,T];I<C.length;I++){var R=C[I];k(R)}}d.default=h;function v(b){b.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),b.minCellHeight||(b.minCellHeight=b.rowHeight)):b.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),b.cellWidth||(b.cellWidth=b.columnWidth))}}),287:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.Column=d.Cell=d.Row=d.Table=void 0;var v=h(913),b=h(662),S=h(200),_=(function(){function C(R,L){this.pageNumber=1,this.pageCount=1,this.id=R.id,this.settings=R.settings,this.styles=R.styles,this.hooks=R.hooks,this.columns=L.columns,this.head=L.head,this.body=L.body,this.foot=L.foot}return C.prototype.getHeadHeight=function(R){return this.head.reduce(function(L,O){return L+O.getMaxCellHeight(R)},0)},C.prototype.getFootHeight=function(R){return this.foot.reduce(function(L,O){return L+O.getMaxCellHeight(R)},0)},C.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},C.prototype.callCellHooks=function(R,L,O,z,W,B){for(var q=0,ee=L;q<ee.length;q++){var ue=ee[q],F=new b.CellHookData(R,this,O,z,W,B),j=ue(F)===!1;if(O.text=Array.isArray(O.text)?O.text:[O.text],j)return!1}return!0},C.prototype.callEndPageHooks=function(R,L){R.applyStyles(R.userStyles);for(var O=0,z=this.hooks.didDrawPage;O<z.length;O++){var W=z[O];W(new b.HookData(R,this,L))}},C.prototype.callWillDrawPageHooks=function(R,L){for(var O=0,z=this.hooks.willDrawPage;O<z.length;O++){var W=z[O];W(new b.HookData(R,this,L))}},C.prototype.getWidth=function(R){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var L=this.columns.reduce(function(z,W){return z+W.wrappedWidth},0);return L}else{var O=this.settings.margin;return R-O.left-O.right}},C})();d.Table=_;var T=(function(){function C(R,L,O,z,W){W===void 0&&(W=!1),this.height=0,this.raw=R,R instanceof v.HtmlRowInput&&(this.raw=R._element,this.element=R._element),this.index=L,this.section=O,this.cells=z,this.spansMultiplePages=W}return C.prototype.getMaxCellHeight=function(R){var L=this;return R.reduce(function(O,z){var W;return Math.max(O,((W=L.cells[z.index])===null||W===void 0?void 0:W.height)||0)},0)},C.prototype.hasRowSpan=function(R){var L=this;return R.filter(function(O){var z=L.cells[O.index];return z?z.rowSpan>1:!1}).length>0},C.prototype.canEntireRowFit=function(R,L){return this.getMaxCellHeight(L)<=R},C.prototype.getMinimumRowHeight=function(R,L){var O=this;return R.reduce(function(z,W){var B=O.cells[W.index];if(!B)return 0;var q=L.getLineHeight(B.styles.fontSize),ee=B.padding("vertical"),ue=ee+q;return ue>z?ue:z},0)},C})();d.Row=T;var k=(function(){function C(R,L,O){var z,W;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=L,this.section=O,this.raw=R;var B=R;R!=null&&typeof R=="object"&&!Array.isArray(R)?(this.rowSpan=R.rowSpan||1,this.colSpan=R.colSpan||1,B=(W=(z=R.content)!==null&&z!==void 0?z:R.title)!==null&&W!==void 0?W:R,R._element&&(this.raw=R._element)):(this.rowSpan=1,this.colSpan=1);var q=B!=null?""+B:"",ee=/\r\n|\r|\n/g;this.text=q.split(ee)}return C.prototype.getTextPos=function(){var R;if(this.styles.valign==="top")R=this.y+this.padding("top");else if(this.styles.valign==="bottom")R=this.y+this.height-this.padding("bottom");else{var L=this.height-this.padding("vertical");R=this.y+L/2+this.padding("top")}var O;if(this.styles.halign==="right")O=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var z=this.width-this.padding("horizontal");O=this.x+z/2+this.padding("left")}else O=this.x+this.padding("left");return{x:O,y:R}},C.prototype.getContentHeight=function(R,L){L===void 0&&(L=1.15);var O=Array.isArray(this.text)?this.text.length:1,z=this.styles.fontSize/R*L,W=O*z+this.padding("vertical");return Math.max(W,this.styles.minCellHeight)},C.prototype.padding=function(R){var L=(0,S.parseSpacing)(this.styles.cellPadding,0);return R==="vertical"?L.top+L.bottom:R==="horizontal"?L.left+L.right:L[R]},C})();d.Cell=k;var I=(function(){function C(R,L,O){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=R,this.raw=L,this.index=O}return C.prototype.getMaxCustomCellWidth=function(R){for(var L=0,O=0,z=R.allRows();O<z.length;O++){var W=z[O],B=W.cells[this.index];B&&typeof B.styles.cellWidth=="number"&&(L=Math.max(L,B.styles.cellWidth))}return L},C})();d.Column=I}),360:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.assign=void 0;function h(v,b,S,_,T){if(v==null)throw new TypeError("Cannot convert undefined or null to object");for(var k=Object(v),I=1;I<arguments.length;I++){var C=arguments[I];if(C!=null)for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(k[R]=C[R])}return k}d.assign=h}),858:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.createTable=void 0;var v=h(323),b=h(287),S=h(189),_=h(913),T=h(360);function k(W,B){var q=new v.DocHandler(W),ee=I(B,q.scaleFactor()),ue=new b.Table(B,ee);return(0,S.calculateWidths)(q,ue),q.applyStyles(q.userStyles),ue}d.createTable=k;function I(W,B){var q=W.content,ee=O(q.columns);if(q.head.length===0){var ue=R(ee,"head");ue&&q.head.push(ue)}if(q.foot.length===0){var ue=R(ee,"foot");ue&&q.foot.push(ue)}var F=W.settings.theme,j=W.styles;return{columns:ee,head:C("head",q.head,ee,j,F,B),body:C("body",q.body,ee,j,F,B),foot:C("foot",q.foot,ee,j,F,B)}}function C(W,B,q,ee,ue,F){var j={},ne=B.map(function(ie,be){for(var U=0,$={},re=0,oe=0,pe=0,_e=q;pe<_e.length;pe++){var D=_e[pe];if(j[D.index]==null||j[D.index].left===0)if(oe===0){var H=void 0;Array.isArray(ie)?H=ie[D.index-re-U]:H=ie[D.dataKey];var K={};typeof H=="object"&&!Array.isArray(H)&&(K=(H==null?void 0:H.styles)||{});var Z=z(W,D,be,ue,ee,F,K),ae=new b.Cell(H,Z,W);$[D.dataKey]=ae,$[D.index]=ae,oe=ae.colSpan-1,j[D.index]={left:ae.rowSpan-1,times:oe}}else oe--,re++;else j[D.index].left--,oe=j[D.index].times,U++}return new b.Row(ie,be,W,$)});return ne}function R(W,B){var q={};return W.forEach(function(ee){if(ee.raw!=null){var ue=L(B,ee.raw);ue!=null&&(q[ee.dataKey]=ue)}}),Object.keys(q).length>0?q:null}function L(W,B){if(W==="head"){if(typeof B=="object")return B.header||B.title||null;if(typeof B=="string"||typeof B=="number")return B}else if(W==="foot"&&typeof B=="object")return B.footer;return null}function O(W){return W.map(function(B,q){var ee,ue,F;return typeof B=="object"?F=(ue=(ee=B.dataKey)!==null&&ee!==void 0?ee:B.key)!==null&&ue!==void 0?ue:q:F=q,new b.Column(F,B,q)})}function z(W,B,q,ee,ue,F,j){var ne=(0,_.getTheme)(ee),ie;W==="head"?ie=ue.headStyles:W==="body"?ie=ue.bodyStyles:W==="foot"&&(ie=ue.footStyles);var be=(0,T.assign)({},ne.table,ne[W],ue.styles,ie),U=ue.columnStyles[B.dataKey]||ue.columnStyles[B.index]||{},$=W==="body"?U:{},re=W==="body"&&q%2===0?(0,T.assign)({},ne.alternateRow,ue.alternateRowStyles):{},oe=(0,_.defaultStyles)(F),pe=(0,T.assign)({},oe,be,re,$);return(0,T.assign)(pe,j)}}),49:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.addPage=d.drawTable=void 0;var v=h(200),b=h(287),S=h(323),_=h(360),T=h(938),k=h(435);function I(U,$){var re=$.settings,oe=re.startY,pe=re.margin,_e={x:pe.left,y:oe},D=$.getHeadHeight($.columns)+$.getFootHeight($.columns),H=oe+pe.bottom+D;if(re.pageBreak==="avoid"){var K=$.body,Z=K.reduce(function(se,he){return se+he.height},0);H+=Z}var ae=new S.DocHandler(U);(re.pageBreak==="always"||re.startY!=null&&H>ae.pageSize().height)&&(be(ae),_e.y=pe.top),$.callWillDrawPageHooks(ae,_e);var de=(0,_.assign)({},_e);$.startPageNumber=ae.pageNumber(),re.horizontalPageBreak?C(ae,$,de,_e):(ae.applyStyles(ae.userStyles),(re.showHead==="firstPage"||re.showHead==="everyPage")&&$.head.forEach(function(se){return ue(ae,$,se,_e,$.columns)}),ae.applyStyles(ae.userStyles),$.body.forEach(function(se,he){var Ae=he===$.body.length-1;ee(ae,$,se,Ae,de,_e,$.columns)}),ae.applyStyles(ae.userStyles),(re.showFoot==="lastPage"||re.showFoot==="everyPage")&&$.foot.forEach(function(se){return ue(ae,$,se,_e,$.columns)})),(0,v.addTableBorder)(ae,$,de,_e),$.callEndPageHooks(ae,_e),$.finalY=_e.y,U.lastAutoTable=$,U.previousAutoTable=$,U.autoTable&&(U.autoTable.previous=$),ae.applyStyles(ae.userStyles)}d.drawTable=I;function C(U,$,re,oe){var pe=(0,k.calculateAllColumnsCanFitInPage)(U,$),_e=$.settings;if(_e.horizontalPageBreakBehaviour==="afterAllRows")pe.forEach(function(Z,ae){U.applyStyles(U.userStyles),ae>0?ie(U,$,re,oe,Z.columns,!0):R(U,$,oe,Z.columns),L(U,$,re,oe,Z.columns),z(U,$,oe,Z.columns)});else for(var D=-1,H=pe[0],K=function(){var Z=D;if(H){U.applyStyles(U.userStyles);var ae=H.columns;D>=0?ie(U,$,re,oe,ae,!0):R(U,$,oe,ae),Z=O(U,$,D+1,oe,ae),z(U,$,oe,ae)}var de=Z-D;pe.slice(1).forEach(function(se){U.applyStyles(U.userStyles),ie(U,$,re,oe,se.columns,!0),O(U,$,D+1,oe,se.columns,de),z(U,$,oe,se.columns)}),D=Z};D<$.body.length-1;)K()}function R(U,$,re,oe){var pe=$.settings;U.applyStyles(U.userStyles),(pe.showHead==="firstPage"||pe.showHead==="everyPage")&&$.head.forEach(function(_e){return ue(U,$,_e,re,oe)})}function L(U,$,re,oe,pe){U.applyStyles(U.userStyles),$.body.forEach(function(_e,D){var H=D===$.body.length-1;ee(U,$,_e,H,re,oe,pe)})}function O(U,$,re,oe,pe,_e){U.applyStyles(U.userStyles),_e=_e??$.body.length;var D=Math.min(re+_e,$.body.length),H=-1;return $.body.slice(re,D).forEach(function(K,Z){var ae=re+Z===$.body.length-1,de=ne(U,$,ae,oe);K.canEntireRowFit(de,pe)&&(ue(U,$,K,oe,pe),H=re+Z)}),H}function z(U,$,re,oe){var pe=$.settings;U.applyStyles(U.userStyles),(pe.showFoot==="lastPage"||pe.showFoot==="everyPage")&&$.foot.forEach(function(_e){return ue(U,$,_e,re,oe)})}function W(U,$,re){var oe=re.getLineHeight(U.styles.fontSize),pe=U.padding("vertical"),_e=Math.floor(($-pe)/oe);return Math.max(0,_e)}function B(U,$,re,oe){var pe={};U.spansMultiplePages=!0,U.height=0;for(var _e=0,D=0,H=re.columns;D<H.length;D++){var K=H[D],Z=U.cells[K.index];if(Z){Array.isArray(Z.text)||(Z.text=[Z.text]);var ae=new b.Cell(Z.raw,Z.styles,Z.section);ae=(0,_.assign)(ae,Z),ae.text=[];var de=W(Z,$,oe);Z.text.length>de&&(ae.text=Z.text.splice(de,Z.text.length));var se=oe.scaleFactor(),he=oe.getLineHeightFactor();Z.contentHeight=Z.getContentHeight(se,he),Z.contentHeight>=$&&(Z.contentHeight=$,ae.styles.minCellHeight-=$),Z.contentHeight>U.height&&(U.height=Z.contentHeight),ae.contentHeight=ae.getContentHeight(se,he),ae.contentHeight>_e&&(_e=ae.contentHeight),pe[K.index]=ae}}var Ae=new b.Row(U.raw,-1,U.section,pe,!0);Ae.height=_e;for(var Me=0,Ke=re.columns;Me<Ke.length;Me++){var K=Ke[Me],ae=Ae.cells[K.index];ae&&(ae.height=Ae.height);var Z=U.cells[K.index];Z&&(Z.height=U.height)}return Ae}function q(U,$,re,oe){var pe=U.pageSize().height,_e=oe.settings.margin,D=_e.top+_e.bottom,H=pe-D;$.section==="body"&&(H-=oe.getHeadHeight(oe.columns)+oe.getFootHeight(oe.columns));var K=$.getMinimumRowHeight(oe.columns,U),Z=K<re;if(K>H)return console.error("Will not be able to print row ".concat($.index," correctly since it's minimum height is larger than page height")),!0;if(!Z)return!1;var ae=$.hasRowSpan(oe.columns),de=$.getMaxCellHeight(oe.columns)>H;return de?(ae&&console.error("The content of row ".concat($.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ae||oe.settings.rowPageBreak==="avoid")}function ee(U,$,re,oe,pe,_e,D){var H=ne(U,$,oe,_e);if(re.canEntireRowFit(H,D))ue(U,$,re,_e,D);else if(q(U,re,H,$)){var K=B(re,H,$,U);ue(U,$,re,_e,D),ie(U,$,pe,_e,D),ee(U,$,K,oe,pe,_e,D)}else ie(U,$,pe,_e,D),ee(U,$,re,oe,pe,_e,D)}function ue(U,$,re,oe,pe){oe.x=$.settings.margin.left;for(var _e=0,D=pe;_e<D.length;_e++){var H=D[_e],K=re.cells[H.index];if(!K){oe.x+=H.width;continue}U.applyStyles(K.styles),K.x=oe.x,K.y=oe.y;var Z=$.callCellHooks(U,$.hooks.willDrawCell,K,re,H,oe);if(Z===!1){oe.x+=H.width;continue}F(U,K,oe);var ae=K.getTextPos();(0,T.default)(K.text,ae.x,ae.y,{halign:K.styles.halign,valign:K.styles.valign,maxWidth:Math.ceil(K.width-K.padding("left")-K.padding("right"))},U.getDocument()),$.callCellHooks(U,$.hooks.didDrawCell,K,re,H,oe),oe.x+=H.width}oe.y+=re.height}function F(U,$,re){var oe=$.styles;if(U.getDocument().setFillColor(U.getDocument().getFillColor()),typeof oe.lineWidth=="number"){var pe=(0,v.getFillStyle)(oe.lineWidth,oe.fillColor);pe&&U.rect($.x,re.y,$.width,$.height,pe)}else typeof oe.lineWidth=="object"&&(oe.fillColor&&U.rect($.x,re.y,$.width,$.height,"F"),j(U,$,re,oe.lineWidth))}function j(U,$,re,oe){var pe,_e,D,H;oe.top&&(pe=re.x,_e=re.y,D=re.x+$.width,H=re.y,oe.right&&(D+=.5*oe.right),oe.left&&(pe-=.5*oe.left),K(oe.top,pe,_e,D,H)),oe.bottom&&(pe=re.x,_e=re.y+$.height,D=re.x+$.width,H=re.y+$.height,oe.right&&(D+=.5*oe.right),oe.left&&(pe-=.5*oe.left),K(oe.bottom,pe,_e,D,H)),oe.left&&(pe=re.x,_e=re.y,D=re.x,H=re.y+$.height,oe.top&&(_e-=.5*oe.top),oe.bottom&&(H+=.5*oe.bottom),K(oe.left,pe,_e,D,H)),oe.right&&(pe=re.x+$.width,_e=re.y,D=re.x+$.width,H=re.y+$.height,oe.top&&(_e-=.5*oe.top),oe.bottom&&(H+=.5*oe.bottom),K(oe.right,pe,_e,D,H));function K(Z,ae,de,se,he){U.getDocument().setLineWidth(Z),U.getDocument().line(ae,de,se,he,"S")}}function ne(U,$,re,oe){var pe=$.settings.margin.bottom,_e=$.settings.showFoot;return(_e==="everyPage"||_e==="lastPage"&&re)&&(pe+=$.getFootHeight($.columns)),U.pageSize().height-oe.y-pe}function ie(U,$,re,oe,pe,_e){pe===void 0&&(pe=[]),_e===void 0&&(_e=!1),U.applyStyles(U.userStyles),$.settings.showFoot==="everyPage"&&!_e&&$.foot.forEach(function(H){return ue(U,$,H,oe,pe)}),$.callEndPageHooks(U,oe);var D=$.settings.margin;(0,v.addTableBorder)(U,$,re,oe),be(U),$.pageNumber++,$.pageCount++,oe.x=D.left,oe.y=D.top,re.y=D.top,$.callWillDrawPageHooks(U,oe),$.settings.showHead==="everyPage"&&($.head.forEach(function(H){return ue(U,$,H,oe,pe)}),U.applyStyles(U.userStyles))}d.addPage=ie;function be(U){var $=U.pageNumber();U.setPage($+1);var re=U.pageNumber();return re===$?(U.addPage(),!0):!1}}),435:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.calculateAllColumnsCanFitInPage=void 0;var v=h(200);function b(_,T,k){var I;k===void 0&&(k={});var C=(0,v.getPageAvailableWidth)(_,T),R=new Map,L=[],O=[],z=[];T.settings.horizontalPageBreakRepeat,Array.isArray(T.settings.horizontalPageBreakRepeat)?z=T.settings.horizontalPageBreakRepeat:(typeof T.settings.horizontalPageBreakRepeat=="string"||typeof T.settings.horizontalPageBreakRepeat=="number")&&(z=[T.settings.horizontalPageBreakRepeat]),z.forEach(function(ee){var ue=T.columns.find(function(F){return F.dataKey===ee||F.index===ee});ue&&!R.has(ue.index)&&(R.set(ue.index,!0),L.push(ue.index),O.push(T.columns[ue.index]),C-=ue.wrappedWidth)});for(var W=!0,B=(I=k==null?void 0:k.start)!==null&&I!==void 0?I:0;B<T.columns.length;){if(R.has(B)){B++;continue}var q=T.columns[B].wrappedWidth;if(W||C>=q)W=!1,L.push(B),O.push(T.columns[B]),C-=q;else break;B++}return{colIndexes:L,columns:O,lastIndex:B-1}}function S(_,T){for(var k=[],I=0;I<T.columns.length;I++){var C=b(_,T,{start:I});C.columns.length&&(k.push(C),I=C.lastIndex)}return k}d.calculateAllColumnsCanFitInPage=S}),189:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.ellipsize=d.resizeColumns=d.calculateWidths=void 0;var v=h(200);function b(L,O){S(L,O);var z=[],W=0;O.columns.forEach(function(q){var ee=q.getMaxCustomCellWidth(O);ee?q.width=ee:(q.width=q.wrappedWidth,z.push(q)),W+=q.width});var B=O.getWidth(L.pageSize().width)-W;B&&(B=_(z,B,function(q){return Math.max(q.minReadableWidth,q.minWidth)})),B&&(B=_(z,B,function(q){return q.minWidth})),B=Math.abs(B),!O.settings.horizontalPageBreak&&B>.1/L.scaleFactor()&&(B=B<1?B:Math.round(B),console.warn("Of the table content, ".concat(B," units width could not fit page"))),k(O),I(O,L),T(O)}d.calculateWidths=b;function S(L,O){var z=L.scaleFactor(),W=O.settings.horizontalPageBreak,B=(0,v.getPageAvailableWidth)(L,O);O.allRows().forEach(function(q){for(var ee=0,ue=O.columns;ee<ue.length;ee++){var F=ue[ee],j=q.cells[F.index];if(j){var ne=O.hooks.didParseCell;O.callCellHooks(L,ne,j,q,F,null);var ie=j.padding("horizontal");j.contentWidth=(0,v.getStringWidth)(j.text,j.styles,L)+ie;var be=(0,v.getStringWidth)(j.text.join(" ").split(/\s+/),j.styles,L);if(j.minReadableWidth=be+j.padding("horizontal"),typeof j.styles.cellWidth=="number")j.minWidth=j.styles.cellWidth,j.wrappedWidth=j.styles.cellWidth;else if(j.styles.cellWidth==="wrap"||W===!0)j.contentWidth>B?(j.minWidth=B,j.wrappedWidth=B):(j.minWidth=j.contentWidth,j.wrappedWidth=j.contentWidth);else{var U=10/z;j.minWidth=j.styles.minCellWidth||U,j.wrappedWidth=j.contentWidth,j.minWidth>j.wrappedWidth&&(j.wrappedWidth=j.minWidth)}}}}),O.allRows().forEach(function(q){for(var ee=0,ue=O.columns;ee<ue.length;ee++){var F=ue[ee],j=q.cells[F.index];if(j&&j.colSpan===1)F.wrappedWidth=Math.max(F.wrappedWidth,j.wrappedWidth),F.minWidth=Math.max(F.minWidth,j.minWidth),F.minReadableWidth=Math.max(F.minReadableWidth,j.minReadableWidth);else{var ne=O.styles.columnStyles[F.dataKey]||O.styles.columnStyles[F.index]||{},ie=ne.cellWidth||ne.minCellWidth;ie&&typeof ie=="number"&&(F.minWidth=ie,F.wrappedWidth=ie)}j&&(j.colSpan>1&&!F.minWidth&&(F.minWidth=j.minWidth),j.colSpan>1&&!F.wrappedWidth&&(F.wrappedWidth=j.minWidth))}})}function _(L,O,z){for(var W=O,B=L.reduce(function(U,$){return U+$.wrappedWidth},0),q=0;q<L.length;q++){var ee=L[q],ue=ee.wrappedWidth/B,F=W*ue,j=ee.width+F,ne=z(ee),ie=j<ne?ne:j;O-=ie-ee.width,ee.width=ie}if(O=Math.round(O*1e10)/1e10,O){var be=L.filter(function(U){return O<0?U.width>z(U):!0});be.length&&(O=_(be,O,z))}return O}d.resizeColumns=_;function T(L){for(var O={},z=1,W=L.allRows(),B=0;B<W.length;B++)for(var q=W[B],ee=0,ue=L.columns;ee<ue.length;ee++){var F=ue[ee],j=O[F.index];if(z>1)z--,delete q.cells[F.index];else if(j)j.cell.height+=q.height,z=j.cell.colSpan,delete q.cells[F.index],j.left--,j.left<=1&&delete O[F.index];else{var ne=q.cells[F.index];if(!ne)continue;if(ne.height=q.height,ne.rowSpan>1){var ie=W.length-B,be=ne.rowSpan>ie?ie:ne.rowSpan;O[F.index]={cell:ne,left:be,row:q}}}}}function k(L){for(var O=L.allRows(),z=0;z<O.length;z++)for(var W=O[z],B=null,q=0,ee=0,ue=0;ue<L.columns.length;ue++){var F=L.columns[ue];if(ee-=1,ee>1&&L.columns[ue+1])q+=F.width,delete W.cells[F.index];else if(B){var j=B;delete W.cells[F.index],B=null,j.width=F.width+q}else{var j=W.cells[F.index];if(!j)continue;if(ee=j.colSpan,q=0,j.colSpan>1){B=j,q+=F.width;continue}j.width=F.width+q}}}function I(L,O){for(var z={count:0,height:0},W=0,B=L.allRows();W<B.length;W++){for(var q=B[W],ee=0,ue=L.columns;ee<ue.length;ee++){var F=ue[ee],j=q.cells[F.index];if(j){O.applyStyles(j.styles,!0);var ne=j.width-j.padding("horizontal");if(j.styles.overflow==="linebreak")j.text=O.splitTextToSize(j.text,ne+1/O.scaleFactor(),{fontSize:j.styles.fontSize});else if(j.styles.overflow==="ellipsize")j.text=C(j.text,ne,j.styles,O,"...");else if(j.styles.overflow==="hidden")j.text=C(j.text,ne,j.styles,O,"");else if(typeof j.styles.overflow=="function"){var ie=j.styles.overflow(j.text,ne);typeof ie=="string"?j.text=[ie]:j.text=ie}j.contentHeight=j.getContentHeight(O.scaleFactor(),O.getLineHeightFactor());var be=j.contentHeight/j.rowSpan;j.rowSpan>1&&z.count*z.height<be*j.rowSpan?z={height:be,count:j.rowSpan}:z&&z.count>0&&z.height>be&&(be=z.height),be>q.height&&(q.height=be)}}z.count--}}function C(L,O,z,W,B){return L.map(function(q){return R(q,O,z,W,B)})}d.ellipsize=C;function R(L,O,z,W,B){var q=1e4*W.scaleFactor();if(O=Math.ceil(O*q)/q,O>=(0,v.getStringWidth)(L,z,W))return L;for(;O<(0,v.getStringWidth)(L+B,z,W)&&!(L.length<=1);)L=L.substring(0,L.length-1);return L.trim()+B}}),84:(function(c){if(typeof n>"u"){var d=new Error("Cannot find module 'undefined'");throw d.code="MODULE_NOT_FOUND",d}c.exports=n})},a={};function o(c){var d=a[c];if(d!==void 0)return d.exports;var h=a[c]={exports:{}};return i[c].call(h.exports,h,h.exports,o),h.exports}var l={};return(function(){var c=l;Object.defineProperty(c,"__esModule",{value:!0}),c.Cell=c.Column=c.Row=c.Table=c.CellHookData=c.__drawTable=c.__createTable=c.applyPlugin=void 0;var d=o(790),h=o(587),v=o(49),b=o(858),S=o(287);Object.defineProperty(c,"Table",{enumerable:!0,get:function(){return S.Table}});var _=o(662);Object.defineProperty(c,"CellHookData",{enumerable:!0,get:function(){return _.CellHookData}});var T=o(287);Object.defineProperty(c,"Cell",{enumerable:!0,get:function(){return T.Cell}}),Object.defineProperty(c,"Column",{enumerable:!0,get:function(){return T.Column}}),Object.defineProperty(c,"Row",{enumerable:!0,get:function(){return T.Row}});function k(O){(0,d.default)(O)}c.applyPlugin=k;function I(O,z){var W=(0,h.parseInput)(O,z),B=(0,b.createTable)(O,W);(0,v.drawTable)(O,B)}function C(O,z){var W=(0,h.parseInput)(O,z);return(0,b.createTable)(O,W)}c.__createTable=C;function R(O,z){(0,v.drawTable)(O,z)}c.__drawTable=R;try{var L=o(84);L.jsPDF&&(L=L.jsPDF),k(L)}catch{}c.default=I})(),l})()})})(sh)),sh.exports}var wR=xR();const T2=L2(wR),ia=t=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t),SR=async t=>{try{const n=await(await fetch(t)).blob();return new Promise((i,a)=>{const o=new FileReader;o.onloadend=()=>i(o.result),o.onerror=a,o.readAsDataURL(n)})}catch(e){return console.error("Error loading image:",e),""}},Nm=async(t,e,n)=>{const i=new Tt({orientation:"portrait",unit:"mm",format:"a4"}),a=i.internal.pageSize.width,o=i.internal.pageSize.height,l=15,c=a-l*2,d=t.company==="mirrorzone",h=[0,0,0],v=(We,Se=.1)=>{i.setDrawColor(200,200,200),i.setLineWidth(Se),i.line(l,We,a-l,We)};let b=0;const S=t.status===mn.PAID,_=S?"PAID":"UNPAID",T=S?[34,197,94]:[249,115,22];i.setFillColor(T[0],T[1],T[2]);const k=70,I=12,C=-45*(Math.PI/180),R=-10,L=25,O=Math.cos(C),z=Math.sin(C),W={x:R,y:L},B={x:R+k*O,y:L+k*z},q={x:B.x-I*z,y:B.y+I*O},ee={x:W.x-I*z,y:W.y+I*O};i.moveTo(W.x,W.y),i.lineTo(B.x,B.y),i.lineTo(q.x,q.y),i.lineTo(ee.x,ee.y),i.close(),i.fill(),i.saveGraphicsState();const ue=15,F=15;i.setFont("helvetica","bold"),i.setFontSize(10),i.setTextColor(255,255,255),i.text(_,ue,F,{angle:45,align:"center",baseline:"middle"}),i.restoreGraphicsState(),b=25;const ne=t.documentType==="quote"?"Quote":"Invoice";i.setFont("helvetica","normal"),i.setFontSize(20),i.setTextColor(h[0],h[1],h[2]),i.text(ne,l,b),i.setFontSize(12),i.text(t.invoiceNumber,l,b+7);const ie=d?"/mirrorzone-logo.png":"/clonmel-logo.png",be="PNG";try{const We=await SR(ie);if(We){const Qe=await(En=>new Promise(Lt=>{const qt=new Image;qt.onload=()=>Lt({w:qt.naturalWidth,h:qt.naturalHeight}),qt.src=En}))(We),ct=Qe.w/Qe.h,bt=d?80:60,Ht=20;let pt=bt,Nt=bt/ct;Nt>Ht&&(Nt=Ht,pt=Ht*ct);const it=a-l-pt;i.addImage(We,be,it,b-10,pt,Nt)}}catch(We){console.error("Error adding logo:",We)}b+=20,v(b),b+=8;const U=c/3;i.setFontSize(8),i.setFont("helvetica","bold"),i.text(`${ne} To:`,l,b),i.setFont("helvetica","normal");const re=(t.customerAddress||"").split(",").map(We=>We.trim()).filter(Boolean).flatMap(We=>i.splitTextToSize(We,U-5)),oe=[t.customerName,...re].filter(Boolean);let pe=b+5;oe.forEach(We=>{i.text(We,l,pe),pe+=4});const _e=l+U;i.setFont("helvetica","bold"),i.text("Deliver To:",_e,b),i.setFont("helvetica","normal");let D=b+5;oe.forEach(We=>{i.text(We,_e,D),D+=4});const H=l+U*2;i.setFont("helvetica","bold");const K=d?e.mirrorZoneName||"MirrorZone":e.companyName||"Clonmel Glass & Mirrors Ltd";i.text(K,H,b),i.setFont("helvetica","normal");const Z=d?[e.mirrorZoneAddress||"24 Mary Street, Clonmel, Co. Tipperary, E91 YV52","",`Tel: ${e.mirrorZonePhone||"(052) 61 26306"}`,`Email: ${e.mirrorZoneEmail||"info@mirrorzone.ie"}`,e.mirrorZoneWebsite||"Web: www.mirrorzone.ie"]:[e.companyAddress||"24 Mary Street, Clonmel, Co. Tipperary","",`Tel: ${e.companyPhone||"(052) 612 6306"}`,`Email: ${e.companyEmail||"info@clonmelglassandmirrors.com"}`,e.companyWebsite?`Web: ${e.companyWebsite}`:""].filter(Boolean);let ae=b+5;Z.forEach(We=>{i.splitTextToSize(We,U-5).forEach(Qe=>{i.text(Qe,H,ae),ae+=4})}),b=Math.max(pe,D,ae)+5,v(b),b+=6;const de=[{label:`${ne} Date`,val:new Date(t.dateIssued).toLocaleDateString("en-GB")},{label:"Ref. No.",val:t.invoiceNumber},{label:"Account Manager",val:"Admin"},{label:"VAT No.",val:e.vatNumber||"IE8252470Q"},{label:"Payment Due",val:t.dueDate?new Date(t.dueDate).toLocaleDateString("en-GB"):"On Receipt"},{label:"Credit Terms",val:"30 Days"}],se=c/de.length;i.setFont("helvetica","bold"),i.setFontSize(8),de.forEach((We,Se)=>{i.text(We.label,l+Se*se,b)}),b+=5,i.setFont("helvetica","normal"),de.forEach((We,Se)=>{i.text(We.val,l+Se*se,b)}),b+=5,v(b),b+=10;const he=[["Description","Quantity","Price","VAT Rate","Total"]],Ae=t.items.map(We=>[We.description,We.quantity.toString(),ia(We.unitPrice),"23.00%",ia(We.total)]);T2(i,{startY:b,head:he,body:Ae,theme:"plain",styles:{fontSize:8,font:"helvetica",textColor:h,cellPadding:5,valign:"middle"},headStyles:{fillColor:[243,244,246],textColor:[31,41,55],fontStyle:"bold",fontSize:9,halign:"left"},columnStyles:{0:{cellWidth:"auto",halign:"left"},1:{cellWidth:25,halign:"right"},2:{cellWidth:30,halign:"right"},3:{cellWidth:25,halign:"right"},4:{cellWidth:30,halign:"right"}},didParseCell:We=>{We.section==="head"&&We.column.index>0&&(We.cell.styles.halign="right")}}),b=i.lastAutoTable.finalY+10;const Me=l,Ke=[["23.00%",`${ia(t.subtotal)}`,`${ia(t.taxAmount)}`,`${ia(t.total)}`]];i.setFont("helvetica","bold"),i.setFontSize(9),i.text("VAT Analysis",Me,b-2),T2(i,{startY:b,margin:{left:Me},tableWidth:90,head:[["VAT Rate %","Net","VAT","Gross"]],body:Ke,theme:"plain",styles:{fontSize:8,font:"helvetica",textColor:h,cellPadding:3,lineColor:[229,231,235],lineWidth:.1},headStyles:{fillColor:[243,244,246],textColor:[0,0,0],fontStyle:"bold",halign:"left"},columnStyles:{0:{halign:"left"},1:{halign:"right"},2:{halign:"right"},3:{halign:"right"}}});let Ye=b;const st=a-l,Le=a-l-60,fe=(We,Se,Qe=!1,ct=!1)=>{i.setFont("helvetica",Qe?"bold":"normal"),i.setFontSize(Qe&&ct?11:9),i.setTextColor(h[0],h[1],h[2]),i.text(We,Le,Ye+4),i.text(Se,st,Ye+4,{align:"right"}),Ye+=6};i.setDrawColor(209,213,219),i.setLineWidth(.3),i.line(Le,Ye,st,Ye),fe("Total Net",`${ia(t.subtotal)}`),fe("Total Discount",`${ia(0)}`),fe("Total VAT",`${ia(t.taxAmount)}`),Ye+=4,i.line(Le,Ye,st,Ye),Ye+=2,fe("Total Gross",`${ia(t.total)}`,!0),Ye+=2,i.line(Le,Ye,st,Ye),Ye+=2;const Et=t.amountPaid||0;fe("Less Deposit",`${ia(Et)}`),Ye+=4,i.setDrawColor(31,41,55),i.setLineWidth(.5),i.line(Le,Ye,st,Ye),Ye+=2,fe("Total Payable",`${ia(t.balanceDue)}`,!0,!0);const ut=i.lastAutoTable.finalY;b=Math.max(ut,Ye)+15,i.setDrawColor(229,231,235),i.setLineWidth(.1),i.line(l,b,a-l,b),b+=5;const $e=l;if(i.setFont("helvetica","bold"),i.setFontSize(9),t.notes){i.text("Notes:",$e,b),b+=4,i.setFont("helvetica","normal"),i.setFontSize(8);const We=i.splitTextToSize(t.notes||"",80);i.text(We,$e,b)}b+=10,i.setFont("helvetica","bold"),i.setFontSize(9),i.text("Bank Details",$e,b),b+=5,i.setFont("helvetica","normal"),i.setFontSize(8),(d?[{l:"Account Name:",v:e.mirrorZoneAccountName||"MirrorZone"},{l:"Bank Name:",v:e.mirrorZoneBankName||"Bank of Ireland"},{l:"BIC/SWIFT:",v:e.mirrorZoneBic||"BOFIIE2D"},{l:"IBAN:",v:e.mirrorZoneIban||"IE12BOFI90001010101234"}]:[{l:"Account Name:",v:e.accountName||"Clonmel Glass & Mirrors"},{l:"Bank Name:",v:e.bankName||"PTSB"},{l:"BIC/SWIFT:",v:e.bic||"PTSBIE2D"},{l:"IBAN:",v:e.iban||"IE98IPBS99071010105209"}]).forEach(We=>{i.setFont("helvetica","bold"),i.text(We.l,$e,b),i.setFont("helvetica","normal"),i.text(We.v,$e+25,b),b+=4});const tt=o-10;i.setFillColor(243,244,246),i.rect(0,tt-5,a,15,"F"),i.setTextColor(75,85,99),i.setFontSize(8);const et=new Date().toLocaleDateString("en-GB");return i.text(`Printed as: ${et} | Page 1 of 1`,l,tt+2),i.text("Created by Clonmel Glass Invoice Hub",a-l,tt+2,{align:"right"}),i},m5=async(t,e,n)=>{const i=await Nm(t,e);if(/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)){const a=i.output("blob"),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`${t.invoiceNumber}.pdf`,l.style.display="none",document.body.appendChild(l),l.click(),setTimeout(()=>{document.body.removeChild(l),URL.revokeObjectURL(o)},100)}else i.save(`${t.invoiceNumber}.pdf`)},Am=async(t,e,n)=>(await Nm(t,e)).output("bloburl").toString(),_R=async(t,e,n,i,a)=>{if(!e.webhookUrl)throw new Error("Webhook URL not configured in Settings.");try{const c=(await Nm(t,e,n)).output("datauristring").split(",")[1],d={generatedAt:new Date().toISOString(),webhookType:"INVOICE_SEND",notificationType:a||"Manual Send",filename:`${t.invoiceNumber}.pdf`,pdfBase64:c,invoice:{id:t.id,number:t.invoiceNumber,status:t.status,dateIssued:t.dateIssued.split("T")[0].split("-").reverse().join("-"),dueDate:t.dueDate?t.dueDate.split("T")[0].split("-").reverse().join("-"):"",currency:"EUR",notes:t.notes,reminderCount:t.reminderCount||0,totals:{subtotal:`${t.subtotal.toFixed(2)}`,taxRate:t.taxRate,taxAmount:`${t.taxAmount.toFixed(2)}`,total:`${t.total.toFixed(2)}`,amountPaid:`${(t.amountPaid||0).toFixed(2)}`,balanceDue:`${(t.balanceDue||0).toFixed(2)}`},items:t.items.map(v=>({description:v.description,quantity:v.quantity,unitPrice:`${v.unitPrice.toFixed(2)}`,total:`${v.total.toFixed(2)}`,unit:v.unit}))},customer:{id:t.customerId,name:t.customerName,firstName:t.customerName?t.customerName.split(" ")[0]:"",lastName:t.customerName?t.customerName.split(" ").slice(1).join(" "):"",email:t.customerEmail,phone:t.customerPhone,address:t.customerAddress,city:i==null?void 0:i.city,postalCode:i==null?void 0:i.postalCode,country:i==null?void 0:i.country,companyName:i==null?void 0:i.company,tags:i==null?void 0:i.tags,crmNotes:i==null?void 0:i.notes},sender:{company:t.company||"clonmel",taxId:e.vatNumber}},h=await fetch(e.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!h.ok)throw new Error(`Webhook failed: ${h.statusText}`);return!0}catch(o){throw console.error("Webhook sending failed:",o),o}},xl=t=>{if(t==null)return"";if(typeof t=="object"){if(t.message)return String(t.message);try{return JSON.stringify(t)}catch{return""}}return String(t)},Ha=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),Ld=({label:t,value:e,icon:n,color:i})=>{const a=(i==null?void 0:i.split("-")[1])||"slate";return g.jsxs("div",{className:"relative overflow-hidden bg-white p-6 rounded-3xl border border-slate-100 shadow-xl shadow-slate-200/40 hover:shadow-2xl hover:shadow-slate-200/60 hover:-translate-y-1 transition-all duration-300 group",children:[g.jsx("div",{className:`absolute -top-10 -right-10 w-40 h-40 rounded-full blur-3xl opacity-10 bg-${a}-500 group-hover:opacity-20 transition-opacity`}),g.jsxs("div",{className:"relative flex items-start justify-between z-10",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest",children:xl(t)}),g.jsx("h3",{className:"text-3xl font-black text-slate-800 mt-2 tracking-tight",children:xl(e)})]}),g.jsx("div",{className:`p-3.5 rounded-2xl ${i} shadow-lg shadow-${a}-500/20 group-hover:scale-110 transition-transform duration-300`,children:g.jsx(n,{size:24,className:"text-white"})})]})]})},NR=({invoice:t,onClose:e,onSendReminder:n,isReminding:i})=>{const a=new Date;a.setHours(0,0,0,0);const o=new Date(t.dueDate);o.setHours(0,0,0,0);const l=o.getTime()-a.getTime(),c=Math.ceil(l/(1e3*60*60*24)),d=c<0;return g.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:g.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-300 border border-slate-100",children:[g.jsxs("div",{className:"p-8 bg-slate-50 border-b border-slate-100 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:`h-16 w-16 rounded-3xl flex items-center justify-center text-white shadow-xl ${d?"bg-rose-500":"bg-brand-600"}`,children:g.jsx(sb,{size:32})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:t.customerName}),g.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Client Profile & Payment Status"})]})]}),g.jsx("button",{onClick:e,className:"p-4 text-slate-400 hover:text-slate-900 hover:bg-slate-200 rounded-full transition-all",children:g.jsx(Ao,{size:24})})]}),g.jsxs("div",{className:"p-8 space-y-8 overflow-y-auto max-h-[70vh] custom-scrollbar",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-3 text-slate-600",children:[g.jsx(dm,{size:18,className:"text-brand-500"}),g.jsx("span",{className:"text-sm font-bold",children:t.customerPhone||"No phone provided"})]}),g.jsxs("div",{className:"flex items-center gap-3 text-slate-600",children:[g.jsx(cm,{size:18,className:"text-brand-500"}),g.jsx("span",{className:"text-sm font-bold",children:t.customerEmail||"No email provided"})]}),g.jsxs("div",{className:"flex items-start gap-3 text-slate-600",children:[g.jsx(El,{size:18,className:"text-brand-500 mt-1"}),g.jsxs("div",{children:[g.jsxs("span",{className:"text-sm font-bold block",children:["Invoice ",t.invoiceNumber]}),g.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:["Ref: ",t.id.slice(-6)]})]})]})]}),g.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 flex flex-col items-center justify-center text-center",children:[g.jsx("div",{className:`text-4xl font-black mb-1 ${d?"text-rose-600":"text-brand-600"}`,children:Math.abs(c)}),g.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:d?"Days Overdue":"Days Until Due"}),g.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs font-bold text-slate-600 bg-white px-4 py-2 rounded-full border border-slate-200",children:[g.jsx(Sh,{size:14,className:"text-brand-500"}),"Due ",new Date(t.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})]})]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 text-center",children:[g.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total"}),g.jsx("div",{className:"text-sm font-black text-slate-900",children:Ha(t.total)})]}),g.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 text-center",children:[g.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Paid"}),g.jsx("div",{className:"text-sm font-black text-emerald-600",children:Ha(t.amountPaid)})]}),g.jsxs("div",{className:"bg-slate-900 p-4 rounded-2xl text-center shadow-lg shadow-slate-900/20",children:[g.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Balance"}),g.jsx("div",{className:"text-sm font-black text-brand-400",children:Ha(t.balanceDue)})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2",children:[g.jsx(ch,{size:14})," Ordered Products"]}),g.jsx("div",{className:"space-y-2",children:t.items.map((h,v)=>g.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-black text-slate-900",children:h.description}),g.jsx("div",{className:"text-[10px] font-bold text-slate-400 mt-0.5",children:h.productId})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("div",{className:"text-xs font-black text-slate-700",children:[h.quantity," units"]}),g.jsx("div",{className:"text-[10px] font-bold text-slate-400",children:Ha(h.total)})]})]},v))})]}),t.notes&&g.jsxs("div",{className:"p-6 bg-amber-50 rounded-3xl border border-amber-100",children:[g.jsx("h4",{className:"text-[10px] font-black text-amber-700 uppercase tracking-widest mb-2",children:"Project Notes"}),g.jsxs("p",{className:"text-xs text-amber-800 italic leading-relaxed",children:['"',t.notes,'"']})]})]}),g.jsxs("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex gap-4",children:[g.jsx("button",{onClick:e,className:"flex-1 py-4 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-900 transition-all",children:"Close Details"}),g.jsxs("button",{onClick:()=>n(t),disabled:i,className:"flex-[2] bg-brand-600 text-white py-4 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] hover:bg-brand-700 shadow-xl shadow-brand-500/20 transition-all flex items-center justify-center gap-3 disabled:opacity-50",children:[i?g.jsx(Q2,{size:18,className:"animate-spin"}):g.jsx(nb,{size:18}),"Send AI Payment Reminder"]})]})]})})},E2=()=>{const{invoices:t,user:e,databaseError:n,updateInvoice:i,companyLogo:a,refreshDatabase:o}=Os();je.useEffect(()=>{o()},[]);const[l,c]=je.useState(()=>{const D=[],H=new Date;return[{offsetHr:1,msg:"System health check initiated"},{offsetHr:2,msg:"Database optimization completed"},{offsetHr:5,msg:"Daily revenue report generated"},{offsetHr:12,msg:"Payment gateway sync: 0 new transactions"},{offsetHr:23,msg:"System backup completed successfully"}].forEach(Z=>{const de=new Date(H.getTime()-Z.offsetHr*60*60*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});D.push(`[${de}] ${Z.msg}`)}),D}),[d,h]=je.useState(null),[v,b]=je.useState(null),[S,_]=je.useState(null),T=je.useRef(!1),k=je.useRef({}),[I,C]=je.useState(!1),R=je.useRef(!1),[L,O]=je.useState("daily"),[z,W]=je.useState("all"),[B,q]=je.useState(""),[ee,ue]=je.useState(""),[F,j]=je.useState(!1),ne=je.useMemo(()=>{if(z==="all")return t;const D=new Date,H=new Date(D.getFullYear(),D.getMonth(),1),K=new Date(D.getFullYear(),D.getMonth()-1,1),Z=new Date(D.getFullYear(),D.getMonth(),0),ae=new Date(D.getFullYear(),0,1),de=new Date(D.getFullYear()-1,0,1),se=new Date(D.getFullYear()-1,11,31);return t.filter(he=>{const Ae=new Date(he.dateIssued);switch(z){case"thisMonth":return Ae>=H&&Ae<=D;case"lastMonth":return Ae>=K&&Ae<=Z;case"thisYear":return Ae>=ae&&Ae<=D;case"lastYear":return Ae>=de&&Ae<=se;case"custom":return!B||!ee?!0:Ae>=new Date(B)&&Ae<=new Date(ee);default:return!0}})},[t,z,B,ee]),ie=ne.filter(D=>D.documentType!=="quote").reduce((D,H)=>D+(Number(H.amountPaid)||0),0),be=ne.filter(D=>D.documentType!=="quote").reduce((D,H)=>D+(Number(H.balanceDue)||0),0),U=ne.filter(D=>D.documentType==="quote").reduce((D,H)=>D+(Number(H.total)||0),0);ne.filter(D=>D.status===mn.PAID&&D.documentType!=="quote").length;const $=je.useMemo(()=>{const D=new Date;D.setHours(0,0,0,0);const H=new Date(D);return H.setDate(D.getDate()+3),t.filter(K=>{if(K.documentType==="quote"||K.status===mn.PAID||!K.dueDate)return!1;const Z=new Date(K.dueDate);return isNaN(Z.getTime())?!1:(Z.setHours(0,0,0,0),Z<=H)}).sort((K,Z)=>{const ae=K.dueDate?new Date(K.dueDate).getTime():0,de=Z.dueDate?new Date(Z.dueDate).getTime():0;return ae-de})},[t]),re=je.useMemo(()=>{const D=new Date;return D.setHours(0,0,0,0),t.filter(H=>H.documentType!=="quote"&&H.status!==mn.PAID&&H.dueDate&&!isNaN(new Date(H.dueDate).getTime())&&new Date(H.dueDate)<D).length},[t]);je.useEffect(()=>{(async()=>{if(T.current||t.length===0||n)return;const H=new Date;H.setHours(0,0,0,0);const K=H.toISOString().split("T")[0],Z=t.filter(ae=>{if(ae.status===mn.PAID)return!1;const de=new Date(ae.dueDate);de.setHours(0,0,0,0);const se=new Date(de);se.setDate(de.getDate()-2);const he=de.getTime()<H.getTime(),Ae=se.getTime()===H.getTime(),Ke=(R.current?k.current[ae.id]:ae.lastReminderSent)!==K;return(he||Ae)&&Ke});if(Z.length>0){T.current=!0;const ae=[],de=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});for(const se of Z)try{if(!se.id)continue;if(R.current)k.current[se.id]=K,ae.push(`[${de}] [Auto-Mail] Proactive reminder triggered for ${xl(se.customerName)}`);else try{await i({...se,lastReminderSent:K}),ae.push(`[${de}] [Auto-Mail] Reminder queued for ${xl(se.customerName)} (Inv: ${xl(se.invoiceNumber)})`)}catch(he){if(he.message==="COLUMN_MISSING_REMINDER")R.current=!0,C(!0),k.current[se.id]=K,ae.push(`[${de}]  Switch: Tracking auto-reminders locally.`);else throw he}}catch(he){ae.push(`[${de}] Failed for ${xl(se.invoiceNumber)}: ${(he==null?void 0:he.message)||"Error"}`)}ae.length>0&&c(se=>[...ae,...se].slice(0,50)),T.current=!1}})()},[t.length,n,i]);const oe=async D=>{h(D.id);const H=new Date;H.setHours(0,0,0,0);const K=new Date(D.dueDate);K.setHours(0,0,0,0);const Z=K.getTime()-H.getTime(),ae=Math.ceil(Z/(1e3*60*60*24));try{const de=await yk(D.customerName,D.invoiceNumber,D.balanceDue,ae),se=H.toISOString().split("T")[0];if(R.current)k.current[D.id]=se;else try{await i({...D,lastReminderSent:se})}catch(Ae){Ae.message==="COLUMN_MISSING_REMINDER"&&(R.current=!0,C(!0),k.current[D.id]=se)}const he=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});c(Ae=>[`[${he}] [Manual-AI] Sent to ${D.customerEmail||D.customerName}: "${de.slice(0,30)}..."`,...Ae]),alert(`AI Reminder Generated & "Sent" to ${D.customerName}:

${de}`)}catch{alert("Failed to generate AI reminder.")}finally{h(null)}},pe=async D=>{try{const H=await Am(D,a);_(H)}catch{alert("Preview failed.")}},_e=je.useMemo(()=>{const D={},H=new Date,K=t.filter(Z=>Z.documentType!=="quote");if(L==="yearly"){const Z=[],ae=H.getFullYear();for(let de=4;de>=0;de--){const se=ae-de;D[se.toString()]=0,Z.push({key:se.toString(),label:se.toString()})}return K.forEach(de=>{const he=new Date(de.dateIssued).getFullYear().toString();D[he]!==void 0&&(D[he]+=Number(de.total))}),Z.map(de=>({name:de.label,amount:D[de.key]}))}else if(L==="monthly"){const Z=[],ae=new Date;for(let de=11;de>=0;de--){const se=new Date(ae.getFullYear(),ae.getMonth()-de,1),he=`${se.getFullYear()}-${String(se.getMonth()+1).padStart(2,"0")}`,Ae=se.toLocaleDateString("en-US",{month:"short",year:"numeric"});D[he]=0,Z.push({key:he,label:Ae})}return K.forEach(de=>{const se=new Date(de.dateIssued),he=`${se.getFullYear()}-${String(se.getMonth()+1).padStart(2,"0")}`;D[he]!==void 0&&(D[he]+=Number(de.total))}),Z.map(de=>({name:de.label,amount:D[de.key]}))}else if(L==="weekly"){const Z=[],ae=new Date;ae.setHours(0,0,0,0);for(let de=7;de>=0;de--){const se=new Date(ae);se.setDate(ae.getDate()-de*7-ae.getDay());const he=new Date(se);he.setDate(se.getDate()+6);const Ae=se.toLocaleDateString("en-CA"),Me=`${se.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`;D[Ae]=0,Z.push({key:Ae,label:Me,startDate:new Date(se),endDate:new Date(he)})}return K.forEach(de=>{const se=de.status===mn.PAID&&de.paymentDate?de.paymentDate:de.dateIssued,he=new Date(se);Z.forEach(Ae=>{he>=Ae.startDate&&he<=Ae.endDate&&(D[Ae.key]+=Number(de.total))})}),Z.map(de=>({name:de.label,amount:D[de.key]}))}else if(L==="custom"){if(!B||!ee)return[];const Z=[],ae=Me=>{if(!Me)return new Date;if(Me.includes("T"))return new Date(Me);const Ke=Me.split("-");return Ke.length===3?new Date(parseInt(Ke[0]),parseInt(Ke[1])-1,parseInt(Ke[2])):new Date(Me)},de=Me=>{const Ke=Me.getFullYear(),Ye=String(Me.getMonth()+1).padStart(2,"0"),st=String(Me.getDate()).padStart(2,"0");return`${Ke}-${Ye}-${st}`},se=ae(B),he=ae(ee);he.setHours(23,59,59,999);const Ae=new Date(se);for(;Ae<=he;){const Me=de(Ae);D[Me]=0,Z.push({key:Me,label:Ae.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),Ae.setDate(Ae.getDate()+1)}return K.forEach(Me=>{const Ke=Me.status===mn.PAID&&Me.paymentDate?Me.paymentDate:Me.dateIssued;let Ye;Ke&&!Ke.includes("T")&&Ke.match(/^\d{4}-\d{2}-\d{2}$/)?Ye=ae(Ke):Ye=new Date(Ke);const st=de(Ye);D[st]!==void 0&&(D[st]+=Number(Me.total))}),Z.map(Me=>({name:Me.label,amount:D[Me.key]}))}else{const Z=[],ae=new Date;ae.setHours(0,0,0,0);const de=se=>{if(!se)return new Date;if(se.includes("T"))return new Date(se);const he=se.split("-");return he.length===3?new Date(parseInt(he[0]),parseInt(he[1])-1,parseInt(he[2])):new Date(se)};for(let se=13;se>=0;se--){const he=new Date(ae);he.setDate(ae.getDate()-se);const Ae=he.toLocaleDateString("en-CA");D[Ae]=0,Z.push({key:Ae,label:he.toLocaleDateString("en-US",{month:"short",day:"numeric"})})}return K.forEach(se=>{const he=se.status===mn.PAID&&se.paymentDate?se.paymentDate:se.dateIssued;let Ae;he&&!he.includes("T")&&he.match(/^\d{4}-\d{2}-\d{2}$/)?Ae=de(he):Ae=new Date(he);const Me=Ae.toLocaleDateString("en-CA");D[Me]!==void 0&&(D[Me]+=Number(se.total))}),Z.map(se=>({name:se.label,amount:D[se.key]}))}},[t,L,B,ee]);return g.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-12",children:[F&&g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",children:g.jsxs("div",{className:"bg-white rounded-3xl p-8 w-full max-w-md shadow-2xl space-y-6 animate-in zoom-in-95 duration-200",children:[g.jsx("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"Select Date Range"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Start Date"}),g.jsx("input",{type:"date",value:B,onChange:D=>q(D.target.value),className:"w-full bg-slate-50 border-2 border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-700 focus:border-brand-500 outline-none transition-all"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"End Date"}),g.jsx("input",{type:"date",value:ee,onChange:D=>ue(D.target.value),className:"w-full bg-slate-50 border-2 border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-700 focus:border-brand-500 outline-none transition-all"})]})]}),g.jsxs("div",{className:"flex gap-3 pt-2",children:[g.jsx("button",{onClick:()=>{j(!1),W("all")},className:"flex-1 py-3 px-6 rounded-xl font-bold text-slate-500 hover:bg-slate-50 transition-colors",children:"Cancel"}),g.jsx("button",{onClick:()=>{B&&ee&&(W("custom"),j(!1))},disabled:!B||!ee,className:"flex-1 py-3 px-6 bg-brand-600 text-white rounded-xl font-bold shadow-lg shadow-brand-500/20 hover:bg-brand-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply Filter"})]})]})}),v&&g.jsx(NR,{invoice:v,onClose:()=>b(null),onSendReminder:oe,isReminding:d===v.id}),g.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Dashboard"}),g.jsx("p",{className:"text-slate-500 font-medium mt-1",children:"Overview & Operations Center"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"relative",children:[g.jsxs("select",{value:z==="custom"?"custom":z,onChange:D=>{const H=D.target.value;H==="custom"?j(!0):W(H)},className:"appearance-none bg-white text-xs font-black text-slate-700 px-5 py-2.5 rounded-2xl border border-slate-200 shadow-sm outline-none focus:border-brand-500 cursor-pointer pr-8",children:[g.jsx("option",{value:"all",children:"All Time"}),g.jsx("option",{value:"thisMonth",children:"This Month"}),g.jsx("option",{value:"lastMonth",children:"Last Month"}),g.jsx("option",{value:"thisYear",children:"This Year"}),g.jsx("option",{value:"lastYear",children:"Last Year"}),g.jsx("option",{value:"custom",children:"Custom Range..."})]}),g.jsx(um,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 rotate-90 pointer-events-none"})]}),g.jsxs("div",{className:`text-xs font-black px-5 py-2.5 rounded-2xl border flex items-center gap-2 shadow-sm transition-all ${I?"bg-amber-50 text-amber-700 border-amber-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,children:[g.jsx(Q2,{size:14,className:I?"":"animate-pulse"}),I?"LOCAL MODE":"SYSTEM ACTIVE"]}),g.jsx("div",{className:"text-xs font-black bg-white text-slate-700 px-5 py-2.5 rounded-2xl border border-slate-200 shadow-sm",children:new Date().toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsx(Ld,{label:"Total Revenue",value:Ha(ie),icon:tb,color:"bg-emerald-500"}),g.jsx(Ld,{label:"Outstanding",value:Ha(be),icon:Pc,color:"bg-rose-500"}),g.jsx(Ld,{label:"Quotes Value",value:Ha(U),icon:jc,color:"bg-violet-500"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsx(Ld,{label:"Active Invoices",value:t.filter(D=>D.documentType!=="quote").length,icon:ch,color:"bg-slate-800"}),g.jsx(Ld,{label:"Action Needed",value:re,icon:F_,color:"bg-amber-500"})]}),g.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:g.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[g.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-xl shadow-slate-200/40",children:[g.jsxs("div",{className:"p-8 border-b border-slate-50 flex items-center justify-between bg-white/50 backdrop-blur-sm",children:[g.jsxs("h3",{className:"text-sm font-black text-slate-800 uppercase tracking-widest flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-brand-50 rounded-lg text-brand-600",children:g.jsx(El,{size:18})}),"Priority Actions"]}),g.jsxs("span",{className:"text-[10px] font-black text-slate-400 bg-slate-50 px-3 py-1.5 rounded-full border border-slate-100 uppercase tracking-wider",children:[$.length," Pending"]})]}),g.jsx("div",{className:"p-6 max-h-[500px] overflow-y-auto custom-scrollbar bg-slate-50/30",children:$.length===0?g.jsxs("div",{className:"py-24 text-center",children:[g.jsx("div",{className:"bg-emerald-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:g.jsx(_h,{size:32,className:"text-emerald-500"})}),g.jsx("h4",{className:"text-lg font-bold text-slate-800",children:"All Clear!"}),g.jsx("p",{className:"text-sm text-slate-400 font-medium mt-1",children:"No collections pending action."})]}):g.jsx("div",{className:"space-y-4",children:$.map(D=>{const H=new Date;H.setHours(0,0,0,0);const K=new Date(D.dueDate);K.setHours(0,0,0,0);const Z=K<H,ae=K.getTime()===H.getTime(),de=I?k.current[D.id]:D.lastReminderSent;return g.jsx("div",{onClick:()=>b(D),className:`group p-5 rounded-2xl border transition-all hover:shadow-xl hover:-translate-y-0.5 cursor-pointer bg-white ${Z?"border-rose-100 shadow-rose-100/50":"border-slate-100 shadow-sm"}`,children:g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:`p-3.5 rounded-2xl ${Z?"bg-rose-50 text-rose-600":"bg-slate-50 text-slate-600"}`,children:g.jsx(sb,{size:20})}),g.jsxs("div",{children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("h4",{className:"font-bold text-slate-900 text-lg leading-tight group-hover:text-brand-600 transition-colors",children:xl(D.customerName)})}),g.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1 flex items-center gap-2",children:[g.jsxs("span",{className:"text-slate-400",children:["#",xl(D.invoiceNumber)]}),g.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),g.jsx("span",{children:D.customerPhone||"No Phone"})]})]})]}),g.jsxs("div",{className:"flex items-center gap-4",onClick:se=>se.stopPropagation(),children:[g.jsxs("div",{className:"text-right mr-2",children:[g.jsx("div",{className:"text-sm font-black text-slate-900",children:Ha(D.balanceDue)}),g.jsx("div",{className:`text-[10px] font-black uppercase tracking-widest mt-0.5 ${Z?"text-rose-500":ae?"text-brand-500":"text-slate-400"}`,children:Z?"Overdue":ae?"Due Today":`${Math.ceil((K.getTime()-H.getTime())/(1e3*3600*24))} Days Left`})]}),g.jsx("button",{onClick:se=>{se.stopPropagation(),pe(D)},className:"p-3 rounded-xl text-slate-400 hover:bg-slate-50 hover:text-slate-700 transition-all border border-transparent hover:border-slate-100",title:"View PDF",children:g.jsx(uh,{size:18})}),g.jsxs("button",{onClick:se=>{se.stopPropagation(),oe(D)},disabled:d===D.id||de===H.toISOString().split("T")[0],className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${de===H.toISOString().split("T")[0]?"bg-slate-100 text-slate-400 cursor-default":"bg-slate-900 text-white hover:bg-brand-600 shadow-xl shadow-slate-900/20"}`,children:[d===D.id?g.jsx(AR,{size:14,className:"animate-spin"}):g.jsx(nb,{size:14}),de===H.toISOString().split("T")[0]?"Sent":"Remind"]})]})]})},D.id)})})})]}),g.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-100 overflow-hidden shadow-sm",children:[g.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-100 flex items-center justify-between",children:[g.jsxs("h3",{className:"text-sm font-black text-slate-800 uppercase tracking-widest flex items-center gap-2",children:[g.jsx(KN,{size:16,className:"text-brand-500"}),L==="yearly"?"Yearly":L==="monthly"?"Monthly":L==="weekly"?"Weekly":"Daily"," Revenue Trends"]}),g.jsxs("div",{className:"flex bg-slate-200/50 p-1 rounded-lg",children:[g.jsx("button",{onClick:()=>O("daily"),className:`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${L==="daily"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Daily"}),g.jsx("button",{onClick:()=>O("weekly"),className:`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${L==="weekly"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Weekly"}),g.jsx("button",{onClick:()=>O("monthly"),className:`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${L==="monthly"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Monthly"}),g.jsx("button",{onClick:()=>O("yearly"),className:`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${L==="yearly"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Yearly"}),g.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),g.jsx("button",{onClick:()=>{O("custom"),j(!0)},className:`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${L==="custom"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Custom"})]})]}),g.jsx("div",{className:"p-6 h-80",children:g.jsx(Ex,{width:"100%",height:"100%",children:g.jsxs(Cx,{data:_e,children:[g.jsx(kx,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:10},dy:10}),g.jsx(Rx,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:10},tickFormatter:D=>Ha(D)}),g.jsx(Ix,{cursor:{fill:"#f1f5f9"},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},formatter:D=>[`${Ha(D)}`,"Revenue"]}),g.jsx(Lx,{dataKey:"amount",fill:"#0ea5e9",radius:[4,4,0,0],barSize:40,children:_e.map((D,H)=>g.jsx(Dx,{fill:D.amount>0?"#0ea5e9":"#e2e8f0"},`cell-${H}`))})]})})})]})]})}),S&&g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/90 p-8 backdrop-blur-xl",children:g.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-7xl h-[94vh] flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-300",children:[g.jsxs("div",{className:"flex justify-between items-center px-10 py-6 border-b-2 border-slate-50 bg-white",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"p-3 bg-brand-50 rounded-2xl text-brand-600",children:g.jsx(uh,{size:24})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-black text-slate-900 uppercase tracking-widest text-sm",children:"Invoice Preview"}),g.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"PDF Document Viewer"})]})]}),g.jsx("button",{onClick:()=>_(null),className:"text-slate-300 hover:bg-rose-50 hover:text-rose-500 rounded-full p-3 transition-all",children:g.jsx(Ao,{size:28})})]}),g.jsx("div",{className:"flex-1 bg-slate-100 p-10 overflow-hidden relative",children:g.jsx("iframe",{src:S,className:"w-full h-full rounded-3xl shadow-2xl border-8 border-white bg-white",title:"PDF Preview"})}),g.jsx("div",{className:"p-8 border-t-2 border-slate-50 bg-white flex justify-end",children:g.jsx("button",{onClick:()=>_(null),className:"px-12 py-4 bg-slate-900 text-white font-black hover:bg-slate-800 rounded-2xl transition-all text-[10px] uppercase tracking-[0.2em] shadow-2xl shadow-slate-900/20",children:"Exit Preview Mode"})})]})})]})},AR=({size:t,className:e})=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[g.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),g.jsx("path",{d:"M3 3v5h5"}),g.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),g.jsx("path",{d:"M16 16h5v5"})]}),TR=t=>{if(!t)return"-";const e=new Date(t);return isNaN(e.getTime())?"-":new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)},ER=async(t,e,n,i)=>{if(!n.xeroWebhookUrl)throw new Error("Xero Webhook URL not configured");const o={Type:"ACCREC",Contact:{Name:(e==null?void 0:e.name)||t.customerName||"Unknown Customer",EmailAddress:(e==null?void 0:e.email)||t.customerEmail||"",Phones:e!=null&&e.phone?[{PhoneType:"DEFAULT",PhoneNumber:e.phone}]:[],Addresses:[{AddressType:"POBOX",AddressLine1:(e==null?void 0:e.address)||t.customerAddress||"",AddressLine2:(e==null?void 0:e.addressLine2)||"",City:(e==null?void 0:e.city)||"",Region:(e==null?void 0:e.region)||"",PostalCode:(e==null?void 0:e.postalCode)||"",Country:(e==null?void 0:e.country)||""}]},Date:t.dateIssued.split("T")[0],DueDate:t.dueDate.split("T")[0],Reference:t.invoiceNumber,Status:"AUTHORISED",LineAmountTypes:"Exclusive",LineItems:t.items.map(l=>{const c=l.unit==="sqm"||l.description&&l.description.toLowerCase().includes("sqm"),d=(t.taxRate||0)/100;if(c&&l.quantity%1!==0){const b=Math.ceil(l.quantity),S=l.quantity*l.unitPrice,_=S/b,T=S*d;return{Description:`${l.description} (Qty Adjusted: ${l.quantity} -> ${b})`,Quantity:b,UnitAmount:Number(_.toFixed(4)),TaxAmount:Number(T.toFixed(2)),AccountCode:"200"}}const v=l.quantity*l.unitPrice*d;return{Description:l.description,Quantity:l.quantity,UnitAmount:l.unitPrice,TaxAmount:Number(v.toFixed(2)),AccountCode:"200"}}),_metadata:{source:"Clonmel Glass Invoice Hub",transferredBy:(i==null?void 0:i.email)||"system",timestamp:new Date().toISOString(),company:n.companyName}};try{return(await fetch(n.xeroWebhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok}catch(l){return console.error("Xero Transfer Failed:",l),!1}},C2=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),CR=({status:t,overdue:e})=>{const n={[mn.PAID]:{style:"bg-emerald-50 text-emerald-700 border-emerald-100",icon:g.jsx(_h,{size:10}),label:"PAID"},[mn.PARTIALLY_PAID]:{style:"bg-amber-50 text-amber-700 border-amber-200",icon:g.jsx(El,{size:10}),label:"PARTIALLY PAID"},[mn.UNPAID]:{style:e?"bg-rose-50 text-rose-700 border-rose-200 animate-pulse":"bg-slate-50 text-slate-600 border-slate-200",icon:e?g.jsx(Pc,{size:10}):g.jsx(El,{size:10}),label:e?"OVERDUE":"UNPAID"}},{style:i,icon:a,label:o}=n[t]||n[mn.UNPAID];return g.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[9px] font-black border transition-all shadow-sm ${i} tracking-widest`,children:[a,o]})},kR=({paid:t,total:e})=>{const n=Math.min(100,Math.max(0,t/e*100));return g.jsxs("div",{className:"w-full max-w-[100px] flex flex-col gap-1",children:[g.jsxs("div",{className:"flex justify-between text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:[g.jsx("span",{children:"Progress"}),g.jsxs("span",{children:[Math.round(n),"%"]})]}),g.jsx("div",{className:"h-1.5 w-full bg-slate-100 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out ${n===100?"bg-emerald-500":"bg-emerald-400"}`,style:{width:`${n}%`}})})]})},RR=()=>{const{invoices:t,updateInvoice:e,deleteInvoice:n,setView:i,companyLogo:a,setEditingInvoice:o,settings:l,customers:c,user:d}=Os(),[h,v]=je.useState(""),[b,S]=je.useState(null),[_,T]=je.useState(""),k=t.filter(O=>{var z,W;return(O.documentType==="invoice"||!O.documentType)&&O.invoiceNumber&&!O.invoiceNumber.startsWith("QT-")&&(((z=O.customerName)==null?void 0:z.toLowerCase().includes(h.toLowerCase()))||((W=O.invoiceNumber)==null?void 0:W.toLowerCase().includes(h.toLowerCase())))}),I=O=>{const z=parseFloat(_);if(isNaN(z)||z<=0)return;const W=(O.amountPaid||0)+z,B=O.total-W;let q=mn.PARTIALLY_PAID;B<=.05&&(q=mn.PAID),e({...O,amountPaid:Math.min(W,O.total),balanceDue:q===mn.PAID?0:Math.max(0,B),status:q,paymentDate:q===mn.PAID?new Date().toISOString():O.paymentDate}),S(null),T("")},C=async O=>{if(window.confirm(`Delete invoice ${O.invoiceNumber}?`))try{await n(O.id)}catch(z){console.error("Failed to delete invoice:",z),alert("Failed to delete invoice. Please try again.")}},R=async O=>{if(!l.webhookUrl){alert("Please configure Webhook URL (n8n) in Settings -> Integrations first.");return}const z=O.reminderCount||0,B=z===0?"First Mail":"Reminder";if(window.confirm(`Send invoice ${O.invoiceNumber} to ${O.customerEmail||"customer"}?

Type: ${B}`))try{const q=c.find(ee=>ee.id===O.customerId);await _R(O,l,a,q,B),alert(`Invoice sent successfully! (${B})`),e({...O,lastReminderSent:new Date().toISOString(),reminderCount:z+1})}catch(q){console.error(q),alert("Failed to send invoice. Check settings.")}},L=async O=>{if(!l.xeroWebhookUrl){alert("Please configure Xero Webhook URL in Settings -> Integrations first.");return}if(window.confirm(`Transfer ${O.invoiceNumber} to Xero?`))try{const z=c.find(B=>B.id===O.customerId),W=await ER(O,z,l,d);alert(W?"Transferred to Xero successfully!":"Failed to transfer to Xero.")}catch(z){console.error(z),alert("Xero transfer failed.")}};return g.jsxs("div",{className:"max-w-[95%] mx-auto space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-black text-slate-800 tracking-tight uppercase",children:["Invoice ",g.jsx("span",{className:"text-brand-500",children:"List"})]}),g.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Manage global ledger & collections"})]}),g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsxs("div",{className:"relative group",children:[g.jsx(Fc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-300",size:16}),g.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-3 bg-white text-slate-900 border-2 border-slate-100 rounded-2xl focus:ring-4 focus:ring-brand-500/10 focus:border-brand-500 outline-none text-xs w-full md:w-80",value:h,onChange:O=>v(O.target.value)})]}),g.jsx("button",{onClick:()=>{o(null),i("CREATE_INVOICE")},className:"bg-brand-600 text-white px-6 py-3 rounded-2xl font-black hover:bg-brand-700 transition-all text-[10px] uppercase tracking-[0.2em]",children:"New Invoice"})]})]}),g.jsx("div",{className:"bg-white rounded-[2.5rem] shadow-sm border-2 border-slate-100 overflow-hidden",children:g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-slate-50/70 border-b-2 border-slate-100",children:[g.jsx("th",{className:"text-left py-6 px-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Customer"}),g.jsx("th",{className:"text-right py-6 px-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Amount"}),g.jsx("th",{className:"text-center py-6 px-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Progress"}),g.jsx("th",{className:"text-center py-6 px-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Status"}),g.jsx("th",{className:"text-center py-6 px-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:k.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:5,className:"text-center py-12 text-slate-400",children:"No invoices found"})}):k.map(O=>{const z=O.dueDate&&new Date(O.dueDate)<new Date&&O.status!==mn.PAID,W=b===O.id;return g.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[g.jsxs("td",{className:"py-6 px-10",children:[g.jsx("div",{className:"text-lg font-black text-slate-900",children:O.customerName||"Unknown"}),g.jsx("div",{className:"text-[10px] font-bold text-slate-400 mt-0.5",children:O.invoiceNumber}),g.jsx("div",{className:"text-[10px] font-bold text-slate-600 mt-1",children:TR(O.dateIssued)})]}),g.jsxs("td",{className:"py-6 px-10 text-right",children:[g.jsx("div",{className:"text-sm font-black text-slate-900",children:C2(O.total)}),g.jsxs("div",{className:"text-[10px] font-bold text-rose-500 mt-0.5",children:["Balance: ",C2(O.balanceDue||0)]})]}),g.jsx("td",{className:"py-6 px-10 align-middle",children:g.jsx(kR,{paid:O.amountPaid||0,total:O.total})}),g.jsx("td",{className:"py-6 px-10 text-center",children:g.jsx(CR,{status:O.status,overdue:!!z})}),g.jsx("td",{className:"py-6 px-10",children:g.jsx("div",{className:"flex items-center justify-center gap-2",children:W?g.jsxs("div",{className:"flex items-center gap-2 bg-white shadow-lg p-1 rounded-xl border border-slate-100 animate-in fade-in zoom-in-95 duration-200",children:[g.jsxs("div",{className:"flex gap-1 mr-1",children:[g.jsx("button",{onClick:()=>T((O.balanceDue||0).toString()),className:"px-2 py-1 text-[10px] font-black bg-brand-50 text-brand-600 rounded-md hover:bg-brand-100 transition-colors uppercase",title:"Pay Full Balance",children:"Full"}),g.jsx("button",{onClick:()=>T(((O.balanceDue||0)/2).toFixed(2)),className:"px-2 py-1 text-[10px] font-black bg-slate-50 text-slate-600 rounded-md hover:bg-slate-100 transition-colors uppercase",title:"Pay 50%",children:"50%"})]}),g.jsxs("div",{className:"relative",children:[g.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs font-bold",children:""}),g.jsx("input",{autoFocus:!0,type:"number",className:"w-24 pl-6 pr-2 py-1.5 text-xs font-bold border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent outline-none",placeholder:"Amount",value:_,onChange:B=>T(B.target.value),onKeyDown:B=>{B.key==="Enter"&&I(O),B.key==="Escape"&&(S(null),T(""))}})]}),g.jsx("button",{onClick:()=>I(O),className:"p-1.5 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors shadow-sm",children:g.jsx(C0,{size:14,strokeWidth:3})}),g.jsx("button",{onClick:()=>{S(null),T("")},className:"p-1.5 bg-slate-100 text-slate-500 rounded-lg hover:bg-slate-200 transition-colors",children:g.jsx(Ao,{size:14,strokeWidth:3})})]}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>{S(O.id),T((O.balanceDue||0).toString())},className:"p-2 text-emerald-600 bg-emerald-50 hover:bg-emerald-500 hover:text-white rounded-xl transition-all",title:"Record Payment",children:g.jsx(lN,{size:16})}),g.jsx("button",{onClick:()=>{o(O),i("CREATE_INVOICE")},className:"p-2 text-amber-600 bg-amber-50 hover:bg-amber-500 hover:text-white rounded-xl transition-all",title:"Edit",children:g.jsx(ib,{size:16})}),g.jsx("button",{onClick:async()=>{const B=await Am(O,l);window.open(B,"_blank")},className:"p-2 text-brand-600 bg-brand-50 hover:bg-brand-600 hover:text-white rounded-xl transition-all",title:"View PDF",children:g.jsx(uh,{size:16})}),g.jsx("button",{onClick:()=>R(O),className:"p-2 text-violet-600 bg-violet-50 hover:bg-violet-500 hover:text-white rounded-xl transition-all",title:"Send via Email (n8n)",children:g.jsx(cm,{size:16})}),g.jsx("button",{onClick:()=>L(O),className:"p-2 text-blue-600 bg-blue-50 hover:bg-blue-500 hover:text-white rounded-xl transition-all",title:"Send to Xero",children:g.jsx(X_,{size:16})}),g.jsx("button",{onClick:()=>m5(O,l),className:"p-2 text-slate-600 bg-slate-50 hover:bg-slate-500 hover:text-white rounded-xl transition-all",title:"Download",children:g.jsx(eb,{size:16})}),g.jsx("button",{onClick:()=>C(O),className:"p-2 text-rose-600 bg-rose-50 hover:bg-rose-500 hover:text-white rounded-xl transition-all",title:"Delete",children:g.jsx(No,{size:16})})]})})})]},O.id)})})]})})})]})},k2=({label:t,value:e,onChange:n,min:i,max:a,align:o="left"})=>{const[l,c]=je.useState(!1),[d,h]=je.useState(new Date),v=je.useRef(null);je.useEffect(()=>{if(e){const z=new Date(e);isNaN(z.getTime())||h(z)}else h(new Date)},[l,e]),je.useEffect(()=>{const z=W=>{v.current&&!v.current.contains(W.target)&&c(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const b=z=>new Date(z.getFullYear(),z.getMonth()+1,0).getDate(),S=z=>new Date(z.getFullYear(),z.getMonth(),1).getDay(),_=z=>{h(new Date(d.getFullYear(),d.getMonth()+z,1))},T=z=>{const W=new Date(d.getFullYear(),d.getMonth(),z),B=W.getFullYear(),q=String(W.getMonth()+1).padStart(2,"0"),ee=String(W.getDate()).padStart(2,"0"),ue=`${B}-${q}-${ee}`;n(ue),c(!1)},k=z=>{const W=new Date;return z===W.getDate()&&d.getMonth()===W.getMonth()&&d.getFullYear()===W.getFullYear()},I=z=>{if(!e)return!1;const W=new Date(e);return z===W.getDate()&&d.getMonth()===W.getMonth()&&d.getFullYear()===W.getFullYear()},C=z=>z.toLocaleDateString("en-US",{month:"long",year:"numeric"}),R=b(d),L=S(d),O=[];for(let z=0;z<L;z++)O.push(null);for(let z=1;z<=R;z++)O.push(z);return g.jsxs("div",{className:"relative",ref:v,children:[t&&g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:t}),g.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>c(!l),children:[g.jsx(Sh,{size:16,className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-brand-500 transition-colors"}),g.jsx("div",{className:`w-full text-slate-900 bg-white border-2 rounded-xl px-4 py-3 text-sm transition-all flex items-center h-[46px] ${l?"border-brand-500 ring-4 ring-brand-500/10":"border-slate-200 hover:border-slate-300"}`,children:e?new Date(e).toLocaleDateString("en-GB"):g.jsx("span",{className:"text-slate-400",children:"Select Date..."})})]}),l&&g.jsxs("div",{className:`absolute z-50 mt-2 bg-white rounded-xl shadow-2xl border border-slate-200 p-4 w-[300px] ${o==="right"?"right-0":"left-0"} animate-in fade-in zoom-in-95 duration-200`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("button",{onClick:()=>_(-1),className:"p-1 hover:bg-slate-100 rounded-lg text-slate-600 transition-colors",children:g.jsx(lm,{size:20})}),g.jsx("span",{className:"font-bold text-slate-800",children:C(d)}),g.jsx("button",{onClick:()=>_(1),className:"p-1 hover:bg-slate-100 rounded-lg text-slate-600 transition-colors",children:g.jsx(um,{size:20})})]}),g.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(z=>g.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:z},z))}),g.jsx("div",{className:"grid grid-cols-7 gap-1 text-center",children:O.map((z,W)=>g.jsx("div",{children:z?g.jsx("button",{onClick:()=>T(z),className:`w-8 h-8 rounded-lg text-sm font-semibold flex items-center justify-center transition-all
                      ${I(z)?"bg-brand-600 text-white shadow-md shadow-brand-500/30":k(z)?"bg-brand-50 text-brand-600 border border-brand-200":"text-slate-700 hover:bg-slate-100"}
                    `,children:z}):g.jsx("div",{className:"w-8 h-8"})},W))})]})]})},g5=je.createContext(void 0),IR=({children:t})=>{const[e,n]=je.useState([]),i=je.useCallback((o,l="info",c=3e3)=>{const d=Math.random().toString(36).substr(2,9);n(h=>[...h,{id:d,type:l,message:o,duration:c}]),c>0&&setTimeout(()=>{n(h=>h.filter(v=>v.id!==d))},c)},[]),a=o=>{n(l=>l.filter(c=>c.id!==o))};return g.jsxs(g5.Provider,{value:{showToast:i},children:[t,g.jsx("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 pointer-events-none",children:e.map(o=>g.jsxs("div",{className:`pointer-events-auto min-w-[300px] max-w-sm w-full bg-white rounded-xl shadow-2xl border-l-4 p-4 flex items-start gap-3 animate-in slide-in-from-right-full fade-in duration-300 ${o.type==="success"?"border-brand-500":o.type==="error"?"border-rose-500":o.type==="warning"?"border-amber-500":"border-slate-500"}`,children:[g.jsxs("div",{className:`mt-0.5 ${o.type==="success"?"text-brand-500":o.type==="error"?"text-rose-500":o.type==="warning"?"text-amber-500":"text-slate-500"}`,children:[o.type==="success"&&g.jsx(k0,{size:20}),o.type==="error"&&g.jsx(Pc,{size:20}),o.type==="warning"&&g.jsx(QN,{size:20}),o.type==="info"&&g.jsx(yN,{size:20})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"text-sm font-bold text-slate-800 capitalize",children:o.type}),g.jsx("p",{className:"text-xs text-slate-600 font-medium mt-1 leading-relaxed",children:o.message})]}),g.jsx("button",{onClick:()=>a(o.id),className:"text-slate-400 hover:text-slate-600 transition-colors",children:g.jsx(Ao,{size:16})})]},o.id))})]})},v5=()=>{const t=je.useContext(g5);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},yl=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),LR=()=>{var ui;const{products:t,addInvoice:e,updateInvoice:n,user:i,setView:a,customers:o,addCustomer:l,editingInvoice:c,setEditingInvoice:d,settings:h}=Os(),{showToast:v}=v5(),[b,S]=je.useState("invoice"),[_,T]=je.useState(`INV-${Date.now().toString().slice(-6)}`);je.useEffect(()=>{if(c){if(T(c.invoiceNumber),R(c.customerName),O(c.customerEmail||""),W(c.customerPhone||""),q(c.customerAddress||""),pe(c.dateIssued.split("T")[0]),D(c.dueDate.split("T")[0]),K(c.items),fe(c.notes||""),I(c.company||"clonmel"),c.documentType==="invoice"&&(c.invoiceNumber.startsWith("QT")||c.invoiceNumber.startsWith("qt"))){const Be=Math.floor(1e3+Math.random()*9e3);T(`INV-${new Date().getFullYear()}-${Be}`)}else T(c.invoiceNumber);S(c.documentType||"invoice"),ae(c.taxRate||h.taxRate||23)}else T(`${b==="quote"?"QT":"INV"}-${Date.now().toString().slice(-6)}`),ae(h.taxRate||23)},[c,b,h]);const[k,I]=je.useState("clonmel"),[C,R]=je.useState(""),[L,O]=je.useState(""),[z,W]=je.useState(""),[B,q]=je.useState(""),[ee,ue]=je.useState(""),[F,j]=je.useState(""),[ne,ie]=je.useState(""),[be,U]=je.useState(""),[$,re]=je.useState("Ireland"),[oe,pe]=je.useState(new Date().toISOString().split("T")[0]),[_e,D]=je.useState(""),[H,K]=je.useState([]),[Z,ae]=je.useState(23),[de,se]=je.useState(null),[he,Ae]=je.useState(""),[Me,Ke]=je.useState(""),[Ye,st]=je.useState(""),[Le,fe]=je.useState(""),[Et,ut]=je.useState(!1),[$e,Ze]=je.useState(""),[tt,et]=je.useState(!1),[We,Se]=je.useState(""),[Qe,ct]=je.useState(null);je.useEffect(()=>{c&&ct(c.customerId)},[c]);const[bt,Ht]=je.useState(!1),[pt,Nt]=je.useState(""),[it,En]=je.useState(""),[Lt,qt]=je.useState(1),[Pt,St]=je.useState(""),[Kn,Yt]=je.useState(""),[Cr,an]=je.useState(!1),[vi,Yi]=je.useState(""),on=je.useMemo(()=>{const Be={};return t.filter($t=>k==="mirrorzone"?$t.company==="mirrorzone"||!$t.company&&$t.category==="Mirrors":$t.company==="clonmel"||!$t.company&&$t.category!=="Mirrors").forEach($t=>{Be[$t.category]||(Be[$t.category]=[]),Be[$t.category].push($t)}),Be},[t,k]),_t=H.reduce((Be,Mt)=>Be+Mt.total,0),Vt=_t*Z/100,es=_t+Vt,gn=t.find(Be=>Be.id===We),ji=vi?parseFloat(vi):gn?gn.price:0,yi=typeof Lt=="string"?parseFloat(Lt)||0:Lt,xt=ji*yi,sr=xt*(1+Z/100),ar=(Be,Mt)=>{const $t=parseFloat(Be),Dn=parseFloat(Mt);if(!isNaN($t)&&!isNaN(Dn)&&$t>0&&Dn>0){const Fn=$t*Dn/1e6;qt(Number(Fn.toFixed(6)))}else qt(0)},Ei=()=>{if(!We||!gn)return;let Be=it||gn.name;Cr&&Pt&&Kn&&(Be+=` (${Pt}mm x ${Kn}mm)`);const Mt={id:Date.now().toString(),productId:gn.id,description:Be,quantity:yi,unitPrice:ji,total:ji*yi,unit:gn.unit};K([...H,Mt]),Se(""),En(""),qt(1),St(""),Yt(""),Yi(""),an(!1)},jn=Be=>{K(H.filter(Mt=>Mt.id!==Be))},Ln=Be=>{se(Be.id),Ae(Be.description),Ke(Be.quantity.toString()),st(Be.unitPrice.toString())},Ci=()=>{if(de){const Be=parseFloat(Me)||0,Mt=parseFloat(Ye)||0;K(H.map($t=>$t.id===de?{...$t,description:he,quantity:Be,unitPrice:Mt,total:Be*Mt}:$t)),se(null)}},vs=()=>{se(null)},[li,ln]=je.useState(!1),wn=async()=>{if(!C||H.length===0){v("Please fill in customer details and add at least one item.","warning");return}const Be=[ee,F,ne,be,$].filter(Boolean).join(", ");ln(!0);try{let Mt=Qe;if(!Mt&&C){const Dn=o.find(Fn=>Fn.name.toLowerCase()===C.toLowerCase()||Fn.email&&L&&Fn.email.toLowerCase()===L.toLowerCase());if(Dn)Mt=Dn.id;else{const Fn={id:Date.now().toString()+Math.random().toString(36).substr(2,5),name:C,email:L,phone:z,address:ee,addressLine2:F,city:ne,postalCode:be,country:$,company:"",notes:"Auto-created from Invoice Builder",tags:["Auto-Created"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(i==null?void 0:i.id)||"system"};await l(Fn),Mt=Fn.id,v(`New customer "${C}" added to CRM.`,"success")}}const $t={id:c&&c.id?c.id:Date.now().toString(),invoiceNumber:_,customerId:Mt||"cust_unknown",customerName:C,customerEmail:L,customerPhone:z,customerAddress:Be,company:k,documentType:b,items:H,subtotal:_t,taxRate:Z,taxAmount:Vt,total:es,amountPaid:c?c.amountPaid:0,balanceDue:es-(c?c.amountPaid:0),status:c?c.status:b==="quote"?"PENDING":mn.UNPAID,dateIssued:oe,dueDate:_e||oe,notes:Le,createdBy:(i==null?void 0:i.id)||"unknown",validUntil:b==="quote"?(c==null?void 0:c.validUntil)||new Date(Date.now()+720*60*60*1e3).toISOString():void 0};c&&c.id?(c.documentType!==b&&b==="invoice"&&$t.status==="PENDING"&&($t.status=mn.UNPAID),await n($t)):await e($t),d(null),v(`${b==="quote"?"Quote":"Invoice"} saved successfully.`,"success"),a(b==="quote"?"QUOTES":"INVOICES")}catch(Mt){console.error("Failed to save:",Mt),v("Failed to save invoice/quote. Check console for details.","error")}finally{ln(!1)}};return g.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-10",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:[c?"Edit":"Generate"," ",b==="quote"?"Quote":"Invoice"]}),g.jsxs("div",{className:"flex gap-4 mt-4 bg-slate-100 p-1.5 rounded-2xl w-fit",children:[g.jsx("button",{onClick:()=>S("invoice"),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${b==="invoice"?"bg-slate-800 text-white shadow-slate-900/10 scale-100":"bg-transparent text-slate-400 hover:text-slate-600 scale-95 hover:scale-100"}`,children:"Invoice Mode"}),g.jsx("button",{onClick:()=>S("quote"),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${b==="quote"?"bg-brand-500 text-white shadow-brand-500/20 scale-100":"bg-transparent text-slate-400 hover:text-slate-600 scale-95 hover:scale-100"}`,children:"Quote Mode"})]})]}),g.jsx("button",{onClick:()=>a("INVOICES"),className:"text-slate-500 hover:text-slate-800 font-semibold text-sm bg-slate-100 px-4 py-2 rounded-lg transition-colors self-start md:self-auto",children:"Cancel & Exit"})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200",children:[g.jsx("div",{className:`p-6 border-b-4 ${k==="clonmel"?"bg-gradient-to-r from-red-600 to-red-700 border-red-800":"bg-gradient-to-r from-slate-900 to-purple-900 border-purple-950"}`,children:g.jsxs("div",{className:"max-w-2xl mx-auto",children:[g.jsx("label",{className:"block text-xs font-black text-white/80 uppercase tracking-[0.2em] mb-3 text-center",children:"Select Company for Invoice"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsx("button",{type:"button",onClick:()=>{I("clonmel"),Se(""),an(!1),qt(1),St(""),Yt(""),En("")},className:`p-6 rounded-xl border-2 transition-all duration-300 ${k==="clonmel"?"bg-white border-white shadow-2xl scale-105":"bg-red-600/30 border-white/30 hover:bg-red-600/50 hover:border-white/50"}`,children:g.jsxs("div",{className:`text-center ${k==="clonmel"?"text-red-600":"text-white"}`,children:[g.jsx("div",{className:"text-xl font-black mb-1",children:"CLONMEL GLASS"}),g.jsx("div",{className:"text-xs font-semibold opacity-70",children:"& Mirrors Ltd"}),k==="clonmel"&&g.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[g.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"Selected"]})]})}),g.jsx("button",{type:"button",onClick:()=>{I("mirrorzone"),Se(""),an(!1),qt(1),St(""),Yt(""),En("")},className:`p-6 rounded-xl border-2 transition-all duration-300 ${k==="mirrorzone"?"bg-white border-white shadow-2xl scale-105":"bg-slate-900/30 border-white/30 hover:bg-slate-900/50 hover:border-white/50"}`,children:g.jsxs("div",{className:`text-center ${k==="mirrorzone"?"text-slate-900":"text-white"}`,children:[g.jsx("div",{className:"text-xl font-black",children:"MIRRORZONE"}),k==="mirrorzone"&&g.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-slate-900 text-white px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[g.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),"Selected"]})]})})]})]})}),g.jsxs("div",{className:"p-6 md:p-8 bg-slate-50 border-b border-slate-200 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"relative",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:"Search & Select Customer (Optional)"}),g.jsxs("div",{className:"relative",children:[g.jsx(Fc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:16}),g.jsx("input",{type:"text",placeholder:"Type name, email or phone...",value:$e,onChange:Be=>{Ze(Be.target.value),et(!0)},onFocus:()=>et(!0),className:"w-full pl-11 pr-4 py-3 bg-white border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all text-sm font-semibold text-slate-700"})]}),tt&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>et(!1)}),g.jsxs("div",{className:"absolute z-20 w-full mt-2 bg-white rounded-xl border-2 border-slate-100 shadow-xl max-h-60 overflow-y-auto",children:[o.filter(Be=>Be.name.toLowerCase().includes($e.toLowerCase())||Be.email.toLowerCase().includes($e.toLowerCase())||Be.phone.includes($e)).map(Be=>g.jsxs("button",{onClick:()=>{R(Be.name),O(Be.email),W(Be.phone);const Mt=[Be.address,Be.city,Be.postalCode,Be.country];q(Mt.filter(Boolean).join(", ")),Ze(Be.name),ct(Be.id),et(!1)},className:"w-full text-left px-4 py-3 hover:bg-slate-50 transition-colors border-b border-slate-50 last:border-0 flex justify-between items-center group",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-slate-800 text-sm group-hover:text-brand-600 transition-colors",children:Be.name}),g.jsxs("div",{className:"text-xs text-slate-400",children:[Be.email,"  ",Be.phone]})]}),C===Be.name&&g.jsx(C0,{size:16,className:"text-brand-500"})]},Be.id)),o.filter(Be=>Be.name.toLowerCase().includes($e.toLowerCase())||Be.email.toLowerCase().includes($e.toLowerCase())||Be.phone.includes($e)).length===0&&g.jsx("div",{className:"p-4 text-center text-xs text-slate-400 font-medium",children:"No matching customers found"})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:"Customer / Client"}),g.jsx("input",{type:"text",className:"w-full text-lg font-bold text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 focus:ring-4 focus:ring-brand-500/10 focus:border-brand-500 outline-none transition-all",placeholder:"Search or enter name...",value:C,onChange:Be=>R(Be.target.value)})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:"Email"}),g.jsx("input",{type:"email",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",placeholder:"email@example.com",value:L,onChange:Be=>O(Be.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:"Phone"}),g.jsxs("div",{className:"relative",children:[g.jsx(dm,{size:14,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),g.jsx("input",{type:"tel",className:"w-full pl-10 text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",placeholder:"Phone number",value:z,onChange:Be=>W(Be.target.value)})]})]})]}),g.jsxs("div",{className:"space-y-3 p-1",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-1",children:"Billing Address"}),g.jsx("input",{type:"text",placeholder:"Address Line 1",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",value:ee,onChange:Be=>ue(Be.target.value)}),g.jsx("input",{type:"text",placeholder:"Address Line 2 (Optional)",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",value:F,onChange:Be=>j(Be.target.value)}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsx("input",{type:"text",placeholder:"City",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",value:ne,onChange:Be=>ie(Be.target.value)}),g.jsx("input",{type:"text",placeholder:"Eircode / Postcode",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",value:be,onChange:Be=>U(Be.target.value)})]}),g.jsx("input",{type:"text",placeholder:"Country",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",value:$,onChange:Be=>re(Be.target.value)})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsx("div",{children:g.jsx(k2,{label:"Issue Date",value:oe,onChange:pe})}),g.jsx("div",{children:g.jsx(k2,{label:"Due Date",value:_e,onChange:D,align:"right"})})]}),g.jsxs("div",{className:"p-5 bg-white rounded-2xl border-2 border-slate-100 shadow-sm flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("span",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Document Reference"}),g.jsx("span",{className:"font-mono text-sm font-bold text-brand-600",children:_})]}),g.jsx("div",{className:"h-10 w-10 bg-brand-50 rounded-full flex items-center justify-center text-brand-500",children:g.jsx(dh,{size:20})})]})]})]}),g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"mb-8 p-6 bg-slate-50 rounded-2xl border-2 border-slate-100 space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-end",children:[g.jsxs("div",{className:"flex-1 w-full",children:[g.jsxs("label",{className:"block text-[10px] font-black text-slate-500 mb-2 uppercase tracking-wider flex items-center gap-2",children:[g.jsx("span",{className:"flex items-center justify-center h-4 w-4 bg-brand-600 text-white rounded-full text-[8px]",children:"1"}),"Select Product from Catalog"]}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>{Ht(!bt),Nt("")},className:"w-full border-2 border-slate-200 text-slate-700 rounded-lg px-3 py-2.5 text-sm font-medium bg-white shadow-sm transition-all focus:outline-none focus:ring-4 focus:ring-brand-500/10 focus:border-brand-500 flex items-center justify-between group",children:[g.jsx("span",{className:We?"text-slate-900":"text-slate-400",children:We?(ui=t.find(Be=>Be.id===We))==null?void 0:ui.name:"Search all glass & mirrors..."}),g.jsx($_,{size:16,className:`text-slate-400 transition-transform ${bt?"rotate-180":""}`})]}),bt&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>Ht(!1)}),g.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border-2 border-slate-100 z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[g.jsx("div",{className:"p-2 border-b border-slate-50 sticky top-0 bg-white",children:g.jsxs("div",{className:"relative",children:[g.jsx(Fc,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),g.jsx("input",{autoFocus:!0,type:"text",placeholder:"Type to filter...",className:"w-full bg-slate-50 text-slate-900 rounded-lg pl-9 pr-3 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-brand-500/10",value:pt,onChange:Be=>Nt(Be.target.value),onClick:Be=>Be.stopPropagation()})]})}),g.jsxs("div",{className:"max-h-60 overflow-y-auto p-1",children:[Object.entries(on).map(([Be,Mt])=>{const $t=Mt.filter(Dn=>Dn.name.toLowerCase().includes(pt.toLowerCase()));return $t.length===0?null:g.jsxs("div",{className:"mb-1",children:[g.jsx("div",{className:"px-3 py-1.5 text-[10px] uppercase tracking-widest font-black text-slate-400 bg-slate-50/50 rounded-md mb-1 mx-1",children:Be}),$t.map(Dn=>g.jsxs("button",{onClick:()=>{Se(Dn.id);const Fn=t.find(ys=>ys.id===Dn.id);Fn&&(En(Fn.name),Fn.unit==="sqm"&&k!=="mirrorzone"?(an(!0),qt(0)):(an(!1),qt(1))),Ht(!1)},className:"w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-slate-700 hover:bg-brand-50 hover:text-brand-700 transition-colors flex items-center justify-between group",children:[g.jsx("span",{children:Dn.name}),g.jsxs("span",{className:"text-xs text-slate-400 font-mono group-hover:text-brand-500",children:[yl(Dn.price),"/",Dn.unit]})]},Dn.id))]},Be)}),Object.values(on).every(Be=>Be.filter(Mt=>Mt.name.toLowerCase().includes(pt.toLowerCase())).length===0)&&g.jsx("div",{className:"p-4 text-center text-slate-400 text-xs font-medium italic",children:"No products found."})]})]})]})]}),g.jsx("div",{className:"absolute right-0 top-0 -mt-7",children:g.jsxs("button",{onClick:()=>a("PRODUCTS"),className:"text-[10px] font-bold text-brand-600 hover:text-brand-700 hover:underline flex items-center gap-1",children:[g.jsx(_l,{size:10}),"Manage Products"]})})]}),!Cr&&We&&g.jsxs("div",{className:"flex gap-3 w-full md:w-auto animate-in zoom-in duration-200",children:[g.jsxs("div",{className:"w-20",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 mb-2 uppercase tracking-wider",children:"Quantity"}),g.jsx("input",{type:"number",min:"1",className:"w-full border-2 border-slate-200 text-slate-700 rounded-lg px-3 py-2.5 text-sm font-medium focus:outline-none focus:border-brand-500 bg-white shadow-sm",value:Lt,onChange:Be=>qt(Be.target.value)})]}),g.jsxs("div",{className:"w-28",children:[g.jsxs("label",{className:"block text-[10px] font-black text-slate-500 mb-2 uppercase tracking-wider whitespace-nowrap",children:["Price () ",g.jsx("span",{className:"text-[9px] text-slate-400 font-bold normal-case ml-1",children:"(Override)"})]}),g.jsx("input",{type:"number",placeholder:gn?gn.price.toFixed(2):"0.00",className:"w-full border-2 border-slate-200 text-slate-700 rounded-lg px-3 py-2.5 text-sm font-medium focus:outline-none focus:border-brand-500 bg-white shadow-sm placeholder:text-slate-300",value:vi,onChange:Be=>Yi(Be.target.value)})]})]}),g.jsxs("div",{className:"w-full md:w-auto flex flex-col gap-2",children:[We&&g.jsxs("div",{className:"text-right px-2 animate-in fade-in duration-300",children:[g.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block",children:["Subtotal: ",yl(xt)]}),g.jsxs("span",{className:"text-xs font-black text-brand-600 block",children:["Inc VAT: ",yl(sr)]})]}),g.jsxs("button",{onClick:Ei,disabled:!We||Cr&&(isNaN(parseFloat(Pt))||isNaN(parseFloat(Kn))||parseFloat(Pt)<=0||parseFloat(Kn)<=0),className:"w-full bg-brand-600 text-white px-6 py-2.5 rounded-lg hover:bg-brand-700 transition-all flex items-center justify-center space-x-2 text-xs font-bold shadow-lg shadow-brand-500/20 disabled:opacity-50 disabled:shadow-none uppercase tracking-wider",children:[g.jsx(_l,{size:16}),g.jsx("span",{children:"ADD ITEM"})]})]})]}),Cr&&k!=="mirrorzone"&&g.jsxs("div",{className:"flex flex-col md:flex-row items-stretch gap-6 p-6 bg-white rounded-2xl border-2 border-brand-500 shadow-2xl animate-in slide-in-from-top-4 duration-300",children:[g.jsx("div",{className:"flex items-center justify-center px-4 text-brand-500 bg-brand-50 rounded-xl",children:g.jsx(jN,{size:32})}),g.jsxs("div",{className:"grid grid-cols-2 gap-6 flex-1 w-full",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"block text-xs font-black text-brand-600 uppercase tracking-widest ml-1",children:"Width (mm)"}),g.jsx("input",{type:"number",placeholder:"0",autoFocus:!0,className:"w-full border-4 border-brand-100 bg-white text-slate-900 rounded-xl px-5 py-4 text-xl font-black outline-none focus:border-brand-500 transition-all placeholder:text-slate-300",value:Pt,onChange:Be=>{St(Be.target.value),ar(Be.target.value,Kn)}})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"block text-xs font-black text-brand-600 uppercase tracking-widest ml-1",children:"Height (mm)"}),g.jsx("input",{type:"number",placeholder:"0",className:"w-full border-4 border-brand-100 bg-white text-slate-900 rounded-xl px-5 py-4 text-xl font-black outline-none focus:border-brand-500 transition-all placeholder:text-slate-300",value:Kn,onChange:Be=>{Yt(Be.target.value),ar(Pt,Be.target.value)}})]})]}),g.jsxs("div",{className:"flex flex-row md:flex-col items-center justify-center gap-4 w-full md:w-48 pt-4 md:pt-0 border-t md:border-t-0 md:border-l border-slate-100",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest",children:"Calculated SQM"}),g.jsx("div",{className:"text-3xl font-black text-brand-600 leading-none",children:Lt.toFixed(6)})]}),g.jsx("button",{onClick:()=>{St(""),Yt(""),qt(0)},className:"px-4 py-2 text-[10px] font-black text-rose-500 hover:text-white bg-rose-50 hover:bg-rose-500 rounded-lg transition-all uppercase tracking-widest",children:"Clear"})]})]})]}),g.jsx("div",{className:"overflow-x-auto rounded-xl border-2 border-slate-100",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-slate-50 border-b-2 border-slate-100",children:g.jsxs("tr",{children:[g.jsx("th",{className:"text-left py-4 px-6 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Product Description"}),g.jsx("th",{className:"text-center py-4 px-6 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Qty / SQM"}),g.jsx("th",{className:"text-right py-4 px-6 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Unit Price"}),g.jsx("th",{className:"text-right py-4 px-6 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Line Total"}),g.jsx("th",{className:"w-16"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:H.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:5,className:"py-12 text-center text-slate-400",children:g.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[g.jsx(Z2,{size:32,className:"opacity-20"}),g.jsx("p",{className:"text-xs font-medium italic",children:"No items added to this invoice yet."})]})})}):H.map(Be=>g.jsxs("tr",{className:"group hover:bg-slate-50/80 transition-colors",children:[g.jsx("td",{className:"py-4 px-6",children:de===Be.id?g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("input",{type:"text",autoFocus:!0,className:"w-full border border-brand-200 text-slate-700 rounded px-2 py-1 text-sm font-medium focus:outline-none focus:border-brand-500 bg-white",value:he,onChange:Mt=>Ae(Mt.target.value),onKeyDown:Mt=>{Mt.key==="Enter"&&Ci(),Mt.key==="Escape"&&vs()}})}):g.jsxs("div",{className:"group/desc relative pr-8",children:[g.jsx("div",{className:"text-sm font-medium text-slate-900",children:Be.description}),g.jsx("div",{className:"text-[10px] text-brand-500 font-mono font-bold mt-0.5",children:Be.productId})]})}),g.jsx("td",{className:"py-4 px-6 text-center text-sm font-bold text-slate-700",children:de===Be.id?g.jsx("input",{type:"number",className:"w-20 text-center border border-brand-200 rounded px-2 py-1 text-sm font-medium focus:outline-none focus:border-brand-500 bg-white",value:Me,onChange:Mt=>Ke(Mt.target.value)}):Be.quantity}),g.jsx("td",{className:"py-4 px-6 text-right text-sm font-medium text-slate-500",children:de===Be.id?g.jsx("input",{type:"number",className:"w-24 text-right border border-brand-200 rounded px-2 py-1 text-sm font-medium focus:outline-none focus:border-brand-500 bg-white",value:Ye,onChange:Mt=>st(Mt.target.value)}):yl(Be.unitPrice)}),g.jsx("td",{className:"py-4 px-6 text-right text-sm font-bold text-slate-900",children:yl(Be.total)}),g.jsx("td",{className:"py-4 px-6 text-right",children:de===Be.id?g.jsxs("div",{className:"flex justify-end gap-1",children:[g.jsx("button",{onClick:Ci,className:"p-1.5 bg-emerald-100 text-emerald-600 rounded-lg hover:bg-emerald-200",children:g.jsx(C0,{size:14})}),g.jsx("button",{onClick:vs,className:"p-1.5 bg-slate-100 text-slate-500 rounded-lg hover:bg-slate-200",children:g.jsx(Ao,{size:14})})]}):g.jsxs("div",{className:"flex justify-end gap-1",children:[g.jsx("button",{onClick:()=>Ln(Be),className:"p-2 text-slate-300 hover:text-brand-600 hover:bg-brand-50 rounded-lg transition-all",children:g.jsx(DN,{size:16})}),g.jsx("button",{onClick:()=>jn(Be.id),className:"p-2 text-slate-300 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-all",children:g.jsx(No,{size:16})})]})})]},Be.id))})]})})]}),g.jsx("div",{className:"p-6 md:p-8",children:g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start pt-10 mt-6 border-t-2 border-slate-100",children:[g.jsxs("div",{className:"w-full md:w-1/2 pr-0 md:pr-12 mb-10 md:mb-0",children:[g.jsxs("label",{className:"text-xs font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[g.jsx(iA,{size:14,className:"text-purple-500"}),"Custom Notes & Terms"]}),g.jsx("textarea",{className:"w-full border-2 border-slate-200 text-slate-900 rounded-2xl px-5 py-4 text-sm h-40 focus:ring-4 focus:ring-brand-500/10 focus:border-brand-500 outline-none resize-none shadow-sm transition-all",placeholder:"Enter specific project notes or banking instructions...",value:Le,onChange:Be=>fe(Be.target.value)}),g.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-3 uppercase tracking-wider",children:"Note: These details are visible to the customer on the PDF."})]}),g.jsxs("div",{className:"w-full md:w-[400px] bg-slate-900 text-white p-8 rounded-[2rem] space-y-6 shadow-2xl relative overflow-hidden",children:[g.jsxs("div",{className:"space-y-4 relative z-10",children:[g.jsxs("div",{className:"flex justify-between text-sm items-center border-b border-white/10 pb-4",children:[g.jsx("span",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"Subtotal"}),g.jsx("span",{className:"font-mono font-bold text-lg",children:yl(_t)})]}),g.jsxs("div",{className:"flex justify-between text-sm items-center pb-2",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"VAT Amount"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] font-black text-brand-400",children:"Rate:"}),g.jsx("input",{type:"number",value:Z,onChange:Be=>ae(parseFloat(Be.target.value)),className:"w-12 bg-slate-800 border border-slate-700 rounded px-1 py-0.5 text-xs text-white text-center font-bold focus:border-brand-500 outline-none"}),g.jsx("span",{className:"text-[10px] font-black text-brand-400",children:"%"})]})]}),g.jsx("span",{className:"font-mono font-bold text-lg",children:yl(Vt)})]})]}),g.jsx("div",{className:"pt-6 border-t-2 border-white/20 relative z-10",children:g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("span",{className:"text-[10px] font-black text-brand-500 uppercase tracking-widest",children:"Total Invoice Value"}),g.jsxs("div",{className:"flex justify-between items-end",children:[g.jsx("span",{className:"text-2xl font-black tracking-tighter text-white",children:"TOTAL DUE"}),g.jsx("span",{className:"text-4xl font-black text-brand-500 font-mono leading-none",children:yl(es)})]})]})})]})]})})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-5 pb-20",children:[g.jsx("button",{onClick:()=>a("INVOICES"),className:"px-10 py-5 rounded-2xl border-2 border-slate-200 text-slate-500 font-black hover:bg-slate-100 transition-all text-xs uppercase tracking-[0.2em]",children:"Discard Draft"}),g.jsx("button",{onClick:wn,disabled:li,className:"px-10 py-5 rounded-2xl bg-brand-600 text-white font-black hover:bg-brand-700 transition-all flex items-center justify-center space-x-4 text-xs uppercase tracking-[0.2em] shadow-2xl shadow-brand-500/40 disabled:opacity-50",children:li?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),g.jsx("span",{children:"Saving..."})]}):g.jsxs(g.Fragment,{children:[g.jsx(dh,{size:20}),g.jsx("span",{children:c?"Update & Save Changes":"Save & Finalize Invoice"})]})})]})]})},R2=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),DR=()=>{const{invoices:t,setView:e,setSelectedInvoiceId:n}=Os(),[i,a]=je.useState(new Date),[o,l]=je.useState(new Date),c=["January","February","March","April","May","June","July","August","September","October","November","December"],d=(R,L)=>new Date(L,R+1,0).getDate(),h=(R,L)=>new Date(L,R,1).getDay(),v=()=>{a(new Date(i.getFullYear(),i.getMonth()-1,1))},b=()=>{a(new Date(i.getFullYear(),i.getMonth()+1,1))},S=()=>{const R=new Date;a(new Date(R.getFullYear(),R.getMonth(),1)),l(R)},_=je.useMemo(()=>{const R=i.getMonth(),L=i.getFullYear(),O=d(R,L),z=h(R,L),W=[],B=d(R-1,L);for(let ee=z-1;ee>=0;ee--)W.push({day:B-ee,month:R-1,year:L,currentMonth:!1});for(let ee=1;ee<=O;ee++)W.push({day:ee,month:R,year:L,currentMonth:!0});const q=42-W.length;for(let ee=1;ee<=q;ee++)W.push({day:ee,month:R+1,year:L,currentMonth:!1});return W},[i]),T=je.useMemo(()=>{const R={};return t.forEach(L=>{try{if(L.documentType==="quote"||!L.dueDate)return;const O=new Date(L.dueDate);if(isNaN(O.getTime()))return;const z=O.toISOString().split("T")[0];R[z]||(R[z]=[]),R[z].push(L)}catch{console.warn("Skipping invoice with invalid date:",L.id)}}),R},[t]),k=(R,L,O)=>{const W=new Date(O,L,R).toISOString().split("T")[0];return T[W]||[]},I=je.useMemo(()=>{if(!o)return[];const R=o.toISOString().split("T")[0];return T[R]||[]},[o,T]),C=new Date().toISOString().split("T")[0];try{return g.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 md:space-y-8 animate-in fade-in duration-700 pb-12",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-4xl font-black text-slate-800 tracking-tight flex items-center gap-4",children:[g.jsx("div",{className:"p-3 bg-brand-500 text-white rounded-2xl shadow-xl shadow-brand-500/20",children:g.jsx(Sh,{size:28})}),"Payment Schedule"]}),g.jsxs("p",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.3em] mt-3 flex items-center gap-2",children:[g.jsx(JN,{size:14,className:"text-brand-500"}),"Collection Strategy & Deadline Monitoring"]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("button",{onClick:S,className:"px-4 py-3 bg-white border-2 border-slate-100 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-600 hover:text-brand-600 hover:border-brand-200 transition-all shadow-sm",children:"Today"}),g.jsxs("div",{className:"flex items-center bg-white border-2 border-slate-100 rounded-xl p-1 shadow-sm",children:[g.jsx("button",{onClick:v,className:"p-2 text-slate-400 hover:text-brand-600 hover:bg-slate-50 rounded-lg transition-all",children:g.jsx(lm,{size:20})}),g.jsxs("div",{className:"px-4 text-xs font-black text-slate-800 uppercase tracking-widest min-w-[140px] text-center",children:[c[i.getMonth()]," ",i.getFullYear()]}),g.jsx("button",{onClick:b,className:"p-2 text-slate-400 hover:text-brand-600 hover:bg-slate-50 rounded-lg transition-all",children:g.jsx(um,{size:20})})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[g.jsxs("div",{className:"xl:col-span-3",children:[g.jsxs("div",{className:"bg-white rounded-[2rem] border-2 border-slate-100 shadow-2xl overflow-hidden",children:[g.jsx("div",{className:"grid grid-cols-7 bg-slate-50 border-b-2 border-slate-100",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(R=>g.jsx("div",{className:"py-4 text-center text-[10px] font-black text-slate-400 uppercase tracking-widest",children:R},R))}),g.jsx("div",{className:"grid grid-cols-7",children:_.map((R,L)=>{const O=k(R.day,R.month,R.year),z=new Date(R.year,R.month,R.day),W=z.toISOString().split("T")[0],B=W===C,q=(o==null?void 0:o.toISOString().split("T")[0])===W,ee=O.some(j=>j.status!==mn.PAID),ue=O.some(j=>j.status!==mn.PAID&&new Date(j.dueDate)<new Date),F=O.length>0&&O.every(j=>j.status===mn.PAID);return g.jsxs("button",{onClick:()=>l(z),className:`relative h-28 p-4 border-r border-b border-slate-100 text-left transition-all group ${R.currentMonth?"bg-white":"bg-slate-50/30 opacity-30 grayscale"} ${q?"ring-2 ring-inset ring-brand-500 bg-brand-50/20":"hover:bg-slate-50/50"}`,children:[g.jsxs("div",{className:"flex justify-between items-start mb-1",children:[g.jsx("span",{className:`text-[11px] font-black ${B?"bg-brand-600 text-white h-6 w-6 rounded-lg flex items-center justify-center shadow-lg shadow-brand-500/20":q?"text-brand-600":"text-slate-400"}`,children:R.day}),O.length>0&&g.jsxs("div",{className:"flex gap-1",children:[ue&&g.jsx("div",{className:"h-2 w-2 rounded-full bg-rose-500 animate-pulse",title:"Overdue Items"}),ee&&!ue&&g.jsx("div",{className:"h-2 w-2 rounded-full bg-amber-400",title:"Pending Items"}),F&&g.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-500",title:"All Settled"})]})]}),O.length>0&&g.jsxs("div",{className:"mt-2",children:[g.jsx("div",{className:"text-[10px] font-black text-slate-900 truncate",children:(O[0].customerName||"Unknown").split(" ")[0]}),O.length>1&&g.jsxs("div",{className:"text-[8px] font-black text-slate-400 uppercase mt-0.5",children:["+ ",O.length-1," other",O.length>2?"s":""]}),g.jsxs("div",{className:"mt-2 text-[9px] font-bold text-brand-600",children:["",O.reduce((j,ne)=>j+ne.total,0).toLocaleString()]})]})]},L)})})]}),g.jsxs("div",{className:"mt-6 flex flex-wrap gap-6 items-center px-4",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-rose-500"}),g.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Overdue"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-amber-400"}),g.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pending"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-emerald-500"}),g.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Settled"})]})]})]}),g.jsx("div",{className:"xl:col-span-1",children:g.jsxs("div",{className:"bg-black rounded-[2.5rem] p-8 shadow-2xl h-full flex flex-col border border-white/5 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 h-40 w-40 bg-brand-500/10 rounded-full blur-3xl -mr-20 -mt-20"}),g.jsxs("div",{className:"relative z-10 mb-8 pb-8 border-b border-white/10",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("h3",{className:"text-[10px] font-black text-brand-500 uppercase tracking-[0.3em]",children:"Day Overview"}),g.jsx("div",{className:"h-8 w-8 bg-white/5 rounded-lg flex items-center justify-center text-slate-500",children:g.jsx(El,{size:16})})]}),g.jsxs("div",{className:"text-xl font-black text-white leading-tight",children:[o==null?void 0:o.toLocaleDateString(void 0,{weekday:"long"}),g.jsx("br",{}),g.jsx("span",{className:"text-brand-400",children:o==null?void 0:o.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]})]}),g.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto pr-2 custom-scrollbar relative z-10",children:I.length===0?g.jsxs("div",{className:"py-16 text-center",children:[g.jsx("div",{className:"h-20 w-20 bg-white/5 rounded-3xl flex items-center justify-center mx-auto mb-6",children:g.jsx(wN,{size:32,className:"text-slate-700"})}),g.jsxs("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest leading-loose",children:["No collections",g.jsx("br",{}),"slated for this day"]})]}):I.map(R=>{const L=new Date(R.dueDate)<new Date&&R.status!==mn.PAID,O=()=>{n(R.id),e("INVOICES")};return g.jsxs("div",{onClick:O,className:"group bg-white/5 hover:bg-white/10 rounded-2xl border border-white/5 p-5 transition-all cursor-pointer",children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("div",{className:"max-w-[140px]",children:[g.jsx("span",{className:"block text-[8px] font-black text-slate-500 uppercase tracking-widest mb-1",children:R.invoiceNumber}),g.jsx("span",{className:"block text-sm font-black text-white group-hover:text-brand-400 transition-colors truncate",children:R.customerName||"Unknown"})]}),g.jsx("div",{className:`p-2 rounded-lg ${R.status===mn.PAID?"bg-emerald-500/20 text-emerald-400":L?"bg-rose-500/20 text-rose-400":"bg-amber-500/20 text-amber-400"}`,children:R.status===mn.PAID?g.jsx(_h,{size:16}):L?g.jsx(Pc,{size:16}):g.jsx(El,{size:16})})]}),g.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(tb,{size:12,className:"text-brand-500"}),g.jsx("span",{className:"text-sm font-black text-white",children:R2(R.balanceDue||0)})]}),g.jsx("button",{onClick:()=>e("INVOICES"),className:"p-2 bg-white/10 rounded-lg text-slate-400 hover:text-white hover:bg-brand-600 transition-all",children:g.jsx(O_,{size:14})})]})]},R.id)})}),g.jsxs("div",{className:"mt-8 pt-8 border-t border-white/10 relative z-10",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5",children:[g.jsx("span",{className:"block text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Total Due"}),g.jsx("span",{className:"text-base font-black text-white",children:R2(I.reduce((R,L)=>R+(L.balanceDue||0),0))})]}),g.jsxs("div",{className:"bg-brand-600 p-4 rounded-2xl shadow-xl shadow-brand-500/10",children:[g.jsx("span",{className:"block text-[9px] font-black text-brand-200 uppercase tracking-widest mb-1",children:"Invoices"}),g.jsx("span",{className:"text-base font-black text-white",children:I.length})]})]}),g.jsxs("div",{className:"mt-6 flex items-center gap-3 p-4 bg-rose-500/10 rounded-2xl border border-rose-500/20",children:[g.jsx(Pc,{size:18,className:"text-rose-500 shrink-0"}),g.jsxs("p",{className:"text-[9px] font-bold text-rose-200 leading-relaxed",children:["Priority notification: ",I.filter(R=>new Date(R.dueDate)<new Date&&R.status!==mn.PAID).length," invoices require urgent follow-up today to maintain cash flow."]})]})]})]})})]})]})}catch(R){return g.jsxs("div",{className:"p-12 text-center",children:[g.jsx("div",{className:"bg-rose-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:g.jsx(Pc,{size:32,className:"text-rose-500"})}),g.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:"Calendar Error"}),g.jsx("p",{className:"text-slate-500 mb-6",children:"Something went wrong loading the calendar view."}),g.jsx("pre",{className:"bg-slate-100 p-4 rounded-xl text-left text-xs font-mono text-slate-600 overflow-auto max-w-2xl mx-auto",children:R instanceof Error?R.message:String(R)})]})}},MR=()=>{const{customers:t,addCustomer:e,updateCustomer:n,deleteCustomer:i,user:a}=Os(),[o,l]=je.useState(""),[c,d]=je.useState(!1),[h,v]=je.useState(null),[b,S]=je.useState(!1),_=aa.useRef(null),[T,k]=je.useState({name:"",email:"",phone:"",address:"",addressLine2:"",city:"",region:"",postalCode:"",country:"Ireland",company:"",notes:"",tags:[]}),[I,C]=je.useState(""),R=t.filter(U=>U.name.toLowerCase().includes(o.toLowerCase())||U.email.toLowerCase().includes(o.toLowerCase())||U.phone.includes(o)),L=U=>{const $=U.split(/\r?\n/);if($.length<2)return[];const re=$[0].split(",").map(pe=>pe.trim().toLowerCase().replace(/"/g,"")),oe=[];for(let pe=1;pe<$.length;pe++){if(!$[pe].trim())continue;const _e=[];let D=!1,H="";for(let Z of $[pe])Z==='"'?D=!D:Z===","&&!D?(_e.push(H.replace(/^"|"$/g,"").trim()),H=""):H+=Z;if(_e.push(H.replace(/^"|"$/g,"").trim()),_e.length<2)continue;const K={};re.forEach((Z,ae)=>{const de=_e[ae]||"";Z.includes("name")?K.name=de:Z.includes("email")?K.email=de:Z.includes("phone")||Z.includes("tel")?K.phone=de:Z.includes("city")?K.city=de:Z.includes("address")&&(Z.includes("2")||Z.includes("line 2"))?K.addressLine2=de:Z.includes("address")||Z.includes("street")?K.address=de:Z.includes("region")||Z.includes("county")||Z.includes("state")||Z.includes("province")?K.region=de:Z.includes("company")?K.company=de:Z.includes("code")||Z.includes("zip")||Z.includes("post")?K.postalCode=de:Z.includes("country")&&(K.country=de)}),!K.name&&_e[0]&&(K.name=_e[0]),!K.email&&_e[1]&&_e[1].includes("@")&&(K.email=_e[1]),K.name&&oe.push(K)}return oe},O=async U=>{var oe;const $=(oe=U.target.files)==null?void 0:oe[0];if(!$)return;S(!0);const re=new FileReader;re.onload=async pe=>{var _e;try{const D=(_e=pe.target)==null?void 0:_e.result,H=L(D);if(H.length===0){alert("No valid contacts found in CSV. Please check formatting.");return}if(confirm(`Found ${H.length} contacts. Import now?`)){let K=0;for(const Z of H)try{const ae={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:Z.name||"Unknown",email:Z.email||"",phone:Z.phone||"",address:Z.address||"",city:Z.city||"",postalCode:Z.postalCode||"",country:Z.country||"Ireland",company:Z.company||"",notes:"Imported via CSV",tags:["Imported"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(a==null?void 0:a.id)||"import"};await e(ae),K++}catch(ae){console.error("Failed to import contact:",Z,ae)}alert(`Successfully imported ${K} contacts.`)}}catch(D){console.error("Import error:",D),alert("Failed to process CSV file.")}finally{S(!1),_.current&&(_.current.value="")}},re.readAsText($)},z=U=>{U?(v(U),k({name:U.name,email:U.email,phone:U.phone,address:U.address||"",addressLine2:U.addressLine2||"",city:U.city||"",region:U.region||"",postalCode:U.postalCode||"",country:U.country||"Ireland",company:U.company||"",notes:U.notes||"",tags:U.tags||[]})):(v(null),k({name:"",email:"",phone:"",address:"",addressLine2:"",city:"",region:"",postalCode:"",country:"Ireland",company:"",notes:"",tags:[]})),d(!0)},W=()=>{d(!1),v(null),C("")},B=()=>{I.trim()&&!T.tags.includes(I.trim())&&(k({...T,tags:[...T.tags,I.trim()]}),C(""))},q=U=>{k({...T,tags:T.tags.filter($=>$!==U)})},ee=async U=>{U.preventDefault();const $={id:(h==null?void 0:h.id)||Date.now().toString(),...T,createdAt:(h==null?void 0:h.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(h==null?void 0:h.createdBy)||(a==null?void 0:a.id)||"unknown"};h?await n($):await e($),W()},ue=async U=>{confirm("Are you sure you want to delete this customer?")&&await i(U)},[F,j]=je.useState([]),ne=U=>{U.target.checked?j(R.map($=>$.id)):j([])},ie=U=>{j($=>$.includes(U)?$.filter(re=>re!==U):[...$,U])},be=async()=>{if(F.length!==0&&confirm(`Are you sure you want to delete ${F.length} customers? This cannot be undone.`)){let U=0;for(const $ of F)try{await i($),U++}catch(re){console.error(`Failed to delete customer ${$}:`,re)}j([]),alert(`Successfully deleted ${U} customers.`)}};return g.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 pb-12",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-4xl font-black text-slate-800 tracking-tight flex items-center gap-4",children:[g.jsx("div",{className:"p-3 bg-brand-500 text-white rounded-2xl shadow-xl shadow-brand-500/20",children:g.jsx(Wd,{size:28})}),"Customer List"]}),g.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.3em] mt-3",children:"Manage Your Client Database"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{type:"file",accept:".csv",className:"hidden",ref:_,onChange:O}),F.length>0?g.jsxs("button",{onClick:be,className:"flex items-center gap-2 px-6 py-4 bg-rose-600 text-white rounded-2xl hover:bg-rose-700 transition-all shadow-xl shadow-rose-500/20 font-black text-sm uppercase tracking-wider animate-in fade-in zoom-in",children:[g.jsx(No,{size:20}),"Delete Selected (",F.length,")"]}):g.jsxs("button",{onClick:()=>{var U;return(U=_.current)==null?void 0:U.click()},disabled:b,className:"flex items-center gap-2 px-6 py-4 bg-white text-slate-600 border-2 border-slate-200 rounded-2xl hover:bg-slate-50 transition-all font-black text-sm uppercase tracking-wider",children:[b?g.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-brand-500 rounded-full animate-spin"}):g.jsx(rb,{size:20}),"Bulk Import"]}),g.jsxs("button",{onClick:()=>z(),className:"flex items-center gap-2 px-6 py-4 bg-brand-600 text-white rounded-2xl hover:bg-brand-700 transition-all shadow-xl shadow-brand-500/20 font-black text-sm uppercase tracking-wider",children:[g.jsx(_l,{size:20}),"Add New Customer"]})]})]}),g.jsxs("div",{className:"relative",children:[g.jsx(Fc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search customers by name, email, or phone...",value:o,onChange:U=>l(U.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-slate-200 rounded-2xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all text-sm font-semibold"})]}),g.jsx("div",{className:"bg-white rounded-2xl border-2 border-slate-200 overflow-hidden shadow-sm overflow-x-auto",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-slate-50 border-b-2 border-slate-100",children:[g.jsx("th",{className:"px-6 py-4 text-left w-12",children:g.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-slate-300 text-brand-600 focus:ring-brand-500 transition-all",onChange:ne,checked:R.length>0&&F.length===R.length})}),g.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-500 uppercase tracking-widest",children:"Customer"}),g.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-500 uppercase tracking-widest",children:"Contact Info"}),g.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-500 uppercase tracking-widest hidden md:table-cell",children:"Location"}),g.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-500 uppercase tracking-widest hidden lg:table-cell",children:"Tags"}),g.jsx("th",{className:"px-6 py-4 text-right text-xs font-black text-slate-500 uppercase tracking-widest",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:R.map(U=>g.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[g.jsx("td",{className:"px-6 py-4",children:g.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-slate-300 text-brand-600 focus:ring-brand-500 transition-all",checked:F.includes(U.id),onChange:()=>ie(U.id)})}),g.jsx("td",{className:"px-6 py-4",children:g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-slate-900 text-sm",children:U.name}),U.company&&g.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-400 mt-1 uppercase tracking-wide",children:[g.jsx(E0,{size:10}),U.company]})]})}),g.jsx("td",{className:"px-6 py-4",children:g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600",children:[g.jsx(cm,{size:12,className:"text-slate-400"}),U.email]}),g.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600",children:[g.jsx(dm,{size:12,className:"text-slate-400"}),U.phone]})]})}),g.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:U.address||U.city?g.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600 max-w-[200px]",children:[g.jsx(EN,{size:12,className:"text-slate-400 mt-0.5 shrink-0"}),g.jsx("span",{className:"truncate",children:[U.address,U.city].filter(Boolean).join(", ")})]}):g.jsx("span",{className:"text-xs text-slate-300 italic",children:"No address"})}),g.jsx("td",{className:"px-6 py-4 hidden lg:table-cell",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:U.tags&&U.tags.length>0?U.tags.map($=>g.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 rounded text-[10px] font-bold uppercase tracking-wider",children:$},$)):g.jsx("span",{className:"text-xs text-slate-300 italic",children:"No tags"})})}),g.jsx("td",{className:"px-6 py-4 text-right",children:g.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:()=>z(U),className:"p-1.5 text-brand-600 bg-brand-50 rounded hover:bg-brand-600 hover:text-white transition-all",title:"Edit",children:g.jsx(Md,{size:14})}),g.jsx("button",{onClick:()=>ue(U.id),className:"p-1.5 text-rose-600 bg-rose-50 rounded hover:bg-rose-600 hover:text-white transition-all",title:"Delete",children:g.jsx(No,{size:14})})]})})]},U.id))})]})}),R.length===0&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-slate-100 rounded-full mb-4",children:g.jsx(Wd,{size:40,className:"text-slate-400"})}),g.jsx("p",{className:"text-slate-500 font-semibold",children:"No customers found"}),g.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Add your first customer to get started"})]}),c&&g.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"sticky top-0 bg-white border-b-2 border-slate-100 p-6 flex justify-between items-center rounded-t-3xl",children:[g.jsx("h3",{className:"text-2xl font-black text-slate-900",children:h?"Edit Customer":"Add New Customer"}),g.jsx("button",{onClick:W,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all",children:g.jsx(Ao,{size:24})})]}),g.jsxs("form",{onSubmit:ee,className:"p-6 space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Name *"}),g.jsx("input",{type:"text",required:!0,value:T.name,onChange:U=>k({...T,name:U.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"John Doe"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Email *"}),g.jsx("input",{type:"email",required:!0,value:T.email,onChange:U=>k({...T,email:U.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"john@example.com"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Phone *"}),g.jsx("input",{type:"tel",required:!0,value:T.phone,onChange:U=>k({...T,phone:U.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"+353 123 456 789"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Company"}),g.jsx("input",{type:"text",value:T.company,onChange:U=>k({...T,company:U.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Company Name"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Address"}),g.jsx("input",{type:"text",value:T.address,onChange:U=>k({...T,address:U.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Street Address"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Address Line 2"}),g.jsx("input",{type:"text",value:T.addressLine2,onChange:U=>k({...T,addressLine2:U.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Suite, Unit, Building, etc."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"City"}),g.jsx("input",{type:"text",value:T.city,onChange:U=>k({...T,city:U.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Clonmel"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Region / County"}),g.jsx("input",{type:"text",value:T.region,onChange:U=>k({...T,region:U.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Co. Tipperary"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Postal Code"}),g.jsx("input",{type:"text",value:T.postalCode,onChange:U=>k({...T,postalCode:U.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"E91 X123"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Country"}),g.jsx("input",{type:"text",value:T.country,onChange:U=>k({...T,country:U.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Ireland"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Tags"}),g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("input",{type:"text",value:I,onChange:U=>C(U.target.value),onKeyPress:U=>U.key==="Enter"&&(U.preventDefault(),B()),className:"flex-1 px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Add tag and press Enter"}),g.jsx("button",{type:"button",onClick:B,className:"px-4 py-3 bg-slate-100 text-slate-600 rounded-xl hover:bg-slate-200 transition-all font-bold",children:g.jsx(VN,{size:20})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:T.tags.map(U=>g.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-brand-100 text-brand-700 rounded-lg text-sm font-bold",children:[U,g.jsx("button",{type:"button",onClick:()=>q(U),className:"hover:text-brand-900",children:g.jsx(Ao,{size:14})})]},U))})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Notes"}),g.jsx("textarea",{value:T.notes,onChange:U=>k({...T,notes:U.target.value}),rows:4,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all resize-none",placeholder:"Additional notes about this customer..."})]})]}),g.jsxs("div",{className:"flex gap-4 pt-4 border-t-2 border-slate-100",children:[g.jsx("button",{type:"button",onClick:W,className:"flex-1 px-6 py-4 border-2 border-slate-200 text-slate-600 rounded-xl hover:bg-slate-50 transition-all font-black uppercase tracking-wider",children:"Cancel"}),g.jsxs("button",{type:"submit",className:"flex-1 px-6 py-4 bg-brand-600 text-white rounded-xl hover:bg-brand-700 transition-all font-black uppercase tracking-wider shadow-xl shadow-brand-500/20 flex items-center justify-center gap-2",children:[g.jsx(dh,{size:20}),h?"Update":"Create"," Customer"]})]})]})]})})]})},PR=t=>{const e=t.split(/\r?\n/);if(e.length<2)return{products:[],headers:[],errors:["File appears to be empty or missing headers."],totalRows:0};const n=e[0].replace(/^\uFEFF/,"").split(",").map(l=>l.trim().toLowerCase().replace(/"/g,"")),i=[],a=[];let o=0;for(let l=1;l<e.length;l++){if(!e[l].trim())continue;o++;const d=[];let h=!1,v="";for(let k of e[l])k==='"'?h=!h:k===","&&!h?(d.push(v.replace(/^"|"$/g,"").trim()),v=""):v+=k;if(d.push(v.replace(/^"|"$/g,"").trim()),d.length===0)continue;const b={};n.forEach((k,I)=>{const C=d[I]||"";k.includes("name")||k.includes("title")||k.includes("product")?b.name=C:k.includes("price")||k.includes("cost")||k.includes("rate")?b.price=C:k.includes("unit")?b.unit=C:k.includes("category")||k.includes("type")?b.category=C:k.includes("desc")?b.description=C:(k.includes("code")||k.includes("sku"))&&(b.sku=C)});const S=b.name,_=b.price?String(b.price).replace(/[^0-9.-]+/g,""):"0",T=parseFloat(_);S&&!isNaN(T)?i.push({name:S,price:T,unit:b.unit,category:b.category,description:b.description,sku:b.sku}):(S||a.push(`Row ${l+1}: Missing Product Name`),isNaN(T)&&a.push(`Row ${l+1}: Invalid Price '${b.price}'`))}return{products:i,headers:n,errors:a,totalRows:o}},I2=()=>{const{products:t,addProduct:e,updateProduct:n,deleteProduct:i,users:a,addUser:o,deleteUser:l,user:c,companyLogo:d,setCompanyLogo:h,isSyncing:v,databaseError:b,refreshDatabase:S,currentView:_}=Os(),{showToast:T}=v5(),[k,I]=je.useState(_==="USERS"?"USERS":"PRODUCTS"),[C,R]=je.useState("clonmel");je.useEffect(()=>{_==="USERS"&&I("USERS"),_==="PRODUCTS"&&I("PRODUCTS")},[_]);const[L,O]=je.useState([]),[z,W]=je.useState(b),[B,q]=je.useState(null),[ee,ue]=je.useState(""),[F,j]=je.useState(""),[ne,ie]=je.useState("sqm"),[be,U]=je.useState("Clear Glass"),[$,re]=je.useState(!1),[oe,pe]=je.useState(""),[_e,D]=je.useState(""),[H,K]=je.useState(Xr.USER);je.useEffect(()=>{v&&O(Se=>[{msg:"Synchronizing with remote cloud...",time:new Date().toLocaleTimeString()},...Se].slice(0,5))},[v]);const Z=je.useMemo(()=>{const Se=new Set(t.map(ct=>ct.category)),Qe=Array.from(Se);return Qe.includes("Clear Glass")||Qe.push("Clear Glass"),Qe.includes("Toughened")||Qe.push("Toughened"),Qe.includes("Mirrors")||Qe.push("Mirrors"),["All",...Qe.sort()]},[t]),[ae,de]=je.useState(""),[se,he]=je.useState("All"),Ae=je.useMemo(()=>t.filter(Se=>{const Qe=String(Se.name).toLowerCase().includes(ae.toLowerCase()),ct=String(Se.id).toLowerCase().includes(ae.toLowerCase()),bt=se==="All"||Se.category===se;return(Qe||ct)&&bt}),[t,ae,se]),[Me,Ke]=je.useState(!1),Ye=aa.useRef(null),st=async Se=>{var bt;const Qe=(bt=Se.target.files)==null?void 0:bt[0];if(!Qe)return;Ke(!0);const ct=new FileReader;ct.onload=async Ht=>{var pt;try{const Nt=(pt=Ht.target)==null?void 0:pt.result,{products:it,headers:En,errors:Lt}=PR(Nt);if(it.length===0){T(`No valid products found.

Detected Headers: ${En.join(", ")}

Required: 'Name' and 'Price'.
Please check your CSV formatting.`,"error",5e3),Lt.length>0&&console.error("CSV Parsing Errors:",Lt);return}if(confirm(`Found ${it.length} products. Import to ${C==="mirrorzone"?"Mirrorzone":"Clonmel Glass"}?`)){let qt=0,Pt=0;T(`Starting import of ${it.length} products...`,"info");for(const St of it)try{const Kn={id:`P-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,name:St.name||"Unknown Product",price:typeof St.price=="string"?parseFloat(String(St.price).replace(/[^0-9.-]+/g,"")):St.price,unit:St.unit||(C==="mirrorzone"?"pcs":"sqm"),category:St.category||(C==="mirrorzone"?"Mirrors":"Clear Glass"),description:St.description||St.sku||`Imported ${C} Product`,company:C};await e(Kn),qt++}catch(Kn){console.error("Failed to import product:",St,Kn),Pt++}Pt>0?T(`Import Complete.

Success: ${qt}
Failed: ${Pt}`,"warning",5e3):T(`Successfully imported ${qt} products.`,"success")}}catch(Nt){console.error("Import error:",Nt),T(`Failed to process CSV file: ${Nt.message}`,"error")}finally{Ke(!1),Ye.current&&(Ye.current.value="")}},ct.readAsText(Qe)};if((c==null?void 0:c.role)!==Xr.ADMIN)return g.jsx("div",{className:"p-20 text-center text-slate-500 font-black uppercase tracking-widest",children:"Access Restricted to Administrators"});const[Le,fe]=je.useState(new Set);je.useEffect(()=>{fe(new Set)},[C,k,se,ae]);const Et=Se=>{const Qe=new Set(Le);Qe.has(Se)?Qe.delete(Se):Qe.add(Se),fe(Qe)},ut=()=>{if(Le.size===Ae.length&&Ae.length>0)fe(new Set);else{const Se=Ae.filter(Qe=>Qe.company===C||!Qe.company&&(C==="mirrorzone"?Qe.category==="Mirrors":Qe.category!=="Mirrors")).map(Qe=>Qe.id);fe(new Set(Se))}},$e=async()=>{if(Le.size!==0&&confirm(`Are you sure you want to delete ${Le.size} products? This cannot be undone.`)){let Se=0;for(const Qe of Le)try{await i(Qe),Se++}catch(ct){console.error(`Failed to delete product ${Qe}`,ct)}fe(new Set),alert(`Successfully deleted ${Se} products.`)}},Ze=async Se=>{if(Se.preventDefault(),!ee||!F)return;const Qe=be,ct={id:B?B.id:`P-${Date.now().toString().slice(-4)}`,name:ee,price:parseFloat(F),unit:ne,description:`Commercial Grade ${Qe}`,category:Qe,company:C};try{B?await n(ct):await e(ct),q(null),ue(""),j(""),U("Clear Glass"),ie("sqm")}catch(bt){console.error("Save Product Error:",bt),alert(`Error saving product: ${bt.message||"Unknown DB Error"}. 

Check if the database migration was run.`)}},tt=async Se=>{if(window.confirm("Permanently remove this item from the catalog?"))try{await i(Se)}catch{alert("Deletion failed.")}},et=async Se=>{if(Se.preventDefault(),!oe||!_e)return;const Qe={id:`u-${Date.now()}`,name:oe,email:_e,role:H,avatar:`https://i.pravatar.cc/150?u=${_e}`};try{await o(Qe),pe(""),D(""),K(Xr.USER)}catch{alert("Failed to add user to database.")}},We=async Se=>{const Qe=a.find(bt=>bt.id===Se),ct=(Qe==null?void 0:Qe.name)||"this user";if(window.confirm(` DELETE USER PROFILE

Are you sure you want to permanently delete "${ct}"?

This will:
 Remove the user from the database
 Revoke all system access
 Delete the user profile from the site

This action CANNOT be undone.`))try{await l(Se),alert(` User "${ct}" has been successfully deleted from the system and database.`)}catch(bt){alert(" Failed to delete user. Please try again or check your database connection."),console.error("Delete user error:",bt)}};return g.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 pb-24",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:"System Engine"}),g.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-[0.3em] mt-2",children:"Node Instance: azyeptjbktvkqiigotbi"})]}),g.jsxs("div",{className:`flex items-center space-x-4 text-[10px] font-black border-2 px-6 py-2.5 rounded-2xl shadow-sm ${b?"bg-rose-50 border-rose-100 text-rose-600":"bg-brand-50 border-brand-100 text-brand-600"}`,children:[g.jsx(aN,{size:14,className:b?"text-rose-400":"text-brand-500"}),g.jsxs("span",{className:"uppercase tracking-[0.2em]",children:["Remote Status: ",b?"SCHEMA ERROR":"LIVE & SECURE"]})]})]}),g.jsxs("div",{className:"flex space-x-10 border-b-2 border-slate-100",children:[g.jsx("button",{onClick:()=>I("PRODUCTS"),className:`pb-5 px-1 text-[10px] font-black uppercase tracking-[0.2em] border-b-4 transition-all ${k==="PRODUCTS"?"border-brand-500 text-brand-600":"border-transparent text-slate-400 hover:text-slate-900"}`,children:"Catalog Manager"}),g.jsx("button",{onClick:()=>I("USERS"),className:`pb-5 px-1 text-[10px] font-black uppercase tracking-[0.2em] border-b-4 transition-all ${k==="USERS"?"border-brand-500 text-brand-600":"border-transparent text-slate-400 hover:text-slate-900"}`,children:"Permissions"})]}),Le.size>0&&g.jsxs("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-slate-900 text-white px-8 py-4 rounded-full shadow-2xl flex items-center gap-6 animate-in slide-in-from-bottom-10 fade-in duration-300",children:[g.jsxs("div",{className:"text-xs font-black uppercase tracking-widest",children:[Le.size," Items Selected"]}),g.jsxs("button",{onClick:$e,className:"flex items-center gap-2 bg-rose-600 hover:bg-rose-700 text-white px-4 py-2 rounded-xl transition-all font-bold text-xs uppercase tracking-wider",children:[g.jsx(No,{size:16})," Delete Selected"]}),g.jsx("button",{onClick:()=>fe(new Set),className:"p-2 hover:bg-slate-800 rounded-full transition-all text-slate-400 hover:text-white",children:g.jsx(Ao,{size:16})})]}),k==="PRODUCTS"&&g.jsxs("div",{className:"space-y-10",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsx("button",{onClick:()=>{R("clonmel"),U("Clear Glass"),he("All")},className:`p-6 rounded-2xl border-2 transition-all duration-300 ${C==="clonmel"?"bg-white border-white shadow-xl scale-[1.02]":"bg-red-600/5 border-red-600/10 hover:bg-red-600/10"}`,children:g.jsxs("div",{className:`text-center ${C==="clonmel"?"text-red-600":"text-slate-400"}`,children:[g.jsx("div",{className:"text-xl font-black mb-1",children:"CLONMEL GLASS"}),g.jsx("div",{className:"text-[10px] font-bold opacity-70 uppercase tracking-widest",children:"General Catalog"}),C==="clonmel"&&g.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-red-50 text-red-600 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[g.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Active"]})]})}),g.jsx("button",{onClick:()=>{R("mirrorzone"),U("Mirrors"),ie("pcs"),he("All")},className:`p-6 rounded-2xl border-2 transition-all duration-300 ${C==="mirrorzone"?"bg-white border-white shadow-xl scale-[1.02]":"bg-slate-900/5 border-slate-900/10 hover:bg-slate-900/10"}`,children:g.jsxs("div",{className:`text-center ${C==="mirrorzone"?"text-slate-900":"text-slate-400"}`,children:[g.jsx("div",{className:"text-xl font-black mb-1",children:"MIRRORZONE"}),g.jsx("div",{className:"text-[10px] font-bold opacity-70 uppercase tracking-widest",children:"Mirrors Collection"}),C==="mirrorzone"&&g.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-slate-100 text-slate-900 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[g.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),"Active"]})]})})]}),g.jsxs("div",{className:"bg-white p-8 md:p-10 rounded-[2.5rem] border-2 border-slate-100 shadow-2xl animate-in slide-in-from-top-4 duration-500",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8 border-b-2 border-slate-50 pb-6",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:`h-12 w-12 rounded-2xl flex items-center justify-center text-white shadow-lg ${B?"bg-amber-500 shadow-amber-500/20":C==="mirrorzone"?"bg-slate-900 shadow-slate-900/20":"bg-red-600 shadow-red-600/20"}`,children:B?g.jsx(Md,{size:24}):g.jsx(_l,{size:24})}),g.jsx("div",{children:g.jsx("h3",{className:"font-black text-slate-800 uppercase tracking-widest leading-none",children:B?"Edit Catalog Entry":`Add to ${C==="mirrorzone"?"Mirrorzone":"Clonmel Glass"}`})})]}),B&&g.jsx("button",{onClick:()=>{q(null),ue(""),j("")},className:"p-3 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-2xl transition-all",children:g.jsx(Ao,{size:20})})]}),g.jsxs("form",{onSubmit:Ze,className:"grid grid-cols-1 md:grid-cols-4 gap-6 items-end",children:[g.jsxs("div",{className:"md:col-span-1 space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Display Name"}),g.jsx("input",{type:"text",placeholder:C==="mirrorzone"?"e.g. 6MM ANTIQUE MIRROR":"e.g. 10MM TOUGH SATIN",required:!0,value:ee,onChange:Se=>ue(Se.target.value),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-sm font-black focus:border-brand-500 outline-none transition-all"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Unit Price ()"}),g.jsx("input",{type:"number",step:"0.01",required:!0,placeholder:"0.00",value:F,onChange:Se=>j(Se.target.value),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-sm font-black focus:border-brand-500 outline-none transition-all"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Classification"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:be,onChange:Se=>U(Se.target.value),onFocus:()=>re(!0),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl pl-6 pr-10 py-4 text-sm font-black focus:border-brand-500 outline-none transition-all",placeholder:C==="mirrorzone"?"Mirrors":"e.g. Clear Glass"}),g.jsx("button",{type:"button",onClick:()=>re(!$),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-brand-500",children:g.jsx(lm,{size:20,className:`transform transition-transform ${$?"-rotate-90":"rotate-0"}`})}),$&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>re(!1)}),g.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white rounded-xl border-2 border-slate-200 shadow-2xl max-h-80 overflow-y-auto animate-in zoom-in-95 duration-100",children:g.jsxs("div",{className:"py-2",children:[Z.filter(Se=>Se!=="All").map(Se=>g.jsx("button",{type:"button",onClick:()=>{U(Se),re(!1)},className:"w-full text-left px-4 py-3 hover:bg-slate-50 text-sm font-bold text-slate-700 hover:text-brand-600 transition-colors border-b border-slate-50 last:border-0",children:Se},Se)),be&&!Z.includes(be)&&g.jsxs("button",{type:"button",onClick:()=>re(!1),className:"w-full text-left px-4 py-3 bg-brand-50 hover:bg-brand-100 text-sm font-black text-brand-600 transition-colors flex items-center gap-2 border-t-2 border-brand-100",children:[g.jsx(_l,{size:14}),g.jsxs("span",{children:['Add "',be,'" as new']})]}),g.jsx("div",{className:"px-4 py-2 text-[10px] text-slate-400 font-bold uppercase tracking-widest border-t border-slate-50 mt-1 bg-slate-50/50",children:"Type in box to add custom..."})]})})]})]})]}),g.jsx("div",{className:"flex gap-3",children:g.jsxs("button",{type:"submit",disabled:v,className:`flex-1 flex items-center justify-center gap-3 font-black py-4 rounded-2xl transition-all disabled:opacity-50 shadow-2xl uppercase text-[10px] tracking-[0.2em] ${B?"bg-amber-600 hover:bg-amber-700 text-white shadow-amber-500/20":C==="mirrorzone"?"bg-slate-900 hover:bg-slate-800 text-white shadow-slate-900/20":"bg-red-600 hover:bg-red-700 text-white shadow-red-600/20"}`,children:[v?g.jsx(r0,{className:"animate-spin",size:16}):B?g.jsx(Md,{size:16}):g.jsx(_l,{size:16}),B?"Apply Edit":"Add Product"]})})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-white p-5 rounded-3xl border-2 border-slate-100 flex gap-5 shadow-sm items-center",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsx(Fc,{size:18,className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400"}),g.jsx("input",{type:"text",placeholder:`Search ${C==="mirrorzone"?"mirrors":"glass"}...`,value:ae,onChange:Se=>de(Se.target.value),className:"w-full pl-14 pr-6 py-4 bg-white border-2 border-slate-200 text-slate-900 rounded-2xl text-sm font-bold focus:border-brand-500 outline-none transition-all"})]}),g.jsx("input",{type:"file",accept:".csv",className:"hidden",ref:Ye,onChange:st}),g.jsxs("button",{onClick:()=>{var Se;return(Se=Ye.current)==null?void 0:Se.click()},disabled:Me,className:"flex items-center gap-2 px-6 py-4 bg-slate-50 text-slate-600 border-2 border-slate-100 rounded-2xl hover:bg-slate-100 transition-all font-black text-[10px] uppercase tracking-widest whitespace-nowrap",children:[Me?g.jsx(r0,{className:"animate-spin",size:16}):g.jsx(rb,{size:16}),"Import CSV"]}),C!=="mirrorzone"&&g.jsx("select",{value:se,onChange:Se=>he(Se.target.value),className:"bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-[10px] font-black uppercase tracking-widest outline-none focus:border-brand-500",children:Z.filter(Se=>Se!=="Mirrors").map(Se=>g.jsx("option",{value:Se,children:Se},Se))})]}),C==="mirrorzone"&&g.jsxs("div",{className:"bg-white rounded-[2rem] border-2 border-slate-100 overflow-hidden shadow-xl mb-12 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[g.jsxs("div",{className:"bg-slate-900 px-8 py-4 flex items-center justify-between",children:[g.jsxs("h3",{className:"text-white font-black uppercase tracking-widest text-sm flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),g.jsx("input",{type:"checkbox",onChange:ut,className:"w-4 h-4 rounded border-slate-600 bg-slate-800 text-purple-600 focus:ring-purple-500"}),"Mirrorzone ",g.jsx("span",{className:"opacity-50",children:"Collection"})]}),g.jsx("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-800 px-3 py-1 rounded-full uppercase tracking-widest",children:"Mirrors Only"})]}),g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-slate-50/80 border-b-2 border-slate-100",children:g.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:[g.jsx("th",{className:"w-12 px-8 py-6",children:g.jsx("span",{className:"sr-only",children:"Select"})}),g.jsx("th",{className:"text-left px-4 py-6",children:"Product Line"}),g.jsx("th",{className:"text-left px-8 py-6",children:"Pricing Index"}),g.jsx("th",{className:"text-right px-8 py-6",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:Ae.filter(Se=>Se.company==="mirrorzone"||!Se.company&&(Se.category==="Mirrors"||String(Se.category).toLowerCase().includes("mirror"))).length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:4,className:"p-12 text-center text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No mirrors found in catalog"})}):Ae.filter(Se=>Se.company==="mirrorzone"||!Se.company&&(Se.category==="Mirrors"||String(Se.category).toLowerCase().includes("mirror"))).map(Se=>g.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors group ${Le.has(Se.id)?"bg-purple-50/50":""}`,children:[g.jsx("td",{className:"px-8 py-6",children:g.jsx("input",{type:"checkbox",checked:Le.has(Se.id),onChange:()=>Et(Se.id),className:"w-5 h-5 rounded-md border-2 border-slate-300 text-purple-600 focus:ring-purple-500 cursor-pointer"})}),g.jsxs("td",{className:"px-4 py-6",children:[g.jsx("div",{className:"font-black text-slate-900 group-hover:text-brand-600 transition-colors",children:String(Se.name)}),g.jsx("div",{className:"text-[9px] font-bold text-slate-400 mt-1 uppercase",children:String(Se.category)})]}),g.jsxs("td",{className:"px-8 py-6",children:[g.jsxs("span",{className:"text-sm font-black text-slate-800",children:["",Number(Se.price).toFixed(2)]}),g.jsx("span",{className:"text-[10px] font-bold text-slate-400 ml-1.5 uppercase",children:"/ UNIT"})]}),g.jsxs("td",{className:"px-8 py-6 text-right flex items-center justify-end gap-3",children:[g.jsx("button",{onClick:()=>{q(Se),ue(Se.name),j(Se.price.toString()),ie(Se.unit),U(Se.category),window.scrollTo({top:0,behavior:"smooth"})},className:"p-3 text-slate-300 hover:text-amber-600 hover:bg-amber-50 rounded-2xl transition-all",children:g.jsx(Md,{size:18})}),g.jsx("button",{onClick:()=>tt(Se.id),className:"p-3 text-slate-300 hover:text-rose-600 hover:bg-rose-50 rounded-2xl transition-all",children:g.jsx(No,{size:18})})]})]},Se.id))})]})]}),C==="clonmel"&&g.jsxs("div",{className:"bg-white rounded-[2rem] border-2 border-slate-100 overflow-hidden shadow-xl animate-in fade-in slide-in-from-bottom-4 duration-500",children:[g.jsxs("div",{className:"bg-red-600 px-8 py-4 flex items-center justify-between",children:[g.jsxs("h3",{className:"text-white font-black uppercase tracking-widest text-sm flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),g.jsx("input",{type:"checkbox",onChange:ut,className:"w-4 h-4 rounded border-brand-200 bg-red-700 text-white focus:ring-white"}),"Clonmel Glass ",g.jsx("span",{className:"opacity-70",children:"Collection"})]}),g.jsx("span",{className:"text-[10px] font-bold text-white/80 bg-red-700 px-3 py-1 rounded-full uppercase tracking-widest",children:"General Catalog"})]}),g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-slate-50/80 border-b-2 border-slate-100",children:g.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:[g.jsx("th",{className:"w-12 px-8 py-6",children:g.jsx("span",{className:"sr-only",children:"Select"})}),g.jsx("th",{className:"text-left px-4 py-6",children:"Product Line"}),g.jsx("th",{className:"text-left px-8 py-6",children:"Pricing Index"}),g.jsx("th",{className:"text-right px-8 py-6",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:Ae.filter(Se=>Se.company==="clonmel"||!Se.company&&!String(Se.category).toLowerCase().includes("mirror")).length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:4,className:"p-12 text-center text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No other products found"})}):Ae.filter(Se=>Se.company==="clonmel"||!Se.company&&!String(Se.category).toLowerCase().includes("mirror")).map(Se=>g.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors group ${Le.has(Se.id)?"bg-red-50/50":""}`,children:[g.jsx("td",{className:"px-8 py-6",children:g.jsx("input",{type:"checkbox",checked:Le.has(Se.id),onChange:()=>Et(Se.id),className:"w-5 h-5 rounded-md border-2 border-slate-300 text-brand-600 focus:ring-brand-500 cursor-pointer"})}),g.jsxs("td",{className:"px-4 py-6",children:[g.jsx("div",{className:"font-black text-slate-900 group-hover:text-brand-600 transition-colors",children:String(Se.name)}),g.jsx("div",{className:"text-[9px] font-bold text-slate-400 mt-1 uppercase",children:String(Se.category)})]}),g.jsxs("td",{className:"px-8 py-6",children:[g.jsxs("span",{className:"text-sm font-black text-slate-800",children:["",Number(Se.price).toFixed(2)]}),g.jsxs("span",{className:"text-[10px] font-bold text-slate-400 ml-1.5 uppercase",children:["/ ",String(Se.unit)]})]}),g.jsxs("td",{className:"px-8 py-6 text-right flex items-center justify-end gap-3",children:[g.jsx("button",{onClick:()=>{q(Se),ue(Se.name),j(Se.price.toString()),ie(Se.unit),U(Se.category),window.scrollTo({top:0,behavior:"smooth"})},className:"p-3 text-slate-300 hover:text-amber-600 hover:bg-amber-50 rounded-2xl transition-all",children:g.jsx(Md,{size:18})}),g.jsx("button",{onClick:()=>tt(Se.id),className:"p-3 text-slate-300 hover:text-rose-600 hover:bg-rose-50 rounded-2xl transition-all",children:g.jsx(No,{size:18})})]})]},Se.id))})]})]})]})]}),k==="USERS"&&g.jsxs("div",{className:"space-y-10",children:[g.jsxs("div",{className:"bg-white p-8 md:p-10 rounded-[2.5rem] border-2 border-slate-100 shadow-2xl animate-in slide-in-from-top-4 duration-500",children:[g.jsxs("div",{className:"flex items-center gap-4 mb-8 border-b-2 border-slate-50 pb-6",children:[g.jsx("div",{className:"h-12 w-12 rounded-2xl bg-purple-600 flex items-center justify-center text-white shadow-lg shadow-purple-500/20",children:g.jsx(Wd,{size:24})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-black text-slate-800 uppercase tracking-widest leading-none",children:"Add New Team Member"}),g.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mt-2",children:"Grant access to the Invoice Hub"})]})]}),g.jsxs("form",{onSubmit:et,className:"grid grid-cols-1 md:grid-cols-4 gap-6 items-end",children:[g.jsxs("div",{className:"md:col-span-1 space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Full Name"}),g.jsx("input",{type:"text",placeholder:"e.g. Jane Doe",required:!0,value:oe,onChange:Se=>pe(Se.target.value),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-sm font-black focus:border-purple-500 outline-none transition-all placeholder:text-slate-300"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Email Address"}),g.jsx("input",{type:"email",required:!0,placeholder:"user@clonmel.com",value:_e,onChange:Se=>D(Se.target.value),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-sm font-black focus:border-purple-500 outline-none transition-all placeholder:text-slate-300"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Access Level"}),g.jsxs("select",{value:H,onChange:Se=>K(Se.target.value),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-sm font-black outline-none appearance-none cursor-pointer focus:border-purple-500",children:[g.jsx("option",{value:Xr.USER,children:"Standard User"}),g.jsx("option",{value:Xr.ADMIN,children:"Administrator"})]})]}),g.jsxs("button",{type:"submit",disabled:v,className:"flex-1 flex items-center justify-center gap-3 bg-slate-900 hover:bg-purple-600 text-white font-black py-4 rounded-2xl transition-all disabled:opacity-50 shadow-2xl shadow-slate-900/20 uppercase text-[10px] tracking-[0.2em]",children:[v?g.jsx(r0,{className:"animate-spin",size:16}):g.jsx(_l,{size:16}),"Add User"]})]})]}),g.jsx("div",{className:"bg-white rounded-[3rem] border-2 border-slate-100 overflow-hidden shadow-xl",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-slate-50/50 border-b-2 border-slate-100",children:g.jsxs("tr",{className:"text-[10px] font-black text-slate-400 text-left uppercase tracking-widest",children:[g.jsx("th",{className:"px-12 py-7",children:"Access Node"}),g.jsx("th",{className:"px-12 py-7",children:"Authentication Email"}),g.jsx("th",{className:"px-12 py-7",children:"Auth Group"}),g.jsx("th",{className:"px-12 py-7 text-right",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map(Se=>g.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[g.jsxs("td",{className:"px-12 py-7 flex items-center gap-6",children:[g.jsx("div",{className:"w-14 h-14 rounded-2xl border-4 border-white shadow-xl bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center text-white font-black text-xl uppercase",children:Se.name.charAt(0)}),g.jsxs("div",{children:[g.jsx("span",{className:"block font-black text-slate-900 text-base tracking-tight",children:String(Se.name)}),g.jsxs("span",{className:"text-[10px] font-bold text-slate-300 uppercase",children:["Hardware ID: ",String(Se.id)]})]})]}),g.jsx("td",{className:"px-12 py-7 text-slate-500 font-black text-sm",children:String(Se.email)}),g.jsx("td",{className:"px-12 py-7",children:g.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-5 py-2 rounded-2xl border-2 ${Se.role===Xr.ADMIN?"bg-purple-50 text-purple-700 border-purple-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:String(Se.role)})}),g.jsx("td",{className:"px-12 py-7 text-right",children:Se.id!==(c==null?void 0:c.id)&&g.jsx("button",{onClick:()=>We(Se.id),className:"p-3 text-slate-300 hover:text-rose-500 hover:bg-rose-50 rounded-2xl transition-all",title:"Remove User",children:g.jsx(No,{size:20})})})]},Se.id))})]})})]})]})},UR=()=>{const{user:t,invoices:e,setView:n,setEditingInvoice:i,settings:a,deleteInvoice:o}=Os(),[l,c]=je.useState(""),d=e.filter(b=>(b.documentType==="quote"||b.invoiceNumber.startsWith("QT-"))&&(b.customerName.toLowerCase().includes(l.toLowerCase())||b.invoiceNumber.toLowerCase().includes(l.toLowerCase()))),h=b=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(b),v=b=>{const S={PENDING:{style:"bg-amber-50 text-amber-700 border-amber-200",icon:g.jsx(El,{size:10}),label:"PENDING"},[mn.UNPAID]:{style:"bg-amber-50 text-amber-700 border-amber-200",icon:g.jsx(El,{size:10}),label:"PENDING"},ACCEPTED:{style:"bg-emerald-50 text-emerald-700 border-emerald-100",icon:g.jsx(k0,{size:10}),label:"ACCEPTED"},[mn.PAID]:{style:"bg-emerald-50 text-emerald-700 border-emerald-100",icon:g.jsx(k0,{size:10}),label:"ACCEPTED"},REJECTED:{style:"bg-rose-50 text-rose-700 border-rose-200",icon:g.jsx(iN,{size:10}),label:"REJECTED"},EXPIRED:{style:"bg-slate-50 text-slate-600 border-slate-200",icon:g.jsx(Sh,{size:10}),label:"EXPIRED"}},{style:_,icon:T,label:k}=S[b]||S.PENDING;return g.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[9px] font-black border transition-all shadow-sm ${_} tracking-widest`,children:[T,k]})};return g.jsxs("div",{className:"max-w-[95%] mx-auto space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-black text-slate-800 tracking-tight uppercase",children:["Quote ",g.jsx("span",{className:"text-brand-500",children:"Manager"})]}),g.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Create and manage customer quotes"})]}),g.jsx("div",{className:"flex items-center space-x-3",children:g.jsxs("button",{onClick:()=>{i({id:"",documentType:"quote",invoiceNumber:`QT-${Date.now().toString().slice(-6)}`,customerName:"",items:[],total:0,subtotal:0,taxAmount:0,balanceDue:0,amountPaid:0,status:mn.PENDING,dateIssued:new Date().toISOString(),dueDate:new Date(Date.now()+720*60*60*1e3).toISOString(),company:"clonmel"}),n("CREATE_INVOICE")},className:"flex items-center gap-2 px-6 py-4 bg-brand-600 text-white rounded-2xl hover:bg-brand-700 transition-all shadow-xl shadow-brand-500/20 font-black text-sm uppercase tracking-wider",children:[g.jsx(_l,{size:20}),"New Quote"]})})]}),g.jsxs("div",{className:"relative",children:[g.jsx(Fc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search quotes by customer or quote number...",value:l,onChange:b=>c(b.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-slate-200 rounded-2xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all text-sm font-semibold"})]}),g.jsx("div",{className:"bg-white rounded-[2.5rem] border-2 border-slate-100 overflow-hidden shadow-2xl",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-slate-900 border-b-2 border-slate-800",children:g.jsxs("tr",{className:"text-white",children:[g.jsx("th",{className:"text-left py-4 px-3 md:py-6 md:px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Quote Details"}),g.jsx("th",{className:"hidden md:table-cell text-left py-6 px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Customer"}),g.jsx("th",{className:"text-right py-4 px-3 md:py-6 md:px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Amount"}),g.jsx("th",{className:"hidden md:table-cell text-center py-6 px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Valid Until"}),g.jsx("th",{className:"text-center py-4 px-3 md:py-6 md:px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Status"}),g.jsx("th",{className:"text-center py-4 px-3 md:py-6 md:px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:d.length===0?g.jsx("tr",{children:g.jsxs("td",{colSpan:6,className:"py-20 text-center",children:[g.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-slate-100 rounded-full mb-4",children:g.jsx(jc,{size:40,className:"text-slate-400"})}),g.jsx("p",{className:"text-slate-500 font-semibold",children:"No quotes found"}),g.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Create your first quote to get started"})]})}):d.map(b=>g.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[g.jsxs("td",{className:"py-4 px-3 md:py-6 md:px-10",children:[g.jsx("div",{className:"text-lg font-black text-slate-900 tracking-tight",children:b.invoiceNumber}),g.jsx("div",{className:"md:hidden font-bold text-slate-700 text-xs mt-1",children:b.customerName}),g.jsxs("div",{className:"text-[10px] font-bold text-slate-400 mt-0.5",children:["Issued: ",new Date(b.dateIssued).toLocaleDateString(void 0,{month:"short",day:"numeric"})]}),g.jsx("div",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mt-1",children:b.company==="mirrorzone"?"Mirrorzone":"Clonmel Glass"})]}),g.jsxs("td",{className:"hidden md:table-cell py-6 px-10",children:[g.jsx("div",{className:"font-bold text-slate-900",children:b.customerName}),b.customerEmail&&g.jsx("div",{className:"text-xs text-slate-500 mt-1",children:b.customerEmail})]}),g.jsx("td",{className:"py-4 px-3 md:py-6 md:px-10 text-right whitespace-nowrap",children:g.jsx("div",{className:"text-sm font-black text-slate-900",children:h(b.total)})}),g.jsx("td",{className:"hidden md:table-cell py-6 px-10 text-center",children:g.jsx("div",{className:"text-xs font-bold text-slate-600",children:b.validUntil?new Date(b.validUntil).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"})}),g.jsx("td",{className:"py-4 px-3 md:py-6 md:px-10 text-center",children:v(b.status)}),g.jsx("td",{className:"py-4 px-3 md:py-6 md:px-10",children:g.jsxs("div",{className:"flex items-center justify-center gap-2 transition-opacity",children:[g.jsx("button",{onClick:()=>{const S=Math.floor(1e3+Math.random()*9e3),_=`INV-${new Date().getFullYear()}-${S}`,T={...b,documentType:"invoice",invoiceNumber:_,status:mn.UNPAID};i(T),n("CREATE_INVOICE")},className:"hidden md:block p-2 md:p-3 text-purple-600 bg-purple-50 hover:bg-purple-500 hover:text-white rounded-xl md:rounded-2xl transition-all shadow-sm",title:"Convert to Invoice",children:g.jsx(mN,{size:16})}),g.jsx("button",{onClick:()=>{i(b),n("CREATE_INVOICE")},className:"hidden md:block p-2 md:p-3 text-amber-500 bg-amber-50 hover:bg-amber-500 hover:text-white rounded-xl md:rounded-2xl transition-all shadow-sm",title:"Edit Quote",children:g.jsx(ib,{size:16})}),g.jsx("button",{onClick:async()=>{const S=await Am(b,a);window.open(S,"_blank")},className:"p-3 text-brand-600 bg-brand-50 hover:bg-brand-600 hover:text-white rounded-xl md:rounded-2xl transition-all shadow-sm active:scale-95",title:"View Quote PDF",children:g.jsx(uh,{size:20})}),g.jsx("button",{onClick:()=>m5(b,a),className:"p-3 text-slate-600 bg-slate-100 hover:bg-slate-600 hover:text-white rounded-xl md:rounded-2xl transition-all shadow-sm active:scale-95",title:"Download Quote PDF",children:g.jsx(eb,{size:20})}),g.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this quote?")&&o(b.id)},className:"hidden md:block p-2 md:p-3 text-rose-500 bg-rose-50 hover:bg-rose-500 hover:text-white rounded-xl md:rounded-2xl transition-all shadow-sm",title:"Delete Quote",children:g.jsx(No,{size:16})})]})})]},b.id))})]})})]})},OR=()=>{const{settings:t,updateSettings:e,isSyncing:n}=Os(),[i,a]=je.useState(t),[o,l]=je.useState(!1),[c,d]=je.useState("clonmel");je.useEffect(()=>{a(t)},[t]);const h=b=>{const{name:S,value:_}=b.target;a(T=>({...T,[S]:S==="taxRate"?parseFloat(_):_}))},v=async b=>{b.preventDefault();try{await e(i),l(!0),setTimeout(()=>l(!1),3e3)}catch(S){console.error("Failed to save settings",S)}};return g.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-10",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Settings & Configuration"}),o&&g.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 bg-emerald-50 px-4 py-2 rounded-lg animate-in fade-in slide-in-from-right-4",children:[g.jsx(_h,{size:18}),g.jsx("span",{className:"text-sm font-bold",children:"Settings Saved Successfully"})]})]}),g.jsxs("div",{className:"flex gap-4 bg-slate-100 p-1.5 rounded-2xl w-fit",children:[g.jsx("button",{onClick:()=>d("clonmel"),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${c==="clonmel"?"bg-white text-slate-900 shadow-sm scale-100":"bg-transparent text-slate-400 hover:text-slate-600 scale-95 hover:scale-100"}`,children:"Clonmel Glass"}),g.jsx("button",{onClick:()=>d("mirrorzone"),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${c==="mirrorzone"?"bg-slate-900 text-white shadow-brand-500/20 scale-100":"bg-transparent text-slate-400 hover:text-slate-600 scale-95 hover:scale-100"}`,children:"MirrorZone"})]}),g.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c==="clonmel"?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in duration-300",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:g.jsx(E0,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Clonmel Glass Identity"})]}),g.jsx("div",{className:"p-6 md:p-8 space-y-6",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Company Name"}),g.jsx("input",{name:"companyName",value:i.companyName,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"VAT Number"}),g.jsx("input",{name:"vatNumber",value:i.vatNumber||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Address"}),g.jsx("input",{name:"companyAddress",value:i.companyAddress,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Phone"}),g.jsx("input",{name:"companyPhone",value:i.companyPhone,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Email"}),g.jsx("input",{name:"companyEmail",value:i.companyEmail,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Website"}),g.jsx("input",{name:"companyWebsite",value:i.companyWebsite,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]})]})})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in duration-300",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:g.jsx(xy,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Clonmel Glass Banking"})]}),g.jsx("div",{className:"p-6 md:p-8 space-y-6",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Bank Name"}),g.jsx("input",{name:"bankName",value:i.bankName,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Account Name"}),g.jsx("input",{name:"accountName",value:i.accountName,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"IBAN"}),g.jsx("input",{name:"iban",value:i.iban,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors font-mono"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"BIC / Sort Code"}),g.jsx("input",{name:"bic",value:i.bic,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors font-mono"})]})]})})]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in duration-300",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-slate-900 text-white rounded-lg",children:g.jsx(E0,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"MirrorZone Identity"})]}),g.jsx("div",{className:"p-6 md:p-8 space-y-6",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Company Name (MirrorZone)"}),g.jsx("input",{name:"mirrorZoneName",value:i.mirrorZoneName||"",onChange:h,placeholder:"MirrorZone",className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Address"}),g.jsx("input",{name:"mirrorZoneAddress",value:i.mirrorZoneAddress||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Phone"}),g.jsx("input",{name:"mirrorZonePhone",value:i.mirrorZonePhone||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Email"}),g.jsx("input",{name:"mirrorZoneEmail",value:i.mirrorZoneEmail||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Website"}),g.jsx("input",{name:"mirrorZoneWebsite",value:i.mirrorZoneWebsite||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]})]})})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in duration-300",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg",children:g.jsx(xy,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"MirrorZone Banking"})]}),g.jsx("div",{className:"p-6 md:p-8 space-y-6",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Bank Name"}),g.jsx("input",{name:"mirrorZoneBankName",value:i.mirrorZoneBankName||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Account Name"}),g.jsx("input",{name:"mirrorZoneAccountName",value:i.mirrorZoneAccountName||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"IBAN"}),g.jsx("input",{name:"mirrorZoneIban",value:i.mirrorZoneIban||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors font-mono"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"BIC / Sort Code"}),g.jsx("input",{name:"mirrorZoneBic",value:i.mirrorZoneBic||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors font-mono"})]})]})})]})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg",children:g.jsx(Z2,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Shared Financials"})]}),g.jsxs("div",{className:"p-6 md:p-8 space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Standard VAT Rate (%)"}),g.jsx("input",{type:"number",name:"taxRate",value:i.taxRate,onChange:h,className:"w-32 border-2 border-slate-200 rounded-xl px-4 py-3 font-bold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Default Payment Terms "}),g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"p-2 bg-slate-100 rounded-lg text-slate-400 mt-1",children:g.jsx(jc,{size:20})}),g.jsx("textarea",{name:"defaultNotes",value:i.defaultNotes,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-medium focus:border-brand-500 outline-none transition-colors h-32 resize-y",placeholder:"Enter default terms displayed on every new invoice..."})]})]})]})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-slate-900 text-white rounded-lg",children:g.jsx(jc,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Integrations (Email)"})]}),g.jsxs("div",{className:"p-6 md:p-8 space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Webhook URL (N8N / Zapier)"}),g.jsx("input",{name:"webhookUrl",value:i.webhookUrl||"",onChange:h,placeholder:"https://...",className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-mono text-sm focus:border-brand-500 outline-none transition-colors"}),g.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:"System will POST JSON data + PDF Base64 to this URL when sending requested."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Xero Integration Webhook"}),g.jsx("input",{name:"xeroWebhookUrl",value:i.xeroWebhookUrl||"",onChange:h,placeholder:"https://hooks.zapier.com/...",className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-mono text-sm focus:border-brand-500 outline-none transition-colors"}),g.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:'System will POST full invoice JSON to this URL when "Transfer to Xero" is clicked.'})]})]})]}),g.jsx("div",{className:"flex justify-end pt-4 pb-20",children:g.jsx("button",{type:"submit",disabled:n,className:"bg-brand-600 text-white px-8 py-4 rounded-xl font-black uppercase tracking-widest flex items-center gap-3 hover:bg-brand-700 transition-all shadow-xl shadow-brand-500/20 disabled:opacity-70 disabled:shadow-none",children:n?g.jsx(g.Fragment,{children:"Saving..."}):g.jsxs(g.Fragment,{children:[g.jsx(dh,{size:20}),"Save Changes"]})})})]})]})},y5=()=>{const{login:t}=Os(),[e,n]=aa.useState(""),[i,a]=aa.useState(""),[o,l]=aa.useState(!1),[c,d]=aa.useState(""),[h,v]=aa.useState(!1),[b,S]=aa.useState(""),[_,T]=aa.useState(""),k={"admin@clonmel.com":"admin123","john@clonmel.com":"user123"},I=()=>{if(T(""),!k[e]){T("Email not found");return}if(k[e]!==i){T("Incorrect password");return}t(e)},C=()=>{if(!c){alert("Please enter your email address");return}if(!k[c]){alert("Email not found in our system");return}const R=k[c];S(R),v(!0),setTimeout(()=>{v(!1),l(!1),d(""),S("")},5e3)};return g.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4",children:[g.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md border border-slate-100",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("div",{className:"h-16 w-16 bg-brand-500 rounded-xl flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 shadow-lg shadow-brand-500/30",children:"CG"}),g.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Clonmel Glass"}),g.jsx("p",{className:"text-slate-500",children:"Quotes & Invoices System"})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email Address"}),g.jsx("input",{type:"email",value:e,onChange:R=>n(R.target.value),onKeyPress:R=>R.key==="Enter"&&I(),className:"w-full bg-white text-slate-900 border border-slate-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all",placeholder:"your@email.com"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),g.jsx("input",{type:"password",value:i,onChange:R=>a(R.target.value),onKeyPress:R=>R.key==="Enter"&&I(),className:"w-full bg-white text-slate-900 border border-slate-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all",placeholder:"Enter your password"})]}),_&&g.jsx("div",{className:"bg-rose-50 border border-rose-200 text-rose-700 px-4 py-3 rounded-lg text-sm font-medium",children:_}),g.jsx("button",{onClick:I,className:"w-full bg-brand-600 text-white font-semibold py-3 rounded-lg hover:bg-brand-700 transition-colors shadow-lg shadow-brand-500/20",children:"Sign In"}),g.jsx("button",{onClick:()=>l(!0),className:"w-full text-sm text-brand-600 hover:text-brand-700 font-medium transition-colors",children:"Forgot Password?"})]})]}),o&&g.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 animate-in zoom-in-95 fade-in duration-200",children:[g.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:"Reset Password"}),g.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Enter your email address and we'll send you a link to reset your password."}),h?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 text-emerald-700 px-4 py-6 rounded-lg text-center",children:[g.jsx("div",{className:"text-4xl mb-2",children:""}),g.jsx("p",{className:"font-bold",children:"Password Reset Email Sent!"}),g.jsx("p",{className:"text-sm mt-1",children:"Check your inbox for reset instructions."})]}),g.jsxs("div",{className:"bg-brand-50 border-2 border-brand-200 px-4 py-6 rounded-lg",children:[g.jsx("p",{className:"text-xs font-black text-brand-600 uppercase tracking-widest mb-2 text-center",children:" Simulated Email Content"}),g.jsxs("div",{className:"bg-white border border-brand-200 rounded-lg p-4 text-center",children:[g.jsx("p",{className:"text-xs text-slate-600 mb-2",children:"Your password is:"}),g.jsx("p",{className:"text-2xl font-black text-brand-600 tracking-wider select-all",children:b}),g.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Copy this password to log in"})]})]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"mb-6",children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),g.jsx("input",{type:"email",value:c,onChange:R=>d(R.target.value),className:"w-full bg-white text-slate-900 border border-slate-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all",placeholder:"your@email.com"})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>{l(!1),d("")},className:"flex-1 px-4 py-3 border-2 border-slate-200 text-slate-600 rounded-lg hover:bg-slate-50 transition-all font-semibold",children:"Cancel"}),g.jsx("button",{onClick:C,className:"flex-1 px-4 py-3 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-all font-semibold shadow-lg shadow-brand-500/20",children:"Send Reset Link"})]})]})]})})]})},jR=()=>{const{currentView:t}=Os();switch(t){case"LOGIN":return g.jsx(y5,{});case"DASHBOARD":return g.jsx(E2,{});case"CALENDAR":return g.jsx(DR,{});case"INVOICES":return g.jsx(RR,{});case"QUOTES":return g.jsx(UR,{});case"CREATE_INVOICE":return g.jsx(LR,{});case"CUSTOMERS":return g.jsx(MR,{});case"PRODUCTS":return g.jsx(I2,{});case"USERS":return g.jsx(I2,{});case"SETTINGS":return g.jsx(OR,{});default:return g.jsx(E2,{})}},FR=()=>{const{user:t,isLoading:e}=Os();return e?g.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-50 text-slate-400 font-bold uppercase tracking-widest animate-pulse",children:"Initializing Core Systems..."}):t?g.jsx(sA,{children:g.jsx(jR,{})}):g.jsx(y5,{})};function BR(){return g.jsx(k_,{children:g.jsx(IR,{children:g.jsx(FR,{})})})}const b5=document.getElementById("root");if(!b5)throw new Error("Could not find root element to mount to");const qR=Vx.createRoot(b5);qR.render(g.jsx(aa.StrictMode,{children:g.jsx(BR,{})}));export{xn as _};
