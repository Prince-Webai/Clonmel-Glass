const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-D7XfXuhd.js","assets/react-vendor-DwTPr_wt.js","assets/charts-DBaTe8_W.js"])))=>i.map(i=>d[i]);
import{r as Fe,R as bh,a as Ex,B as Cx,X as kx,Y as Ix,T as Rx,b as Lx,C as Dx}from"./charts-DBaTe8_W.js";import{r as Mx,a as Px,g as L2,b as Ux,c as Ox}from"./react-vendor-DwTPr_wt.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var $p={exports:{}},Ad={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function jx(){if(qv)return Ad;qv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:t,type:i,key:l,ref:a!==void 0?a:null,props:o}}return Ad.Fragment=e,Ad.jsx=n,Ad.jsxs=n,Ad}var zv;function Fx(){return zv||(zv=1,$p.exports=jx()),$p.exports}var g=Fx(),Jp={exports:{}},Td={},Yp={exports:{}},Wp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function Bx(){return Hv||(Hv=1,(function(t){function e(P,$){var ie=P.length;P.push($);e:for(;0<ie;){var ae=ie-1>>>1,he=P[ae];if(0<a(he,$))P[ae]=$,P[ie]=he,ie=ae;else break e}}function n(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var $=P[0],ie=P.pop();if(ie!==$){P[0]=ie;e:for(var ae=0,he=P.length,Ne=he>>>1;ae<Ne;){var D=2*(ae+1)-1,H=P[D],K=D+1,Z=P[K];if(0>a(H,ie))K<he&&0>a(Z,H)?(P[ae]=Z,P[K]=ie,ae=K):(P[ae]=H,P[D]=ie,ae=D);else if(K<he&&0>a(Z,ie))P[ae]=Z,P[K]=ie,ae=K;else break e}}return $}function a(P,$){var ie=P.sortIndex-$.sortIndex;return ie!==0?ie:P.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],v=1,b=null,w=3,_=!1,T=!1,k=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function O(P){for(var $=n(h);$!==null;){if($.callback===null)i(h);else if($.startTime<=P)i(h),$.sortIndex=$.expirationTime,e(d,$);else break;$=n(h)}}function q(P){if(k=!1,O(P),!T)if(n(d)!==null)T=!0,W||(W=!0,j());else{var $=n(h);$!==null&&be(q,$.startTime-P)}}var W=!1,F=-1,z=5,ee=-1;function le(){return R?!0:!(t.unstable_now()-ee<z)}function B(){if(R=!1,W){var P=t.unstable_now();ee=P;var $=!0;try{e:{T=!1,k&&(k=!1,I(F),F=-1),_=!0;var ie=w;try{t:{for(O(P),b=n(d);b!==null&&!(b.expirationTime>P&&le());){var ae=b.callback;if(typeof ae=="function"){b.callback=null,w=b.priorityLevel;var he=ae(b.expirationTime<=P);if(P=t.unstable_now(),typeof he=="function"){b.callback=he,O(P),$=!0;break t}b===n(d)&&i(d),O(P)}else i(d);b=n(d)}if(b!==null)$=!0;else{var Ne=n(h);Ne!==null&&be(q,Ne.startTime-P),$=!1}}break e}finally{b=null,w=ie,_=!1}$=void 0}}finally{$?j():W=!1}}}var j;if(typeof L=="function")j=function(){L(B)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,re=ne.port2;ne.port1.onmessage=B,j=function(){re.postMessage(null)}}else j=function(){C(B,0)};function be(P,$){F=C(function(){P(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(P){switch(w){case 1:case 2:case 3:var $=3;break;default:$=w}var ie=w;w=$;try{return P()}finally{w=ie}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ie=w;w=P;try{return $()}finally{w=ie}},t.unstable_scheduleCallback=function(P,$,ie){var ae=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ae+ie:ae):ie=ae,P){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ie+he,P={id:v++,callback:$,priorityLevel:P,startTime:ie,expirationTime:he,sortIndex:-1},ie>ae?(P.sortIndex=ie,e(h,P),n(d)===null&&P===n(h)&&(k?(I(F),F=-1):k=!0,be(q,ie-ae))):(P.sortIndex=he,e(d,P),T||_||(T=!0,W||(W=!0,j()))),P},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(P){var $=w;return function(){var ie=w;w=$;try{return P.apply(this,arguments)}finally{w=ie}}}})(Wp)),Wp}var Gv;function qx(){return Gv||(Gv=1,Yp.exports=Bx()),Yp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function zx(){if(Vv)return Td;Vv=1;var t=qx(),e=Mx(),n=Px();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,u=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(u=s.return),r=s.return;while(r)}return s.tag===3?u:null}function l(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function c(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var u=r,f=s;;){var x=u.return;if(x===null)break;var N=x.alternate;if(N===null){if(f=x.return,f!==null){u=f;continue}break}if(x.child===N.child){for(N=x.child;N;){if(N===u)return d(x),r;if(N===f)return d(x),s;N=N.sibling}throw Error(i(188))}if(u.return!==f.return)u=x,f=N;else{for(var U=!1,Q=x.child;Q;){if(Q===u){U=!0,u=x,f=N;break}if(Q===f){U=!0,f=x,u=N;break}Q=Q.sibling}if(!U){for(Q=N.child;Q;){if(Q===u){U=!0,u=N,f=x;break}if(Q===f){U=!0,f=N,u=x;break}Q=Q.sibling}if(!U)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:s}function v(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=v(r),s!==null)return s;r=r.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),L=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function j(r){return r===null||typeof r!="object"?null:(r=B&&r[B]||r["@@iterator"],typeof r=="function"?r:null)}var ne=Symbol.for("react.client.reference");function re(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ne?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case C:return"Profiler";case R:return"StrictMode";case q:return"Suspense";case W:return"SuspenseList";case ee:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case L:return r.displayName||"Context";case I:return(r._context.displayName||"Context")+".Consumer";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case F:return s=r.displayName||null,s!==null?s:re(r.type)||"Memo";case z:s=r._payload,r=r._init;try{return re(r(s))}catch{}}return null}var be=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},ae=[],he=-1;function Ne(r){return{current:r}}function D(r){0>he||(r.current=ae[he],ae[he]=null,he--)}function H(r,s){he++,ae[he]=r.current,r.current=s}var K=Ne(null),Z=Ne(null),se=Ne(null),de=Ne(null);function fe(r,s){switch(H(se,s),H(Z,r),H(K,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?cv(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=cv(s),r=dv(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}D(K),H(K,r)}function me(){D(K),D(Z),D(se)}function Me(r){r.memoizedState!==null&&H(de,r);var s=K.current,u=dv(s,r.type);s!==u&&(H(Z,r),H(K,u))}function we(r){Z.current===r&&(D(K),D(Z)),de.current===r&&(D(de),wd._currentValue=ie)}var Pe,Ue;function et(r){if(Pe===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);Pe=s&&s[1]||"",Ue=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+r+Ue}var Ie=!1;function ue(r,s){if(!r||Ie)return"";Ie=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var We=function(){throw Error()};if(Object.defineProperty(We.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(We,[])}catch(Oe){var De=Oe}Reflect.construct(r,[],We)}else{try{We.call()}catch(Oe){De=Oe}r.call(We.prototype)}}else{try{throw Error()}catch(Oe){De=Oe}(We=r())&&typeof We.catch=="function"&&We.catch(function(){})}}catch(Oe){if(Oe&&De&&typeof Oe.stack=="string")return[Oe.stack,De.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=f.DetermineComponentFrameRoot(),U=N[0],Q=N[1];if(U&&Q){var pe=U.split(`
`),Le=Q.split(`
`);for(x=f=0;f<pe.length&&!pe[f].includes("DetermineComponentFrameRoot");)f++;for(;x<Le.length&&!Le[x].includes("DetermineComponentFrameRoot");)x++;if(f===pe.length||x===Le.length)for(f=pe.length-1,x=Le.length-1;1<=f&&0<=x&&pe[f]!==Le[x];)x--;for(;1<=f&&0<=x;f--,x--)if(pe[f]!==Le[x]){if(f!==1||x!==1)do if(f--,x--,0>x||pe[f]!==Le[x]){var qe=`
`+pe[f].replace(" at new "," at ");return r.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",r.displayName)),qe}while(1<=f&&0<=x);break}}}finally{Ie=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?et(u):""}function yt(r,s){switch(r.tag){case 26:case 27:case 5:return et(r.type);case 16:return et("Lazy");case 13:return r.child!==s&&s!==null?et("Suspense Fallback"):et("Suspense");case 19:return et("SuspenseList");case 0:case 15:return ue(r.type,!1);case 11:return ue(r.type.render,!1);case 1:return ue(r.type,!0);case 31:return et("Activity");default:return""}}function at(r){try{var s="",u=null;do s+=yt(r,u),u=r,r=r.return;while(r);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Ye=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,nt=t.unstable_cancelCallback,tt=t.unstable_shouldYield,Xe=t.unstable_requestPaint,Se=t.unstable_now,Ge=t.unstable_getCurrentPriorityLevel,ct=t.unstable_ImmediatePriority,xt=t.unstable_UserBlockingPriority,Ht=t.unstable_NormalPriority,pt=t.unstable_LowPriority,At=t.unstable_IdlePriority,rt=t.log,En=t.unstable_setDisableYieldValue,Lt=null,qt=null;function Pt(r){if(typeof rt=="function"&&En(r),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Lt,r)}catch{}}var _t=Math.clz32?Math.clz32:Cr,Xn=Math.log,Yt=Math.LN2;function Cr(r){return r>>>=0,r===0?32:31-(Xn(r)/Yt|0)|0}var an=256,vi=262144,Yi=4194304;function on(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Nt(r,s,u){var f=r.pendingLanes;if(f===0)return 0;var x=0,N=r.suspendedLanes,U=r.pingedLanes;r=r.warmLanes;var Q=f&134217727;return Q!==0?(f=Q&~N,f!==0?x=on(f):(U&=Q,U!==0?x=on(U):u||(u=Q&~r,u!==0&&(x=on(u))))):(Q=f&~N,Q!==0?x=on(Q):U!==0?x=on(U):u||(u=f&~r,u!==0&&(x=on(u)))),x===0?0:s!==0&&s!==x&&(s&N)===0&&(N=x&-x,u=s&-s,N>=u||N===32&&(u&4194048)!==0)?s:x}function Vt(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Zr(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gn(){var r=Yi;return Yi<<=1,(Yi&62914560)===0&&(Yi=4194304),r}function ji(r){for(var s=[],u=0;31>u;u++)s.push(r);return s}function yi(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function wt(r,s,u,f,x,N){var U=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var Q=r.entanglements,pe=r.expirationTimes,Le=r.hiddenUpdates;for(u=U&~u;0<u;){var qe=31-_t(u),We=1<<qe;Q[qe]=0,pe[qe]=-1;var De=Le[qe];if(De!==null)for(Le[qe]=null,qe=0;qe<De.length;qe++){var Oe=De[qe];Oe!==null&&(Oe.lane&=-536870913)}u&=~We}f!==0&&sr(r,f,0),N!==0&&x===0&&r.tag!==0&&(r.suspendedLanes|=N&~(U&~s))}function sr(r,s,u){r.pendingLanes|=s,r.suspendedLanes&=~s;var f=31-_t(s);r.entangledLanes|=s,r.entanglements[f]=r.entanglements[f]|1073741824|u&261930}function ar(r,s){var u=r.entangledLanes|=s;for(r=r.entanglements;u;){var f=31-_t(u),x=1<<f;x&s|r[f]&s&&(r[f]|=s),u&=~x}}function Ei(r,s){var u=s&-s;return u=(u&42)!==0?1:Fn(u),(u&(r.suspendedLanes|s))!==0?0:u}function Fn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ln(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ci(){var r=$.p;return r!==0?r:(r=window.event,r===void 0?32:Mv(r.type))}function vs(r,s){var u=$.p;try{return $.p=r,s()}finally{$.p=u}}var ci=Math.random().toString(36).slice(2),ln="__reactFiber$"+ci,wn="__reactProps$"+ci,di="__reactContainer$"+ci,ze="__reactEvents$"+ci,Mt="__reactListeners$"+ci,$t="__reactHandles$"+ci,Dn="__reactResources$"+ci,Bn="__reactMarker$"+ci;function ys(r){delete r[ln],delete r[wn],delete r[ze],delete r[Mt],delete r[$t]}function es(r){var s=r[ln];if(s)return s;for(var u=r.parentNode;u;){if(s=u[di]||u[ln]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(r=yv(r);r!==null;){if(u=r[ln])return u;r=yv(r)}return s}r=u,u=r.parentNode}return null}function ts(r){if(r=r[ln]||r[di]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function fa(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function ha(r){var s=r[Dn];return s||(s=r[Dn]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ii(r){r[Bn]=!0}var Ja=new Set,Il={};function js(r,s){bs(r,s),bs(r+"Capture",s)}function bs(r,s){for(Il[r]=s,r=0;r<s.length;r++)Ja.add(s[r])}var zc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rl={},Nu={};function ko(r){return Ye.call(Nu,r)?!0:Ye.call(Rl,r)?!1:zc.test(r)?Nu[r]=!0:(Rl[r]=!0,!1)}function Io(r,s,u){if(ko(s))if(u===null)r.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+u)}}function Mn(r,s,u){if(u===null)r.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+u)}}function kr(r,s,u,f){if(f===null)r.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(s,u,""+f)}}function Wi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ll(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Dl(r,s,u){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,N=f.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return x.call(this)},set:function(U){u=""+U,N.call(this,U)}}),Object.defineProperty(r,s,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(U){u=""+U},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ml(r){if(!r._valueTracker){var s=Ll(r)?"checked":"value";r._valueTracker=Dl(r,s,""+r[s])}}function Ir(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return r&&(f=Ll(r)?r.checked?"true":"false":r.value),r=f,r!==u?(s.setValue(r),!0):!1}function Fs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var or=/[\n"\\]/g;function Fi(r){return r.replace(or,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ro(r,s,u,f,x,N,U,Q){r.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.type=U:r.removeAttribute("type"),s!=null?U==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Wi(s)):r.value!==""+Wi(s)&&(r.value=""+Wi(s)):U!=="submit"&&U!=="reset"||r.removeAttribute("value"),s!=null?Lo(r,U,Wi(s)):u!=null?Lo(r,U,Wi(u)):f!=null&&r.removeAttribute("value"),x==null&&N!=null&&(r.defaultChecked=!!N),x!=null&&(r.checked=x&&typeof x!="function"&&typeof x!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?r.name=""+Wi(Q):r.removeAttribute("name")}function Au(r,s,u,f,x,N,U,Q){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(r.type=N),s!=null||u!=null){if(!(N!=="submit"&&N!=="reset"||s!=null)){Ml(r);return}u=u!=null?""+Wi(u):"",s=s!=null?""+Wi(s):u,Q||s===r.value||(r.value=s),r.defaultValue=s}f=f??x,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=Q?r.checked:!!f,r.defaultChecked=!!f,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(r.name=U),Ml(r)}function Lo(r,s,u){s==="number"&&Fs(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function pa(r,s,u,f){if(r=r.options,s){s={};for(var x=0;x<u.length;x++)s["$"+u[x]]=!0;for(u=0;u<r.length;u++)x=s.hasOwnProperty("$"+r[u].value),r[u].selected!==x&&(r[u].selected=x),x&&f&&(r[u].defaultSelected=!0)}else{for(u=""+Wi(u),s=null,x=0;x<r.length;x++){if(r[x].value===u){r[x].selected=!0,f&&(r[x].defaultSelected=!0);return}s!==null||r[x].disabled||(s=r[x])}s!==null&&(s.selected=!0)}}function Pl(r,s,u){if(s!=null&&(s=""+Wi(s),s!==r.value&&(r.value=s),u==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=u!=null?""+Wi(u):""}function Tu(r,s,u,f){if(s==null){if(f!=null){if(u!=null)throw Error(i(92));if(be(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),s=u}u=Wi(s),r.defaultValue=u,f=r.textContent,f===u&&f!==""&&f!==null&&(r.value=f),Ml(r)}function xs(r,s){if(s){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=s;return}}r.textContent=s}var Hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eu(r,s,u){var f=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":f?r.setProperty(s,u):typeof u!="number"||u===0||Hc.has(s)?s==="float"?r.cssFloat=u:r[s]=(""+u).trim():r[s]=u+"px"}function Cu(r,s,u){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var x in s)f=s[x],s.hasOwnProperty(x)&&u[x]!==f&&Eu(r,x,f)}else for(var N in s)s.hasOwnProperty(N)&&Eu(r,N,s[N])}function ns(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Do=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(r){return Mo.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Pn(){}var Ul=null;function Po(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Tt=null,ma=null;function ku(r){var s=ts(r);if(s&&(r=s.stateNode)){var u=r[wn]||null;e:switch(r=s.stateNode,s.type){case"input":if(Ro(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Fi(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==r&&f.form===r.form){var x=f[wn]||null;if(!x)throw Error(i(90));Ro(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(s=0;s<u.length;s++)f=u[s],f.form===r.form&&Ir(f)}break e;case"textarea":Pl(r,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&pa(r,!!u.multiple,s,!1)}}}var Rr=!1;function Ol(r,s,u){if(Rr)return r(s,u);Rr=!0;try{var f=r(s);return f}finally{if(Rr=!1,(Tt!==null||ma!==null)&&(Sf(),Tt&&(s=Tt,r=ma,ma=Tt=null,ku(s),r)))for(s=0;s<r.length;s++)ku(r[s])}}function ga(r,s){var u=r.stateNode;if(u===null)return null;var f=u[wn]||null;if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,s,typeof u));return u}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wa=!1;if(lr)try{var Ka={};Object.defineProperty(Ka,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",Ka,Ka),window.removeEventListener("test",Ka,Ka)}catch{Wa=!1}var ws=null,jl=null,va=null;function ya(){if(va)return va;var r,s=jl,u=s.length,f,x="value"in ws?ws.value:ws.textContent,N=x.length;for(r=0;r<u&&s[r]===x[r];r++);var U=u-r;for(f=1;f<=U&&s[u-f]===x[N-f];f++);return va=x.slice(r,1<f?1-f:void 0)}function is(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Uo(){return!0}function ba(){return!1}function bi(r){function s(u,f,x,N,U){this._reactName=u,this._targetInst=x,this.type=f,this.nativeEvent=N,this.target=U,this.currentTarget=null;for(var Q in r)r.hasOwnProperty(Q)&&(u=r[Q],this[Q]=u?u(N):N[Q]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Uo:ba,this.isPropagationStopped=ba,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),s}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=bi(Lr),xa=b({},Lr,{view:0,detail:0}),Iu=bi(xa),Oo,rs,Dr,jo=b({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dr&&(Dr&&r.type==="mousemove"?(Oo=r.screenX-Dr.screenX,rs=r.screenY-Dr.screenY):rs=Oo=0,Dr=r),Oo)},movementY:function(r){return"movementY"in r?r.movementY:rs}}),Bs=bi(jo),ss=b({},jo,{dataTransfer:0}),Fl=bi(ss),Qa=b({},xa,{relatedTarget:0}),Bl=bi(Qa),Fo=b({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gc=bi(Fo),ql=b({},Lr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),zl=bi(ql),Ru=b({},Lr,{data:0}),Za=bi(Ru),Hl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Lu[r])?!!s[r]:!1}function wa(){return Vc}var eo=b({},xa,{key:function(r){if(r.key){var s=Hl[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=is(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gl[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wa,charCode:function(r){return r.type==="keypress"?is(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?is(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Vl=bi(eo),Sa=b({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bo=bi(Sa),A=b({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wa}),V=bi(A),ce=b({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ge=bi(ce),Ee=b({},jo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=bi(Ee),Qe=b({},Lr,{newState:0,oldState:0}),lt=bi(Qe),bt=[9,13,27,32],Ut=lr&&"CompositionEvent"in window,jt=null;lr&&"documentMode"in document&&(jt=document.documentMode);var Zt=lr&&"TextEvent"in window&&!jt,Un=lr&&(!Ut||jt&&8<jt&&11>=jt),qn=" ",Qn=!1;function ki(r,s){switch(r){case"keyup":return bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fi(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Bi=!1;function vr(r,s){switch(r){case"compositionend":return fi(s);case"keypress":return s.which!==32?null:(Qn=!0,qn);case"textInput":return r=s.data,r===qn&&Qn?null:r;default:return null}}function qs(r,s){if(Bi)return r==="compositionend"||!Ut&&ki(r,s)?(r=ya(),va=jl=ws=null,Bi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Un&&s.locale!=="ko"?null:s.data;default:return null}}var Du={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qo(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Du[r.type]:s==="textarea"}function zo(r,s,u,f){Tt?ma?ma.push(f):ma=[f]:Tt=f,s=kf(s,"onChange"),0<s.length&&(u=new Xa("onChange","change",null,u,f),r.push({event:u,listeners:s}))}var Ss=null,zs=null;function $l(r){rv(r,0)}function Hs(r){var s=fa(r);if(Ir(s))return r}function Ki(r,s){if(r==="change")return s}var to=!1;if(lr){var _a;if(lr){var Na="oninput"in document;if(!Na){var Ho=document.createElement("div");Ho.setAttribute("oninput","return;"),Na=typeof Ho.oninput=="function"}_a=Na}else _a=!1;to=_a&&(!document.documentMode||9<document.documentMode)}function Xi(){Ss&&(Ss.detachEvent("onpropertychange",Mu),zs=Ss=null)}function Mu(r){if(r.propertyName==="value"&&Hs(zs)){var s=[];zo(s,zs,r,Po(r)),Ol($l,s)}}function Jl(r,s,u){r==="focusin"?(Xi(),Ss=s,zs=u,Ss.attachEvent("onpropertychange",Mu)):r==="focusout"&&Xi()}function Pu(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Hs(zs)}function as(r,s){if(r==="click")return Hs(s)}function Yl(r,s){if(r==="input"||r==="change")return Hs(s)}function $c(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Qi=typeof Object.is=="function"?Object.is:$c;function Mr(r,s){if(Qi(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var u=Object.keys(r),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var x=u[f];if(!Ye.call(s,x)||!Qi(r[x],s[x]))return!1}return!0}function yr(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Pr(r,s){var u=yr(r);r=0;for(var f;u;){if(u.nodeType===3){if(f=r+u.textContent.length,r<=s&&f>=s)return{node:u,offset:s-r};r=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=yr(u)}}function Gs(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Gs(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function os(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Fs(r.document);s instanceof r.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)r=s.contentWindow;else break;s=Fs(r.document)}return s}function ls(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var Go=lr&&"documentMode"in document&&11>=document.documentMode,qi=null,Aa=null,Vs=null,_s=!1;function Ur(r,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;_s||qi==null||qi!==Fs(f)||(f=qi,"selectionStart"in f&&ls(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Vs&&Mr(Vs,f)||(Vs=f,f=kf(Aa,"onSelect"),0<f.length&&(s=new Xa("onSelect","select",null,s,u),r.push({event:s,listeners:f}),s.target=qi)))}function Zi(r,s){var u={};return u[r.toLowerCase()]=s.toLowerCase(),u["Webkit"+r]="webkit"+s,u["Moz"+r]="moz"+s,u}var Or={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Ta={},Ea={};lr&&(Ea=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function ur(r){if(Ta[r])return Ta[r];if(!Or[r])return r;var s=Or[r],u;for(u in s)if(s.hasOwnProperty(u)&&u in Ea)return Ta[r]=s[u];return r}var Vo=ur("animationend"),br=ur("animationiteration"),Ns=ur("animationstart"),Sn=ur("transitionrun"),_n=ur("transitionstart"),Zn=ur("transitioncancel"),ri=ur("transitionend"),As=new Map,Ts="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ts.push("scrollEnd");function zi(r,s){As.set(r,s),js(s,[r])}var no=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},xr=[],io=0,Uu=0;function Wl(){for(var r=io,s=Uu=io=0;s<r;){var u=xr[s];xr[s++]=null;var f=xr[s];xr[s++]=null;var x=xr[s];xr[s++]=null;var N=xr[s];if(xr[s++]=null,f!==null&&x!==null){var U=f.pending;U===null?x.next=x:(x.next=U.next,U.next=x),f.pending=x}N!==0&&Xl(u,x,N)}}function Kl(r,s,u,f){xr[io++]=r,xr[io++]=s,xr[io++]=u,xr[io++]=f,Uu|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function Ou(r,s,u,f){return Kl(r,s,u,f),Hi(r)}function $s(r,s){return Kl(r,null,null,s),Hi(r)}function Xl(r,s,u){r.lanes|=u;var f=r.alternate;f!==null&&(f.lanes|=u);for(var x=!1,N=r.return;N!==null;)N.childLanes|=u,f=N.alternate,f!==null&&(f.childLanes|=u),N.tag===22&&(r=N.stateNode,r===null||r._visibility&1||(x=!0)),r=N,N=N.return;return r.tag===3?(N=r.stateNode,x&&s!==null&&(x=31-_t(u),r=N.hiddenUpdates,f=r[x],f===null?r[x]=[s]:f.push(s),s.lane=u|536870912),N):null}function Hi(r){if(50<pd)throw pd=0,gp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ii={};function ju(r,s,u,f){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(r,s,u,f){return new ju(r,s,u,f)}function Fu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function jr(r,s){var u=r.alternate;return u===null?(u=Gi(r.tag,s,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=s,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,s=r.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Ql(r,s){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,s=u.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function $o(r,s,u,f,x,N){var U=0;if(f=r,typeof r=="function")Fu(r)&&(U=1);else if(typeof r=="string")U=mx(r,u,K.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ee:return r=Gi(31,u,s,x),r.elementType=ee,r.lanes=N,r;case k:return Ca(u.children,x,N,s);case R:U=8,x|=24;break;case C:return r=Gi(12,u,s,x|2),r.elementType=C,r.lanes=N,r;case q:return r=Gi(13,u,s,x),r.elementType=q,r.lanes=N,r;case W:return r=Gi(19,u,s,x),r.elementType=W,r.lanes=N,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:U=10;break e;case I:U=9;break e;case O:U=11;break e;case F:U=14;break e;case z:U=16,f=null;break e}U=29,u=Error(i(130,r===null?"null":typeof r,"")),f=null}return s=Gi(U,u,s,x),s.elementType=r,s.type=f,s.lanes=N,s}function Ca(r,s,u,f){return r=Gi(7,r,f,s),r.lanes=u,r}function Zl(r,s,u){return r=Gi(6,r,null,s),r.lanes=u,r}function Bu(r){var s=Gi(18,null,null,0);return s.stateNode=r,s}function Jo(r,s,u){return s=Gi(4,r.children!==null?r.children:[],r.key,s),s.lanes=u,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var qu=new WeakMap;function Fr(r,s){if(typeof r=="object"&&r!==null){var u=qu.get(r);return u!==void 0?u:(s={value:r,source:s,stack:at(s)},qu.set(r,s),s)}return{value:r,source:s,stack:at(s)}}var Yo=[],ro=0,zu=null,eu=0,Br=[],qr=0,ka=null,zr=1,Hr="";function wr(r,s){Yo[ro++]=eu,Yo[ro++]=zu,zu=r,eu=s}function ef(r,s,u){Br[qr++]=zr,Br[qr++]=Hr,Br[qr++]=ka,ka=r;var f=zr;r=Hr;var x=32-_t(f)-1;f&=~(1<<x),u+=1;var N=32-_t(s)+x;if(30<N){var U=x-x%5;N=(f&(1<<U)-1).toString(32),f>>=U,x-=U,zr=1<<32-_t(s)+x|u<<x|f,Hr=N+r}else zr=1<<N|u<<x|f,Hr=r}function Jc(r){r.return!==null&&(wr(r,1),ef(r,1,0))}function Hu(r){for(;r===zu;)zu=Yo[--ro],Yo[ro]=null,eu=Yo[--ro],Yo[ro]=null;for(;r===ka;)ka=Br[--qr],Br[qr]=null,Hr=Br[--qr],Br[qr]=null,zr=Br[--qr],Br[qr]=null}function tf(r,s){Br[qr++]=zr,Br[qr++]=Hr,Br[qr++]=ka,zr=s.id,Hr=s.overflow,ka=r}var Ri=null,Cn=null,Wt=!1,er=null,Vn=!1,us=Error(i(519));function Ia(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wo(Fr(s,r)),us}function Yc(r){var s=r.stateNode,u=r.type,f=r.memoizedProps;switch(s[ln]=r,s[wn]=f,u){case"dialog":Qt("cancel",s),Qt("close",s);break;case"iframe":case"object":case"embed":Qt("load",s);break;case"video":case"audio":for(u=0;u<gd.length;u++)Qt(gd[u],s);break;case"source":Qt("error",s);break;case"img":case"image":case"link":Qt("error",s),Qt("load",s);break;case"details":Qt("toggle",s);break;case"input":Qt("invalid",s),Au(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Qt("invalid",s);break;case"textarea":Qt("invalid",s),Tu(s,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||f.suppressHydrationWarning===!0||lv(s.textContent,u)?(f.popover!=null&&(Qt("beforetoggle",s),Qt("toggle",s)),f.onScroll!=null&&Qt("scroll",s),f.onScrollEnd!=null&&Qt("scrollend",s),f.onClick!=null&&(s.onclick=Pn),s=!0):s=!1,s||Ia(r,!0)}function Js(r){for(Ri=r.return;Ri;)switch(Ri.tag){case 5:case 31:case 13:Vn=!1;return;case 27:case 3:Vn=!0;return;default:Ri=Ri.return}}function Li(r){if(r!==Ri)return!1;if(!Wt)return Js(r),Wt=!0,!1;var s=r.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Rp(r.type,r.memoizedProps)),u=!u),u&&Cn&&Ia(r),Js(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Cn=vv(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Cn=vv(r)}else s===27?(s=Cn,ul(r.type)?(r=Up,Up=null,Cn=r):Cn=s):Cn=Ri?Ds(r.stateNode.nextSibling):null;return!0}function so(){Cn=Ri=null,Wt=!1}function Wc(){var r=er;return r!==null&&(Wr===null?Wr=r:Wr.push.apply(Wr,r),er=null),r}function Wo(r){er===null?er=[r]:er.push(r)}var Gu=Ne(null),Ra=null,Es=null;function La(r,s,u){H(Gu,s._currentValue),s._currentValue=u}function Gr(r){r._currentValue=Gu.current,D(Gu)}function Ko(r,s,u){for(;r!==null;){var f=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),r===u)break;r=r.return}}function ao(r,s,u,f){var x=r.child;for(x!==null&&(x.return=r);x!==null;){var N=x.dependencies;if(N!==null){var U=x.child;N=N.firstContext;e:for(;N!==null;){var Q=N;N=x;for(var pe=0;pe<s.length;pe++)if(Q.context===s[pe]){N.lanes|=u,Q=N.alternate,Q!==null&&(Q.lanes|=u),Ko(N.return,u,r),f||(U=null);break e}N=Q.next}}else if(x.tag===18){if(U=x.return,U===null)throw Error(i(341));U.lanes|=u,N=U.alternate,N!==null&&(N.lanes|=u),Ko(U,u,r),U=null}else U=x.child;if(U!==null)U.return=x;else for(U=x;U!==null;){if(U===r){U=null;break}if(x=U.sibling,x!==null){x.return=U.return,U=x;break}U=U.return}x=U}}function Da(r,s,u,f){r=null;for(var x=s,N=!1;x!==null;){if(!N){if((x.flags&524288)!==0)N=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var U=x.alternate;if(U===null)throw Error(i(387));if(U=U.memoizedProps,U!==null){var Q=x.type;Qi(x.pendingProps.value,U.value)||(r!==null?r.push(Q):r=[Q])}}else if(x===de.current){if(U=x.alternate,U===null)throw Error(i(387));U.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(r!==null?r.push(wd):r=[wd])}x=x.return}r!==null&&ao(s,r,u,f),s.flags|=262144}function Vu(r){for(r=r.firstContext;r!==null;){if(!Qi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ma(r){Ra=r,Es=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Di(r){return nf(Ra,r)}function $u(r,s){return Ra===null&&Ma(r),nf(r,s)}function nf(r,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},Es===null){if(r===null)throw Error(i(308));Es=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Es=Es.next=s;return u}var Ph=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(u,f){r.push(f)}};this.abort=function(){s.aborted=!0,r.forEach(function(u){return u()})}},Uh=t.unstable_scheduleCallback,Oh=t.unstable_NormalPriority,ei={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xo(){return{controller:new Ph,data:new Map,refCount:0}}function tu(r){r.refCount--,r.refCount===0&&Uh(Oh,function(){r.controller.abort()})}var nu=null,Ju=0,m=0,S=null;function E(r,s){if(nu===null){var u=nu=[];Ju=0,m=Sp(),S={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Ju++,s.then(M,M),s}function M(){if(--Ju===0&&nu!==null){S!==null&&(S.status="fulfilled");var r=nu;nu=null,m=0,S=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function G(r,s){var u=[],f={status:"pending",value:null,reason:null,then:function(x){u.push(x)}};return r.then(function(){f.status="fulfilled",f.value=s;for(var x=0;x<u.length;x++)(0,u[x])(s)},function(x){for(f.status="rejected",f.reason=x,x=0;x<u.length;x++)(0,u[x])(void 0)}),f}var J=P.S;P.S=function(r,s){Lg=Se(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&E(r,s),J!==null&&J(r,s)};var Y=Ne(null);function X(){var r=Y.current;return r!==null?r:In.pooledCache}function te(r,s){s===null?H(Y,Y.current):H(Y,s.pool)}function oe(){var r=X();return r===null?null:{parent:ei._currentValue,pool:r}}var ve=Error(i(460)),ke=Error(i(474)),Ce=Error(i(542)),Ae={then:function(){}};function Je(r){return r=r.status,r==="fulfilled"||r==="rejected"}function je(r,s,u){switch(u=r[u],u===void 0?r.push(s):u!==s&&(s.then(Pn,Pn),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Ke(r),r;default:if(typeof s.status=="string")s.then(Pn,Pn);else{if(r=In,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(f){if(s.status==="pending"){var x=s;x.status="fulfilled",x.value=f}},function(f){if(s.status==="pending"){var x=s;x.status="rejected",x.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Ke(r),r}throw _e=s,ve}}function ye(r){try{var s=r._init;return s(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(_e=u,ve):u}}var _e=null;function Ve(){if(_e===null)throw Error(i(459));var r=_e;return _e=null,r}function Ke(r){if(r===ve||r===Ce)throw Error(i(483))}var He=null,ot=0;function it(r){var s=ot;return ot+=1,He===null&&(He=[]),je(He,r,s)}function mt(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function st(r,s){throw s.$$typeof===w?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function sn(r){function s(Te,xe){if(r){var Re=Te.deletions;Re===null?(Te.deletions=[xe],Te.flags|=16):Re.push(xe)}}function u(Te,xe){if(!r)return null;for(;xe!==null;)s(Te,xe),xe=xe.sibling;return null}function f(Te){for(var xe=new Map;Te!==null;)Te.key!==null?xe.set(Te.key,Te):xe.set(Te.index,Te),Te=Te.sibling;return xe}function x(Te,xe){return Te=jr(Te,xe),Te.index=0,Te.sibling=null,Te}function N(Te,xe,Re){return Te.index=Re,r?(Re=Te.alternate,Re!==null?(Re=Re.index,Re<xe?(Te.flags|=67108866,xe):Re):(Te.flags|=67108866,xe)):(Te.flags|=1048576,xe)}function U(Te){return r&&Te.alternate===null&&(Te.flags|=67108866),Te}function Q(Te,xe,Re,$e){return xe===null||xe.tag!==6?(xe=Zl(Re,Te.mode,$e),xe.return=Te,xe):(xe=x(xe,Re),xe.return=Te,xe)}function pe(Te,xe,Re,$e){var St=Re.type;return St===k?qe(Te,xe,Re.props.children,$e,Re.key):xe!==null&&(xe.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===z&&ye(St)===xe.type)?(xe=x(xe,Re.props),mt(xe,Re),xe.return=Te,xe):(xe=$o(Re.type,Re.key,Re.props,null,Te.mode,$e),mt(xe,Re),xe.return=Te,xe)}function Le(Te,xe,Re,$e){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Re.containerInfo||xe.stateNode.implementation!==Re.implementation?(xe=Jo(Re,Te.mode,$e),xe.return=Te,xe):(xe=x(xe,Re.children||[]),xe.return=Te,xe)}function qe(Te,xe,Re,$e,St){return xe===null||xe.tag!==7?(xe=Ca(Re,Te.mode,$e,St),xe.return=Te,xe):(xe=x(xe,Re),xe.return=Te,xe)}function We(Te,xe,Re){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return xe=Zl(""+xe,Te.mode,Re),xe.return=Te,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case _:return Re=$o(xe.type,xe.key,xe.props,null,Te.mode,Re),mt(Re,xe),Re.return=Te,Re;case T:return xe=Jo(xe,Te.mode,Re),xe.return=Te,xe;case z:return xe=ye(xe),We(Te,xe,Re)}if(be(xe)||j(xe))return xe=Ca(xe,Te.mode,Re,null),xe.return=Te,xe;if(typeof xe.then=="function")return We(Te,it(xe),Re);if(xe.$$typeof===L)return We(Te,$u(Te,xe),Re);st(Te,xe)}return null}function De(Te,xe,Re,$e){var St=xe!==null?xe.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return St!==null?null:Q(Te,xe,""+Re,$e);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case _:return Re.key===St?pe(Te,xe,Re,$e):null;case T:return Re.key===St?Le(Te,xe,Re,$e):null;case z:return Re=ye(Re),De(Te,xe,Re,$e)}if(be(Re)||j(Re))return St!==null?null:qe(Te,xe,Re,$e,null);if(typeof Re.then=="function")return De(Te,xe,it(Re),$e);if(Re.$$typeof===L)return De(Te,xe,$u(Te,Re),$e);st(Te,Re)}return null}function Oe(Te,xe,Re,$e,St){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Te=Te.get(Re)||null,Q(xe,Te,""+$e,St);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case _:return Te=Te.get($e.key===null?Re:$e.key)||null,pe(xe,Te,$e,St);case T:return Te=Te.get($e.key===null?Re:$e.key)||null,Le(xe,Te,$e,St);case z:return $e=ye($e),Oe(Te,xe,Re,$e,St)}if(be($e)||j($e))return Te=Te.get(Re)||null,qe(xe,Te,$e,St,null);if(typeof $e.then=="function")return Oe(Te,xe,Re,it($e),St);if($e.$$typeof===L)return Oe(Te,xe,Re,$u(xe,$e),St);st(xe,$e)}return null}function dt(Te,xe,Re,$e){for(var St=null,cn=null,ht=xe,Gt=xe=0,nn=null;ht!==null&&Gt<Re.length;Gt++){ht.index>Gt?(nn=ht,ht=null):nn=ht.sibling;var dn=De(Te,ht,Re[Gt],$e);if(dn===null){ht===null&&(ht=nn);break}r&&ht&&dn.alternate===null&&s(Te,ht),xe=N(dn,xe,Gt),cn===null?St=dn:cn.sibling=dn,cn=dn,ht=nn}if(Gt===Re.length)return u(Te,ht),Wt&&wr(Te,Gt),St;if(ht===null){for(;Gt<Re.length;Gt++)ht=We(Te,Re[Gt],$e),ht!==null&&(xe=N(ht,xe,Gt),cn===null?St=ht:cn.sibling=ht,cn=ht);return Wt&&wr(Te,Gt),St}for(ht=f(ht);Gt<Re.length;Gt++)nn=Oe(ht,Te,Gt,Re[Gt],$e),nn!==null&&(r&&nn.alternate!==null&&ht.delete(nn.key===null?Gt:nn.key),xe=N(nn,xe,Gt),cn===null?St=nn:cn.sibling=nn,cn=nn);return r&&ht.forEach(function(pl){return s(Te,pl)}),Wt&&wr(Te,Gt),St}function kt(Te,xe,Re,$e){if(Re==null)throw Error(i(151));for(var St=null,cn=null,ht=xe,Gt=xe=0,nn=null,dn=Re.next();ht!==null&&!dn.done;Gt++,dn=Re.next()){ht.index>Gt?(nn=ht,ht=null):nn=ht.sibling;var pl=De(Te,ht,dn.value,$e);if(pl===null){ht===null&&(ht=nn);break}r&&ht&&pl.alternate===null&&s(Te,ht),xe=N(pl,xe,Gt),cn===null?St=pl:cn.sibling=pl,cn=pl,ht=nn}if(dn.done)return u(Te,ht),Wt&&wr(Te,Gt),St;if(ht===null){for(;!dn.done;Gt++,dn=Re.next())dn=We(Te,dn.value,$e),dn!==null&&(xe=N(dn,xe,Gt),cn===null?St=dn:cn.sibling=dn,cn=dn);return Wt&&wr(Te,Gt),St}for(ht=f(ht);!dn.done;Gt++,dn=Re.next())dn=Oe(ht,Te,Gt,dn.value,$e),dn!==null&&(r&&dn.alternate!==null&&ht.delete(dn.key===null?Gt:dn.key),xe=N(dn,xe,Gt),cn===null?St=dn:cn.sibling=dn,cn=dn);return r&&ht.forEach(function(Tx){return s(Te,Tx)}),Wt&&wr(Te,Gt),St}function Tn(Te,xe,Re,$e){if(typeof Re=="object"&&Re!==null&&Re.type===k&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case _:e:{for(var St=Re.key;xe!==null;){if(xe.key===St){if(St=Re.type,St===k){if(xe.tag===7){u(Te,xe.sibling),$e=x(xe,Re.props.children),$e.return=Te,Te=$e;break e}}else if(xe.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===z&&ye(St)===xe.type){u(Te,xe.sibling),$e=x(xe,Re.props),mt($e,Re),$e.return=Te,Te=$e;break e}u(Te,xe);break}else s(Te,xe);xe=xe.sibling}Re.type===k?($e=Ca(Re.props.children,Te.mode,$e,Re.key),$e.return=Te,Te=$e):($e=$o(Re.type,Re.key,Re.props,null,Te.mode,$e),mt($e,Re),$e.return=Te,Te=$e)}return U(Te);case T:e:{for(St=Re.key;xe!==null;){if(xe.key===St)if(xe.tag===4&&xe.stateNode.containerInfo===Re.containerInfo&&xe.stateNode.implementation===Re.implementation){u(Te,xe.sibling),$e=x(xe,Re.children||[]),$e.return=Te,Te=$e;break e}else{u(Te,xe);break}else s(Te,xe);xe=xe.sibling}$e=Jo(Re,Te.mode,$e),$e.return=Te,Te=$e}return U(Te);case z:return Re=ye(Re),Tn(Te,xe,Re,$e)}if(be(Re))return dt(Te,xe,Re,$e);if(j(Re)){if(St=j(Re),typeof St!="function")throw Error(i(150));return Re=St.call(Re),kt(Te,xe,Re,$e)}if(typeof Re.then=="function")return Tn(Te,xe,it(Re),$e);if(Re.$$typeof===L)return Tn(Te,xe,$u(Te,Re),$e);st(Te,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint"?(Re=""+Re,xe!==null&&xe.tag===6?(u(Te,xe.sibling),$e=x(xe,Re),$e.return=Te,Te=$e):(u(Te,xe),$e=Zl(Re,Te.mode,$e),$e.return=Te,Te=$e),U(Te)):u(Te,xe)}return function(Te,xe,Re,$e){try{ot=0;var St=Tn(Te,xe,Re,$e);return He=null,St}catch(ht){if(ht===ve||ht===Ce)throw ht;var cn=Gi(29,ht,null,Te.mode);return cn.lanes=$e,cn.return=Te,cn}finally{}}}var Kt=sn(!0),en=sn(!1),Ft=!1;function hn(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function un(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ct(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function vn(r,s,u){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(pn&2)!==0){var x=f.pending;return x===null?s.next=s:(s.next=x.next,x.next=s),f.pending=s,s=Hi(r),Xl(r,null,u),s}return Kl(r,f,s,u),Hi(r)}function xi(r,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var f=s.lanes;f&=r.pendingLanes,u|=f,s.lanes=u,ar(r,u)}}function $n(r,s){var u=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var x=null,N=null;if(u=u.firstBaseUpdate,u!==null){do{var U={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};N===null?x=N=U:N=N.next=U,u=u.next}while(u!==null);N===null?x=N=s:N=N.next=s}else x=N=s;u={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:N,shared:f.shared,callbacks:f.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=s:r.next=s,u.lastBaseUpdate=s}var Vi=!1;function rn(){if(Vi){var r=S;if(r!==null)throw r}}function Mi(r,s,u,f){Vi=!1;var x=r.updateQueue;Ft=!1;var N=x.firstBaseUpdate,U=x.lastBaseUpdate,Q=x.shared.pending;if(Q!==null){x.shared.pending=null;var pe=Q,Le=pe.next;pe.next=null,U===null?N=Le:U.next=Le,U=pe;var qe=r.alternate;qe!==null&&(qe=qe.updateQueue,Q=qe.lastBaseUpdate,Q!==U&&(Q===null?qe.firstBaseUpdate=Le:Q.next=Le,qe.lastBaseUpdate=pe))}if(N!==null){var We=x.baseState;U=0,qe=Le=pe=null,Q=N;do{var De=Q.lane&-536870913,Oe=De!==Q.lane;if(Oe?(tn&De)===De:(f&De)===De){De!==0&&De===m&&(Vi=!0),qe!==null&&(qe=qe.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var dt=r,kt=Q;De=s;var Tn=u;switch(kt.tag){case 1:if(dt=kt.payload,typeof dt=="function"){We=dt.call(Tn,We,De);break e}We=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=kt.payload,De=typeof dt=="function"?dt.call(Tn,We,De):dt,De==null)break e;We=b({},We,De);break e;case 2:Ft=!0}}De=Q.callback,De!==null&&(r.flags|=64,Oe&&(r.flags|=8192),Oe=x.callbacks,Oe===null?x.callbacks=[De]:Oe.push(De))}else Oe={lane:De,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},qe===null?(Le=qe=Oe,pe=We):qe=qe.next=Oe,U|=De;if(Q=Q.next,Q===null){if(Q=x.shared.pending,Q===null)break;Oe=Q,Q=Oe.next,Oe.next=null,x.lastBaseUpdate=Oe,x.shared.pending=null}}while(!0);qe===null&&(pe=We),x.baseState=pe,x.firstBaseUpdate=Le,x.lastBaseUpdate=qe,N===null&&(x.shared.lanes=0),rl|=U,r.lanes=U,r.memoizedState=We}}function cr(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function hi(r,s){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)cr(u[r],s)}var Jn=Ne(null),wi=Ne(0);function Sr(r,s){r=bo,H(wi,r),H(Jn,s),bo=r|s.baseLanes}function Vr(){H(wi,bo),H(Jn,Jn.current)}function si(){bo=wi.current,D(Jn),D(wi)}var ti=Ne(null),Si=null;function _r(r){var s=r.alternate;H(Yn,Yn.current&1),H(ti,r),Si===null&&(s===null||Jn.current!==null||s.memoizedState!==null)&&(Si=r)}function Cs(r){H(Yn,Yn.current),H(ti,r),Si===null&&(Si=r)}function zn(r){r.tag===22?(H(Yn,Yn.current),H(ti,r),Si===null&&(Si=r)):ks()}function ks(){H(Yn,Yn.current),H(ti,ti.current)}function dr(r){D(ti),Si===r&&(Si=null),D(Yn)}var Yn=Ne(0);function oo(r){for(var s=r;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Mp(u)||Pp(u)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nr=0,Ot=null,Jt=null,kn=null,Ys=!1,lo=!1,Is=!1,iu=0,Pa=0,Ua=null,Yu=0;function Nn(){throw Error(i(321))}function Kc(r,s){if(s===null)return!1;for(var u=0;u<s.length&&u<r.length;u++)if(!Qi(r[u],s[u]))return!1;return!0}function Xc(r,s,u,f,x,N){return Nr=N,Ot=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=r===null||r.memoizedState===null?Hm:Vh,Is=!1,N=u(f,x),Is=!1,lo&&(N=Ws(s,u,f,x)),Wu(r),N}function Wu(r){P.H=sd;var s=Jt!==null&&Jt.next!==null;if(Nr=0,kn=Jt=Ot=null,Ys=!1,Pa=0,Ua=null,s)throw Error(i(300));r===null||Ni||(r=r.dependencies,r!==null&&Vu(r)&&(Ni=!0))}function Ws(r,s,u,f){Ot=r;var x=0;do{if(lo&&(Ua=null),Pa=0,lo=!1,25<=x)throw Error(i(301));if(x+=1,kn=Jt=null,r.updateQueue!=null){var N=r.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}P.H=Gm,N=s(u,f)}while(lo);return N}function jh(){var r=P.H,s=r.useState()[0];return s=typeof s.then=="function"?Oa(s):s,r=r.useState()[0],(Jt!==null?Jt.memoizedState:null)!==r&&(Ot.flags|=1024),s}function Qc(){var r=iu!==0;return iu=0,r}function Zc(r,s,u){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~u}function Ku(r){if(Ys){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ys=!1}Nr=0,kn=Jt=Ot=null,lo=!1,Pa=iu=0,Ua=null}function _i(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?Ot.memoizedState=kn=r:kn=kn.next=r,kn}function Wn(){if(Jt===null){var r=Ot.alternate;r=r!==null?r.memoizedState:null}else r=Jt.next;var s=kn===null?Ot.memoizedState:kn.next;if(s!==null)kn=s,Jt=r;else{if(r===null)throw Ot.alternate===null?Error(i(467)):Error(i(310));Jt=r,r={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},kn===null?Ot.memoizedState=kn=r:kn=kn.next=r}return kn}function ru(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oa(r){var s=Pa;return Pa+=1,Ua===null&&(Ua=[]),r=je(Ua,r,s),s=Ot,(kn===null?s.memoizedState:kn.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?Hm:Vh),r}function Qo(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Oa(r);if(r.$$typeof===L)return Di(r)}throw Error(i(438,String(r)))}function uo(r){var s=null,u=Ot.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var f=Ot.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(x){return x.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=ru(),Ot.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(r),f=0;f<r;f++)u[f]=le;return s.index++,u}function Rs(r,s){return typeof s=="function"?s(r):s}function Xu(r){var s=Wn();return Zo(s,Jt,r)}function Zo(r,s,u){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var x=r.baseQueue,N=f.pending;if(N!==null){if(x!==null){var U=x.next;x.next=N.next,N.next=U}s.baseQueue=x=N,f.pending=null}if(N=r.baseState,x===null)r.memoizedState=N;else{s=x.next;var Q=U=null,pe=null,Le=s,qe=!1;do{var We=Le.lane&-536870913;if(We!==Le.lane?(tn&We)===We:(Nr&We)===We){var De=Le.revertLane;if(De===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),We===m&&(qe=!0);else if((Nr&De)===De){Le=Le.next,De===m&&(qe=!0);continue}else We={lane:0,revertLane:Le.revertLane,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},pe===null?(Q=pe=We,U=N):pe=pe.next=We,Ot.lanes|=De,rl|=De;We=Le.action,Is&&u(N,We),N=Le.hasEagerState?Le.eagerState:u(N,We)}else De={lane:We,revertLane:Le.revertLane,gesture:Le.gesture,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},pe===null?(Q=pe=De,U=N):pe=pe.next=De,Ot.lanes|=We,rl|=We;Le=Le.next}while(Le!==null&&Le!==s);if(pe===null?U=N:pe.next=Q,!Qi(N,r.memoizedState)&&(Ni=!0,qe&&(u=S,u!==null)))throw u;r.memoizedState=N,r.baseState=U,r.baseQueue=pe,f.lastRenderedState=N}return x===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function Qu(r){var s=Wn(),u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var f=u.dispatch,x=u.pending,N=s.memoizedState;if(x!==null){u.pending=null;var U=x=x.next;do N=r(N,U.action),U=U.next;while(U!==x);Qi(N,s.memoizedState)||(Ni=!0),s.memoizedState=N,s.baseQueue===null&&(s.baseState=N),u.lastRenderedState=N}return[N,f]}function Zu(r,s,u){var f=Ot,x=Wn(),N=Wt;if(N){if(u===void 0)throw Error(i(407));u=u()}else u=s();var U=!Qi((Jt||x).memoizedState,u);if(U&&(x.memoizedState=u,Ni=!0),x=x.queue,Fh(td.bind(null,f,x,r),[r]),x.getSnapshot!==s||U||kn!==null&&kn.memoizedState.tag&1){if(f.flags|=2048,fo(9,{destroy:void 0},ed.bind(null,f,x,u,s),null),In===null)throw Error(i(349));N||(Nr&127)!==0||Ks(f,s,u)}return u}function Ks(r,s,u){r.flags|=16384,r={getSnapshot:s,value:u},s=Ot.updateQueue,s===null?(s=ru(),Ot.updateQueue=s,s.stores=[r]):(u=s.stores,u===null?s.stores=[r]:u.push(r))}function ed(r,s,u,f){s.value=u,s.getSnapshot=f,rf(s)&&nd(r)}function td(r,s,u){return u(function(){rf(s)&&nd(r)})}function rf(r){var s=r.getSnapshot;r=r.value;try{var u=s();return!Qi(r,u)}catch{return!0}}function nd(r){var s=$s(r,2);s!==null&&Kr(s,r,2)}function ja(r){var s=_i();if(typeof r=="function"){var u=r;if(r=u(),Is){Pt(!0);try{u()}finally{Pt(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:r},s}function sf(r,s,u,f){return r.baseState=u,Zo(r,Jt,typeof f=="function"?f:Rs)}function af(r,s,u,f,x){if(cf(r))throw Error(i(485));if(r=s.action,r!==null){var N={payload:x,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){N.listeners.push(U)}};P.T!==null?u(!0):N.isTransition=!1,f(N),u=s.pending,u===null?(N.next=s.pending=N,of(s,N)):(N.next=u.next,s.pending=u.next=N)}}function of(r,s){var u=s.action,f=s.payload,x=r.state;if(s.isTransition){var N=P.T,U={};P.T=U;try{var Q=u(x,f),pe=P.S;pe!==null&&pe(U,Q),id(r,s,Q)}catch(Le){co(r,s,Le)}finally{N!==null&&U.types!==null&&(N.types=U.types),P.T=N}}else try{N=u(x,f),id(r,s,N)}catch(Le){co(r,s,Le)}}function id(r,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){lf(r,s,f)},function(f){return co(r,s,f)}):lf(r,s,u)}function lf(r,s,u){s.status="fulfilled",s.value=u,ec(s),r.state=u,s=r.pending,s!==null&&(u=s.next,u===s?r.pending=null:(u=u.next,s.next=u,of(r,u)))}function co(r,s,u){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=u,ec(s),s=s.next;while(s!==f)}r.action=null}function ec(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function su(r,s){return s}function Ls(r,s){if(Wt){var u=In.formState;if(u!==null){e:{var f=Ot;if(Wt){if(Cn){t:{for(var x=Cn,N=Vn;x.nodeType!==8;){if(!N){x=null;break t}if(x=Ds(x.nextSibling),x===null){x=null;break t}}N=x.data,x=N==="F!"||N==="F"?x:null}if(x){Cn=Ds(x.nextSibling),f=x.data==="F!";break e}}Ia(f)}f=!1}f&&(s=u[0])}}return u=_i(),u.memoizedState=u.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:su,lastRenderedState:s},u.queue=f,u=Bm.bind(null,Ot,f),f.dispatch=u,f=ja(!1),N=Gh.bind(null,Ot,!1,f.queue),f=_i(),x={state:s,dispatch:null,action:r,pending:null},f.queue=x,u=af.bind(null,Ot,x,N,u),x.dispatch=u,f.memoizedState=r,[s,u,!1]}function Xs(r){var s=Wn();return Qs(s,Jt,r)}function Qs(r,s,u){if(s=Zo(r,s,su)[0],r=Xu(Rs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Oa(s)}catch(U){throw U===ve?Ce:U}else f=s;s=Wn();var x=s.queue,N=x.dispatch;return u!==s.memoizedState&&(Ot.flags|=2048,fo(9,{destroy:void 0},tc.bind(null,x,u),null)),[f,N,r]}function tc(r,s){r.action=s}function nc(r){var s=Wn(),u=Jt;if(u!==null)return Qs(s,u,r);Wn(),s=s.memoizedState,u=Wn();var f=u.queue.dispatch;return u.memoizedState=r,[s,f,!1]}function fo(r,s,u,f){return r={tag:r,create:u,deps:f,inst:s,next:null},s=Ot.updateQueue,s===null&&(s=ru(),Ot.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=r.next=r:(f=u.next,u.next=r,r.next=f,s.lastEffect=r),r}function uf(){return Wn().memoizedState}function el(r,s,u,f){var x=_i();Ot.flags|=r,x.memoizedState=fo(1|s,{destroy:void 0},u,f===void 0?null:f)}function tl(r,s,u,f){var x=Wn();f=f===void 0?null:f;var N=x.memoizedState.inst;Jt!==null&&f!==null&&Kc(f,Jt.memoizedState.deps)?x.memoizedState=fo(s,N,u,f):(Ot.flags|=r,x.memoizedState=fo(1|s,N,u,f))}function Tm(r,s){el(8390656,8,r,s)}function Fh(r,s){tl(2048,8,r,s)}function x5(r){Ot.flags|=4;var s=Ot.updateQueue;if(s===null)s=ru(),Ot.updateQueue=s,s.events=[r];else{var u=s.events;u===null?s.events=[r]:u.push(r)}}function Em(r){var s=Wn().memoizedState;return x5({ref:s,nextImpl:r}),function(){if((pn&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Cm(r,s){return tl(4,2,r,s)}function km(r,s){return tl(4,4,r,s)}function Im(r,s){if(typeof s=="function"){r=r();var u=s(r);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Rm(r,s,u){u=u!=null?u.concat([r]):null,tl(4,4,Im.bind(null,s,r),u)}function Bh(){}function Lm(r,s){var u=Wn();s=s===void 0?null:s;var f=u.memoizedState;return s!==null&&Kc(s,f[1])?f[0]:(u.memoizedState=[r,s],r)}function Dm(r,s){var u=Wn();s=s===void 0?null:s;var f=u.memoizedState;if(s!==null&&Kc(s,f[1]))return f[0];if(f=r(),Is){Pt(!0);try{r()}finally{Pt(!1)}}return u.memoizedState=[f,s],f}function qh(r,s,u){return u===void 0||(Nr&1073741824)!==0&&(tn&261930)===0?r.memoizedState=s:(r.memoizedState=u,r=Mg(),Ot.lanes|=r,rl|=r,u)}function Mm(r,s,u,f){return Qi(u,s)?u:Jn.current!==null?(r=qh(r,u,f),Qi(r,s)||(Ni=!0),r):(Nr&42)===0||(Nr&1073741824)!==0&&(tn&261930)===0?(Ni=!0,r.memoizedState=u):(r=Mg(),Ot.lanes|=r,rl|=r,s)}function Pm(r,s,u,f,x){var N=$.p;$.p=N!==0&&8>N?N:8;var U=P.T,Q={};P.T=Q,Gh(r,!1,s,u);try{var pe=x(),Le=P.S;if(Le!==null&&Le(Q,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var qe=G(pe,f);rd(r,s,qe,fs(r))}else rd(r,s,f,fs(r))}catch(We){rd(r,s,{then:function(){},status:"rejected",reason:We},fs())}finally{$.p=N,U!==null&&Q.types!==null&&(U.types=Q.types),P.T=U}}function w5(){}function zh(r,s,u,f){if(r.tag!==5)throw Error(i(476));var x=Um(r).queue;Pm(r,x,s,ie,u===null?w5:function(){return Om(r),u(f)})}function Um(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:ie},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:u},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Om(r){var s=Um(r);s.next===null&&(s=r.alternate.memoizedState),rd(r,s.next.queue,{},fs())}function Hh(){return Di(wd)}function jm(){return Wn().memoizedState}function Fm(){return Wn().memoizedState}function S5(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var u=fs();r=Ct(u);var f=vn(s,r,u);f!==null&&(Kr(f,s,u),xi(f,s,u)),s={cache:Xo()},r.payload=s;return}s=s.return}}function _5(r,s,u){var f=fs();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},cf(r)?qm(s,u):(u=Ou(r,s,u,f),u!==null&&(Kr(u,r,f),zm(u,s,f)))}function Bm(r,s,u){var f=fs();rd(r,s,u,f)}function rd(r,s,u,f){var x={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(cf(r))qm(s,x);else{var N=r.alternate;if(r.lanes===0&&(N===null||N.lanes===0)&&(N=s.lastRenderedReducer,N!==null))try{var U=s.lastRenderedState,Q=N(U,u);if(x.hasEagerState=!0,x.eagerState=Q,Qi(Q,U))return Kl(r,s,x,0),In===null&&Wl(),!1}catch{}finally{}if(u=Ou(r,s,x,f),u!==null)return Kr(u,r,f),zm(u,s,f),!0}return!1}function Gh(r,s,u,f){if(f={lane:2,revertLane:Sp(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},cf(r)){if(s)throw Error(i(479))}else s=Ou(r,u,f,2),s!==null&&Kr(s,r,2)}function cf(r){var s=r.alternate;return r===Ot||s!==null&&s===Ot}function qm(r,s){lo=Ys=!0;var u=r.pending;u===null?s.next=s:(s.next=u.next,u.next=s),r.pending=s}function zm(r,s,u){if((u&4194048)!==0){var f=s.lanes;f&=r.pendingLanes,u|=f,s.lanes=u,ar(r,u)}}var sd={readContext:Di,use:Qo,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn,useHostTransitionStatus:Nn,useFormState:Nn,useActionState:Nn,useOptimistic:Nn,useMemoCache:Nn,useCacheRefresh:Nn};sd.useEffectEvent=Nn;var Hm={readContext:Di,use:Qo,useCallback:function(r,s){return _i().memoizedState=[r,s===void 0?null:s],r},useContext:Di,useEffect:Tm,useImperativeHandle:function(r,s,u){u=u!=null?u.concat([r]):null,el(4194308,4,Im.bind(null,s,r),u)},useLayoutEffect:function(r,s){return el(4194308,4,r,s)},useInsertionEffect:function(r,s){el(4,2,r,s)},useMemo:function(r,s){var u=_i();s=s===void 0?null:s;var f=r();if(Is){Pt(!0);try{r()}finally{Pt(!1)}}return u.memoizedState=[f,s],f},useReducer:function(r,s,u){var f=_i();if(u!==void 0){var x=u(s);if(Is){Pt(!0);try{u(s)}finally{Pt(!1)}}}else x=s;return f.memoizedState=f.baseState=x,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:x},f.queue=r,r=r.dispatch=_5.bind(null,Ot,r),[f.memoizedState,r]},useRef:function(r){var s=_i();return r={current:r},s.memoizedState=r},useState:function(r){r=ja(r);var s=r.queue,u=Bm.bind(null,Ot,s);return s.dispatch=u,[r.memoizedState,u]},useDebugValue:Bh,useDeferredValue:function(r,s){var u=_i();return qh(u,r,s)},useTransition:function(){var r=ja(!1);return r=Pm.bind(null,Ot,r.queue,!0,!1),_i().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,u){var f=Ot,x=_i();if(Wt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=s(),In===null)throw Error(i(349));(tn&127)!==0||Ks(f,s,u)}x.memoizedState=u;var N={value:u,getSnapshot:s};return x.queue=N,Tm(td.bind(null,f,N,r),[r]),f.flags|=2048,fo(9,{destroy:void 0},ed.bind(null,f,N,u,s),null),u},useId:function(){var r=_i(),s=In.identifierPrefix;if(Wt){var u=Hr,f=zr;u=(f&~(1<<32-_t(f)-1)).toString(32)+u,s="_"+s+"R_"+u,u=iu++,0<u&&(s+="H"+u.toString(32)),s+="_"}else u=Yu++,s="_"+s+"r_"+u.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Hh,useFormState:Ls,useActionState:Ls,useOptimistic:function(r){var s=_i();s.memoizedState=s.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Gh.bind(null,Ot,!0,u),u.dispatch=s,[r,s]},useMemoCache:uo,useCacheRefresh:function(){return _i().memoizedState=S5.bind(null,Ot)},useEffectEvent:function(r){var s=_i(),u={impl:r};return s.memoizedState=u,function(){if((pn&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Vh={readContext:Di,use:Qo,useCallback:Lm,useContext:Di,useEffect:Fh,useImperativeHandle:Rm,useInsertionEffect:Cm,useLayoutEffect:km,useMemo:Dm,useReducer:Xu,useRef:uf,useState:function(){return Xu(Rs)},useDebugValue:Bh,useDeferredValue:function(r,s){var u=Wn();return Mm(u,Jt.memoizedState,r,s)},useTransition:function(){var r=Xu(Rs)[0],s=Wn().memoizedState;return[typeof r=="boolean"?r:Oa(r),s]},useSyncExternalStore:Zu,useId:jm,useHostTransitionStatus:Hh,useFormState:Xs,useActionState:Xs,useOptimistic:function(r,s){var u=Wn();return sf(u,Jt,r,s)},useMemoCache:uo,useCacheRefresh:Fm};Vh.useEffectEvent=Em;var Gm={readContext:Di,use:Qo,useCallback:Lm,useContext:Di,useEffect:Fh,useImperativeHandle:Rm,useInsertionEffect:Cm,useLayoutEffect:km,useMemo:Dm,useReducer:Qu,useRef:uf,useState:function(){return Qu(Rs)},useDebugValue:Bh,useDeferredValue:function(r,s){var u=Wn();return Jt===null?qh(u,r,s):Mm(u,Jt.memoizedState,r,s)},useTransition:function(){var r=Qu(Rs)[0],s=Wn().memoizedState;return[typeof r=="boolean"?r:Oa(r),s]},useSyncExternalStore:Zu,useId:jm,useHostTransitionStatus:Hh,useFormState:nc,useActionState:nc,useOptimistic:function(r,s){var u=Wn();return Jt!==null?sf(u,Jt,r,s):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:uo,useCacheRefresh:Fm};Gm.useEffectEvent=Em;function $h(r,s,u,f){s=r.memoizedState,u=u(f,s),u=u==null?s:b({},s,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Jh={enqueueSetState:function(r,s,u){r=r._reactInternals;var f=fs(),x=Ct(f);x.payload=s,u!=null&&(x.callback=u),s=vn(r,x,f),s!==null&&(Kr(s,r,f),xi(s,r,f))},enqueueReplaceState:function(r,s,u){r=r._reactInternals;var f=fs(),x=Ct(f);x.tag=1,x.payload=s,u!=null&&(x.callback=u),s=vn(r,x,f),s!==null&&(Kr(s,r,f),xi(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var u=fs(),f=Ct(u);f.tag=2,s!=null&&(f.callback=s),s=vn(r,f,u),s!==null&&(Kr(s,r,u),xi(s,r,u))}};function Vm(r,s,u,f,x,N,U){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,N,U):s.prototype&&s.prototype.isPureReactComponent?!Mr(u,f)||!Mr(x,N):!0}function $m(r,s,u,f){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==r&&Jh.enqueueReplaceState(s,s.state,null)}function au(r,s){var u=s;if("ref"in s){u={};for(var f in s)f!=="ref"&&(u[f]=s[f])}if(r=r.defaultProps){u===s&&(u=b({},u));for(var x in r)u[x]===void 0&&(u[x]=r[x])}return u}function Jm(r){no(r)}function Ym(r){console.error(r)}function Wm(r){no(r)}function df(r,s){try{var u=r.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function Km(r,s,u){try{var f=r.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Yh(r,s,u){return u=Ct(u),u.tag=3,u.payload={element:null},u.callback=function(){df(r,s)},u}function Xm(r){return r=Ct(r),r.tag=3,r}function Qm(r,s,u,f){var x=u.type.getDerivedStateFromError;if(typeof x=="function"){var N=f.value;r.payload=function(){return x(N)},r.callback=function(){Km(s,u,f)}}var U=u.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(r.callback=function(){Km(s,u,f),typeof x!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var Q=f.stack;this.componentDidCatch(f.value,{componentStack:Q!==null?Q:""})})}function N5(r,s,u,f,x){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=u.alternate,s!==null&&Da(s,u,x,!0),u=ti.current,u!==null){switch(u.tag){case 31:case 13:return Si===null?_f():u.alternate===null&&ai===0&&(ai=3),u.flags&=-257,u.flags|=65536,u.lanes=x,f===Ae?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([f]):s.add(f),bp(r,f,x)),!1;case 22:return u.flags|=65536,f===Ae?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([f]):u.add(f)),bp(r,f,x)),!1}throw Error(i(435,u.tag))}return bp(r,f,x),_f(),!1}if(Wt)return s=ti.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=x,f!==us&&(r=Error(i(422),{cause:f}),Wo(Fr(r,u)))):(f!==us&&(s=Error(i(423),{cause:f}),Wo(Fr(s,u))),r=r.current.alternate,r.flags|=65536,x&=-x,r.lanes|=x,f=Fr(f,u),x=Yh(r.stateNode,f,x),$n(r,x),ai!==4&&(ai=2)),!1;var N=Error(i(520),{cause:f});if(N=Fr(N,u),hd===null?hd=[N]:hd.push(N),ai!==4&&(ai=2),s===null)return!0;f=Fr(f,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,r=x&-x,u.lanes|=r,r=Yh(u.stateNode,f,r),$n(u,r),!1;case 1:if(s=u.type,N=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(sl===null||!sl.has(N))))return u.flags|=65536,x&=-x,u.lanes|=x,x=Xm(x),Qm(x,r,u,f),$n(u,x),!1}u=u.return}while(u!==null);return!1}var Wh=Error(i(461)),Ni=!1;function tr(r,s,u,f){s.child=r===null?en(s,null,u,f):Kt(s,r.child,u,f)}function Zm(r,s,u,f,x){u=u.render;var N=s.ref;if("ref"in f){var U={};for(var Q in f)Q!=="ref"&&(U[Q]=f[Q])}else U=f;return Ma(s),f=Xc(r,s,u,U,N,x),Q=Qc(),r!==null&&!Ni?(Zc(r,s,x),ho(r,s,x)):(Wt&&Q&&Jc(s),s.flags|=1,tr(r,s,f,x),s.child)}function eg(r,s,u,f,x){if(r===null){var N=u.type;return typeof N=="function"&&!Fu(N)&&N.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=N,tg(r,s,N,f,x)):(r=$o(u.type,null,f,s,s.mode,x),r.ref=s.ref,r.return=s,s.child=r)}if(N=r.child,!ip(r,x)){var U=N.memoizedProps;if(u=u.compare,u=u!==null?u:Mr,u(U,f)&&r.ref===s.ref)return ho(r,s,x)}return s.flags|=1,r=jr(N,f),r.ref=s.ref,r.return=s,s.child=r}function tg(r,s,u,f,x){if(r!==null){var N=r.memoizedProps;if(Mr(N,f)&&r.ref===s.ref)if(Ni=!1,s.pendingProps=f=N,ip(r,x))(r.flags&131072)!==0&&(Ni=!0);else return s.lanes=r.lanes,ho(r,s,x)}return Kh(r,s,u,f,x)}function ng(r,s,u,f){var x=f.children,N=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(N=N!==null?N.baseLanes|u:u,r!==null){for(f=s.child=r.child,x=0;f!==null;)x=x|f.lanes|f.childLanes,f=f.sibling;f=x&~N}else f=0,s.child=null;return ig(r,s,N,u,f)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&te(s,N!==null?N.cachePool:null),N!==null?Sr(s,N):Vr(),zn(s);else return f=s.lanes=536870912,ig(r,s,N!==null?N.baseLanes|u:u,u,f)}else N!==null?(te(s,N.cachePool),Sr(s,N),ks(),s.memoizedState=null):(r!==null&&te(s,null),Vr(),ks());return tr(r,s,x,u),s.child}function ad(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ig(r,s,u,f,x){var N=X();return N=N===null?null:{parent:ei._currentValue,pool:N},s.memoizedState={baseLanes:u,cachePool:N},r!==null&&te(s,null),Vr(),zn(s),r!==null&&Da(r,s,f,!0),s.childLanes=x,null}function ff(r,s){return s=pf({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function rg(r,s,u){return Kt(s,r.child,null,u),r=ff(s,s.pendingProps),r.flags|=2,dr(s),s.memoizedState=null,r}function A5(r,s,u){var f=s.pendingProps,x=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Wt){if(f.mode==="hidden")return r=ff(s,f),s.lanes=536870912,ad(null,r);if(Cs(s),(r=Cn)?(r=gv(r,Vn),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ka!==null?{id:zr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},u=Bu(r),u.return=s,s.child=u,Ri=s,Cn=null)):r=null,r===null)throw Ia(s);return s.lanes=536870912,null}return ff(s,f)}var N=r.memoizedState;if(N!==null){var U=N.dehydrated;if(Cs(s),x)if(s.flags&256)s.flags&=-257,s=rg(r,s,u);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Ni||Da(r,s,u,!1),x=(u&r.childLanes)!==0,Ni||x){if(f=In,f!==null&&(U=Ei(f,u),U!==0&&U!==N.retryLane))throw N.retryLane=U,$s(r,U),Kr(f,r,U),Wh;_f(),s=rg(r,s,u)}else r=N.treeContext,Cn=Ds(U.nextSibling),Ri=s,Wt=!0,er=null,Vn=!1,r!==null&&tf(s,r),s=ff(s,f),s.flags|=4096;return s}return r=jr(r.child,{mode:f.mode,children:f.children}),r.ref=s.ref,s.child=r,r.return=s,r}function hf(r,s){var u=s.ref;if(u===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(s.flags|=4194816)}}function Kh(r,s,u,f,x){return Ma(s),u=Xc(r,s,u,f,void 0,x),f=Qc(),r!==null&&!Ni?(Zc(r,s,x),ho(r,s,x)):(Wt&&f&&Jc(s),s.flags|=1,tr(r,s,u,x),s.child)}function sg(r,s,u,f,x,N){return Ma(s),s.updateQueue=null,u=Ws(s,f,u,x),Wu(r),f=Qc(),r!==null&&!Ni?(Zc(r,s,N),ho(r,s,N)):(Wt&&f&&Jc(s),s.flags|=1,tr(r,s,u,N),s.child)}function ag(r,s,u,f,x){if(Ma(s),s.stateNode===null){var N=Ii,U=u.contextType;typeof U=="object"&&U!==null&&(N=Di(U)),N=new u(f,N),s.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Jh,s.stateNode=N,N._reactInternals=s,N=s.stateNode,N.props=f,N.state=s.memoizedState,N.refs={},hn(s),U=u.contextType,N.context=typeof U=="object"&&U!==null?Di(U):Ii,N.state=s.memoizedState,U=u.getDerivedStateFromProps,typeof U=="function"&&($h(s,u,U,f),N.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(U=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),U!==N.state&&Jh.enqueueReplaceState(N,N.state,null),Mi(s,f,N,x),rn(),N.state=s.memoizedState),typeof N.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(r===null){N=s.stateNode;var Q=s.memoizedProps,pe=au(u,Q);N.props=pe;var Le=N.context,qe=u.contextType;U=Ii,typeof qe=="object"&&qe!==null&&(U=Di(qe));var We=u.getDerivedStateFromProps;qe=typeof We=="function"||typeof N.getSnapshotBeforeUpdate=="function",Q=s.pendingProps!==Q,qe||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Q||Le!==U)&&$m(s,N,f,U),Ft=!1;var De=s.memoizedState;N.state=De,Mi(s,f,N,x),rn(),Le=s.memoizedState,Q||De!==Le||Ft?(typeof We=="function"&&($h(s,u,We,f),Le=s.memoizedState),(pe=Ft||Vm(s,u,pe,f,De,Le,U))?(qe||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(s.flags|=4194308)):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=Le),N.props=f,N.state=Le,N.context=U,f=pe):(typeof N.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{N=s.stateNode,un(r,s),U=s.memoizedProps,qe=au(u,U),N.props=qe,We=s.pendingProps,De=N.context,Le=u.contextType,pe=Ii,typeof Le=="object"&&Le!==null&&(pe=Di(Le)),Q=u.getDerivedStateFromProps,(Le=typeof Q=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(U!==We||De!==pe)&&$m(s,N,f,pe),Ft=!1,De=s.memoizedState,N.state=De,Mi(s,f,N,x),rn();var Oe=s.memoizedState;U!==We||De!==Oe||Ft||r!==null&&r.dependencies!==null&&Vu(r.dependencies)?(typeof Q=="function"&&($h(s,u,Q,f),Oe=s.memoizedState),(qe=Ft||Vm(s,u,qe,f,De,Oe,pe)||r!==null&&r.dependencies!==null&&Vu(r.dependencies))?(Le||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(f,Oe,pe),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(f,Oe,pe)),typeof N.componentDidUpdate=="function"&&(s.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof N.componentDidUpdate!="function"||U===r.memoizedProps&&De===r.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||U===r.memoizedProps&&De===r.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Oe),N.props=f,N.state=Oe,N.context=pe,f=qe):(typeof N.componentDidUpdate!="function"||U===r.memoizedProps&&De===r.memoizedState||(s.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||U===r.memoizedProps&&De===r.memoizedState||(s.flags|=1024),f=!1)}return N=f,hf(r,s),f=(s.flags&128)!==0,N||f?(N=s.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:N.render(),s.flags|=1,r!==null&&f?(s.child=Kt(s,r.child,null,x),s.child=Kt(s,null,u,x)):tr(r,s,u,x),s.memoizedState=N.state,r=s.child):r=ho(r,s,x),r}function og(r,s,u,f){return so(),s.flags|=256,tr(r,s,u,f),s.child}var Xh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qh(r){return{baseLanes:r,cachePool:oe()}}function Zh(r,s,u){return r=r!==null?r.childLanes&~u:0,s&&(r|=ds),r}function lg(r,s,u){var f=s.pendingProps,x=!1,N=(s.flags&128)!==0,U;if((U=N)||(U=r!==null&&r.memoizedState===null?!1:(Yn.current&2)!==0),U&&(x=!0,s.flags&=-129),U=(s.flags&32)!==0,s.flags&=-33,r===null){if(Wt){if(x?_r(s):ks(),(r=Cn)?(r=gv(r,Vn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ka!==null?{id:zr,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},u=Bu(r),u.return=s,s.child=u,Ri=s,Cn=null)):r=null,r===null)throw Ia(s);return Pp(r)?s.lanes=32:s.lanes=536870912,null}var Q=f.children;return f=f.fallback,x?(ks(),x=s.mode,Q=pf({mode:"hidden",children:Q},x),f=Ca(f,x,u,null),Q.return=s,f.return=s,Q.sibling=f,s.child=Q,f=s.child,f.memoizedState=Qh(u),f.childLanes=Zh(r,U,u),s.memoizedState=Xh,ad(null,f)):(_r(s),ep(s,Q))}var pe=r.memoizedState;if(pe!==null&&(Q=pe.dehydrated,Q!==null)){if(N)s.flags&256?(_r(s),s.flags&=-257,s=tp(r,s,u)):s.memoizedState!==null?(ks(),s.child=r.child,s.flags|=128,s=null):(ks(),Q=f.fallback,x=s.mode,f=pf({mode:"visible",children:f.children},x),Q=Ca(Q,x,u,null),Q.flags|=2,f.return=s,Q.return=s,f.sibling=Q,s.child=f,Kt(s,r.child,null,u),f=s.child,f.memoizedState=Qh(u),f.childLanes=Zh(r,U,u),s.memoizedState=Xh,s=ad(null,f));else if(_r(s),Pp(Q)){if(U=Q.nextSibling&&Q.nextSibling.dataset,U)var Le=U.dgst;U=Le,f=Error(i(419)),f.stack="",f.digest=U,Wo({value:f,source:null,stack:null}),s=tp(r,s,u)}else if(Ni||Da(r,s,u,!1),U=(u&r.childLanes)!==0,Ni||U){if(U=In,U!==null&&(f=Ei(U,u),f!==0&&f!==pe.retryLane))throw pe.retryLane=f,$s(r,f),Kr(U,r,f),Wh;Mp(Q)||_f(),s=tp(r,s,u)}else Mp(Q)?(s.flags|=192,s.child=r.child,s=null):(r=pe.treeContext,Cn=Ds(Q.nextSibling),Ri=s,Wt=!0,er=null,Vn=!1,r!==null&&tf(s,r),s=ep(s,f.children),s.flags|=4096);return s}return x?(ks(),Q=f.fallback,x=s.mode,pe=r.child,Le=pe.sibling,f=jr(pe,{mode:"hidden",children:f.children}),f.subtreeFlags=pe.subtreeFlags&65011712,Le!==null?Q=jr(Le,Q):(Q=Ca(Q,x,u,null),Q.flags|=2),Q.return=s,f.return=s,f.sibling=Q,s.child=f,ad(null,f),f=s.child,Q=r.child.memoizedState,Q===null?Q=Qh(u):(x=Q.cachePool,x!==null?(pe=ei._currentValue,x=x.parent!==pe?{parent:pe,pool:pe}:x):x=oe(),Q={baseLanes:Q.baseLanes|u,cachePool:x}),f.memoizedState=Q,f.childLanes=Zh(r,U,u),s.memoizedState=Xh,ad(r.child,f)):(_r(s),u=r.child,r=u.sibling,u=jr(u,{mode:"visible",children:f.children}),u.return=s,u.sibling=null,r!==null&&(U=s.deletions,U===null?(s.deletions=[r],s.flags|=16):U.push(r)),s.child=u,s.memoizedState=null,u)}function ep(r,s){return s=pf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function pf(r,s){return r=Gi(22,r,null,s),r.lanes=0,r}function tp(r,s,u){return Kt(s,r.child,null,u),r=ep(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function ug(r,s,u){r.lanes|=s;var f=r.alternate;f!==null&&(f.lanes|=s),Ko(r.return,s,u)}function np(r,s,u,f,x,N){var U=r.memoizedState;U===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:x,treeForkCount:N}:(U.isBackwards=s,U.rendering=null,U.renderingStartTime=0,U.last=f,U.tail=u,U.tailMode=x,U.treeForkCount=N)}function cg(r,s,u){var f=s.pendingProps,x=f.revealOrder,N=f.tail;f=f.children;var U=Yn.current,Q=(U&2)!==0;if(Q?(U=U&1|2,s.flags|=128):U&=1,H(Yn,U),tr(r,s,f,u),f=Wt?eu:0,!Q&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ug(r,u,s);else if(r.tag===19)ug(r,u,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(x){case"forwards":for(u=s.child,x=null;u!==null;)r=u.alternate,r!==null&&oo(r)===null&&(x=u),u=u.sibling;u=x,u===null?(x=s.child,s.child=null):(x=u.sibling,u.sibling=null),np(s,!1,x,u,N,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,x=s.child,s.child=null;x!==null;){if(r=x.alternate,r!==null&&oo(r)===null){s.child=x;break}r=x.sibling,x.sibling=u,u=x,x=r}np(s,!0,u,null,N,f);break;case"together":np(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function ho(r,s,u){if(r!==null&&(s.dependencies=r.dependencies),rl|=s.lanes,(u&s.childLanes)===0)if(r!==null){if(Da(r,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,u=jr(r,r.pendingProps),s.child=u,u.return=s;r.sibling!==null;)r=r.sibling,u=u.sibling=jr(r,r.pendingProps),u.return=s;u.sibling=null}return s.child}function ip(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Vu(r)))}function T5(r,s,u){switch(s.tag){case 3:fe(s,s.stateNode.containerInfo),La(s,ei,r.memoizedState.cache),so();break;case 27:case 5:Me(s);break;case 4:fe(s,s.stateNode.containerInfo);break;case 10:La(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Cs(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(_r(s),s.flags|=128,null):(u&s.child.childLanes)!==0?lg(r,s,u):(_r(s),r=ho(r,s,u),r!==null?r.sibling:null);_r(s);break;case 19:var x=(r.flags&128)!==0;if(f=(u&s.childLanes)!==0,f||(Da(r,s,u,!1),f=(u&s.childLanes)!==0),x){if(f)return cg(r,s,u);s.flags|=128}if(x=s.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),H(Yn,Yn.current),f)break;return null;case 22:return s.lanes=0,ng(r,s,u,s.pendingProps);case 24:La(s,ei,r.memoizedState.cache)}return ho(r,s,u)}function dg(r,s,u){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ni=!0;else{if(!ip(r,u)&&(s.flags&128)===0)return Ni=!1,T5(r,s,u);Ni=(r.flags&131072)!==0}else Ni=!1,Wt&&(s.flags&1048576)!==0&&ef(s,eu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(r=ye(s.elementType),s.type=r,typeof r=="function")Fu(r)?(f=au(r,f),s.tag=1,s=ag(null,s,r,f,u)):(s.tag=0,s=Kh(null,s,r,f,u));else{if(r!=null){var x=r.$$typeof;if(x===O){s.tag=11,s=Zm(null,s,r,f,u);break e}else if(x===F){s.tag=14,s=eg(null,s,r,f,u);break e}}throw s=re(r)||r,Error(i(306,s,""))}}return s;case 0:return Kh(r,s,s.type,s.pendingProps,u);case 1:return f=s.type,x=au(f,s.pendingProps),ag(r,s,f,x,u);case 3:e:{if(fe(s,s.stateNode.containerInfo),r===null)throw Error(i(387));f=s.pendingProps;var N=s.memoizedState;x=N.element,un(r,s),Mi(s,f,null,u);var U=s.memoizedState;if(f=U.cache,La(s,ei,f),f!==N.cache&&ao(s,[ei],u,!0),rn(),f=U.element,N.isDehydrated)if(N={element:f,isDehydrated:!1,cache:U.cache},s.updateQueue.baseState=N,s.memoizedState=N,s.flags&256){s=og(r,s,f,u);break e}else if(f!==x){x=Fr(Error(i(424)),s),Wo(x),s=og(r,s,f,u);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Cn=Ds(r.firstChild),Ri=s,Wt=!0,er=null,Vn=!0,u=en(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(so(),f===x){s=ho(r,s,u);break e}tr(r,s,f,u)}s=s.child}return s;case 26:return hf(r,s),r===null?(u=Sv(s.type,null,s.pendingProps,null))?s.memoizedState=u:Wt||(u=s.type,r=s.pendingProps,f=If(se.current).createElement(u),f[ln]=s,f[wn]=r,nr(f,u,r),ii(f),s.stateNode=f):s.memoizedState=Sv(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Me(s),r===null&&Wt&&(f=s.stateNode=bv(s.type,s.pendingProps,se.current),Ri=s,Vn=!0,x=Cn,ul(s.type)?(Up=x,Cn=Ds(f.firstChild)):Cn=x),tr(r,s,s.pendingProps.children,u),hf(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Wt&&((x=f=Cn)&&(f=nx(f,s.type,s.pendingProps,Vn),f!==null?(s.stateNode=f,Ri=s,Cn=Ds(f.firstChild),Vn=!1,x=!0):x=!1),x||Ia(s)),Me(s),x=s.type,N=s.pendingProps,U=r!==null?r.memoizedProps:null,f=N.children,Rp(x,N)?f=null:U!==null&&Rp(x,U)&&(s.flags|=32),s.memoizedState!==null&&(x=Xc(r,s,jh,null,null,u),wd._currentValue=x),hf(r,s),tr(r,s,f,u),s.child;case 6:return r===null&&Wt&&((r=u=Cn)&&(u=ix(u,s.pendingProps,Vn),u!==null?(s.stateNode=u,Ri=s,Cn=null,r=!0):r=!1),r||Ia(s)),null;case 13:return lg(r,s,u);case 4:return fe(s,s.stateNode.containerInfo),f=s.pendingProps,r===null?s.child=Kt(s,null,f,u):tr(r,s,f,u),s.child;case 11:return Zm(r,s,s.type,s.pendingProps,u);case 7:return tr(r,s,s.pendingProps,u),s.child;case 8:return tr(r,s,s.pendingProps.children,u),s.child;case 12:return tr(r,s,s.pendingProps.children,u),s.child;case 10:return f=s.pendingProps,La(s,s.type,f.value),tr(r,s,f.children,u),s.child;case 9:return x=s.type._context,f=s.pendingProps.children,Ma(s),x=Di(x),f=f(x),s.flags|=1,tr(r,s,f,u),s.child;case 14:return eg(r,s,s.type,s.pendingProps,u);case 15:return tg(r,s,s.type,s.pendingProps,u);case 19:return cg(r,s,u);case 31:return A5(r,s,u);case 22:return ng(r,s,u,s.pendingProps);case 24:return Ma(s),f=Di(ei),r===null?(x=X(),x===null&&(x=In,N=Xo(),x.pooledCache=N,N.refCount++,N!==null&&(x.pooledCacheLanes|=u),x=N),s.memoizedState={parent:f,cache:x},hn(s),La(s,ei,x)):((r.lanes&u)!==0&&(un(r,s),Mi(s,null,null,u),rn()),x=r.memoizedState,N=s.memoizedState,x.parent!==f?(x={parent:f,cache:f},s.memoizedState=x,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=x),La(s,ei,f)):(f=N.cache,La(s,ei,f),f!==x.cache&&ao(s,[ei],u,!0))),tr(r,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function po(r){r.flags|=4}function rp(r,s,u,f,x){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(x&335544128)===x)if(r.stateNode.complete)r.flags|=8192;else if(jg())r.flags|=8192;else throw _e=Ae,ke}else r.flags&=-16777217}function fg(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ev(s))if(jg())r.flags|=8192;else throw _e=Ae,ke}function mf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?gn():536870912,r.lanes|=s,ac|=s)}function od(r,s){if(!Wt)switch(r.tailMode){case"hidden":s=r.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function Hn(r){var s=r.alternate!==null&&r.alternate.child===r.child,u=0,f=0;if(s)for(var x=r.child;x!==null;)u|=x.lanes|x.childLanes,f|=x.subtreeFlags&65011712,f|=x.flags&65011712,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)u|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=f,r.childLanes=u,s}function E5(r,s,u){var f=s.pendingProps;switch(Hu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(s),null;case 1:return Hn(s),null;case 3:return u=s.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Gr(ei),me(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Li(s)?po(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Wc())),Hn(s),null;case 26:var x=s.type,N=s.memoizedState;return r===null?(po(s),N!==null?(Hn(s),fg(s,N)):(Hn(s),rp(s,x,null,f,u))):N?N!==r.memoizedState?(po(s),Hn(s),fg(s,N)):(Hn(s),s.flags&=-16777217):(r=r.memoizedProps,r!==f&&po(s),Hn(s),rp(s,x,r,f,u)),null;case 27:if(we(s),u=se.current,x=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==f&&po(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return Hn(s),null}r=K.current,Li(s)?Yc(s):(r=bv(x,f,u),s.stateNode=r,po(s))}return Hn(s),null;case 5:if(we(s),x=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==f&&po(s);else{if(!f){if(s.stateNode===null)throw Error(i(166));return Hn(s),null}if(N=K.current,Li(s))Yc(s);else{var U=If(se.current);switch(N){case 1:N=U.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:N=U.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":N=U.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":N=U.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":N=U.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof f.is=="string"?U.createElement("select",{is:f.is}):U.createElement("select"),f.multiple?N.multiple=!0:f.size&&(N.size=f.size);break;default:N=typeof f.is=="string"?U.createElement(x,{is:f.is}):U.createElement(x)}}N[ln]=s,N[wn]=f;e:for(U=s.child;U!==null;){if(U.tag===5||U.tag===6)N.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===s)break e;for(;U.sibling===null;){if(U.return===null||U.return===s)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}s.stateNode=N;e:switch(nr(N,x,f),x){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&po(s)}}return Hn(s),rp(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,u),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==f&&po(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(i(166));if(r=se.current,Li(s)){if(r=s.stateNode,u=s.memoizedProps,f=null,x=Ri,x!==null)switch(x.tag){case 27:case 5:f=x.memoizedProps}r[ln]=s,r=!!(r.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||lv(r.nodeValue,u)),r||Ia(s,!0)}else r=If(r).createTextNode(f),r[ln]=s,s.stateNode=r}return Hn(s),null;case 31:if(u=s.memoizedState,r===null||r.memoizedState!==null){if(f=Li(s),u!==null){if(r===null){if(!f)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[ln]=s}else so(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Hn(s),r=!1}else u=Wc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return s.flags&256?(dr(s),s):(dr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Hn(s),null;case 13:if(f=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(x=Li(s),f!==null&&f.dehydrated!==null){if(r===null){if(!x)throw Error(i(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[ln]=s}else so(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Hn(s),x=!1}else x=Wc(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=x),x=!0;if(!x)return s.flags&256?(dr(s),s):(dr(s),null)}return dr(s),(s.flags&128)!==0?(s.lanes=u,s):(u=f!==null,r=r!==null&&r.memoizedState!==null,u&&(f=s.child,x=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(x=f.alternate.memoizedState.cachePool.pool),N=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(N=f.memoizedState.cachePool.pool),N!==x&&(f.flags|=2048)),u!==r&&u&&(s.child.flags|=8192),mf(s,s.updateQueue),Hn(s),null);case 4:return me(),r===null&&Tp(s.stateNode.containerInfo),Hn(s),null;case 10:return Gr(s.type),Hn(s),null;case 19:if(D(Yn),f=s.memoizedState,f===null)return Hn(s),null;if(x=(s.flags&128)!==0,N=f.rendering,N===null)if(x)od(f,!1);else{if(ai!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(N=oo(r),N!==null){for(s.flags|=128,od(f,!1),r=N.updateQueue,s.updateQueue=r,mf(s,r),s.subtreeFlags=0,r=u,u=s.child;u!==null;)Ql(u,r),u=u.sibling;return H(Yn,Yn.current&1|2),Wt&&wr(s,f.treeForkCount),s.child}r=r.sibling}f.tail!==null&&Se()>xf&&(s.flags|=128,x=!0,od(f,!1),s.lanes=4194304)}else{if(!x)if(r=oo(N),r!==null){if(s.flags|=128,x=!0,r=r.updateQueue,s.updateQueue=r,mf(s,r),od(f,!0),f.tail===null&&f.tailMode==="hidden"&&!N.alternate&&!Wt)return Hn(s),null}else 2*Se()-f.renderingStartTime>xf&&u!==536870912&&(s.flags|=128,x=!0,od(f,!1),s.lanes=4194304);f.isBackwards?(N.sibling=s.child,s.child=N):(r=f.last,r!==null?r.sibling=N:s.child=N,f.last=N)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Se(),r.sibling=null,u=Yn.current,H(Yn,x?u&1|2:u&1),Wt&&wr(s,f.treeForkCount),r):(Hn(s),null);case 22:case 23:return dr(s),si(),f=s.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(u&536870912)!==0&&(s.flags&128)===0&&(Hn(s),s.subtreeFlags&6&&(s.flags|=8192)):Hn(s),u=s.updateQueue,u!==null&&mf(s,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==u&&(s.flags|=2048),r!==null&&D(Y),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Gr(ei),Hn(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function C5(r,s){switch(Hu(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Gr(ei),me(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return we(s),null;case 31:if(s.memoizedState!==null){if(dr(s),s.alternate===null)throw Error(i(340));so()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(dr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));so()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return D(Yn),null;case 4:return me(),null;case 10:return Gr(s.type),null;case 22:case 23:return dr(s),si(),r!==null&&D(Y),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Gr(ei),null;case 25:return null;default:return null}}function hg(r,s){switch(Hu(s),s.tag){case 3:Gr(ei),me();break;case 26:case 27:case 5:we(s);break;case 4:me();break;case 31:s.memoizedState!==null&&dr(s);break;case 13:dr(s);break;case 19:D(Yn);break;case 10:Gr(s.type);break;case 22:case 23:dr(s),si(),r!==null&&D(Y);break;case 24:Gr(ei)}}function ld(r,s){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var x=f.next;u=x;do{if((u.tag&r)===r){f=void 0;var N=u.create,U=u.inst;f=N(),U.destroy=f}u=u.next}while(u!==x)}}catch(Q){bn(s,s.return,Q)}}function nl(r,s,u){try{var f=s.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var N=x.next;f=N;do{if((f.tag&r)===r){var U=f.inst,Q=U.destroy;if(Q!==void 0){U.destroy=void 0,x=s;var pe=u,Le=Q;try{Le()}catch(qe){bn(x,pe,qe)}}}f=f.next}while(f!==N)}}catch(qe){bn(s,s.return,qe)}}function pg(r){var s=r.updateQueue;if(s!==null){var u=r.stateNode;try{hi(s,u)}catch(f){bn(r,r.return,f)}}}function mg(r,s,u){u.props=au(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(f){bn(r,s,f)}}function ud(r,s){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof u=="function"?r.refCleanup=u(f):u.current=f}}catch(x){bn(r,s,x)}}function Fa(r,s){var u=r.ref,f=r.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(x){bn(r,s,x)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(x){bn(r,s,x)}else u.current=null}function gg(r){var s=r.type,u=r.memoizedProps,f=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(x){bn(r,r.return,x)}}function sp(r,s,u){try{var f=r.stateNode;K5(f,r.type,u,s),f[wn]=s}catch(x){bn(r,r.return,x)}}function vg(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ul(r.type)||r.tag===4}function ap(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||vg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ul(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function op(r,s,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(r),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Pn));else if(f!==4&&(f===27&&ul(r.type)&&(u=r.stateNode,s=null),r=r.child,r!==null))for(op(r,s,u),r=r.sibling;r!==null;)op(r,s,u),r=r.sibling}function gf(r,s,u){var f=r.tag;if(f===5||f===6)r=r.stateNode,s?u.insertBefore(r,s):u.appendChild(r);else if(f!==4&&(f===27&&ul(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(gf(r,s,u),r=r.sibling;r!==null;)gf(r,s,u),r=r.sibling}function yg(r){var s=r.stateNode,u=r.memoizedProps;try{for(var f=r.type,x=s.attributes;x.length;)s.removeAttributeNode(x[0]);nr(s,f,u),s[ln]=r,s[wn]=u}catch(N){bn(r,r.return,N)}}var mo=!1,Ai=!1,lp=!1,bg=typeof WeakSet=="function"?WeakSet:Set,$i=null;function k5(r,s){if(r=r.containerInfo,kp=Of,r=os(r),ls(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var x=f.anchorOffset,N=f.focusNode;f=f.focusOffset;try{u.nodeType,N.nodeType}catch{u=null;break e}var U=0,Q=-1,pe=-1,Le=0,qe=0,We=r,De=null;t:for(;;){for(var Oe;We!==u||x!==0&&We.nodeType!==3||(Q=U+x),We!==N||f!==0&&We.nodeType!==3||(pe=U+f),We.nodeType===3&&(U+=We.nodeValue.length),(Oe=We.firstChild)!==null;)De=We,We=Oe;for(;;){if(We===r)break t;if(De===u&&++Le===x&&(Q=U),De===N&&++qe===f&&(pe=U),(Oe=We.nextSibling)!==null)break;We=De,De=We.parentNode}We=Oe}u=Q===-1||pe===-1?null:{start:Q,end:pe}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ip={focusedElem:r,selectionRange:u},Of=!1,$i=s;$i!==null;)if(s=$i,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,$i=r;else for(;$i!==null;){switch(s=$i,N=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)x=r[u],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&N!==null){r=void 0,u=s,x=N.memoizedProps,N=N.memoizedState,f=u.stateNode;try{var dt=au(u.type,x);r=f.getSnapshotBeforeUpdate(dt,N),f.__reactInternalSnapshotBeforeUpdate=r}catch(kt){bn(u,u.return,kt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,u=r.nodeType,u===9)Dp(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Dp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,$i=r;break}$i=s.return}}function xg(r,s,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:vo(r,u),f&4&&ld(5,u);break;case 1:if(vo(r,u),f&4)if(r=u.stateNode,s===null)try{r.componentDidMount()}catch(U){bn(u,u.return,U)}else{var x=au(u.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(x,s,r.__reactInternalSnapshotBeforeUpdate)}catch(U){bn(u,u.return,U)}}f&64&&pg(u),f&512&&ud(u,u.return);break;case 3:if(vo(r,u),f&64&&(r=u.updateQueue,r!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{hi(r,s)}catch(U){bn(u,u.return,U)}}break;case 27:s===null&&f&4&&yg(u);case 26:case 5:vo(r,u),s===null&&f&4&&gg(u),f&512&&ud(u,u.return);break;case 12:vo(r,u);break;case 31:vo(r,u),f&4&&_g(r,u);break;case 13:vo(r,u),f&4&&Ng(r,u),f&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=j5.bind(null,u),rx(r,u))));break;case 22:if(f=u.memoizedState!==null||mo,!f){s=s!==null&&s.memoizedState!==null||Ai,x=mo;var N=Ai;mo=f,(Ai=s)&&!N?yo(r,u,(u.subtreeFlags&8772)!==0):vo(r,u),mo=x,Ai=N}break;case 30:break;default:vo(r,u)}}function wg(r){var s=r.alternate;s!==null&&(r.alternate=null,wg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ys(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Kn=null,$r=!1;function go(r,s,u){for(u=u.child;u!==null;)Sg(r,s,u),u=u.sibling}function Sg(r,s,u){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Lt,u)}catch{}switch(u.tag){case 26:Ai||Fa(u,s),go(r,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ai||Fa(u,s);var f=Kn,x=$r;ul(u.type)&&(Kn=u.stateNode,$r=!1),go(r,s,u),yd(u.stateNode),Kn=f,$r=x;break;case 5:Ai||Fa(u,s);case 6:if(f=Kn,x=$r,Kn=null,go(r,s,u),Kn=f,$r=x,Kn!==null)if($r)try{(Kn.nodeType===9?Kn.body:Kn.nodeName==="HTML"?Kn.ownerDocument.body:Kn).removeChild(u.stateNode)}catch(N){bn(u,s,N)}else try{Kn.removeChild(u.stateNode)}catch(N){bn(u,s,N)}break;case 18:Kn!==null&&($r?(r=Kn,pv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),pc(r)):pv(Kn,u.stateNode));break;case 4:f=Kn,x=$r,Kn=u.stateNode.containerInfo,$r=!0,go(r,s,u),Kn=f,$r=x;break;case 0:case 11:case 14:case 15:nl(2,u,s),Ai||nl(4,u,s),go(r,s,u);break;case 1:Ai||(Fa(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"&&mg(u,s,f)),go(r,s,u);break;case 21:go(r,s,u);break;case 22:Ai=(f=Ai)||u.memoizedState!==null,go(r,s,u),Ai=f;break;default:go(r,s,u)}}function _g(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{pc(r)}catch(u){bn(s,s.return,u)}}}function Ng(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{pc(r)}catch(u){bn(s,s.return,u)}}function I5(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new bg),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new bg),s;default:throw Error(i(435,r.tag))}}function vf(r,s){var u=I5(r);s.forEach(function(f){if(!u.has(f)){u.add(f);var x=F5.bind(null,r,f);f.then(x,x)}})}function Jr(r,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var x=u[f],N=r,U=s,Q=U;e:for(;Q!==null;){switch(Q.tag){case 27:if(ul(Q.type)){Kn=Q.stateNode,$r=!1;break e}break;case 5:Kn=Q.stateNode,$r=!1;break e;case 3:case 4:Kn=Q.stateNode.containerInfo,$r=!0;break e}Q=Q.return}if(Kn===null)throw Error(i(160));Sg(N,U,x),Kn=null,$r=!1,N=x.alternate,N!==null&&(N.return=null),x.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ag(s,r),s=s.sibling}var Zs=null;function Ag(r,s){var u=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Jr(s,r),Yr(r),f&4&&(nl(3,r,r.return),ld(3,r),nl(5,r,r.return));break;case 1:Jr(s,r),Yr(r),f&512&&(Ai||u===null||Fa(u,u.return)),f&64&&mo&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var x=Zs;if(Jr(s,r),Yr(r),f&512&&(Ai||u===null||Fa(u,u.return)),f&4){var N=u!==null?u.memoizedState:null;if(f=r.memoizedState,u===null)if(f===null)if(r.stateNode===null){e:{f=r.type,u=r.memoizedProps,x=x.ownerDocument||x;t:switch(f){case"title":N=x.getElementsByTagName("title")[0],(!N||N[Bn]||N[ln]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=x.createElement(f),x.head.insertBefore(N,x.querySelector("head > title"))),nr(N,f,u),N[ln]=r,ii(N),f=N;break e;case"link":var U=Av("link","href",x).get(f+(u.href||""));if(U){for(var Q=0;Q<U.length;Q++)if(N=U[Q],N.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&N.getAttribute("rel")===(u.rel==null?null:u.rel)&&N.getAttribute("title")===(u.title==null?null:u.title)&&N.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){U.splice(Q,1);break t}}N=x.createElement(f),nr(N,f,u),x.head.appendChild(N);break;case"meta":if(U=Av("meta","content",x).get(f+(u.content||""))){for(Q=0;Q<U.length;Q++)if(N=U[Q],N.getAttribute("content")===(u.content==null?null:""+u.content)&&N.getAttribute("name")===(u.name==null?null:u.name)&&N.getAttribute("property")===(u.property==null?null:u.property)&&N.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&N.getAttribute("charset")===(u.charSet==null?null:u.charSet)){U.splice(Q,1);break t}}N=x.createElement(f),nr(N,f,u),x.head.appendChild(N);break;default:throw Error(i(468,f))}N[ln]=r,ii(N),f=N}r.stateNode=f}else Tv(x,r.type,r.stateNode);else r.stateNode=Nv(x,f,r.memoizedProps);else N!==f?(N===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):N.count--,f===null?Tv(x,r.type,r.stateNode):Nv(x,f,r.memoizedProps)):f===null&&r.stateNode!==null&&sp(r,r.memoizedProps,u.memoizedProps)}break;case 27:Jr(s,r),Yr(r),f&512&&(Ai||u===null||Fa(u,u.return)),u!==null&&f&4&&sp(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Jr(s,r),Yr(r),f&512&&(Ai||u===null||Fa(u,u.return)),r.flags&32){x=r.stateNode;try{xs(x,"")}catch(dt){bn(r,r.return,dt)}}f&4&&r.stateNode!=null&&(x=r.memoizedProps,sp(r,x,u!==null?u.memoizedProps:x)),f&1024&&(lp=!0);break;case 6:if(Jr(s,r),Yr(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,u=r.stateNode;try{u.nodeValue=f}catch(dt){bn(r,r.return,dt)}}break;case 3:if(Df=null,x=Zs,Zs=Rf(s.containerInfo),Jr(s,r),Zs=x,Yr(r),f&4&&u!==null&&u.memoizedState.isDehydrated)try{pc(s.containerInfo)}catch(dt){bn(r,r.return,dt)}lp&&(lp=!1,Tg(r));break;case 4:f=Zs,Zs=Rf(r.stateNode.containerInfo),Jr(s,r),Yr(r),Zs=f;break;case 12:Jr(s,r),Yr(r);break;case 31:Jr(s,r),Yr(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,vf(r,f)));break;case 13:Jr(s,r),Yr(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(bf=Se()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,vf(r,f)));break;case 22:x=r.memoizedState!==null;var pe=u!==null&&u.memoizedState!==null,Le=mo,qe=Ai;if(mo=Le||x,Ai=qe||pe,Jr(s,r),Ai=qe,mo=Le,Yr(r),f&8192)e:for(s=r.stateNode,s._visibility=x?s._visibility&-2:s._visibility|1,x&&(u===null||pe||mo||Ai||ou(r)),u=null,s=r;;){if(s.tag===5||s.tag===26){if(u===null){pe=u=s;try{if(N=pe.stateNode,x)U=N.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{Q=pe.stateNode;var We=pe.memoizedProps.style,De=We!=null&&We.hasOwnProperty("display")?We.display:null;Q.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(dt){bn(pe,pe.return,dt)}}}else if(s.tag===6){if(u===null){pe=s;try{pe.stateNode.nodeValue=x?"":pe.memoizedProps}catch(dt){bn(pe,pe.return,dt)}}}else if(s.tag===18){if(u===null){pe=s;try{var Oe=pe.stateNode;x?mv(Oe,!0):mv(pe.stateNode,!1)}catch(dt){bn(pe,pe.return,dt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=r.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,vf(r,u))));break;case 19:Jr(s,r),Yr(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,vf(r,f)));break;case 30:break;case 21:break;default:Jr(s,r),Yr(r)}}function Yr(r){var s=r.flags;if(s&2){try{for(var u,f=r.return;f!==null;){if(vg(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var x=u.stateNode,N=ap(r);gf(r,N,x);break;case 5:var U=u.stateNode;u.flags&32&&(xs(U,""),u.flags&=-33);var Q=ap(r);gf(r,Q,U);break;case 3:case 4:var pe=u.stateNode.containerInfo,Le=ap(r);op(r,Le,pe);break;default:throw Error(i(161))}}catch(qe){bn(r,r.return,qe)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Tg(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Tg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function vo(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)xg(r,s.alternate,s),s=s.sibling}function ou(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:nl(4,s,s.return),ou(s);break;case 1:Fa(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&mg(s,s.return,u),ou(s);break;case 27:yd(s.stateNode);case 26:case 5:Fa(s,s.return),ou(s);break;case 22:s.memoizedState===null&&ou(s);break;case 30:ou(s);break;default:ou(s)}r=r.sibling}}function yo(r,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,x=r,N=s,U=N.flags;switch(N.tag){case 0:case 11:case 15:yo(x,N,u),ld(4,N);break;case 1:if(yo(x,N,u),f=N,x=f.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Le){bn(f,f.return,Le)}if(f=N,x=f.updateQueue,x!==null){var Q=f.stateNode;try{var pe=x.shared.hiddenCallbacks;if(pe!==null)for(x.shared.hiddenCallbacks=null,x=0;x<pe.length;x++)cr(pe[x],Q)}catch(Le){bn(f,f.return,Le)}}u&&U&64&&pg(N),ud(N,N.return);break;case 27:yg(N);case 26:case 5:yo(x,N,u),u&&f===null&&U&4&&gg(N),ud(N,N.return);break;case 12:yo(x,N,u);break;case 31:yo(x,N,u),u&&U&4&&_g(x,N);break;case 13:yo(x,N,u),u&&U&4&&Ng(x,N);break;case 22:N.memoizedState===null&&yo(x,N,u),ud(N,N.return);break;case 30:break;default:yo(x,N,u)}s=s.sibling}}function up(r,s){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&tu(u))}function cp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&tu(r))}function ea(r,s,u,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Eg(r,s,u,f),s=s.sibling}function Eg(r,s,u,f){var x=s.flags;switch(s.tag){case 0:case 11:case 15:ea(r,s,u,f),x&2048&&ld(9,s);break;case 1:ea(r,s,u,f);break;case 3:ea(r,s,u,f),x&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&tu(r)));break;case 12:if(x&2048){ea(r,s,u,f),r=s.stateNode;try{var N=s.memoizedProps,U=N.id,Q=N.onPostCommit;typeof Q=="function"&&Q(U,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(pe){bn(s,s.return,pe)}}else ea(r,s,u,f);break;case 31:ea(r,s,u,f);break;case 13:ea(r,s,u,f);break;case 23:break;case 22:N=s.stateNode,U=s.alternate,s.memoizedState!==null?N._visibility&2?ea(r,s,u,f):cd(r,s):N._visibility&2?ea(r,s,u,f):(N._visibility|=2,ic(r,s,u,f,(s.subtreeFlags&10256)!==0||!1)),x&2048&&up(U,s);break;case 24:ea(r,s,u,f),x&2048&&cp(s.alternate,s);break;default:ea(r,s,u,f)}}function ic(r,s,u,f,x){for(x=x&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var N=r,U=s,Q=u,pe=f,Le=U.flags;switch(U.tag){case 0:case 11:case 15:ic(N,U,Q,pe,x),ld(8,U);break;case 23:break;case 22:var qe=U.stateNode;U.memoizedState!==null?qe._visibility&2?ic(N,U,Q,pe,x):cd(N,U):(qe._visibility|=2,ic(N,U,Q,pe,x)),x&&Le&2048&&up(U.alternate,U);break;case 24:ic(N,U,Q,pe,x),x&&Le&2048&&cp(U.alternate,U);break;default:ic(N,U,Q,pe,x)}s=s.sibling}}function cd(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=r,f=s,x=f.flags;switch(f.tag){case 22:cd(u,f),x&2048&&up(f.alternate,f);break;case 24:cd(u,f),x&2048&&cp(f.alternate,f);break;default:cd(u,f)}s=s.sibling}}var dd=8192;function rc(r,s,u){if(r.subtreeFlags&dd)for(r=r.child;r!==null;)Cg(r,s,u),r=r.sibling}function Cg(r,s,u){switch(r.tag){case 26:rc(r,s,u),r.flags&dd&&r.memoizedState!==null&&gx(u,Zs,r.memoizedState,r.memoizedProps);break;case 5:rc(r,s,u);break;case 3:case 4:var f=Zs;Zs=Rf(r.stateNode.containerInfo),rc(r,s,u),Zs=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=dd,dd=16777216,rc(r,s,u),dd=f):rc(r,s,u));break;default:rc(r,s,u)}}function kg(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function fd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];$i=f,Rg(f,r)}kg(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ig(r),r=r.sibling}function Ig(r){switch(r.tag){case 0:case 11:case 15:fd(r),r.flags&2048&&nl(9,r,r.return);break;case 3:fd(r);break;case 12:fd(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,yf(r)):fd(r);break;default:fd(r)}}function yf(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];$i=f,Rg(f,r)}kg(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:nl(8,s,s.return),yf(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,yf(s));break;default:yf(s)}r=r.sibling}}function Rg(r,s){for(;$i!==null;){var u=$i;switch(u.tag){case 0:case 11:case 15:nl(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:tu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,$i=f;else e:for(u=r;$i!==null;){f=$i;var x=f.sibling,N=f.return;if(wg(f),f===u){$i=null;break e}if(x!==null){x.return=N,$i=x;break e}$i=N}}}var R5={getCacheForType:function(r){var s=Di(ei),u=s.data.get(r);return u===void 0&&(u=r(),s.data.set(r,u)),u},cacheSignal:function(){return Di(ei).controller.signal}},L5=typeof WeakMap=="function"?WeakMap:Map,pn=0,In=null,Xt=null,tn=0,yn=0,cs=null,il=!1,sc=!1,dp=!1,bo=0,ai=0,rl=0,lu=0,fp=0,ds=0,ac=0,hd=null,Wr=null,hp=!1,bf=0,Lg=0,xf=1/0,wf=null,sl=null,Pi=0,al=null,oc=null,xo=0,pp=0,mp=null,Dg=null,pd=0,gp=null;function fs(){return(pn&2)!==0&&tn!==0?tn&-tn:P.T!==null?Sp():Ci()}function Mg(){if(ds===0)if((tn&536870912)===0||Wt){var r=vi;vi<<=1,(vi&3932160)===0&&(vi=262144),ds=r}else ds=536870912;return r=ti.current,r!==null&&(r.flags|=32),ds}function Kr(r,s,u){(r===In&&(yn===2||yn===9)||r.cancelPendingCommit!==null)&&(lc(r,0),ol(r,tn,ds,!1)),yi(r,u),((pn&2)===0||r!==In)&&(r===In&&((pn&2)===0&&(lu|=u),ai===4&&ol(r,tn,ds,!1)),Ba(r))}function Pg(r,s,u){if((pn&6)!==0)throw Error(i(327));var f=!u&&(s&127)===0&&(s&r.expiredLanes)===0||Vt(r,s),x=f?P5(r,s):yp(r,s,!0),N=f;do{if(x===0){sc&&!f&&ol(r,s,0,!1);break}else{if(u=r.current.alternate,N&&!D5(u)){x=yp(r,s,!1),N=!1;continue}if(x===2){if(N=s,r.errorRecoveryDisabledLanes&N)var U=0;else U=r.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){s=U;e:{var Q=r;x=hd;var pe=Q.current.memoizedState.isDehydrated;if(pe&&(lc(Q,U).flags|=256),U=yp(Q,U,!1),U!==2){if(dp&&!pe){Q.errorRecoveryDisabledLanes|=N,lu|=N,x=4;break e}N=Wr,Wr=x,N!==null&&(Wr===null?Wr=N:Wr.push.apply(Wr,N))}x=U}if(N=!1,x!==2)continue}}if(x===1){lc(r,0),ol(r,s,0,!0);break}e:{switch(f=r,N=x,N){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ol(f,s,ds,!il);break e;case 2:Wr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(x=bf+300-Se(),10<x)){if(ol(f,s,ds,!il),Nt(f,0,!0)!==0)break e;xo=s,f.timeoutHandle=fv(Ug.bind(null,f,u,Wr,wf,hp,s,ds,lu,ac,il,N,"Throttled",-0,0),x);break e}Ug(f,u,Wr,wf,hp,s,ds,lu,ac,il,N,null,-0,0)}}break}while(!0);Ba(r)}function Ug(r,s,u,f,x,N,U,Q,pe,Le,qe,We,De,Oe){if(r.timeoutHandle=-1,We=s.subtreeFlags,We&8192||(We&16785408)===16785408){We={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pn},Cg(s,N,We);var dt=(N&62914560)===N?bf-Se():(N&4194048)===N?Lg-Se():0;if(dt=vx(We,dt),dt!==null){xo=N,r.cancelPendingCommit=dt(Gg.bind(null,r,s,N,u,f,x,U,Q,pe,qe,We,null,De,Oe)),ol(r,N,U,!Le);return}}Gg(r,s,N,u,f,x,U,Q,pe)}function D5(r){for(var s=r;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var x=u[f],N=x.getSnapshot;x=x.value;try{if(!Qi(N(),x))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ol(r,s,u,f){s&=~fp,s&=~lu,r.suspendedLanes|=s,r.pingedLanes&=~s,f&&(r.warmLanes|=s),f=r.expirationTimes;for(var x=s;0<x;){var N=31-_t(x),U=1<<N;f[N]=-1,x&=~U}u!==0&&sr(r,u,s)}function Sf(){return(pn&6)===0?(md(0),!1):!0}function vp(){if(Xt!==null){if(yn===0)var r=Xt.return;else r=Xt,Es=Ra=null,Ku(r),He=null,ot=0,r=Xt;for(;r!==null;)hg(r.alternate,r),r=r.return;Xt=null}}function lc(r,s){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,Z5(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),xo=0,vp(),In=r,Xt=u=jr(r.current,null),tn=s,yn=0,cs=null,il=!1,sc=Vt(r,s),dp=!1,ac=ds=fp=lu=rl=ai=0,Wr=hd=null,hp=!1,(s&8)!==0&&(s|=s&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=s;0<f;){var x=31-_t(f),N=1<<x;s|=r[x],f&=~N}return bo=s,Wl(),u}function Og(r,s){Ot=null,P.H=sd,s===ve||s===Ce?(s=Ve(),yn=3):s===ke?(s=Ve(),yn=4):yn=s===Wh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,cs=s,Xt===null&&(ai=1,df(r,Fr(s,r.current)))}function jg(){var r=ti.current;return r===null?!0:(tn&4194048)===tn?Si===null:(tn&62914560)===tn||(tn&536870912)!==0?r===Si:!1}function Fg(){var r=P.H;return P.H=sd,r===null?sd:r}function Bg(){var r=P.A;return P.A=R5,r}function _f(){ai=4,il||(tn&4194048)!==tn&&ti.current!==null||(sc=!0),(rl&134217727)===0&&(lu&134217727)===0||In===null||ol(In,tn,ds,!1)}function yp(r,s,u){var f=pn;pn|=2;var x=Fg(),N=Bg();(In!==r||tn!==s)&&(wf=null,lc(r,s)),s=!1;var U=ai;e:do try{if(yn!==0&&Xt!==null){var Q=Xt,pe=cs;switch(yn){case 8:vp(),U=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(s=!0);var Le=yn;if(yn=0,cs=null,uc(r,Q,pe,Le),u&&sc){U=0;break e}break;default:Le=yn,yn=0,cs=null,uc(r,Q,pe,Le)}}M5(),U=ai;break}catch(qe){Og(r,qe)}while(!0);return s&&r.shellSuspendCounter++,Es=Ra=null,pn=f,P.H=x,P.A=N,Xt===null&&(In=null,tn=0,Wl()),U}function M5(){for(;Xt!==null;)qg(Xt)}function P5(r,s){var u=pn;pn|=2;var f=Fg(),x=Bg();In!==r||tn!==s?(wf=null,xf=Se()+500,lc(r,s)):sc=Vt(r,s);e:do try{if(yn!==0&&Xt!==null){s=Xt;var N=cs;t:switch(yn){case 1:yn=0,cs=null,uc(r,s,N,1);break;case 2:case 9:if(Je(N)){yn=0,cs=null,zg(s);break}s=function(){yn!==2&&yn!==9||In!==r||(yn=7),Ba(r)},N.then(s,s);break e;case 3:yn=7;break e;case 4:yn=5;break e;case 7:Je(N)?(yn=0,cs=null,zg(s)):(yn=0,cs=null,uc(r,s,N,7));break;case 5:var U=null;switch(Xt.tag){case 26:U=Xt.memoizedState;case 5:case 27:var Q=Xt;if(U?Ev(U):Q.stateNode.complete){yn=0,cs=null;var pe=Q.sibling;if(pe!==null)Xt=pe;else{var Le=Q.return;Le!==null?(Xt=Le,Nf(Le)):Xt=null}break t}}yn=0,cs=null,uc(r,s,N,5);break;case 6:yn=0,cs=null,uc(r,s,N,6);break;case 8:vp(),ai=6;break e;default:throw Error(i(462))}}U5();break}catch(qe){Og(r,qe)}while(!0);return Es=Ra=null,P.H=f,P.A=x,pn=u,Xt!==null?0:(In=null,tn=0,Wl(),ai)}function U5(){for(;Xt!==null&&!tt();)qg(Xt)}function qg(r){var s=dg(r.alternate,r,bo);r.memoizedProps=r.pendingProps,s===null?Nf(r):Xt=s}function zg(r){var s=r,u=s.alternate;switch(s.tag){case 15:case 0:s=sg(u,s,s.pendingProps,s.type,void 0,tn);break;case 11:s=sg(u,s,s.pendingProps,s.type.render,s.ref,tn);break;case 5:Ku(s);default:hg(u,s),s=Xt=Ql(s,bo),s=dg(u,s,bo)}r.memoizedProps=r.pendingProps,s===null?Nf(r):Xt=s}function uc(r,s,u,f){Es=Ra=null,Ku(s),He=null,ot=0;var x=s.return;try{if(N5(r,x,s,u,tn)){ai=1,df(r,Fr(u,r.current)),Xt=null;return}}catch(N){if(x!==null)throw Xt=x,N;ai=1,df(r,Fr(u,r.current)),Xt=null;return}s.flags&32768?(Wt||f===1?r=!0:sc||(tn&536870912)!==0?r=!1:(il=r=!0,(f===2||f===9||f===3||f===6)&&(f=ti.current,f!==null&&f.tag===13&&(f.flags|=16384))),Hg(s,r)):Nf(s)}function Nf(r){var s=r;do{if((s.flags&32768)!==0){Hg(s,il);return}r=s.return;var u=E5(s.alternate,s,bo);if(u!==null){Xt=u;return}if(s=s.sibling,s!==null){Xt=s;return}Xt=s=r}while(s!==null);ai===0&&(ai=5)}function Hg(r,s){do{var u=C5(r.alternate,r);if(u!==null){u.flags&=32767,Xt=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(r=r.sibling,r!==null)){Xt=r;return}Xt=r=u}while(r!==null);ai=6,Xt=null}function Gg(r,s,u,f,x,N,U,Q,pe){r.cancelPendingCommit=null;do Af();while(Pi!==0);if((pn&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(N=s.lanes|s.childLanes,N|=Uu,wt(r,u,N,U,Q,pe),r===In&&(Xt=In=null,tn=0),oc=s,al=r,xo=u,pp=N,mp=x,Dg=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,B5(Ht,function(){return Wg(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=P.T,P.T=null,x=$.p,$.p=2,U=pn,pn|=4;try{k5(r,s,u)}finally{pn=U,$.p=x,P.T=f}}Pi=1,Vg(),$g(),Jg()}}function Vg(){if(Pi===1){Pi=0;var r=al,s=oc,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=P.T,P.T=null;var f=$.p;$.p=2;var x=pn;pn|=4;try{Ag(s,r);var N=Ip,U=os(r.containerInfo),Q=N.focusedElem,pe=N.selectionRange;if(U!==Q&&Q&&Q.ownerDocument&&Gs(Q.ownerDocument.documentElement,Q)){if(pe!==null&&ls(Q)){var Le=pe.start,qe=pe.end;if(qe===void 0&&(qe=Le),"selectionStart"in Q)Q.selectionStart=Le,Q.selectionEnd=Math.min(qe,Q.value.length);else{var We=Q.ownerDocument||document,De=We&&We.defaultView||window;if(De.getSelection){var Oe=De.getSelection(),dt=Q.textContent.length,kt=Math.min(pe.start,dt),Tn=pe.end===void 0?kt:Math.min(pe.end,dt);!Oe.extend&&kt>Tn&&(U=Tn,Tn=kt,kt=U);var Te=Pr(Q,kt),xe=Pr(Q,Tn);if(Te&&xe&&(Oe.rangeCount!==1||Oe.anchorNode!==Te.node||Oe.anchorOffset!==Te.offset||Oe.focusNode!==xe.node||Oe.focusOffset!==xe.offset)){var Re=We.createRange();Re.setStart(Te.node,Te.offset),Oe.removeAllRanges(),kt>Tn?(Oe.addRange(Re),Oe.extend(xe.node,xe.offset)):(Re.setEnd(xe.node,xe.offset),Oe.addRange(Re))}}}}for(We=[],Oe=Q;Oe=Oe.parentNode;)Oe.nodeType===1&&We.push({element:Oe,left:Oe.scrollLeft,top:Oe.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<We.length;Q++){var $e=We[Q];$e.element.scrollLeft=$e.left,$e.element.scrollTop=$e.top}}Of=!!kp,Ip=kp=null}finally{pn=x,$.p=f,P.T=u}}r.current=s,Pi=2}}function $g(){if(Pi===2){Pi=0;var r=al,s=oc,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=P.T,P.T=null;var f=$.p;$.p=2;var x=pn;pn|=4;try{xg(r,s.alternate,s)}finally{pn=x,$.p=f,P.T=u}}Pi=3}}function Jg(){if(Pi===4||Pi===3){Pi=0,Xe();var r=al,s=oc,u=xo,f=Dg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Pi=5:(Pi=0,oc=al=null,Yg(r,r.pendingLanes));var x=r.pendingLanes;if(x===0&&(sl=null),Ln(u),s=s.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Lt,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=P.T,x=$.p,$.p=2,P.T=null;try{for(var N=r.onRecoverableError,U=0;U<f.length;U++){var Q=f[U];N(Q.value,{componentStack:Q.stack})}}finally{P.T=s,$.p=x}}(xo&3)!==0&&Af(),Ba(r),x=r.pendingLanes,(u&261930)!==0&&(x&42)!==0?r===gp?pd++:(pd=0,gp=r):pd=0,md(0)}}function Yg(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,tu(s)))}function Af(){return Vg(),$g(),Jg(),Wg()}function Wg(){if(Pi!==5)return!1;var r=al,s=pp;pp=0;var u=Ln(xo),f=P.T,x=$.p;try{$.p=32>u?32:u,P.T=null,u=mp,mp=null;var N=al,U=xo;if(Pi=0,oc=al=null,xo=0,(pn&6)!==0)throw Error(i(331));var Q=pn;if(pn|=4,Ig(N.current),Eg(N,N.current,U,u),pn=Q,md(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Lt,N)}catch{}return!0}finally{$.p=x,P.T=f,Yg(r,s)}}function Kg(r,s,u){s=Fr(u,s),s=Yh(r.stateNode,s,2),r=vn(r,s,2),r!==null&&(yi(r,2),Ba(r))}function bn(r,s,u){if(r.tag===3)Kg(r,r,u);else for(;s!==null;){if(s.tag===3){Kg(s,r,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(sl===null||!sl.has(f))){r=Fr(u,r),u=Xm(2),f=vn(s,u,2),f!==null&&(Qm(u,f,s,r),yi(f,2),Ba(f));break}}s=s.return}}function bp(r,s,u){var f=r.pingCache;if(f===null){f=r.pingCache=new L5;var x=new Set;f.set(s,x)}else x=f.get(s),x===void 0&&(x=new Set,f.set(s,x));x.has(u)||(dp=!0,x.add(u),r=O5.bind(null,r,s,u),s.then(r,r))}function O5(r,s,u){var f=r.pingCache;f!==null&&f.delete(s),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,In===r&&(tn&u)===u&&(ai===4||ai===3&&(tn&62914560)===tn&&300>Se()-bf?(pn&2)===0&&lc(r,0):fp|=u,ac===tn&&(ac=0)),Ba(r)}function Xg(r,s){s===0&&(s=gn()),r=$s(r,s),r!==null&&(yi(r,s),Ba(r))}function j5(r){var s=r.memoizedState,u=0;s!==null&&(u=s.retryLane),Xg(r,u)}function F5(r,s){var u=0;switch(r.tag){case 31:case 13:var f=r.stateNode,x=r.memoizedState;x!==null&&(u=x.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(s),Xg(r,u)}function B5(r,s){return Ze(r,s)}var Tf=null,cc=null,xp=!1,Ef=!1,wp=!1,ll=0;function Ba(r){r!==cc&&r.next===null&&(cc===null?Tf=cc=r:cc=cc.next=r),Ef=!0,xp||(xp=!0,z5())}function md(r,s){if(!wp&&Ef){wp=!0;do for(var u=!1,f=Tf;f!==null;){if(r!==0){var x=f.pendingLanes;if(x===0)var N=0;else{var U=f.suspendedLanes,Q=f.pingedLanes;N=(1<<31-_t(42|r)+1)-1,N&=x&~(U&~Q),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(u=!0,tv(f,N))}else N=tn,N=Nt(f,f===In?N:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(N&3)===0||Vt(f,N)||(u=!0,tv(f,N));f=f.next}while(u);wp=!1}}function q5(){Qg()}function Qg(){Ef=xp=!1;var r=0;ll!==0&&Q5()&&(r=ll);for(var s=Se(),u=null,f=Tf;f!==null;){var x=f.next,N=Zg(f,s);N===0?(f.next=null,u===null?Tf=x:u.next=x,x===null&&(cc=u)):(u=f,(r!==0||(N&3)!==0)&&(Ef=!0)),f=x}Pi!==0&&Pi!==5||md(r),ll!==0&&(ll=0)}function Zg(r,s){for(var u=r.suspendedLanes,f=r.pingedLanes,x=r.expirationTimes,N=r.pendingLanes&-62914561;0<N;){var U=31-_t(N),Q=1<<U,pe=x[U];pe===-1?((Q&u)===0||(Q&f)!==0)&&(x[U]=Zr(Q,s)):pe<=s&&(r.expiredLanes|=Q),N&=~Q}if(s=In,u=tn,u=Nt(r,r===s?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,u===0||r===s&&(yn===2||yn===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&nt(f),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Vt(r,u)){if(s=u&-u,s===r.callbackPriority)return s;switch(f!==null&&nt(f),Ln(u)){case 2:case 8:u=xt;break;case 32:u=Ht;break;case 268435456:u=At;break;default:u=Ht}return f=ev.bind(null,r),u=Ze(u,f),r.callbackPriority=s,r.callbackNode=u,s}return f!==null&&f!==null&&nt(f),r.callbackPriority=2,r.callbackNode=null,2}function ev(r,s){if(Pi!==0&&Pi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Af()&&r.callbackNode!==u)return null;var f=tn;return f=Nt(r,r===In?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(Pg(r,f,s),Zg(r,Se()),r.callbackNode!=null&&r.callbackNode===u?ev.bind(null,r):null)}function tv(r,s){if(Af())return null;Pg(r,s,!0)}function z5(){ex(function(){(pn&6)!==0?Ze(ct,q5):Qg()})}function Sp(){if(ll===0){var r=m;r===0&&(r=an,an<<=1,(an&261888)===0&&(an=256)),ll=r}return ll}function nv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ya(""+r)}function iv(r,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,r.id&&u.setAttribute("form",r.id),s.parentNode.insertBefore(u,s),r=new FormData(r),u.parentNode.removeChild(u),r}function H5(r,s,u,f,x){if(s==="submit"&&u&&u.stateNode===x){var N=nv((x[wn]||null).action),U=f.submitter;U&&(s=(s=U[wn]||null)?nv(s.formAction):U.getAttribute("formAction"),s!==null&&(N=s,U=null));var Q=new Xa("action","action",null,f,x);r.push({event:Q,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(ll!==0){var pe=U?iv(x,U):new FormData(x);zh(u,{pending:!0,data:pe,method:x.method,action:N},null,pe)}}else typeof N=="function"&&(Q.preventDefault(),pe=U?iv(x,U):new FormData(x),zh(u,{pending:!0,data:pe,method:x.method,action:N},N,pe))},currentTarget:x}]})}}for(var _p=0;_p<Ts.length;_p++){var Np=Ts[_p],G5=Np.toLowerCase(),V5=Np[0].toUpperCase()+Np.slice(1);zi(G5,"on"+V5)}zi(Vo,"onAnimationEnd"),zi(br,"onAnimationIteration"),zi(Ns,"onAnimationStart"),zi("dblclick","onDoubleClick"),zi("focusin","onFocus"),zi("focusout","onBlur"),zi(Sn,"onTransitionRun"),zi(_n,"onTransitionStart"),zi(Zn,"onTransitionCancel"),zi(ri,"onTransitionEnd"),bs("onMouseEnter",["mouseout","mouseover"]),bs("onMouseLeave",["mouseout","mouseover"]),bs("onPointerEnter",["pointerout","pointerover"]),bs("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gd));function rv(r,s){s=(s&4)!==0;for(var u=0;u<r.length;u++){var f=r[u],x=f.event;f=f.listeners;e:{var N=void 0;if(s)for(var U=f.length-1;0<=U;U--){var Q=f[U],pe=Q.instance,Le=Q.currentTarget;if(Q=Q.listener,pe!==N&&x.isPropagationStopped())break e;N=Q,x.currentTarget=Le;try{N(x)}catch(qe){no(qe)}x.currentTarget=null,N=pe}else for(U=0;U<f.length;U++){if(Q=f[U],pe=Q.instance,Le=Q.currentTarget,Q=Q.listener,pe!==N&&x.isPropagationStopped())break e;N=Q,x.currentTarget=Le;try{N(x)}catch(qe){no(qe)}x.currentTarget=null,N=pe}}}}function Qt(r,s){var u=s[ze];u===void 0&&(u=s[ze]=new Set);var f=r+"__bubble";u.has(f)||(sv(s,r,2,!1),u.add(f))}function Ap(r,s,u){var f=0;s&&(f|=4),sv(u,r,f,s)}var Cf="_reactListening"+Math.random().toString(36).slice(2);function Tp(r){if(!r[Cf]){r[Cf]=!0,Ja.forEach(function(u){u!=="selectionchange"&&($5.has(u)||Ap(u,!1,r),Ap(u,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Cf]||(s[Cf]=!0,Ap("selectionchange",!1,s))}}function sv(r,s,u,f){switch(Mv(s)){case 2:var x=xx;break;case 8:x=wx;break;default:x=qp}u=x.bind(null,s,u,r),x=void 0,!Wa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(x=!0),f?x!==void 0?r.addEventListener(s,u,{capture:!0,passive:x}):r.addEventListener(s,u,!0):x!==void 0?r.addEventListener(s,u,{passive:x}):r.addEventListener(s,u,!1)}function Ep(r,s,u,f,x){var N=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var U=f.tag;if(U===3||U===4){var Q=f.stateNode.containerInfo;if(Q===x)break;if(U===4)for(U=f.return;U!==null;){var pe=U.tag;if((pe===3||pe===4)&&U.stateNode.containerInfo===x)return;U=U.return}for(;Q!==null;){if(U=es(Q),U===null)return;if(pe=U.tag,pe===5||pe===6||pe===26||pe===27){f=N=U;continue e}Q=Q.parentNode}}f=f.return}Ol(function(){var Le=N,qe=Po(u),We=[];e:{var De=As.get(r);if(De!==void 0){var Oe=Xa,dt=r;switch(r){case"keypress":if(is(u)===0)break e;case"keydown":case"keyup":Oe=Vl;break;case"focusin":dt="focus",Oe=Bl;break;case"focusout":dt="blur",Oe=Bl;break;case"beforeblur":case"afterblur":Oe=Bl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=Bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=V;break;case Vo:case br:case Ns:Oe=Gc;break;case ri:Oe=ge;break;case"scroll":case"scrollend":Oe=Iu;break;case"wheel":Oe=Be;break;case"copy":case"cut":case"paste":Oe=zl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=Bo;break;case"toggle":case"beforetoggle":Oe=lt}var kt=(s&4)!==0,Tn=!kt&&(r==="scroll"||r==="scrollend"),Te=kt?De!==null?De+"Capture":null:De;kt=[];for(var xe=Le,Re;xe!==null;){var $e=xe;if(Re=$e.stateNode,$e=$e.tag,$e!==5&&$e!==26&&$e!==27||Re===null||Te===null||($e=ga(xe,Te),$e!=null&&kt.push(vd(xe,$e,Re))),Tn)break;xe=xe.return}0<kt.length&&(De=new Oe(De,dt,null,u,qe),We.push({event:De,listeners:kt}))}}if((s&7)===0){e:{if(De=r==="mouseover"||r==="pointerover",Oe=r==="mouseout"||r==="pointerout",De&&u!==Ul&&(dt=u.relatedTarget||u.fromElement)&&(es(dt)||dt[di]))break e;if((Oe||De)&&(De=qe.window===qe?qe:(De=qe.ownerDocument)?De.defaultView||De.parentWindow:window,Oe?(dt=u.relatedTarget||u.toElement,Oe=Le,dt=dt?es(dt):null,dt!==null&&(Tn=o(dt),kt=dt.tag,dt!==Tn||kt!==5&&kt!==27&&kt!==6)&&(dt=null)):(Oe=null,dt=Le),Oe!==dt)){if(kt=Bs,$e="onMouseLeave",Te="onMouseEnter",xe="mouse",(r==="pointerout"||r==="pointerover")&&(kt=Bo,$e="onPointerLeave",Te="onPointerEnter",xe="pointer"),Tn=Oe==null?De:fa(Oe),Re=dt==null?De:fa(dt),De=new kt($e,xe+"leave",Oe,u,qe),De.target=Tn,De.relatedTarget=Re,$e=null,es(qe)===Le&&(kt=new kt(Te,xe+"enter",dt,u,qe),kt.target=Re,kt.relatedTarget=Tn,$e=kt),Tn=$e,Oe&&dt)t:{for(kt=J5,Te=Oe,xe=dt,Re=0,$e=Te;$e;$e=kt($e))Re++;$e=0;for(var St=xe;St;St=kt(St))$e++;for(;0<Re-$e;)Te=kt(Te),Re--;for(;0<$e-Re;)xe=kt(xe),$e--;for(;Re--;){if(Te===xe||xe!==null&&Te===xe.alternate){kt=Te;break t}Te=kt(Te),xe=kt(xe)}kt=null}else kt=null;Oe!==null&&av(We,De,Oe,kt,!1),dt!==null&&Tn!==null&&av(We,Tn,dt,kt,!0)}}e:{if(De=Le?fa(Le):window,Oe=De.nodeName&&De.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&De.type==="file")var cn=Ki;else if(qo(De))if(to)cn=Yl;else{cn=Pu;var ht=Jl}else Oe=De.nodeName,!Oe||Oe.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Le&&ns(Le.elementType)&&(cn=Ki):cn=as;if(cn&&(cn=cn(r,Le))){zo(We,cn,u,qe);break e}ht&&ht(r,De,Le),r==="focusout"&&Le&&De.type==="number"&&Le.memoizedProps.value!=null&&Lo(De,"number",De.value)}switch(ht=Le?fa(Le):window,r){case"focusin":(qo(ht)||ht.contentEditable==="true")&&(qi=ht,Aa=Le,Vs=null);break;case"focusout":Vs=Aa=qi=null;break;case"mousedown":_s=!0;break;case"contextmenu":case"mouseup":case"dragend":_s=!1,Ur(We,u,qe);break;case"selectionchange":if(Go)break;case"keydown":case"keyup":Ur(We,u,qe)}var Gt;if(Ut)e:{switch(r){case"compositionstart":var nn="onCompositionStart";break e;case"compositionend":nn="onCompositionEnd";break e;case"compositionupdate":nn="onCompositionUpdate";break e}nn=void 0}else Bi?ki(r,u)&&(nn="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(nn="onCompositionStart");nn&&(Un&&u.locale!=="ko"&&(Bi||nn!=="onCompositionStart"?nn==="onCompositionEnd"&&Bi&&(Gt=ya()):(ws=qe,jl="value"in ws?ws.value:ws.textContent,Bi=!0)),ht=kf(Le,nn),0<ht.length&&(nn=new Za(nn,r,null,u,qe),We.push({event:nn,listeners:ht}),Gt?nn.data=Gt:(Gt=fi(u),Gt!==null&&(nn.data=Gt)))),(Gt=Zt?vr(r,u):qs(r,u))&&(nn=kf(Le,"onBeforeInput"),0<nn.length&&(ht=new Za("onBeforeInput","beforeinput",null,u,qe),We.push({event:ht,listeners:nn}),ht.data=Gt)),H5(We,r,Le,u,qe)}rv(We,s)})}function vd(r,s,u){return{instance:r,listener:s,currentTarget:u}}function kf(r,s){for(var u=s+"Capture",f=[];r!==null;){var x=r,N=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||N===null||(x=ga(r,u),x!=null&&f.unshift(vd(r,x,N)),x=ga(r,s),x!=null&&f.push(vd(r,x,N))),r.tag===3)return f;r=r.return}return[]}function J5(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function av(r,s,u,f,x){for(var N=s._reactName,U=[];u!==null&&u!==f;){var Q=u,pe=Q.alternate,Le=Q.stateNode;if(Q=Q.tag,pe!==null&&pe===f)break;Q!==5&&Q!==26&&Q!==27||Le===null||(pe=Le,x?(Le=ga(u,N),Le!=null&&U.unshift(vd(u,Le,pe))):x||(Le=ga(u,N),Le!=null&&U.push(vd(u,Le,pe)))),u=u.return}U.length!==0&&r.push({event:s,listeners:U})}var Y5=/\r\n?/g,W5=/\u0000|\uFFFD/g;function ov(r){return(typeof r=="string"?r:""+r).replace(Y5,`
`).replace(W5,"")}function lv(r,s){return s=ov(s),ov(r)===s}function An(r,s,u,f,x,N){switch(u){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||xs(r,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&xs(r,""+f);break;case"className":Mn(r,"class",f);break;case"tabIndex":Mn(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(r,u,f);break;case"style":Cu(r,f,N);break;case"data":if(s!=="object"){Mn(r,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||u!=="href")){r.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Ya(""+f),r.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(u==="formAction"?(s!=="input"&&An(r,s,"name",x.name,x,null),An(r,s,"formEncType",x.formEncType,x,null),An(r,s,"formMethod",x.formMethod,x,null),An(r,s,"formTarget",x.formTarget,x,null)):(An(r,s,"encType",x.encType,x,null),An(r,s,"method",x.method,x,null),An(r,s,"target",x.target,x,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(u);break}f=Ya(""+f),r.setAttribute(u,f);break;case"onClick":f!=null&&(r.onclick=Pn);break;case"onScroll":f!=null&&Qt("scroll",r);break;case"onScrollEnd":f!=null&&Qt("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(x.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}u=Ya(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""+f):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":f===!0?r.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(u,f):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(u,f):r.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(u):r.setAttribute(u,f);break;case"popover":Qt("beforetoggle",r),Qt("toggle",r),Io(r,"popover",f);break;case"xlinkActuate":kr(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":kr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":kr(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":kr(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":kr(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":kr(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":kr(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":kr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":kr(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Io(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Do.get(u)||u,Io(r,u,f))}}function Cp(r,s,u,f,x,N){switch(u){case"style":Cu(r,f,N);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(x.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof f=="string"?xs(r,f):(typeof f=="number"||typeof f=="bigint")&&xs(r,""+f);break;case"onScroll":f!=null&&Qt("scroll",r);break;case"onScrollEnd":f!=null&&Qt("scrollend",r);break;case"onClick":f!=null&&(r.onclick=Pn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(x=u.endsWith("Capture"),s=u.slice(2,x?u.length-7:void 0),N=r[wn]||null,N=N!=null?N[u]:null,typeof N=="function"&&r.removeEventListener(s,N,x),typeof f=="function")){typeof N!="function"&&N!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(s,f,x);break e}u in r?r[u]=f:f===!0?r.setAttribute(u,""):Io(r,u,f)}}}function nr(r,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qt("error",r),Qt("load",r);var f=!1,x=!1,N;for(N in u)if(u.hasOwnProperty(N)){var U=u[N];if(U!=null)switch(N){case"src":f=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:An(r,s,N,U,u,null)}}x&&An(r,s,"srcSet",u.srcSet,u,null),f&&An(r,s,"src",u.src,u,null);return;case"input":Qt("invalid",r);var Q=N=U=x=null,pe=null,Le=null;for(f in u)if(u.hasOwnProperty(f)){var qe=u[f];if(qe!=null)switch(f){case"name":x=qe;break;case"type":U=qe;break;case"checked":pe=qe;break;case"defaultChecked":Le=qe;break;case"value":N=qe;break;case"defaultValue":Q=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(i(137,s));break;default:An(r,s,f,qe,u,null)}}Au(r,N,Q,pe,Le,U,x,!1);return;case"select":Qt("invalid",r),f=U=N=null;for(x in u)if(u.hasOwnProperty(x)&&(Q=u[x],Q!=null))switch(x){case"value":N=Q;break;case"defaultValue":U=Q;break;case"multiple":f=Q;default:An(r,s,x,Q,u,null)}s=N,u=U,r.multiple=!!f,s!=null?pa(r,!!f,s,!1):u!=null&&pa(r,!!f,u,!0);return;case"textarea":Qt("invalid",r),N=x=f=null;for(U in u)if(u.hasOwnProperty(U)&&(Q=u[U],Q!=null))switch(U){case"value":f=Q;break;case"defaultValue":x=Q;break;case"children":N=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(91));break;default:An(r,s,U,Q,u,null)}Tu(r,f,x,N);return;case"option":for(pe in u)if(u.hasOwnProperty(pe)&&(f=u[pe],f!=null))switch(pe){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:An(r,s,pe,f,u,null)}return;case"dialog":Qt("beforetoggle",r),Qt("toggle",r),Qt("cancel",r),Qt("close",r);break;case"iframe":case"object":Qt("load",r);break;case"video":case"audio":for(f=0;f<gd.length;f++)Qt(gd[f],r);break;case"image":Qt("error",r),Qt("load",r);break;case"details":Qt("toggle",r);break;case"embed":case"source":case"link":Qt("error",r),Qt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Le in u)if(u.hasOwnProperty(Le)&&(f=u[Le],f!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:An(r,s,Le,f,u,null)}return;default:if(ns(s)){for(qe in u)u.hasOwnProperty(qe)&&(f=u[qe],f!==void 0&&Cp(r,s,qe,f,u,void 0));return}}for(Q in u)u.hasOwnProperty(Q)&&(f=u[Q],f!=null&&An(r,s,Q,f,u,null))}function K5(r,s,u,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,N=null,U=null,Q=null,pe=null,Le=null,qe=null;for(Oe in u){var We=u[Oe];if(u.hasOwnProperty(Oe)&&We!=null)switch(Oe){case"checked":break;case"value":break;case"defaultValue":pe=We;default:f.hasOwnProperty(Oe)||An(r,s,Oe,null,f,We)}}for(var De in f){var Oe=f[De];if(We=u[De],f.hasOwnProperty(De)&&(Oe!=null||We!=null))switch(De){case"type":N=Oe;break;case"name":x=Oe;break;case"checked":Le=Oe;break;case"defaultChecked":qe=Oe;break;case"value":U=Oe;break;case"defaultValue":Q=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(137,s));break;default:Oe!==We&&An(r,s,De,Oe,f,We)}}Ro(r,U,Q,pe,Le,qe,N,x);return;case"select":Oe=U=Q=De=null;for(N in u)if(pe=u[N],u.hasOwnProperty(N)&&pe!=null)switch(N){case"value":break;case"multiple":Oe=pe;default:f.hasOwnProperty(N)||An(r,s,N,null,f,pe)}for(x in f)if(N=f[x],pe=u[x],f.hasOwnProperty(x)&&(N!=null||pe!=null))switch(x){case"value":De=N;break;case"defaultValue":Q=N;break;case"multiple":U=N;default:N!==pe&&An(r,s,x,N,f,pe)}s=Q,u=U,f=Oe,De!=null?pa(r,!!u,De,!1):!!f!=!!u&&(s!=null?pa(r,!!u,s,!0):pa(r,!!u,u?[]:"",!1));return;case"textarea":Oe=De=null;for(Q in u)if(x=u[Q],u.hasOwnProperty(Q)&&x!=null&&!f.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:An(r,s,Q,null,f,x)}for(U in f)if(x=f[U],N=u[U],f.hasOwnProperty(U)&&(x!=null||N!=null))switch(U){case"value":De=x;break;case"defaultValue":Oe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==N&&An(r,s,U,x,f,N)}Pl(r,De,Oe);return;case"option":for(var dt in u)if(De=u[dt],u.hasOwnProperty(dt)&&De!=null&&!f.hasOwnProperty(dt))switch(dt){case"selected":r.selected=!1;break;default:An(r,s,dt,null,f,De)}for(pe in f)if(De=f[pe],Oe=u[pe],f.hasOwnProperty(pe)&&De!==Oe&&(De!=null||Oe!=null))switch(pe){case"selected":r.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:An(r,s,pe,De,f,Oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in u)De=u[kt],u.hasOwnProperty(kt)&&De!=null&&!f.hasOwnProperty(kt)&&An(r,s,kt,null,f,De);for(Le in f)if(De=f[Le],Oe=u[Le],f.hasOwnProperty(Le)&&De!==Oe&&(De!=null||Oe!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(i(137,s));break;default:An(r,s,Le,De,f,Oe)}return;default:if(ns(s)){for(var Tn in u)De=u[Tn],u.hasOwnProperty(Tn)&&De!==void 0&&!f.hasOwnProperty(Tn)&&Cp(r,s,Tn,void 0,f,De);for(qe in f)De=f[qe],Oe=u[qe],!f.hasOwnProperty(qe)||De===Oe||De===void 0&&Oe===void 0||Cp(r,s,qe,De,f,Oe);return}}for(var Te in u)De=u[Te],u.hasOwnProperty(Te)&&De!=null&&!f.hasOwnProperty(Te)&&An(r,s,Te,null,f,De);for(We in f)De=f[We],Oe=u[We],!f.hasOwnProperty(We)||De===Oe||De==null&&Oe==null||An(r,s,We,De,f,Oe)}function uv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function X5(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var x=u[f],N=x.transferSize,U=x.initiatorType,Q=x.duration;if(N&&Q&&uv(U)){for(U=0,Q=x.responseEnd,f+=1;f<u.length;f++){var pe=u[f],Le=pe.startTime;if(Le>Q)break;var qe=pe.transferSize,We=pe.initiatorType;qe&&uv(We)&&(pe=pe.responseEnd,U+=qe*(pe<Q?1:(Q-Le)/(pe-Le)))}if(--f,s+=8*(N+U)/(x.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var kp=null,Ip=null;function If(r){return r.nodeType===9?r:r.ownerDocument}function cv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dv(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Rp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lp=null;function Q5(){var r=window.event;return r&&r.type==="popstate"?r===Lp?!1:(Lp=r,!0):(Lp=null,!1)}var fv=typeof setTimeout=="function"?setTimeout:void 0,Z5=typeof clearTimeout=="function"?clearTimeout:void 0,hv=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof hv<"u"?function(r){return hv.resolve(null).then(r).catch(tx)}:fv;function tx(r){setTimeout(function(){throw r})}function ul(r){return r==="head"}function pv(r,s){var u=s,f=0;do{var x=u.nextSibling;if(r.removeChild(u),x&&x.nodeType===8)if(u=x.data,u==="/$"||u==="/&"){if(f===0){r.removeChild(x),pc(s);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")yd(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,yd(u);for(var N=u.firstChild;N;){var U=N.nextSibling,Q=N.nodeName;N[Bn]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&N.rel.toLowerCase()==="stylesheet"||u.removeChild(N),N=U}}else u==="body"&&yd(r.ownerDocument.body);u=x}while(u);pc(s)}function mv(r,s){var u=r;r=0;do{var f=u.nextSibling;if(u.nodeType===1?s?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(s?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=f}while(u)}function Dp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Dp(u),ys(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function nx(r,s,u,f){for(;r.nodeType===1;){var x=u;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[Bn])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(N=r.getAttribute("rel"),N==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(N!==x.rel||r.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||r.getAttribute("title")!==(x.title==null?null:x.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(N=r.getAttribute("src"),(N!==(x.src==null?null:x.src)||r.getAttribute("type")!==(x.type==null?null:x.type)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&N&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var N=x.name==null?null:""+x.name;if(x.type==="hidden"&&r.getAttribute("name")===N)return r}else return r;if(r=Ds(r.nextSibling),r===null)break}return null}function ix(r,s,u){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Ds(r.nextSibling),r===null))return null;return r}function gv(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Ds(r.nextSibling),r===null))return null;return r}function Mp(r){return r.data==="$?"||r.data==="$~"}function Pp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function rx(r,s){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||u.readyState!=="loading")s();else{var f=function(){s(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function Ds(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var Up=null;function vv(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(s===0)return Ds(r.nextSibling);s--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||s++}r=r.nextSibling}return null}function yv(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(s===0)return r;s--}else u!=="/$"&&u!=="/&"||s++}r=r.previousSibling}return null}function bv(r,s,u){switch(s=If(u),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function yd(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ys(r)}var Ms=new Map,xv=new Set;function Rf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var wo=$.d;$.d={f:sx,r:ax,D:ox,C:lx,L:ux,m:cx,X:fx,S:dx,M:hx};function sx(){var r=wo.f(),s=Sf();return r||s}function ax(r){var s=ts(r);s!==null&&s.tag===5&&s.type==="form"?Om(s):wo.r(r)}var dc=typeof document>"u"?null:document;function wv(r,s,u){var f=dc;if(f&&typeof s=="string"&&s){var x=Fi(s);x='link[rel="'+r+'"][href="'+x+'"]',typeof u=="string"&&(x+='[crossorigin="'+u+'"]'),xv.has(x)||(xv.add(x),r={rel:r,crossOrigin:u,href:s},f.querySelector(x)===null&&(s=f.createElement("link"),nr(s,"link",r),ii(s),f.head.appendChild(s)))}}function ox(r){wo.D(r),wv("dns-prefetch",r,null)}function lx(r,s){wo.C(r,s),wv("preconnect",r,s)}function ux(r,s,u){wo.L(r,s,u);var f=dc;if(f&&r&&s){var x='link[rel="preload"][as="'+Fi(s)+'"]';s==="image"&&u&&u.imageSrcSet?(x+='[imagesrcset="'+Fi(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(x+='[imagesizes="'+Fi(u.imageSizes)+'"]')):x+='[href="'+Fi(r)+'"]';var N=x;switch(s){case"style":N=fc(r);break;case"script":N=hc(r)}Ms.has(N)||(r=b({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:r,as:s},u),Ms.set(N,r),f.querySelector(x)!==null||s==="style"&&f.querySelector(bd(N))||s==="script"&&f.querySelector(xd(N))||(s=f.createElement("link"),nr(s,"link",r),ii(s),f.head.appendChild(s)))}}function cx(r,s){wo.m(r,s);var u=dc;if(u&&r){var f=s&&typeof s.as=="string"?s.as:"script",x='link[rel="modulepreload"][as="'+Fi(f)+'"][href="'+Fi(r)+'"]',N=x;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=hc(r)}if(!Ms.has(N)&&(r=b({rel:"modulepreload",href:r},s),Ms.set(N,r),u.querySelector(x)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(xd(N)))return}f=u.createElement("link"),nr(f,"link",r),ii(f),u.head.appendChild(f)}}}function dx(r,s,u){wo.S(r,s,u);var f=dc;if(f&&r){var x=ha(f).hoistableStyles,N=fc(r);s=s||"default";var U=x.get(N);if(!U){var Q={loading:0,preload:null};if(U=f.querySelector(bd(N)))Q.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":s},u),(u=Ms.get(N))&&Op(r,u);var pe=U=f.createElement("link");ii(pe),nr(pe,"link",r),pe._p=new Promise(function(Le,qe){pe.onload=Le,pe.onerror=qe}),pe.addEventListener("load",function(){Q.loading|=1}),pe.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,Lf(U,s,f)}U={type:"stylesheet",instance:U,count:1,state:Q},x.set(N,U)}}}function fx(r,s){wo.X(r,s);var u=dc;if(u&&r){var f=ha(u).hoistableScripts,x=hc(r),N=f.get(x);N||(N=u.querySelector(xd(x)),N||(r=b({src:r,async:!0},s),(s=Ms.get(x))&&jp(r,s),N=u.createElement("script"),ii(N),nr(N,"link",r),u.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},f.set(x,N))}}function hx(r,s){wo.M(r,s);var u=dc;if(u&&r){var f=ha(u).hoistableScripts,x=hc(r),N=f.get(x);N||(N=u.querySelector(xd(x)),N||(r=b({src:r,async:!0,type:"module"},s),(s=Ms.get(x))&&jp(r,s),N=u.createElement("script"),ii(N),nr(N,"link",r),u.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},f.set(x,N))}}function Sv(r,s,u,f){var x=(x=se.current)?Rf(x):null;if(!x)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=fc(u.href),u=ha(x).hoistableStyles,f=u.get(s),f||(f={type:"style",instance:null,count:0,state:null},u.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=fc(u.href);var N=ha(x).hoistableStyles,U=N.get(r);if(U||(x=x.ownerDocument||x,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(r,U),(N=x.querySelector(bd(r)))&&!N._p&&(U.instance=N,U.state.loading=5),Ms.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ms.set(r,u),N||px(x,r,u,U.state))),s&&f===null)throw Error(i(528,""));return U}if(s&&f!==null)throw Error(i(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=hc(u),u=ha(x).hoistableScripts,f=u.get(s),f||(f={type:"script",instance:null,count:0,state:null},u.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function fc(r){return'href="'+Fi(r)+'"'}function bd(r){return'link[rel="stylesheet"]['+r+"]"}function _v(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function px(r,s,u,f){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=r.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),nr(s,"link",u),ii(s),r.head.appendChild(s))}function hc(r){return'[src="'+Fi(r)+'"]'}function xd(r){return"script[async]"+r}function Nv(r,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var f=r.querySelector('style[data-href~="'+Fi(u.href)+'"]');if(f)return s.instance=f,ii(f),f;var x=b({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),ii(f),nr(f,"style",x),Lf(f,u.precedence,r),s.instance=f;case"stylesheet":x=fc(u.href);var N=r.querySelector(bd(x));if(N)return s.state.loading|=4,s.instance=N,ii(N),N;f=_v(u),(x=Ms.get(x))&&Op(f,x),N=(r.ownerDocument||r).createElement("link"),ii(N);var U=N;return U._p=new Promise(function(Q,pe){U.onload=Q,U.onerror=pe}),nr(N,"link",f),s.state.loading|=4,Lf(N,u.precedence,r),s.instance=N;case"script":return N=hc(u.src),(x=r.querySelector(xd(N)))?(s.instance=x,ii(x),x):(f=u,(x=Ms.get(N))&&(f=b({},u),jp(f,x)),r=r.ownerDocument||r,x=r.createElement("script"),ii(x),nr(x,"link",f),r.head.appendChild(x),s.instance=x);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,Lf(f,u.precedence,r));return s.instance}function Lf(r,s,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=f.length?f[f.length-1]:null,N=x,U=0;U<f.length;U++){var Q=f[U];if(Q.dataset.precedence===s)N=Q;else if(N!==x)break}N?N.parentNode.insertBefore(r,N.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(r,s.firstChild))}function Op(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function jp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Df=null;function Av(r,s,u){if(Df===null){var f=new Map,x=Df=new Map;x.set(u,f)}else x=Df,f=x.get(u),f||(f=new Map,x.set(u,f));if(f.has(r))return f;for(f.set(r,null),u=u.getElementsByTagName(r),x=0;x<u.length;x++){var N=u[x];if(!(N[Bn]||N[ln]||r==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var U=N.getAttribute(s)||"";U=r+U;var Q=f.get(U);Q?Q.push(N):f.set(U,[N])}}return f}function Tv(r,s,u){r=r.ownerDocument||r,r.head.insertBefore(u,s==="title"?r.querySelector("head > title"):null)}function mx(r,s,u){if(u===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ev(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function gx(r,s,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var x=fc(f.href),N=s.querySelector(bd(x));if(N){s=N._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Mf.bind(r),s.then(r,r)),u.state.loading|=4,u.instance=N,ii(N);return}N=s.ownerDocument||s,f=_v(f),(x=Ms.get(x))&&Op(f,x),N=N.createElement("link"),ii(N);var U=N;U._p=new Promise(function(Q,pe){U.onload=Q,U.onerror=pe}),nr(N,"link",f),u.instance=N}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=Mf.bind(r),s.addEventListener("load",u),s.addEventListener("error",u))}}var Fp=0;function vx(r,s){return r.stylesheets&&r.count===0&&Uf(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var f=setTimeout(function(){if(r.stylesheets&&Uf(r,r.stylesheets),r.unsuspend){var N=r.unsuspend;r.unsuspend=null,N()}},6e4+s);0<r.imgBytes&&Fp===0&&(Fp=62500*X5());var x=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Uf(r,r.stylesheets),r.unsuspend)){var N=r.unsuspend;r.unsuspend=null,N()}},(r.imgBytes>Fp?50:800)+s);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(x)}}:null}function Mf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Pf=null;function Uf(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Pf=new Map,s.forEach(yx,r),Pf=null,Mf.call(r))}function yx(r,s){if(!(s.state.loading&4)){var u=Pf.get(r);if(u)var f=u.get(null);else{u=new Map,Pf.set(r,u);for(var x=r.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<x.length;N++){var U=x[N];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(u.set(U.dataset.precedence,U),f=U)}f&&u.set(null,f)}x=s.instance,U=x.getAttribute("data-precedence"),N=u.get(U)||f,N===f&&u.set(null,x),u.set(U,x),this.count++,f=Mf.bind(this),x.addEventListener("load",f),x.addEventListener("error",f),N?N.parentNode.insertBefore(x,N.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(x,r.firstChild)),s.state.loading|=4}}var wd={$$typeof:L,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function bx(r,s,u,f,x,N,U,Q,pe){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.hiddenUpdates=ji(null),this.identifierPrefix=f,this.onUncaughtError=x,this.onCaughtError=N,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function Cv(r,s,u,f,x,N,U,Q,pe,Le,qe,We){return r=new bx(r,s,u,U,pe,Le,qe,We,Q),s=1,N===!0&&(s|=24),N=Gi(3,null,null,s),r.current=N,N.stateNode=r,s=Xo(),s.refCount++,r.pooledCache=s,s.refCount++,N.memoizedState={element:f,isDehydrated:u,cache:s},hn(N),r}function kv(r){return r?(r=Ii,r):Ii}function Iv(r,s,u,f,x,N){x=kv(x),f.context===null?f.context=x:f.pendingContext=x,f=Ct(s),f.payload={element:u},N=N===void 0?null:N,N!==null&&(f.callback=N),u=vn(r,f,s),u!==null&&(Kr(u,r,s),xi(u,r,s))}function Rv(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<s?u:s}}function Bp(r,s){Rv(r,s),(r=r.alternate)&&Rv(r,s)}function Lv(r){if(r.tag===13||r.tag===31){var s=$s(r,67108864);s!==null&&Kr(s,r,67108864),Bp(r,67108864)}}function Dv(r){if(r.tag===13||r.tag===31){var s=fs();s=Fn(s);var u=$s(r,s);u!==null&&Kr(u,r,s),Bp(r,s)}}var Of=!0;function xx(r,s,u,f){var x=P.T;P.T=null;var N=$.p;try{$.p=2,qp(r,s,u,f)}finally{$.p=N,P.T=x}}function wx(r,s,u,f){var x=P.T;P.T=null;var N=$.p;try{$.p=8,qp(r,s,u,f)}finally{$.p=N,P.T=x}}function qp(r,s,u,f){if(Of){var x=zp(f);if(x===null)Ep(r,s,f,jf,u),Pv(r,f);else if(_x(x,r,s,u,f))f.stopPropagation();else if(Pv(r,f),s&4&&-1<Sx.indexOf(r)){for(;x!==null;){var N=ts(x);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var U=on(N.pendingLanes);if(U!==0){var Q=N;for(Q.pendingLanes|=2,Q.entangledLanes|=2;U;){var pe=1<<31-_t(U);Q.entanglements[1]|=pe,U&=~pe}Ba(N),(pn&6)===0&&(xf=Se()+500,md(0))}}break;case 31:case 13:Q=$s(N,2),Q!==null&&Kr(Q,N,2),Sf(),Bp(N,2)}if(N=zp(f),N===null&&Ep(r,s,f,jf,u),N===x)break;x=N}x!==null&&f.stopPropagation()}else Ep(r,s,f,null,u)}}function zp(r){return r=Po(r),Hp(r)}var jf=null;function Hp(r){if(jf=null,r=es(r),r!==null){var s=o(r);if(s===null)r=null;else{var u=s.tag;if(u===13){if(r=l(s),r!==null)return r;r=null}else if(u===31){if(r=c(s),r!==null)return r;r=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return jf=r,null}function Mv(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case ct:return 2;case xt:return 8;case Ht:case pt:return 32;case At:return 268435456;default:return 32}default:return 32}}var Gp=!1,cl=null,dl=null,fl=null,Sd=new Map,_d=new Map,hl=[],Sx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pv(r,s){switch(r){case"focusin":case"focusout":cl=null;break;case"dragenter":case"dragleave":dl=null;break;case"mouseover":case"mouseout":fl=null;break;case"pointerover":case"pointerout":Sd.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_d.delete(s.pointerId)}}function Nd(r,s,u,f,x,N){return r===null||r.nativeEvent!==N?(r={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:N,targetContainers:[x]},s!==null&&(s=ts(s),s!==null&&Lv(s)),r):(r.eventSystemFlags|=f,s=r.targetContainers,x!==null&&s.indexOf(x)===-1&&s.push(x),r)}function _x(r,s,u,f,x){switch(s){case"focusin":return cl=Nd(cl,r,s,u,f,x),!0;case"dragenter":return dl=Nd(dl,r,s,u,f,x),!0;case"mouseover":return fl=Nd(fl,r,s,u,f,x),!0;case"pointerover":var N=x.pointerId;return Sd.set(N,Nd(Sd.get(N)||null,r,s,u,f,x)),!0;case"gotpointercapture":return N=x.pointerId,_d.set(N,Nd(_d.get(N)||null,r,s,u,f,x)),!0}return!1}function Uv(r){var s=es(r.target);if(s!==null){var u=o(s);if(u!==null){if(s=u.tag,s===13){if(s=l(u),s!==null){r.blockedOn=s,vs(r.priority,function(){Dv(u)});return}}else if(s===31){if(s=c(u),s!==null){r.blockedOn=s,vs(r.priority,function(){Dv(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ff(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var u=zp(r.nativeEvent);if(u===null){u=r.nativeEvent;var f=new u.constructor(u.type,u);Ul=f,u.target.dispatchEvent(f),Ul=null}else return s=ts(u),s!==null&&Lv(s),r.blockedOn=u,!1;s.shift()}return!0}function Ov(r,s,u){Ff(r)&&u.delete(s)}function Nx(){Gp=!1,cl!==null&&Ff(cl)&&(cl=null),dl!==null&&Ff(dl)&&(dl=null),fl!==null&&Ff(fl)&&(fl=null),Sd.forEach(Ov),_d.forEach(Ov)}function Bf(r,s){r.blockedOn===s&&(r.blockedOn=null,Gp||(Gp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Nx)))}var qf=null;function jv(r){qf!==r&&(qf=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){qf===r&&(qf=null);for(var s=0;s<r.length;s+=3){var u=r[s],f=r[s+1],x=r[s+2];if(typeof f!="function"){if(Hp(f||u)===null)continue;break}var N=ts(u);N!==null&&(r.splice(s,3),s-=3,zh(N,{pending:!0,data:x,method:u.method,action:f},f,x))}}))}function pc(r){function s(pe){return Bf(pe,r)}cl!==null&&Bf(cl,r),dl!==null&&Bf(dl,r),fl!==null&&Bf(fl,r),Sd.forEach(s),_d.forEach(s);for(var u=0;u<hl.length;u++){var f=hl[u];f.blockedOn===r&&(f.blockedOn=null)}for(;0<hl.length&&(u=hl[0],u.blockedOn===null);)Uv(u),u.blockedOn===null&&hl.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var x=u[f],N=u[f+1],U=x[wn]||null;if(typeof N=="function")U||jv(u);else if(U){var Q=null;if(N&&N.hasAttribute("formAction")){if(x=N,U=N[wn]||null)Q=U.formAction;else if(Hp(x)!==null)continue}else Q=U.action;typeof Q=="function"?u[f+1]=Q:(u.splice(f,3),f-=3),jv(u)}}}function Fv(){function r(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(U){return x=U})},focusReset:"manual",scroll:"manual"})}function s(){x!==null&&(x(),x=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,x=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),x!==null&&(x(),x=null)}}}function Vp(r){this._internalRoot=r}zf.prototype.render=Vp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var u=s.current,f=fs();Iv(u,f,r,s,null,null)},zf.prototype.unmount=Vp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Iv(r.current,2,null,r,null,null),Sf(),s[di]=null}};function zf(r){this._internalRoot=r}zf.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ci();r={blockedOn:null,target:r,priority:s};for(var u=0;u<hl.length&&s!==0&&s<hl[u].priority;u++);hl.splice(u,0,r),u===0&&Uv(r)}};var Bv=e.version;if(Bv!=="19.2.3")throw Error(i(527,Bv,"19.2.3"));$.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var Ax={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hf.isDisabled&&Hf.supportsFiber)try{Lt=Hf.inject(Ax),qt=Hf}catch{}}return Td.createRoot=function(r,s){if(!a(r))throw Error(i(299));var u=!1,f="",x=Jm,N=Ym,U=Wm;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(x=s.onUncaughtError),s.onCaughtError!==void 0&&(N=s.onCaughtError),s.onRecoverableError!==void 0&&(U=s.onRecoverableError)),s=Cv(r,1,!1,null,null,u,f,null,x,N,U,Fv),r[di]=s.current,Tp(r),new Vp(s)},Td.hydrateRoot=function(r,s,u){if(!a(r))throw Error(i(299));var f=!1,x="",N=Jm,U=Ym,Q=Wm,pe=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(N=u.onUncaughtError),u.onCaughtError!==void 0&&(U=u.onCaughtError),u.onRecoverableError!==void 0&&(Q=u.onRecoverableError),u.formState!==void 0&&(pe=u.formState)),s=Cv(r,1,!0,s,u??null,f,x,pe,N,U,Q,Fv),s.context=kv(null),u=s.current,f=fs(),f=Fn(f),x=Ct(f),x.callback=null,vn(u,x,f),u=f,s.current.lanes=u,yi(s,u),Ba(s),r[di]=s.current,Tp(r),new zf(s)},Td.version="19.2.3",Td}var $v;function Hx(){if($v)return Jp.exports;$v=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jp.exports=zx(),Jp.exports}var Gx=Hx();const Vx=L2(Gx);var ps=(t=>(t.ADMIN="ADMIN",t.USER="USER",t))(ps||{}),mn=(t=>(t.UNPAID="UNPAID",t.PARTIALLY_PAID="PARTIALLY_PAID",t.PAID="PAID",t.PENDING="PENDING",t.ACCEPTED="ACCEPTED",t.REJECTED="REJECTED",t.EXPIRED="EXPIRED",t))(mn||{});function xh(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function $x(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(v){try{h(i.next(v))}catch(b){l(b)}}function d(v){try{h(i.throw(v))}catch(b){l(b)}}function h(v){v.done?o(v.value):a(v.value).then(c,d)}h((i=i.apply(t,e||[])).next())})}const Jx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class rm extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class Yx extends rm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Jv extends rm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Yv extends rm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var v0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(v0||(v0={}));class Wx{constructor(e,{headers:n={},customFetch:i,region:a=v0.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=Jx(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return $x(this,arguments,void 0,function*(n,i={}){var a;let o,l;try{const{headers:c,method:d,body:h,signal:v,timeout:b}=i;let w={},{region:_}=i;_||(_=this.region);const T=new URL(`${this.url}/${n}`);_&&_!=="any"&&(w["x-region"]=_,T.searchParams.set("forceFunctionRegion",_));let k;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",k=h):typeof h=="string"?(w["Content-Type"]="text/plain",k=h):typeof FormData<"u"&&h instanceof FormData?k=h:(w["Content-Type"]="application/json",k=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?k=JSON.stringify(h):k=h;let R=v;b&&(l=new AbortController,o=setTimeout(()=>l.abort(),b),v?(R=l.signal,v.addEventListener("abort",()=>l.abort())):R=l.signal);const C=yield this.fetch(T.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),c),body:k,signal:R}).catch(q=>{throw new Yx(q)}),I=C.headers.get("x-relay-error");if(I&&I==="true")throw new Jv(C);if(!C.ok)throw new Yv(C);let L=((a=C.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),O;return L==="application/json"?O=yield C.json():L==="application/octet-stream"||L==="application/pdf"?O=yield C.blob():L==="text/event-stream"?O=C:L==="multipart/form-data"?O=yield C.formData():O=yield C.text(),{data:O,error:null,response:C}}catch(c){return{data:null,error:c,response:c instanceof Yv||c instanceof Jv?c.context:void 0}}finally{o&&clearTimeout(o)}})}}var Kx=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Xx=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let a=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,c=null,d=null,h=o.status,v=o.statusText;if(o.ok){var b,w;if(n.method!=="HEAD"){var _;const C=await o.text();C===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((_=n.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?c=C:c=JSON.parse(C))}const k=(b=n.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),R=(w=o.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");k&&R&&R.length>1&&(d=parseInt(R[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,h=406,v="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var T;const k=await o.text();try{l=JSON.parse(k),Array.isArray(l)&&o.status===404&&(c=[],l=null,h=200,v="OK")}catch{o.status===404&&k===""?(h=204,v="No Content"):l={message:k}}if(l&&n.isMaybeSingle&&(!(l==null||(T=l.details)===null||T===void 0)&&T.includes("0 rows"))&&(l=null,h=200,v="OK"),l&&n.shouldThrowOnError)throw new Kx(l)}return{error:l,data:c,count:d,status:h,statusText:v}});return this.shouldThrowOnError||(a=a.catch(o=>{var l;let c="";const d=o==null?void 0:o.cause;if(d){var h,v,b,w;const T=(h=d==null?void 0:d.message)!==null&&h!==void 0?h:"",k=(v=d==null?void 0:d.code)!==null&&v!==void 0?v:"";c=`${(b=o==null?void 0:o.name)!==null&&b!==void 0?b:"FetchError"}: ${o==null?void 0:o.message}`,c+=`

Caused by: ${(w=d==null?void 0:d.name)!==null&&w!==void 0?w:"Error"}: ${T}`,k&&(c+=` (${k})`),d!=null&&d.stack&&(c+=`
${d.stack}`)}else{var _;c=(_=o==null?void 0:o.stack)!==null&&_!==void 0?_:""}return{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},Qx=class extends Xx{select(t){let e=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Wv=new RegExp("[,()]");var Nc=class extends Qx{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&Wv.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&Wv.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Zx=class{constructor(t,{headers:e={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:i}=e??{},a=n?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join(""),{url:c,headers:d}=this.cloneRequestState();return c.searchParams.set("select",l),i&&d.append("Prefer",`count=${i}`),new Nc({method:a,url:c,headers:d,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var i;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);o.searchParams.set("columns",d.join(","))}}return new Nc({method:a,url:o,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var o;const l="POST",{url:c,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&c.searchParams.set("on_conflict",e),i&&d.append("Prefer",`count=${i}`),a||d.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(h.length>0){const v=[...new Set(h)].map(b=>`"${b}"`);c.searchParams.set("columns",v.join(","))}}return new Nc({method:l,url:c,headers:d,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const i="PATCH",{url:a,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Nc({method:i,url:a,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:i,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Nc({method:n,url:i,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},ew=class D2{constructor(e,{headers:n={},schema:i,fetch:a}={}){this.url=e,this.headers=new Headers(n),this.schemaName=i,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Zx(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new D2(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:a=!1,count:o}={}){var l;let c;const d=new URL(`${this.url}/rpc/${e}`);let h;const v=_=>_!==null&&typeof _=="object"&&(!Array.isArray(_)||_.some(v)),b=i&&Object.values(n).some(v);b?(c="POST",h=n):i||a?(c=i?"HEAD":"GET",Object.entries(n).filter(([_,T])=>T!==void 0).map(([_,T])=>[_,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([_,T])=>{d.searchParams.append(_,T)})):(c="POST",h=n);const w=new Headers(this.headers);return b?w.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&w.set("Prefer",`count=${o}`),new Nc({method:c,url:d,headers:w,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class tw{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const a=i.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const nw="2.90.1",iw=`realtime-js/${nw}`,M2="1.0.0",rw="2.0.0",Kv=M2,y0=1e4,sw=1e3,aw=100;var yl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(yl||(yl={}));var Ui;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ui||(Ui={}));var aa;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(aa||(aa={}));var b0;(function(t){t.websocket="websocket"})(b0||(b0={}));var pu;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(pu||(pu={}));class ow{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const a=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var n,i;const a=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,i){var a,o;const l=e.topic,c=(a=e.ref)!==null&&a!==void 0?a:"",d=(o=e.join_ref)!==null&&o!==void 0?o:"",h=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(v).length===0?"":JSON.stringify(v);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+c.length+l.length+h.length+b.length,_=new ArrayBuffer(this.HEADER_LENGTH+w);let T=new DataView(_),k=0;T.setUint8(k++,this.KINDS.userBroadcastPush),T.setUint8(k++,d.length),T.setUint8(k++,c.length),T.setUint8(k++,l.length),T.setUint8(k++,h.length),T.setUint8(k++,b.length),T.setUint8(k++,n),Array.from(d,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(c,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(l,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(h,C=>T.setUint8(k++,C.charCodeAt(0))),Array.from(b,C=>T.setUint8(k++,C.charCodeAt(0)));var R=new Uint8Array(_.byteLength+i.byteLength);return R.set(new Uint8Array(_),0),R.set(new Uint8Array(i),_.byteLength),R.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[a,o,l,c,d]=i;return n({join_ref:a,ref:o,topic:l,event:c,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),a=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,a)}}_decodeUserBroadcast(e,n,i){const a=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),c=n.getUint8(4);let d=this.HEADER_LENGTH+4;const h=i.decode(e.slice(d,d+a));d=d+a;const v=i.decode(e.slice(d,d+o));d=d+o;const b=i.decode(e.slice(d,d+l));d=d+l;const w=e.slice(d,e.byteLength),_=c===this.JSON_ENCODING?JSON.parse(i.decode(w)):w,T={type:this.BROADCAST_EVENT,event:v,payload:_};return l>0&&(T.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class P2{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var On;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(On||(On={}));const Xv=(t,e,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=lw(l,t,e,a),o),{}):{}},lw=(t,e,n,i)=>{const a=e.find(c=>c.name===t),o=a==null?void 0:a.type,l=n[t];return o&&!i.includes(o)?U2(o,l):x0(l)},U2=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return fw(e,n)}switch(t){case On.bool:return uw(e);case On.float4:case On.float8:case On.int2:case On.int4:case On.int8:case On.numeric:case On.oid:return cw(e);case On.json:case On.jsonb:return dw(e);case On.timestamp:return hw(e);case On.abstime:case On.date:case On.daterange:case On.int4range:case On.int8range:case On.money:case On.reltime:case On.text:case On.time:case On.timestamptz:case On.timetz:case On.tsrange:case On.tstzrange:return x0(e);default:return x0(e)}},x0=t=>t,uw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},cw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},dw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},fw=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(c=>U2(e,c))}return t},hw=t=>typeof t=="string"?t.replace(" ","T"):t,O2=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Kp{constructor(e,n,i={},a=y0){this.channel=e,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Qv||(Qv={}));class Md{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Md.syncState(this.state,a,o,l),this.pendingDiffs.forEach(d=>{this.state=Md.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],c()}),this.channel._on(i.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Md.syncDiff(this.state,a,o,l),c())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,a){const o=this.cloneDeep(e),l=this.transformState(n),c={},d={};return this.map(o,(h,v)=>{l[h]||(d[h]=v)}),this.map(l,(h,v)=>{const b=o[h];if(b){const w=v.map(R=>R.presence_ref),_=b.map(R=>R.presence_ref),T=v.filter(R=>_.indexOf(R.presence_ref)<0),k=b.filter(R=>w.indexOf(R.presence_ref)<0);T.length>0&&(c[h]=T),k.length>0&&(d[h]=k)}else c[h]=v}),this.syncDiff(o,{joins:c,leaves:d},i,a)}static syncDiff(e,n,i,a){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(o,(c,d)=>{var h;const v=(h=e[c])!==null&&h!==void 0?h:[];if(e[c]=this.cloneDeep(d),v.length>0){const b=e[c].map(_=>_.presence_ref),w=v.filter(_=>b.indexOf(_.presence_ref)<0);e[c].unshift(...w)}i(c,v,d)}),this.map(l,(c,d)=>{let h=e[c];if(!h)return;const v=d.map(b=>b.presence_ref);h=h.filter(b=>v.indexOf(b.presence_ref)<0),e[c]=h,a(c,h,d),h.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const a=e[i];return"metas"in a?n[i]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Zv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Zv||(Zv={}));var Pd;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Pd||(Pd={}));var _o;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(_o||(_o={}));class Ic{constructor(e,n={config:{}},i){var a,o;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Ui.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Kp(this,aa.join,this.params,this.timeout),this.rejoinTimer=new P2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ui.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ui.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ui.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ui.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ui.errored,this.rejoinTimer.scheduleTimeout())}),this._on(aa.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Md(this),this.broadcastEndpointURL=O2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ui.closed){const{config:{broadcast:l,presence:c,private:d}}=this.params,h=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(_=>_.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Pd.PRESENCE]&&this.bindings[Pd.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,b={},w={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:v}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(_=>e==null?void 0:e(_o.CHANNEL_ERROR,_)),this._onClose(()=>e==null?void 0:e(_o.CLOSED)),this.updateJoinPayload(Object.assign({config:w},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var T;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){e==null||e(_o.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,R=(T=k==null?void 0:k.length)!==null&&T!==void 0?T:0,C=[];for(let I=0;I<R;I++){const L=k[I],{filter:{event:O,schema:q,table:W,filter:F}}=L,z=_&&_[I];if(z&&z.event===O&&Ic.isFilterValueEqual(z.schema,q)&&Ic.isFilterValueEqual(z.table,W)&&Ic.isFilterValueEqual(z.filter,F))C.push(Object.assign(Object.assign({},L),{id:z.id}));else{this.unsubscribe(),this.state=Ui.errored,e==null||e(_o.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(_o.SUBSCRIBED);return}}).receive("error",_=>{this.state=Ui.errored,e==null||e(_o.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(_o.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===Ui.joined&&e===Pd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(c.status===202)return{success:!0};let d=c.statusText;try{const h=await c.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,d;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ui.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(aa.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new Kp(this,aa.leave,{},e),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ui.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const a=new AbortController,o=setTimeout(()=>a.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),l}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Kp(this,e,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>aw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var a,o;const l=e.toLocaleLowerCase(),{close:c,error:d,leave:h,join:v}=aa;if(i&&[c,d,h,v].indexOf(l)>=0&&i!==this._joinRef())return;let w=this._onMessage(l,n,i);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(_=>{var T,k,R;return((T=_.filter)===null||T===void 0?void 0:T.event)==="*"||((R=(k=_.filter)===null||k===void 0?void 0:k.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===l}).map(_=>_.callback(w,i)):(o=this.bindings[l])===null||o===void 0||o.filter(_=>{var T,k,R,C,I,L,O,q;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in _){const W=_.id,F=(T=_.filter)===null||T===void 0?void 0:T.event;return W&&((k=n.ids)===null||k===void 0?void 0:k.includes(W))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((R=n.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))&&(!(!((C=_.filter)===null||C===void 0)&&C.table)||_.filter.table===((I=n.data)===null||I===void 0?void 0:I.table))}else{const W=(O=(L=_==null?void 0:_.filter)===null||L===void 0?void 0:L.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return W==="*"||W===((q=n==null?void 0:n.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===l}).map(_=>{if(typeof w=="object"&&"ids"in w){const T=w.data,{schema:k,table:R,commit_timestamp:C,type:I,errors:L}=T;w=Object.assign(Object.assign({},{schema:k,table:R,commit_timestamp:C,eventType:I,new:{},old:{},errors:L}),this._getPayloadRecords(T))}_.callback(w,i)})}_isClosed(){return this.state===Ui.closed}_isJoined(){return this.state===Ui.joined}_isJoining(){return this.state===Ui.joining}_isLeaving(){return this.state===Ui.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const a=e.toLocaleLowerCase(),o={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&Ic.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(aa.close,{},e)}_onError(e){this._on(aa.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ui.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Xv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Xv(e.columns,e.old_record)),n}}const Xp=()=>{},Gf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pw=[1e3,2e3,5e3,1e4],mw=1e4,gw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vw{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=y0,this.transport=null,this.heartbeatIntervalMs=Gf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xp,this.ref=0,this.reconnectTimer=null,this.vsn=Kv,this.logger=Xp,this.conn=null,this.sendBuffer=[],this.serializer=new ow,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${b0.websocket}`,this.httpEndpoint=O2(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case yl.connecting:return pu.Connecting;case yl.open:return pu.Open;case yl.closing:return pu.Closing;default:return pu.Closed}}isConnected(){return this.connectionState()===pu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===i);if(a)return a;{const o=new Ic(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:i,payload:a,ref:o}=e,l=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${n} ${i} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(sw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Gf.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",h)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:a,payload:o,ref:l}=n,c=l?`(${l})`:"",d=o.status||"";this.log("receive",`${d} ${i} ${a} ${c}`.trim(),o),this.channels.filter(h=>h._isMember(i)).forEach(h=>h._trigger(a,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===yl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===yl.open||this.conn.readyState===yl.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(aa.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${i}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([gw],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,i=!1;if(e)n=e,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const o={access_token:n,version:iw};n&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(aa.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new P2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,a,o,l,c,d,h,v,b,w,_;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:y0,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Gf.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:Xp,this.vsn=(d=e==null?void 0:e.vsn)!==null&&d!==void 0?d:Kv,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(T=>pw[T-1]||mw),this.vsn){case M2:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((T,k)=>k(JSON.stringify(T))),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:((T,k)=>k(JSON.parse(T)));break;case rw:this.encode=(w=e==null?void 0:e.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var zd=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function yw(t,e,n){const i=new URL(e,t);if(n)for(const[a,o]of Object.entries(n))o!==void 0&&i.searchParams.set(a,o);return i.toString()}async function bw(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function xw(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:a,body:o,headers:l}){const c=yw(t.baseUrl,i,a),d=await bw(t.auth),h=await e(c,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...d,...l},body:o?JSON.stringify(o):void 0}),v=await h.text(),b=(h.headers.get("content-type")||"").includes("application/json"),w=b&&v?JSON.parse(v):v;if(!h.ok){const _=b?w:void 0,T=_==null?void 0:_.error;throw new zd((T==null?void 0:T.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:T==null?void 0:T.type,icebergCode:T==null?void 0:T.code,details:_})}return{status:h.status,headers:h.headers,data:w}}}}function Vf(t){return t.join("")}var ww=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Vf(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vf(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vf(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vf(t.namespace)}`}),!0}catch(e){if(e instanceof zd&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof zd&&n.status===409)return;throw n}}};function mc(t){return t.join("")}var Sw=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${mc(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${mc(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${mc(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${mc(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${mc(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${mc(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof zd&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof zd&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},_w=class{constructor(t){var i;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=xw({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(i=t.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new ww(this.client,e),this.tableOps=new Sw(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},wh=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function ni(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Nw=class extends wh{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},w0=class extends wh{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const sm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Aw=()=>Response,S0=t=>{if(Array.isArray(t))return t.map(n=>S0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=S0(i)}),e},Tw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ew=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(t)}function Cw(t,e){if(Hd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Hd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kw(t){var e=Cw(t,"string");return Hd(e)=="symbol"?e:e+""}function Iw(t,e,n){return(e=kw(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ey(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Rt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ey(Object(n),!0).forEach(function(i){Iw(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const Qp=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Rw=async(t,e,n)=>{t instanceof await Aw()&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new Nw(Qp(i),a,o))}).catch(i=>{e(new w0(Qp(i),i))}):e(new w0(Qp(t),t))},Lw=(t,e,n,i)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?a:(Tw(i)?(a.headers=Rt({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(i)):a.body=i,e!=null&&e.duplex&&(a.duplex=e.duplex),Rt(Rt({},a),n))};async function Zd(t,e,n,i,a,o){return new Promise((l,c)=>{t(n,Lw(e,i,a,o)).then(d=>{if(!d.ok)throw d;return i!=null&&i.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>Rw(d,c,i))})}async function Gd(t,e,n,i){return Zd(t,"GET",e,n,i)}async function sa(t,e,n,i,a){return Zd(t,"POST",e,i,a,n)}async function _0(t,e,n,i,a){return Zd(t,"PUT",e,i,a,n)}async function Dw(t,e,n,i){return Zd(t,"HEAD",e,Rt(Rt({},n),{},{noResolveJson:!0}),i)}async function am(t,e,n,i,a){return Zd(t,"DELETE",e,i,a,n)}var Mw=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ni(e))return{data:null,error:e};throw e}}};let j2;j2=Symbol.toStringTag;var Pw=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[j2]="BlobDownloadBuilder",this.promise=null}asStream(){return new Mw(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ni(e))return{data:null,error:e};throw e}}};const Uw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ty={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ow=class{constructor(t,e={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=sm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,i){var a=this;try{let o;const l=Rt(Rt({},ty),i);let c=Rt(Rt({},a.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",a.encodeMetadata(d)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),d&&!o.has("metadata")&&o.append("metadata",a.encodeMetadata(d))):(o=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,d&&(c["x-metadata"]=a.toBase64(a.encodeMetadata(d))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),i!=null&&i.headers&&(c=Rt(Rt({},c),i.headers));const h=a._removeEmptyFolders(e),v=a._getFinalPath(h),b=await(t=="PUT"?_0:sa)(a.fetch,`${a.url}/object/${v}`,o,Rt({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:b.Id,fullPath:b.Key},error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(ni(o))return{data:null,error:o};throw o}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,i){var a=this;const o=a._removeEmptyFolders(t),l=a._getFinalPath(o),c=new URL(a.url+`/object/upload/sign/${l}`);c.searchParams.set("token",e);try{let d;const h=Rt({upsert:ty.upsert},i),v=Rt(Rt({},a.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",h.cacheControl)):(d=n,v["cache-control"]=`max-age=${h.cacheControl}`,v["content-type"]=h.contentType),{data:{path:o,fullPath:(await _0(a.fetch,c.toString(),d,{headers:v})).Key},error:null}}catch(d){if(a.shouldThrowOnError)throw d;if(ni(d))return{data:null,error:d};throw d}}async createSignedUploadUrl(t,e){var n=this;try{let i=n._getFinalPath(t);const a=Rt({},n.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const o=await sa(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:a}),l=new URL(n.url+o.url),c=l.searchParams.get("token");if(!c)throw new wh("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:c},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ni(i))return{data:null,error:i};throw i}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var i=this;try{return{data:await sa(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}),error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(ni(a))return{data:null,error:a};throw a}}async copy(t,e,n){var i=this;try{return{data:{path:(await sa(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key},error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(ni(a))return{data:null,error:a};throw a}}async createSignedUrl(t,e,n){var i=this;try{let a=i._getFinalPath(t),o=await sa(i.fetch,`${i.url}/object/sign/${a}`,Rt({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${i.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(ni(a))return{data:null,error:a};throw a}}async createSignedUrls(t,e,n){var i=this;try{const a=await sa(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:t},{headers:i.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Rt(Rt({},l),{},{signedUrl:l.signedURL?encodeURI(`${i.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(ni(a))return{data:null,error:a};throw a}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=i?`?${i}`:"",o=this._getFinalPath(t),l=()=>Gd(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new Pw(l,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:S0(await Gd(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(ni(i))return{data:null,error:i};throw i}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await Dw(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(ni(i)&&i instanceof w0){const a=i.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:i}}throw i}}getPublicUrl(t,e){const n=this._getFinalPath(t),i=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&i.push(a);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}async remove(t){var e=this;try{return{data:await am(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ni(n))return{data:null,error:n};throw n}}async list(t,e,n){var i=this;try{const a=Rt(Rt(Rt({},Uw),e),{},{prefix:t||""});return{data:await sa(i.fetch,`${i.url}/object/list/${i.bucketId}`,a,{headers:i.headers},n),error:null}}catch(a){if(i.shouldThrowOnError)throw a;if(ni(a))return{data:null,error:a};throw a}}async listV2(t,e){var n=this;try{const i=Rt({},t);return{data:await sa(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},e),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ni(i))return{data:null,error:i};throw i}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const F2="2.90.1",B2={"X-Client-Info":`storage-js/${F2}`};var jw=class{constructor(t,e={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Rt(Rt({},B2),e),this.fetch=sm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Gd(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ni(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Gd(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ni(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await sa(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ni(i))return{data:null,error:i};throw i}}async updateBucket(t,e){var n=this;try{return{data:await _0(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ni(i))return{data:null,error:i};throw i}}async emptyBucket(t){var e=this;try{return{data:await sa(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ni(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await am(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ni(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Fw=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Rt(Rt({},B2),e),this.fetch=sm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await sa(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ni(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const i=n.toString(),a=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return{data:await Gd(e.fetch,a,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ni(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await am(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ni(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!Ew(t))throw new wh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new _w({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(a,o){const l=a[o];return typeof l!="function"?l:async(...c)=>{try{return{data:await l.apply(a,c),error:null}}catch(d){if(i)throw d;return{data:null,error:d}}}}})}};const om={"X-Client-Info":`storage-js/${F2}`,"Content-Type":"application/json"};var q2=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ms(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Zp=class extends q2{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Bw=class extends q2{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const lm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),qw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ny=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zw=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,a=t;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Zp(ny(o),i,l))}).catch(()=>{const o=i+"";e(new Zp(a.statusText||`HTTP ${i} error`,i,o))});else{const o=i+"";e(new Zp(a.statusText||`HTTP ${i} error`,i,o))}}else e(new Bw(ny(t),t))},Hw=(t,e,n,i)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return i?(qw(i)?(a.headers=Rt({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(i)):a.body=i,Rt(Rt({},a),n)):a};async function Gw(t,e,n,i,a,o){return new Promise((l,c)=>{t(n,Hw(e,i,a,o)).then(d=>{if(!d.ok)throw d;if(i!=null&&i.noResolveJson)return d;const h=d.headers.get("content-type");return!h||!h.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>zw(d,c,i))})}async function gs(t,e,n,i,a){return Gw(t,"POST",e,i,a,n)}var Vw=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Rt(Rt({},om),e),this.fetch=lm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await gs(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ms(i))return{data:null,error:i};throw i}}async listIndexes(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await gs(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ms(i))return{data:null,error:i};throw i}}},$w=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Rt(Rt({},om),e),this.fetch=lm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await gs(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await gs(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await gs(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}},Jw=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Rt(Rt({},om),e),this.fetch=lm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await gs(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await gs(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}}},Yw=class extends Jw{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Ww(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},Ww=class extends Vw{constructor(t,e,n,i){super(t,e,i),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new Kw(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Kw=class extends $w{constructor(t,e,n,i,a){super(t,e,a),this.vectorBucketName=n,this.indexName=i}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Xw=class extends jw{constructor(t,e={},n,i){super(t,e,n,i)}from(t){return new Ow(this.url,this.headers,t,this.fetch)}get vectors(){return new Yw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Fw(this.url+"/iceberg",this.headers,this.fetch)}};const z2="2.90.1",Ac=30*1e3,N0=3,e0=N0*Ac,Qw="http://localhost:9999",Zw="supabase.auth.token",eS={"X-Client-Info":`gotrue-js/${z2}`},A0="X-Supabase-Api-Version",H2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nS=600*1e3;class Vd extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function gt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class iS extends Vd{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function rS(t){return gt(t)&&t.name==="AuthApiError"}class mu extends Vd{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class To extends Vd{constructor(e,n,i,a){super(e,i,a),this.name=n,this.status=i}}class hs extends To{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sS(t){return gt(t)&&t.name==="AuthSessionMissingError"}class gc extends To{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $f extends To{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jf extends To{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aS(t){return gt(t)&&t.name==="AuthImplicitGrantRedirectError"}class iy extends To{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oS extends To{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class T0 extends To{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function t0(t){return gt(t)&&t.name==="AuthRetryableFetchError"}class ry extends To{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class E0 extends To{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ah="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sy=` 	
\r=`.split(""),lS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<sy.length;e+=1)t[sy[e].charCodeAt(0)]=-2;for(let e=0;e<ah.length;e+=1)t[ah[e].charCodeAt(0)]=e;return t})();function ay(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(ah[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(ah[i]),e.queuedBits-=6}}function G2(t,e,n){const i=lS[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function oy(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{dS(l,i,n)};for(let l=0;l<t.length;l+=1)G2(t.charCodeAt(l),a,o);return e.join("")}function uS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function cS(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}uS(i,e)}}function dS(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Dc(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)G2(t.charCodeAt(a),n,i);return new Uint8Array(e)}function fS(t){const e=[];return cS(t,n=>e.push(n)),new Uint8Array(e)}function gu(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};return t.forEach(a=>ay(a,n,i)),ay(null,n,i),e.join("")}function hS(t){return Math.round(Date.now()/1e3)+t}function pS(){return Symbol("auth-callback")}const rr=()=>typeof window<"u"&&typeof document<"u",uu={tested:!1,writable:!1},V2=()=>{if(!rr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(uu.tested)return uu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),uu.tested=!0,uu.writable=!0}catch{uu.tested=!0,uu.writable=!1}return uu.writable};function mS(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return n.searchParams.forEach((i,a)=>{e[a]=i}),e}const $2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),gS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Tc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},cu=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ir=async(t,e)=>{await t.removeItem(e)};class Sh{constructor(){this.promise=new Sh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Sh.promiseConstructor=Promise;function n0(t){const e=t.split(".");if(e.length!==3)throw new E0("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!tS.test(e[i]))throw new E0("JWT not in base64url format");return{header:JSON.parse(oy(e[0])),payload:JSON.parse(oy(e[1])),signature:Dc(e[2]),raw:{header:e[0],payload:e[1]}}}async function vS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function yS(t,e){return new Promise((i,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){i(l);return}}catch(l){if(!e(o,l)){a(l);return}}})()})}function bS(t){return("0"+t.toString(16)).substr(-2)}function xS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,bS).join("")}async function wS(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function SS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await wS(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vc(t,e,n=!1){const i=xS();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await Tc(t,`${e}-code-verifier`,a);const o=await SS(i);return[o,i===o?"plain":"s256"]}const _S=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NS(t){const e=t.headers.get(A0);if(!e||!e.match(_S))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function AS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function TS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ES=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yc(t){if(!ES.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function i0(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function CS(t,e){return new Proxy(t,{get:(n,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,a)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,a)}})}function ly(t){return JSON.parse(JSON.stringify(t))}const du=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kS=[502,503,504];async function uy(t){var e;if(!gS(t))throw new T0(du(t),0);if(kS.includes(t.status))throw new T0(du(t),t.status);let n;try{n=await t.json()}catch(o){throw new mu(du(o),o)}let i;const a=NS(t);if(a&&a.getTime()>=H2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new ry(du(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new hs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new ry(du(n),t.status,n.weak_password.reasons);throw new iS(du(n),t.status||500,i)}const IS=(t,e,n,i)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function It(t,e,n,i){var a;const o=Object.assign({},i==null?void 0:i.headers);o[A0]||(o[A0]=H2["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const l=(a=i==null?void 0:i.query)!==null&&a!==void 0?a:{};i!=null&&i.redirectTo&&(l.redirect_to=i.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await RS(t,e,n+c,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(d):{data:Object.assign({},d),error:null}}async function RS(t,e,n,i,a,o){const l=IS(e,i,a,o);let c;try{c=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new T0(du(d),0)}if(c.ok||await uy(c),i!=null&&i.noResolveJson)return c;try{return await c.json()}catch(d){await uy(d)}}function ra(t){var e;let n=null;MS(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=hS(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function cy(t){const e=ra(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function xl(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function LS(t){return{data:t,error:null}}function DS(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o}=t,l=xh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o},d=Object.assign({},l);return{data:{properties:c,user:d},error:null}}function dy(t){return t}function MS(t){return t.access_token&&t.refresh_token&&t.expires_in}const r0=["global","local","others"];class PS{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=$2(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=r0[0]){if(r0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${r0.join(", ")}`);try{return await It(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(gt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await It(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:xl})}catch(i){if(gt(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=xh(e,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i==null?void 0:i.newEmail,delete a.newEmail),await It(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:DS,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(gt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await It(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xl})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,a,o,l,c,d;try{const h={nextPage:null,lastPage:0,total:0},v=await It(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:dy});if(v.error)throw v.error;const b=await v.json(),w=(l=v.headers.get("x-total-count"))!==null&&l!==void 0?l:0,_=(d=(c=v.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(T.split(";")[1].split("=")[1]);h[`${R}Page`]=k}),h.total=parseInt(w)),{data:Object.assign(Object.assign({},b),h),error:null}}catch(h){if(gt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){yc(e);try{return await It(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xl})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){yc(e);try{return await It(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:xl})}catch(i){if(gt(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){yc(e);try{return await It(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:xl})}catch(i){if(gt(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){yc(e.userId);try{const{data:n,error:i}=await It(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){yc(e.userId),yc(e.id);try{return{data:await It(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,a,o,l,c,d;try{const h={nextPage:null,lastPage:0,total:0},v=await It(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:dy});if(v.error)throw v.error;const b=await v.json(),w=(l=v.headers.get("x-total-count"))!==null&&l!==void 0?l:0,_=(d=(c=v.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(T=>{const k=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(T.split(";")[1].split("=")[1]);h[`${R}Page`]=k}),h.total=parseInt(w)),{data:Object.assign(Object.assign({},b),h),error:null}}catch(h){if(gt(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await It(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await It(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await It(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(gt(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await It(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await It(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(gt(n))return{data:null,error:n};throw n}}}function fy(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const bc={debug:!!(globalThis&&V2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class J2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class US extends J2{}async function OS(t,e,n){bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),bc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new US(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(bc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function jS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Y2(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function FS(t){return parseInt(t,16)}function BS(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function qS(t){var e;const{chainId:n,domain:i,expirationTime:a,issuedAt:o=new Date,nonce:l,notBefore:c,requestId:d,resources:h,scheme:v,uri:b,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const _=Y2(t.address),T=v?`${v}://${i}`:i,k=t.statement?`${t.statement}
`:"",R=`${T} wants you to sign in with your Ethereum account:
${_}

${k}`;let C=`URI: ${b}
Version: ${w}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(a&&(C+=`
Expiration Time: ${a.toISOString()}`),c&&(C+=`
Not Before: ${c.toISOString()}`),d&&(C+=`
Request ID: ${d}`),h){let I=`
Resources:`;for(const L of h){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);I+=`
- ${L}`}C+=I}return`${R}
${C}`}class Ti extends Error{constructor({message:e,code:n,cause:i,name:a}){var o;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(o=a??(i instanceof Error?i.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class oh extends Ti{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function zS({error:t,options:e}){var n,i,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ti({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ti({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ti({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ti({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ti({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ti({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Ti({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ti({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(W2(l)){if(o.rp.id!==l)return new Ti({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ti({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ti({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ti({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ti({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function HS({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ti({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ti({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(W2(i)){if(n.rpId!==i)return new Ti({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ti({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ti({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ti({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class GS{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const VS=new GS;function $S(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:i}=t,a=xh(t,["challenge","user","excludeCredentials"]),o=Dc(e).buffer,l=Object.assign(Object.assign({},n),{id:Dc(n.id).buffer}),c=Object.assign(Object.assign({},a),{challenge:o,user:l});if(i&&i.length>0){c.excludeCredentials=new Array(i.length);for(let d=0;d<i.length;d++){const h=i[d];c.excludeCredentials[d]=Object.assign(Object.assign({},h),{id:Dc(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return c}function JS(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,i=xh(t,["challenge","allowCredentials"]),a=Dc(e).buffer,o=Object.assign(Object.assign({},i),{challenge:a});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},c),{id:Dc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function YS(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:gu(new Uint8Array(t.response.attestationObject)),clientDataJSON:gu(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function WS(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,i=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:gu(new Uint8Array(a.authenticatorData)),clientDataJSON:gu(new Uint8Array(a.clientDataJSON)),signature:gu(new Uint8Array(a.signature)),userHandle:a.userHandle?gu(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function W2(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function hy(){var t,e;return!!(rr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function KS(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new oh("Browser returned unexpected credential type",e)}:{data:null,error:new oh("Empty credential response",e)}}catch(e){return{data:null,error:zS({error:e,options:t})}}}async function XS(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new oh("Browser returned unexpected credential type",e)}:{data:null,error:new oh("Empty credential response",e)}}catch(e){return{data:null,error:HS({error:e,options:t})}}}const QS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ZS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lh(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of t)if(a)for(const o in a){const l=a[o];if(l!==void 0)if(Array.isArray(l))i[o]=l;else if(n(l))i[o]=l;else if(e(l)){const c=i[o];e(c)?i[o]=lh(c,l):i[o]=lh(l)}else i[o]=l}return i}function e_(t,e){return lh(QS,t,e||{})}function t_(t,e){return lh(ZS,t,e||{})}class n_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:a},o){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:c};const d=a??VS.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${i}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=e_(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:v,error:b}=await KS({publicKey:h,signal:d});return v?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}case"request":{const h=t_(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:v,error:b}=await XS(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:d}));return v?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:b}}}}catch(l){return gt(l)?{data:null,error:l}:{data:null,error:new mu("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new Vd("rpId is required for WebAuthn authentication")};try{if(!hy())return{data:null,error:new mu("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:a},{request:o});if(!l)return{data:null,error:c};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:i,credential_response:d.credential_response}})}catch(l){return gt(l)?{data:null,error:l}:{data:null,error:new mu("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new Vd("rpId is required for WebAuthn registration")};try{if(!hy())return{data:null,error:new mu("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(v=>{var b;return(b=v.data)===null||b===void 0?void 0:b.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:c};const{data:d,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:a},{create:o});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:i,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(l){return gt(l)?{data:null,error:l}:{data:null,error:new mu("Unexpected error in register",l)}}}}jS();const i_={url:Qw,storageKey:Zw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function py(t,e,n){return await n()}const xc={};class $d{get jwks(){var e,n;return(n=(e=xc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){xc[this.storageKey]=Object.assign(Object.assign({},xc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=xc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){xc[this.storageKey]=Object.assign(Object.assign({},xc[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},i_),e);if(this.storageKey=o.storageKey,this.instanceID=(n=$d.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,$d.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&rr()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new PS({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=$2(o.fetch),this.lock=o.lock||py,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&rr()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=OS:this.lock=py,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new n_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:V2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fy(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=fy(this.memoryStorage)),rr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${z2}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(rr()&&(n=mS(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),rr()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),aS(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return gt(n)?this._returnResult({error:n}):this._returnResult({error:new mu("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,a;try{const o=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:ra}),{data:l,error:c}=o;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(o){if(gt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,i,a;try{let o;if("email"in e){const{email:v,password:b,options:w}=e;let _=null,T=null;this.flowType==="pkce"&&([_,T]=await vc(this.storage,this.storageKey)),o=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:v,password:b,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:_,code_challenge_method:T},xform:ra})}else if("phone"in e){const{phone:v,password:b,options:w}=e;o=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:b,data:(i=w==null?void 0:w.data)!==null&&i!==void 0?i:{},channel:(a=w==null?void 0:w.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:ra})}else throw new $f("You must provide either an email or phone number and a password");const{data:l,error:c}=o;if(c||!l)return await ir(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(o){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:c}=e;n=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:cy})}else if("phone"in e){const{phone:o,password:l,options:c}=e;n=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:cy})}else throw new $f("You must provide either an email or phone number and a password");const{data:i,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!i||!i.session||!i.user){const o=new gc;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,a,o,l,c,d,h,v,b,w;let _,T;if("message"in e)_=e.message,T=e.signature;else{const{chain:k,wallet:R,statement:C,options:I}=e;let L;if(rr())if(typeof R=="object")L=R;else{const ee=window;if("ethereum"in ee&&typeof ee.ethereum=="object"&&"request"in ee.ethereum&&typeof ee.ethereum.request=="function")L=ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=R}const O=new URL((n=I==null?void 0:I.url)!==null&&n!==void 0?n:window.location.href),q=await L.request({method:"eth_requestAccounts"}).then(ee=>ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=Y2(q[0]);let F=(i=I==null?void 0:I.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!F){const ee=await L.request({method:"eth_chainId"});F=FS(ee)}const z={domain:O.host,address:W,statement:C,uri:O.href,version:"1",chainId:F,nonce:(a=I==null?void 0:I.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(o=I==null?void 0:I.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=I==null?void 0:I.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=I==null?void 0:I.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=I==null?void 0:I.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(v=I==null?void 0:I.signInWithEthereum)===null||v===void 0?void 0:v.resources};_=qS(z),T=await L.request({method:"personal_sign",params:[BS(_),W]})}try{const{data:k,error:R}=await It(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:T},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ra});if(R)throw R;if(!k||!k.session||!k.user){const C=new gc;return this._returnResult({data:{user:null,session:null},error:C})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:R})}catch(k){if(gt(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(e){var n,i,a,o,l,c,d,h,v,b,w,_;let T,k;if("message"in e)T=e.message,k=e.signature;else{const{chain:R,wallet:C,statement:I,options:L}=e;let O;if(rr())if(typeof C=="object")O=C;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))O=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=C}const q=new URL((n=L==null?void 0:L.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const W=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L==null?void 0:L.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),I?{statement:I}:null));let F;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")F=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)F=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)T=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),k=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${q.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(a=(i=L==null?void 0:L.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=L==null?void 0:L.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((l=L==null?void 0:L.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((c=L==null?void 0:L.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((d=L==null?void 0:L.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((h=L==null?void 0:L.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((b=(v=L==null?void 0:L.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||b===void 0)&&b.length?["Resources",...L.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const W=await O.signMessage(new TextEncoder().encode(T),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=W}}try{const{data:R,error:C}=await It(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:gu(k)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:ra});if(C)throw C;if(!R||!R.session||!R.user){const I=new gc;return this._returnResult({data:{user:null,session:null},error:I})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:C})}catch(R){if(gt(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const n=await cu(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new oS;const{data:o,error:l}=await It(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ra});if(await ir(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const c=new gc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:i,token:a,access_token:o,nonce:l}=e,c=await It(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ra}),{data:d,error:h}=c;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d||!d.session||!d.user){const v=new gc;return this._returnResult({data:{user:null,session:null},error:v})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:h})}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,a,o,l;try{if("email"in e){const{email:c,options:d}=e;let h=null,v=null;this.flowType==="pkce"&&([h,v]=await vc(this.storage,this.storageKey));const{error:b}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:v},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:c,options:d}=e,{data:h,error:v}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:v})}throw new $f("You must provide either an email or phone number.")}catch(c){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var n,i;try{let a,o;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:c}=await It(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ra});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,h=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(a){if(gt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,i,a,o,l;try{let c=null,d=null;this.flowType==="pkce"&&([c,d]=await vc(this.storage,this.storageKey));const h=await It(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:LS});return!((o=h.data)===null||o===void 0)&&o.url&&rr()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(c){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new hs;const{error:a}=await It(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(gt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:o}=e,{error:l}=await It(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:i,type:a,options:o}=e,{data:l,error:c}=await It(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c})}throw new $f("You must provide either an email or phone number and a type")}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await cu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<e0:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await cu(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=i0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=CS(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xl}):await this._useSession(async n=>{var i,a,o;const{data:l,error:c}=n;if(c)throw c;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new hs}:await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:xl})})}catch(n){if(gt(n))return sS(n)&&(await this._removeSession(),await ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:a,error:o}=i;if(o)throw o;if(!a.session)throw new hs;const l=a.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await vc(this.storage,this.storageKey));const{data:h,error:v}=await It(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:l.access_token,xform:xl});if(v)throw v;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(i){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new hs;const n=Date.now()/1e3;let i=n,a=!0,o=null;const{payload:l}=n0(e.access_token);if(l.exp&&(i=l.exp,a=i<=n),a){const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(gt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:l,error:c}=n;if(c)throw c;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new hs;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!rr())throw new Jf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new iy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new iy("No code detected.");const{data:I,error:L}=await this._exchangeCodeForSession(e.code);if(L)throw L;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:c,expires_at:d,token_type:h}=e;if(!o||!c||!l||!h)throw new Jf("No session defined in URL");const v=Math.round(Date.now()/1e3),b=parseInt(c);let w=v+b;d&&(w=parseInt(d));const _=w-v;_*1e3<=Ac&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${b}s`);const T=w-b;v-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,w,v):v-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,w,v);const{data:k,error:R}=await this._getUser(o);if(R)throw R;const C={provider_token:i,provider_refresh_token:a,access_token:o,expires_in:b,expires_at:w,refresh_token:l,token_type:h,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(i){if(gt(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await cu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({error:o});const l=(i=a.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(rS(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await ir(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=pS(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,a;try{const{data:{session:o},error:l}=n;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await vc(this.storage,this.storageKey,!0));try{return await It(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:a}=await this._useSession(async o=>{var l,c,d,h,v;const{data:b,error:w}=o;if(w)throw w;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await It(this.fetch,"GET",_,{headers:this.headers,jwt:(v=(h=b.session)===null||h===void 0?void 0:h.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return rr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(gt(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:a,data:{session:o}}=n;if(a)throw a;const{options:l,provider:c,token:d,access_token:h,nonce:v}=e,b=await It(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o==null?void 0:o.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:d,access_token:h,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ra}),{data:w,error:_}=b;return _?this._returnResult({data:{user:null,session:null},error:_}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new gc}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:_}))}catch(a){if(await ir(this.storage,`${this.storageKey}-code-verifier`),gt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)throw l;return await It(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await yS(async a=>(a>0&&await vS(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await It(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ra})),(a,o)=>{const l=200*Math.pow(2,a);return o&&t0(o)&&Date.now()+l-i<Ac})}catch(i){if(this._debug(n,"error",i),gt(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),rr()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await cu(this.storage,this.storageKey);if(a&&this.userStorage){let l=await cu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Tc(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:i0()}else if(a&&!a.user&&!a.user){const l=await cu(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await ir(this.storage,this.storageKey+"-user"),await Tc(this.storage,this.storageKey,a)):a.user=i0()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<e0;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${e0}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),t0(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(a.access_token);!c&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new hs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Sh;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new hs;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(a,"error",o),gt(o)){const l={data:null,error:o};return t0(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ir(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Tc(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=ly(a);await Tc(this.storage,this.storageKey,o)}else{const a=ly(n);await Tc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ir(this.storage,this.storageKey),await ir(this.storage,this.storageKey+"-code-verifier"),await ir(this.storage,this.storageKey+"-user"),this.userStorage&&await ir(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ac);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/Ac);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ac}ms, refresh threshold is ${N0} ticks`),a<=N0&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof J2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,l]=await vc(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(c.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);a.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;return o?this._returnResult({data:null,error:o}):await It(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:h}=await It(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&d.type==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?YS(e.webauthn.credential_response):WS(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:d}=await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:d}))})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:$S(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:JS(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:i},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=n0(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(e=i.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?await It(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new hs})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new hs});const l=await It(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&rr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(gt(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new hs});const l=await It(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&rr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(i){if(gt(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await It(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new hs})})}catch(e){if(gt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?(await It(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new hs})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(c=>c.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(c=>c.kid===e),i&&this.jwks_cached_at+nS>a)return i;const{data:o,error:l}=await It(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,i=o.keys.find(c=>c.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:_,error:T}=await this.getSession();if(T||!_.session)return this._returnResult({data:null,error:T});i=_.session.access_token}const{header:a,payload:o,signature:l,raw:{header:c,payload:d}}=n0(i);n!=null&&n.allowExpired||AS(o.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:_}=await this.getUser(i);if(_)throw _;return{data:{claims:o,header:a,signature:l},error:null}}const v=TS(a.alg),b=await crypto.subtle.importKey("jwk",h,v,!0,["verify"]);if(!await crypto.subtle.verify(v,b,l,fS(`${c}.${d}`)))throw new E0("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(i){if(gt(i))return this._returnResult({data:null,error:i});throw i}}}$d.nextInstanceID={};const r_=$d,s_="2.90.1";let Ld="";typeof Deno<"u"?Ld="deno":typeof document<"u"?Ld="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ld="react-native":Ld="node";const a_={"X-Client-Info":`supabase-js-${Ld}/${s_}`},o_={headers:a_},l_={schema:"public"},u_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},c_={};function Jd(t){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(t)}function d_(t,e){if(Jd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Jd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f_(t){var e=d_(t,"string");return Jd(e)=="symbol"?e:e+""}function h_(t,e,n){return(e=f_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function my(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function ui(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?my(Object(n),!0).forEach(function(i){h_(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):my(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const p_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),m_=()=>Headers,g_=(t,e,n)=>{const i=p_(n),a=m_();return async(o,l)=>{var c;const d=(c=await e())!==null&&c!==void 0?c:t;let h=new a(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),i(o,ui(ui({},l),{},{headers:h}))}};function v_(t){return t.endsWith("/")?t:t+"/"}function y_(t,e){var n,i;const{db:a,auth:o,realtime:l,global:c}=t,{db:d,auth:h,realtime:v,global:b}=e,w={db:ui(ui({},d),a),auth:ui(ui({},h),o),realtime:ui(ui({},v),l),storage:{},global:ui(ui(ui({},b),c),{},{headers:ui(ui({},(n=b==null?void 0:b.headers)!==null&&n!==void 0?n:{}),(i=c==null?void 0:c.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function b_(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(v_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var x_=class extends r_{constructor(t){super(t)}},w_=class{constructor(t,e,n){var i,a;this.supabaseUrl=t,this.supabaseKey=e;const o=b_(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:l_,realtime:c_,auth:ui(ui({},u_),{},{storageKey:l}),global:o_},d=y_(n??{},c);if(this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(v,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=d.auth)!==null&&h!==void 0?h:{},this.headers,d.global.fetch)}this.fetch=g_(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(ui({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new ew(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Xw(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Wx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:i}=await t.auth.getSession();return(e=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:l,lock:c,debug:d,throwOnError:h},v,b){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new x_({url:this.authUrl.href,headers:ui(ui({},w),v),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:a,flowType:l,lock:c,debug:d,throwOnError:h,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new vw(this.realtimeUrl.href,ui(ui({},t),{},{params:ui(ui({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const S_=(t,e,n)=>new w_(t,e,n);function __(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}__()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const N_="https://azyeptjbktvkqiigotbi.supabase.co",A_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6eWVwdGpia3R2a3FpaWdvdGJpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4ODc0MjYsImV4cCI6MjA4MzQ2MzQyNn0.XHc7sOAgRW9AQJvOFVQ25R0ovsIr8Bxnv_hukDag2LY",jn=S_(N_,A_),wc=t=>{var e;return((e=t==null?void 0:t.message)==null?void 0:e.includes("Could not find the table"))||(t==null?void 0:t.code)==="PGRST116"||(t==null?void 0:t.code)==="42P01"},T_=t=>{const e=(t==null?void 0:t.message)||"";return(t==null?void 0:t.code)==="PGRST107"||(t==null?void 0:t.code)==="42703"||e.includes("Could not find the")||e.includes("column")||e.includes("schema cache")},oi={async getProducts(){const{data:t,error:e}=await jn.from("products").select("*").order("name");if(e){if(wc(e))throw new Error("DATABASE_MISSING");return[]}return(t||[]).map(n=>({...n,company:n.company||(n.category.toLowerCase().includes("mirror")?"mirrorzone":"clonmel")}))},async addProduct(t){const{error:e}=await jn.from("products").insert([t]);if(e)throw e},async updateProduct(t){const{error:e}=await jn.from("products").update(t).eq("id",String(t.id));if(e)throw e},async deleteProduct(t){const{error:e}=await jn.from("products").delete().eq("id",String(t));if(e)throw e},async getInvoices(){const{data:t,error:e}=await jn.from("invoices").select("*").order("date_issued",{ascending:!1});if(e){if(wc(e))throw new Error("DATABASE_MISSING");return[]}return(t||[]).map(n=>({...n,invoiceNumber:String(n.invoice_number||""),customerId:String(n.customer_id||""),customerName:String(n.customer_name||""),customerEmail:String(n.customer_email||""),customerPhone:String(n.customer_phone||""),customerAddress:String(n.customer_address||""),taxRate:Number(n.tax_rate||0),taxAmount:Number(n.tax_amount||0),amountPaid:Number(n.amount_paid||0),balanceDue:Number(n.balance_due||0),dateIssued:String(n.date_issued||""),dueDate:String(n.due_date||""),createdBy:String(n.created_by||""),lastReminderSent:n.last_reminder_sent?String(n.last_reminder_sent):void 0,documentType:n.document_type?String(n.document_type):void 0,validUntil:n.valid_until?String(n.valid_until):void 0,paymentDate:n.payment_date?String(n.payment_date):void 0}))},async addInvoice(t){const e={id:String(t.id),invoice_number:String(t.invoiceNumber),customer_id:String(t.customerId),customer_name:String(t.customerName),customer_email:String(t.customerEmail),customer_phone:String(t.customerPhone||""),customer_address:String(t.customerAddress),company:String(t.company||"clonmel"),items:t.items,subtotal:Number(t.subtotal),tax_rate:Number(t.taxRate),tax_amount:Number(t.taxAmount),total:Number(t.total),amount_paid:Number(t.amountPaid),balance_due:Number(t.balanceDue),status:String(t.status),date_issued:String(t.dateIssued),due_date:String(t.dueDate),notes:String(t.notes||""),created_by:String(t.createdBy),last_reminder_sent:t.lastReminderSent?String(t.lastReminderSent):null,document_type:t.documentType?String(t.documentType):"invoice",valid_until:t.validUntil?String(t.validUntil):null,payment_date:t.paymentDate?String(t.paymentDate):null},{error:n}=await jn.from("invoices").insert([e]);if(n)throw n},async updateInvoice(t){const e={};if(t.items!==void 0&&(e.items=t.items),t.subtotal!==void 0&&(e.subtotal=Number(t.subtotal)),t.taxRate!==void 0&&(e.tax_rate=Number(t.taxRate)),t.taxAmount!==void 0&&(e.tax_amount=Number(t.taxAmount)),t.total!==void 0&&(e.total=Number(t.total)),t.notes!==void 0&&(e.notes=String(t.notes)),t.customerName!==void 0&&(e.customer_name=String(t.customerName)),t.customerEmail!==void 0&&(e.customer_email=String(t.customerEmail)),t.customerPhone!==void 0&&(e.customer_phone=String(t.customerPhone)),t.customerAddress!==void 0&&(e.customer_address=String(t.customerAddress)),t.dateIssued!==void 0&&(e.date_issued=String(t.dateIssued)),t.dueDate!==void 0&&(e.due_date=String(t.dueDate)),t.company!==void 0&&(e.company=String(t.company)),t.documentType!==void 0&&(e.document_type=String(t.documentType)),t.validUntil!==void 0&&(e.valid_until=String(t.validUntil)),t.amountPaid!==void 0&&(e.amount_paid=Number(t.amountPaid)),t.balanceDue!==void 0&&(e.balance_due=Number(t.balanceDue)),t.status!==void 0&&(e.status=String(t.status)),t.lastReminderSent!==void 0&&(e.last_reminder_sent=t.lastReminderSent?String(t.lastReminderSent):null),t.paymentDate!==void 0&&(e.payment_date=t.paymentDate?String(t.paymentDate):null),Object.keys(e).length===0)return;const{error:n}=await jn.from("invoices").update(e).eq("id",String(t.id));if(n){if(T_(n)&&e.last_reminder_sent!==void 0){const i=new Error("COLUMN_MISSING_REMINDER");throw i.originalError=n,i}throw n}},async deleteInvoice(t){const{error:e}=await jn.from("invoices").delete().eq("id",String(t));if(e)throw e},async getUsers(){const{data:t,error:e}=await jn.from("users").select("*");if(e){if(wc(e))throw new Error("DATABASE_MISSING");return[]}return t||[]},async addUser(t){const{error:e}=await jn.from("users").insert([t]);if(e)throw e},async updateUser(t){const{error:e}=await jn.from("users").update(t).eq("id",t.id);if(e)throw e},async deleteUser(t){const{error:e}=await jn.from("users").delete().eq("id",t);if(e)throw e},async getLogo(){try{const{data:t,error:e}=await jn.from("app_settings").select("value").eq("key","company_logo").maybeSingle();if(e&&wc(e))throw new Error("DATABASE_MISSING");return(t==null?void 0:t.value)||""}catch(t){if(t instanceof Error&&t.message==="DATABASE_MISSING")throw t;return""}},async saveLogo(t){const{error:e}=await jn.from("app_settings").upsert({key:"company_logo",value:t});if(e)throw e},async getSettings(){try{const{data:t,error:e}=await jn.from("app_settings").select("value").eq("key","global_settings").maybeSingle();return e&&wc(e)||!t?null:typeof t.value=="string"?JSON.parse(t.value):t.value}catch{return null}},async saveSettings(t){const{error:e}=await jn.from("app_settings").upsert({key:"global_settings",value:JSON.stringify(t)});if(e)throw e},async getCustomers(){const{data:t,error:e}=await jn.from("customers").select("*").order("name");if(e){if(wc(e))throw new Error("DATABASE_MISSING");return[]}return(t||[]).map(n=>({...n,createdAt:String(n.created_at||""),updatedAt:String(n.updated_at||""),createdBy:String(n.created_by||""),postalCode:n.postal_code}))},async addCustomer(t){const e={id:String(t.id),name:String(t.name),email:t.email||null,phone:t.phone||null,address:t.address||null,address_line_2:t.addressLine2||null,city:t.city||null,postal_code:t.postalCode||null,country:t.country||"Ireland",company:t.company||null,notes:t.notes||null,tags:t.tags||[],created_at:t.createdAt,updated_at:t.updatedAt,created_by:t.createdBy||"system"},{error:n}=await jn.from("customers").insert([e]);if(n)throw n},async updateCustomer(t){const e={name:String(t.name),email:t.email||null,phone:t.phone||null,address:t.address||null,address_line_2:t.addressLine2||null,city:t.city||null,postal_code:t.postalCode||null,country:t.country||"Ireland",company:t.company||null,notes:t.notes||null,tags:t.tags||[],updated_at:new Date().toISOString()},{error:n}=await jn.from("customers").update(e).eq("id",t.id);if(n)throw n},async deleteCustomer(t){const{error:e}=await jn.from("customers").delete().eq("id",String(t));if(e)throw e},async exportFullBackup(){const[t,e,n,i]=await Promise.all([this.getProducts(),this.getInvoices(),this.getUsers(),this.getLogo()]);return JSON.stringify({products:t,invoices:e,users:n,logo:i,exportedAt:new Date().toISOString()},null,2)},async seedData(t,e){const{error:n}=await jn.from("products").upsert(t,{onConflict:"id"});n&&console.error("Error seeding products:",n);const{error:i}=await jn.from("users").upsert(e,{onConflict:"id"});i&&console.error("Error seeding users:",i)}},E_=async(t,e,n,i)=>{if(!n.xeroWebhookUrl)throw new Error("Xero Webhook URL not configured");const o={Type:"ACCREC",Contact:{Name:(e==null?void 0:e.name)||t.customerName||"Unknown Customer",EmailAddress:(e==null?void 0:e.email)||t.customerEmail||"",Phones:e!=null&&e.phone?[{PhoneType:"DEFAULT",PhoneNumber:e.phone}]:[],Addresses:[{AddressType:"POBOX",AddressLine1:(e==null?void 0:e.address)||t.customerAddress||"",AddressLine2:(e==null?void 0:e.addressLine2)||"",City:(e==null?void 0:e.city)||"",Region:(e==null?void 0:e.region)||"",PostalCode:(e==null?void 0:e.postalCode)||"",Country:(e==null?void 0:e.country)||""}]},Date:t.dateIssued.split("T")[0],DueDate:t.dueDate.split("T")[0],Reference:t.invoiceNumber,Status:"AUTHORISED",LineAmountTypes:"Exclusive",LineItems:t.items.map(l=>{const c=l.unit==="sqm"||l.description&&l.description.toLowerCase().includes("sqm"),d=(t.taxRate||0)/100;if(c&&l.quantity%1!==0){const b=Math.ceil(l.quantity),w=l.quantity*l.unitPrice,_=w/b,T=w*d;return{Description:`${l.description} (Qty Adjusted: ${l.quantity} -> ${b})`,Quantity:b,UnitAmount:Number(_.toFixed(4)),TaxAmount:Number(T.toFixed(2)),AccountCode:"200"}}const v=l.quantity*l.unitPrice*d;return{Description:l.description,Quantity:l.quantity,UnitAmount:l.unitPrice,TaxAmount:Number(v.toFixed(2)),AccountCode:"200"}}),_metadata:{source:"Clonmel Glass Invoice Hub",transferredBy:(i==null?void 0:i.email)||"system",timestamp:new Date().toISOString(),company:n.companyName}};try{return(await fetch(n.xeroWebhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok}catch(l){return console.error("Xero Transfer Failed:",l),!1}},C_=async(t,e)=>{const n="https://n8n.srv990376.hstgr.cloud/webhook/121e532a-bdc0-425c-97ea-65eb851922f1";try{return(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,otp:e,type:"password_reset",timestamp:new Date().toISOString()})})).ok}catch(i){return console.error("Failed to send OTP email:",i),!1}},k_=[{id:"u1",name:"Admin User",email:"admin@clonmel.com",role:ps.ADMIN,avatar:"https://i.pravatar.cc/150?u=admin"},{id:"u2",name:"John Staff",email:"john@clonmel.com",role:ps.USER,avatar:"https://i.pravatar.cc/150?u=john"}],I_={taxRate:23,companyName:"Clonmel Glass & Mirrors Ltd",companyAddress:"Unit 3, Clonmel Business Park, Clonmel, Co. Tipperary",companyPhone:"+353 52 123 4567",companyEmail:"accounts@clonmelglass.ie",companyWebsite:"www.clonmelglass.ie",vatNumber:"IE 1234567T",bankName:"Bank of Ireland",accountName:"Clonmel Glass Ltd",iban:"IE93 BOFI 9000 1234 5678 90",bic:"BOFIE2D",defaultNotes:"Payment due within 30 days. Please quote invoice number on all payments."},K2=Fe.createContext(void 0),R_=({children:t})=>{const e=Fe.useRef(!1),[n,i]=Fe.useState(null),[a,o]=Fe.useState("LOGIN"),[l,c]=Fe.useState(null),[d,h]=Fe.useState(!1),[v,b]=Fe.useState(!0),[w,_]=Fe.useState(!1),[T,k]=Fe.useState(null),[R,C]=Fe.useState([]),[I,L]=Fe.useState([]),[O,q]=Fe.useState([]),[W,F]=Fe.useState([]),[z,ee]=Fe.useState(""),[le,B]=Fe.useState(I_),j=async()=>{if(!e.current){e.current=!0,b(!0),_(!1);try{const we=new Promise((at,Ye)=>setTimeout(()=>Ye(new Error("INIT_TIMEOUT")),2e3)),[Pe,Ue,et,Ie,ue]=await Promise.race([Promise.all([oi.getUsers(),oi.getProducts(),oi.getInvoices(),oi.getCustomers(),oi.getLogo()]),we]);if(Pe.length===0&&!w){console.log("Empty Users DB detected. Seeding initial users..."),await oi.seedData([],k_);const at=await oi.getUsers();C(at)}else C(Pe);L(Ue),q(et),F(Ie),ee(ue);const yt=await oi.getSettings();yt&&B(at=>({...at,...yt})),_(!1)}catch(we){console.error("Initialization failed:",we),(we.message==="DATABASE_MISSING"||we.message==="INIT_TIMEOUT")&&(_(!0),C([]),L([]),q([]))}finally{b(!1),localStorage.getItem("currentUser")&&o(w?"PRODUCTS":"DASHBOARD")}}};Fe.useEffect(()=>{const we=localStorage.getItem("currentUser");if(we)try{const Pe=JSON.parse(we);i(Pe)}catch(Pe){console.error("Failed to restore session",Pe),localStorage.removeItem("currentUser")}j()},[]);const ne=async(we,Pe)=>{if(!Pe)throw new Error("Password required");const{data:Ue,error:et}=await jn.from("users").select("*").eq("email",we).eq("password",Pe).single();if(et||!Ue)throw new Error("Invalid email or password");const Ie=Ue;i(Ie),localStorage.setItem("currentUser",JSON.stringify(Ie)),o("DASHBOARD")},re=async()=>{i(null),localStorage.removeItem("currentUser"),o("LOGIN")},be=async we=>{const Pe=Math.floor(1e5+Math.random()*9e5).toString(),Ue=Date.now()+300*1e3,{error:et,count:Ie}=await jn.from("users").update({reset_otp:Pe,reset_otp_expires:Ue}).eq("email",we).select();if(et)throw et;try{if(await C_(we,Pe))console.log(`[EMAIL SENT] To: ${we}, OTP: ${Pe}`);else throw new Error("Failed to send OTP email")}catch(ue){throw console.error("Email send failed",ue),new Error("Failed to send OTP email. Please try again.")}},P=async(we,Pe,Ue)=>{const{data:et,error:Ie}=await jn.from("users").select("*").eq("email",we).single();if(Ie||!et)throw new Error("User not found");const ue=et,yt=Date.now();if(ue.reset_otp!==Pe)throw new Error("Invalid OTP");if(parseInt(ue.reset_otp_expires)<yt)throw new Error("OTP Expired");const{error:at}=await jn.from("users").update({password:Ue,reset_otp:null,reset_otp_expires:null}).eq("id",ue.id);if(at)throw at},$=async we=>{h(!0);try{await oi.addUser(we),C(Pe=>[...Pe,we])}finally{h(!1)}},ie=async we=>{h(!0);try{await oi.updateUser(we),C(Pe=>Pe.map(Ue=>Ue.id===we.id?we:Ue))}finally{h(!1)}},ae=async we=>{const Pe=R;C(Ue=>Ue.filter(et=>et.id!==we)),h(!0);try{await oi.deleteUser(we)}catch(Ue){throw console.error("Delete failed, rolling back UI",Ue),C(Pe),Ue}finally{h(!1)}},he=async we=>{h(!0);try{await oi.addProduct(we),L(Pe=>[...Pe,we])}finally{h(!1)}},Ne=async we=>{h(!0);try{await oi.updateProduct(we),L(Pe=>Pe.map(Ue=>Ue.id===we.id?we:Ue))}finally{h(!1)}},D=async we=>{h(!0);try{await oi.deleteProduct(we),L(Pe=>Pe.filter(Ue=>Ue.id!==we))}finally{h(!1)}},H=async we=>{h(!0);try{await oi.addInvoice(we),q(Pe=>[we,...Pe])}finally{h(!1)}},K=async we=>{h(!0);try{await oi.updateInvoice(we),q(Pe=>Pe.map(Ue=>Ue.id===we.id?we:Ue))}finally{h(!1)}},Z=async we=>{const Pe=O;q(Ue=>Ue.filter(et=>et.id!==we)),h(!0);try{await oi.deleteInvoice(we)}catch(Ue){throw console.error("Delete failed, rolling back UI",Ue),q(Pe),Ue}finally{h(!1)}},se=async we=>{h(!0);try{await oi.saveLogo(we),ee(we)}catch(Pe){console.error("DB Error:",Pe)}finally{h(!1)}},de=async we=>{h(!0);try{await oi.saveSettings(we),B(we)}catch(Pe){throw console.error("Failed to save settings:",Pe),Pe}finally{h(!1)}},fe=async we=>{h(!0);try{await oi.addCustomer(we),F(Pe=>[...Pe,we])}finally{h(!1)}},me=async we=>{h(!0);try{await oi.updateCustomer(we),F(Pe=>Pe.map(Ue=>Ue.id===we.id?we:Ue))}finally{h(!1)}},Me=async we=>{h(!0);try{await oi.deleteCustomer(we),F(Pe=>Pe.filter(Ue=>Ue.id!==we))}finally{h(!1)}};return g.jsx(K2.Provider,{value:{user:n,login:ne,logout:re,resetPassword:be,verifyOtpAndReset:P,users:R,addUser:$,updateUser:ie,deleteUser:ae,products:I,addProduct:he,updateProduct:Ne,deleteProduct:D,invoices:O,addInvoice:H,updateInvoice:K,deleteInvoice:Z,customers:W,addCustomer:fe,updateCustomer:me,deleteCustomer:Me,currentView:a,setView:o,selectedInvoiceId:l,setSelectedInvoiceId:c,companyLogo:z,setCompanyLogo:se,isSyncing:d,isLoading:v,databaseError:w,refreshDatabase:j,editingInvoice:T,setEditingInvoice:k,settings:le,updateSettings:de},children:t})},Os=()=>{const t=Fe.useContext(K2);if(!t)throw new Error("useApp must be used within AppProvider");return t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D_=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),gy=t=>{const e=D_(t);return e.charAt(0).toUpperCase()+e.slice(1)},X2=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),M_=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var P_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=Fe.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:l,...c},d)=>Fe.createElement("svg",{ref:d,...P_,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:X2("lucide",a),...!o&&!M_(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,v])=>Fe.createElement(h,v)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=(t,e)=>{const n=Fe.forwardRef(({className:i,...a},o)=>Fe.createElement(U_,{ref:o,iconNode:e,className:X2(`lucide-${L_(gy(t))}`,`lucide-${t}`,i),...a}));return n.displayName=gy(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Q2=vt("activity",O_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],F_=vt("arrow-right",j_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],q_=vt("bell-ring",B_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],C0=vt("building-2",z_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Z2=vt("calculator",H_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],vy=vt("calendar-days",G_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_h=vt("calendar",V_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Yd=vt("check",$_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Y_=vt("chevron-down",J_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ud=vt("chevron-left",W_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],um=vt("chevron-right",K_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mc=vt("circle-alert",X_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]],Z_=vt("circle-arrow-right",Q_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],k0=vt("circle-check-big",eN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Nh=vt("circle-check",tN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],yy=vt("circle-plus",nN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],by=vt("circle-user",iN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sN=vt("circle-x",rN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Tl=vt("clock",aN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],lN=vt("cloud",oN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],cN=vt("credit-card",uN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],eb=vt("download",dN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]],tb=vt("euro",fN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uh=vt("eye",hN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],mN=vt("file-check",pN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M4.226 20.925A2 2 0 0 0 6 22h12a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.127",key:"wfxp4w"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m5 11-3 3",key:"1dgrs4"}],["path",{d:"m5 17-3-3h10",key:"1mvvaf"}]],vN=vt("file-output",gN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Oc=vt("file-text",yN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xN=vt("info",bN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],xy=vt("landmark",wN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],_N=vt("layers",SN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],wy=vt("layout-dashboard",NN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],TN=vt("log-out",AN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],cm=vt("mail",EN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],kN=vt("map-pin",CN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],RN=vt("menu",IN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ch=vt("package",LN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],I0=vt("pen",DN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],PN=vt("pencil",MN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],dm=vt("phone",UN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Sl=vt("plus",ON);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],s0=vt("refresh-ccw",jN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],BN=vt("ruler",FN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],dh=vt("save",qN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],jc=vt("search",zN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],nb=vt("send",HN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Sy=vt("settings",GN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ib=vt("square-pen",VN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],JN=vt("tag",$N);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],WN=vt("target",YN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],No=vt("trash-2",KN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],QN=vt("trending-up",XN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],eA=vt("triangle-alert",ZN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],rb=vt("upload",tA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sb=vt("user",nA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wd=vt("users",iA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],sA=vt("wand-sparkles",rA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ga=vt("x",aA),oA=({children:t})=>{const{user:e,logout:n,currentView:i,setView:a,isSyncing:o,databaseError:l}=Os(),[c,d]=bh.useState(!1);if(!e)return g.jsx(g.Fragment,{children:t});const h=({view:v,icon:b,label:w})=>g.jsxs("button",{onClick:()=>{a(v),d(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${i===v?"bg-brand-50 text-brand-600 font-medium":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[g.jsx(b,{size:20}),g.jsx("span",{children:w})]});return g.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[g.jsxs("aside",{className:"hidden md:flex w-64 flex-col bg-white border-r border-slate-200 shadow-sm",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 flex flex-col items-center relative",children:[g.jsx("img",{src:"/clonmel-logo.png",alt:"Clonmel Glass & Mirrors",className:"h-16 w-auto mb-3 object-contain",onError:v=>{var b;v.currentTarget.style.display="none",(b=v.currentTarget.nextElementSibling)==null||b.classList.remove("hidden")}}),g.jsx("div",{className:"h-12 w-12 bg-brand-500 rounded-lg flex items-center justify-center text-white font-bold text-xl mb-3 shadow-lg shadow-brand-500/30 hidden",children:"CG"}),g.jsxs("div",{className:"absolute top-4 right-4 flex items-center space-x-1",title:l?"Using Local Mock Data":"Connected to Cloud DB",children:[g.jsx("div",{className:`h-2 w-2 rounded-full ${o?"bg-purple-500 animate-pulse":l?"bg-amber-400":"bg-emerald-400"}`}),g.jsx("span",{className:`text-[8px] font-bold uppercase tracking-tighter ${l?"text-amber-500":"text-slate-400"}`,children:o?"SYNC":l?"MOCK":"LIVE"})]})]}),g.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[e.role===ps.ADMIN&&g.jsx(h,{view:"DASHBOARD",icon:wy,label:"Dashboard"}),g.jsx(h,{view:"CALENDAR",icon:vy,label:"Schedule"}),g.jsx(h,{view:"INVOICES",icon:Oc,label:"Invoices"}),g.jsx(h,{view:"QUOTES",icon:mN,label:"Quotes"}),g.jsx(h,{view:"CREATE_INVOICE",icon:yy,label:"New Invoice"}),g.jsx(h,{view:"CUSTOMERS",icon:by,label:"Customers"}),e.role===ps.ADMIN&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"pt-4 pb-2 px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Admin"}),g.jsx(h,{view:"PRODUCTS",icon:ch,label:"Products"}),g.jsx(h,{view:"USERS",icon:Wd,label:"Users"}),g.jsx(h,{view:"SETTINGS",icon:Sy,label:"Settings"})]})]}),g.jsxs("div",{className:"p-4 border-t border-slate-100",children:[g.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 mb-6 bg-slate-900 mx-4 rounded-xl border border-slate-800 shadow-lg relative overflow-hidden group",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),g.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center text-white font-black text-xs shadow-sm shadow-brand-500/10",children:e.name.charAt(0)}),g.jsxs("div",{className:"flex-1 min-w-0 relative z-10",children:[g.jsx("p",{className:"text-sm font-medium text-white truncate",children:e.name}),g.jsx("p",{className:"text-xs text-slate-400 truncate",children:e.role})]})]}),g.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm text-red-600 bg-red-50 hover:bg-red-100 rounded-md transition-colors",children:[g.jsx(TN,{size:16}),g.jsx("span",{children:"Sign Out"})]})]})]}),g.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[g.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-white border-b border-slate-200",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("div",{className:"h-8 w-8 bg-brand-500 rounded flex items-center justify-center text-white font-bold text-sm",children:"CG"}),g.jsx("span",{className:"font-bold text-slate-800 text-sm",children:"Clonmel Glass"})]}),g.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[g.jsxs("div",{className:"hidden sm:flex items-center space-x-1 bg-slate-100 px-2 py-1 rounded-full",children:[g.jsx("div",{className:`h-1.5 w-1.5 rounded-full ${o?"bg-purple-500 animate-pulse":l?"bg-amber-400":"bg-emerald-400"}`}),g.jsx("span",{className:`text-[8px] font-bold ${l?"text-amber-600":"text-slate-500"}`,children:o?"SYNC":l?"MOCK DATA":"LIVE DB"})]}),g.jsx("button",{onClick:()=>d(!c),className:"text-slate-600 p-2 hover:bg-slate-100 rounded-lg transition-colors",children:g.jsx(RN,{size:24})})]})]}),c&&g.jsx("div",{className:"fixed inset-0 z-50 bg-slate-900/50 md:hidden",onClick:()=>d(!1),children:g.jsxs("div",{className:"absolute top-0 right-0 h-full w-64 bg-white shadow-xl p-4",onClick:v=>v.stopPropagation(),children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("span",{className:"font-bold text-lg",children:"Menu"}),g.jsx("button",{onClick:()=>d(!1),className:"text-slate-500",children:""})]}),g.jsxs("nav",{className:"space-y-2",children:[e.role===ps.ADMIN&&g.jsx(h,{view:"DASHBOARD",icon:wy,label:"Dashboard"}),g.jsx(h,{view:"CALENDAR",icon:vy,label:"Schedule"}),g.jsx(h,{view:"INVOICES",icon:Oc,label:"Invoices"}),g.jsx(h,{view:"CREATE_INVOICE",icon:yy,label:"New Invoice"}),g.jsx(h,{view:"CUSTOMERS",icon:by,label:"Customers"}),e.role===ps.ADMIN&&g.jsxs(g.Fragment,{children:[g.jsx("hr",{className:"my-2 border-slate-100"}),g.jsx(h,{view:"PRODUCTS",icon:ch,label:"Products"}),g.jsx(h,{view:"USERS",icon:Wd,label:"Users"}),g.jsx(h,{view:"SETTINGS",icon:Sy,label:"Settings"})]}),g.jsx("hr",{className:"my-2 border-slate-100"}),g.jsx("button",{onClick:n,className:"w-full text-left px-4 py-3 text-red-600",children:"Sign Out"})]})]})}),g.jsx("main",{className:"flex-1 overflow-auto bg-slate-50 p-4 md:p-8",children:t})]})]})};var lA={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uA,cA;function dA(){return{geminiUrl:uA,vertexUrl:cA}}function fA(t,e,n,i){var a,o;if(!(t!=null&&t.baseUrl)){const l=dA();return e?(a=l.vertexUrl)!==null&&a!==void 0?a:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Eo{}function ut(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const o=e[a];return o!=null?String(o):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let h=0;h<d.length;h++){const v=d[h];y(v,e.slice(o+1),n[h])}else for(const h of d)y(h,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];y(d[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],a=t[i];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const a=e[i];if(a.endsWith("[]")){const o=a.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(c=>p(c,e.slice(i+1),n)):n}else return n}else t=t[a]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function hA(t,e){for(const[n,i]of Object.entries(e)){const a=n.split("."),o=i.split("."),l=new Set;let c=-1;for(let d=0;d<a.length;d++)if(a[d]==="*"){c=d;break}if(c!==-1&&o.length>c)for(let d=c;d<o.length;d++){const h=o[d];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}R0(t,a,o,0,l)}}function R0(t,e,n,i,a){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const d of c[l])R0(d,e,n,i+1,a)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!a.has(h)),d={};for(const h of c)d[h]=l[h];for(const[h,v]of Object.entries(d)){const b=[];for(const w of n.slice(i))w==="*"?b.push(h):b.push(w);y(l,b,v)}for(const h of c)delete l[h]}}else{const l=t;o in l&&R0(l[o],e,n,i+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fm(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pA(t){const e={},n=p(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function mA(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],vA(l)),e}function gA(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response"]);return l!=null&&y(e,["response"],yA(l)),e}function vA(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>bA(l))),y(e,["generatedVideos"],o)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function yA(t){const e={},n=p(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>xA(l))),y(e,["generatedVideos"],o)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function bA(t){const e={},n=p(t,["video"]);return n!=null&&y(e,["video"],TA(n)),e}function xA(t){const e={},n=p(t,["_self"]);return n!=null&&y(e,["video"],EA(n)),e}function wA(t){const e={},n=p(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function SA(t){const e={},n=p(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function _A(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response"]);return l!=null&&y(e,["response"],NA(l)),e}function NA(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const a=p(t,["documentName"]);return a!=null&&y(e,["documentName"],a),e}function ab(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response"]);return l!=null&&y(e,["response"],AA(l)),e}function AA(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const a=p(t,["documentName"]);return a!=null&&y(e,["documentName"],a),e}function TA(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],fm(i));const a=p(t,["encoding"]);return a!=null&&y(e,["mimeType"],a),e}function EA(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],fm(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _y;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_y||(_y={}));var Ny;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Ny||(Ny={}));var Ay;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Ay||(Ay={}));var _l;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(_l||(_l={}));var Ty;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ty||(Ty={}));var Ey;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ey||(Ey={}));var Cy;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Cy||(Cy={}));var ky;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ky||(ky={}));var Iy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Iy||(Iy={}));var Ry;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ry||(Ry={}));var Ly;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Ly||(Ly={}));var Dy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Dy||(Dy={}));var My;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(My||(My={}));var Py;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Py||(Py={}));var Uy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Uy||(Uy={}));var Oy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Oy||(Oy={}));var jy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(jy||(jy={}));var Fy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Fy||(Fy={}));var By;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(By||(By={}));var qy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(qy||(qy={}));var zy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(zy||(zy={}));var fh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(fh||(fh={}));var Hy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Hy||(Hy={}));var Gy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Gy||(Gy={}));var Vy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Vy||(Vy={}));var L0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(L0||(L0={}));var $y;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})($y||($y={}));var Jy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Jy||(Jy={}));var Yy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Yy||(Yy={}));var Wy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Wy||(Wy={}));var Ky;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ky||(Ky={}));var Xy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Xy||(Xy={}));var Qy;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Qy||(Qy={}));var Zy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Zy||(Zy={}));var e1;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(e1||(e1={}));var t1;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(t1||(t1={}));var n1;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(n1||(n1={}));var i1;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(i1||(i1={}));var r1;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(r1||(r1={}));var s1;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(s1||(s1={}));var a1;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(a1||(a1={}));var o1;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(o1||(o1={}));var l1;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(l1||(l1={}));var u1;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(u1||(u1={}));var c1;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(c1||(c1={}));var d1;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(d1||(d1={}));var f1;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(f1||(f1={}));var h1;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(h1||(h1={}));var p1;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(p1||(p1={}));var m1;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(m1||(m1={}));var g1;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(g1||(g1={}));var v1;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(v1||(v1={}));var y1;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(y1||(y1={}));var b1;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(b1||(b1={}));var Rc;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Rc||(Rc={}));class D0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ed{get text(){var e,n,i,a,o,l,c,d;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const b=[];for(const w of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[_,T]of Object.entries(w))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(T!==null||T!==void 0)&&b.push(_);if(typeof w.text=="string"){if(typeof w.thought=="boolean"&&w.thought)continue;v=!0,h+=w.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,n,i,a,o,l,c,d;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const b of(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[w,_]of Object.entries(b))w!=="inlineData"&&(_!==null||_!==void 0)&&v.push(w);b.inlineData&&typeof b.inlineData.data=="string"&&(h+=atob(b.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,a,o,l,c,d;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,a,o,l,c,d,h;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,a,o,l,c,d,h;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(d=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class x1{}class w1{}class CA{}class kA{}class IA{}class RA{}class S1{}class _1{}class N1{}class LA{}class hh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new hh;let a;const o=e;return n?a=gA(o):a=mA(o),Object.assign(i,a),i}}class A1{}class T1{}class E1{}class C1{}class DA{}class MA{}class PA{}class hm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new hm,o=_A(e);return Object.assign(i,o),i}}class UA{}class OA{}class jA{}class k1{}class FA{get text(){var e,n,i;let a="",o=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,h]of Object.entries(c))d!=="text"&&d!=="thought"&&h!==null&&l.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,a+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?a:void 0}get data(){var e,n,i;let a="";const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="inlineData"&&d!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(a+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class BA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class pm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new pm,o=ab(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ob(t,e){const n=fn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function lb(t){return Array.isArray(t)?t.map(e=>ph(e)):[ph(t)]}function ph(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function ub(t){const e=ph(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cb(t){const e=ph(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function I1(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function db(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>I1(e)):[I1(t)]}function M0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function R1(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function L1(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function gr(t){if(t==null)throw new Error("ContentUnion is required");return M0(t)?t:{role:"user",parts:db(t)}}function mm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=gr(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=gr(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>gr(n)):[gr(e)]}function Ps(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(R1(t)||L1(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[gr(t)]}const e=[],n=[],i=M0(t[0]);for(const a of t){const o=M0(a);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(a);else{if(R1(a)||L1(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return i||e.push({role:"user",parts:db(n)}),e}function qA(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(_l).includes(n[0].toUpperCase())?n[0].toUpperCase():_l.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(_l).includes(i.toUpperCase())?i.toUpperCase():_l.TYPE_UNSPECIFIED})}}function Pc(t){const e={},n=["items"],i=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&qA(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(_l).includes(c.toUpperCase())?c.toUpperCase():_l.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Pc(c);else if(i.includes(l)){const d=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}d.push(Pc(h))}e[l]=d}else if(a.includes(l)){const d={};for(const[h,v]of Object.entries(c))d[h]=Pc(v);e[l]=d}else{if(l==="additionalProperties")continue;e[l]=c}return e}function gm(t){return Pc(t)}function vm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ym(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fc(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Pc(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Pc(e.response));return t}function Bc(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function zA(t,e,n,i=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function Co(t,e){if(typeof e!="string")throw new Error("name must be a string");return zA(t,e,"cachedContents")}function fb(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function kl(t){return fm(t)}function HA(t){return t!=null&&typeof t=="object"&&"name"in t}function GA(t){return t!=null&&typeof t=="object"&&"video"in t}function VA(t){return t!=null&&typeof t=="object"&&"uri"in t}function hb(t){var e;let n;if(HA(t)&&(n=t.name),!(VA(t)&&(n=t.uri,n===void 0))&&!(GA(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function pb(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function mb(t){for(const e of["models","tunedModels","publisherModels"])if($A(t,e))return t[e];return[]}function $A(t,e){return t!==null&&typeof t=="object"&&e in t}function JA(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function YA(t,e={}){const n=[],i=new Set;for(const a of t){const o=a.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=JA(a,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function gb(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function WA(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function vb(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let o=!1;for(const l of a){if(typeof l!="object"||l===null)continue;const d=l.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function qc(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function yb(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KA(t){const e={},n=p(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>I4(l))),y(e,["inlinedResponses"],o)}const a=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["inlinedEmbedContentResponses"],o)}return e}function XA(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const a=p(t,["bigqueryDestination","outputUri"]);return a!=null&&y(e,["bigqueryUri"],a),e}function QA(t){const e={},n=p(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const a=p(t,["bigqueryUri"]);if(a!=null&&y(e,["bigqueryDestination","outputUri"],a),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ih(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const a=p(t,["metadata","state"]);a!=null&&y(e,["state"],yb(a));const o=p(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const l=p(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=p(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const d=p(t,["metadata","model"]);d!=null&&y(e,["model"],d);const h=p(t,["metadata","output"]);return h!=null&&y(e,["dest"],KA(vb(h))),e}function P0(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const a=p(t,["state"]);a!=null&&y(e,["state"],yb(a));const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=p(t,["startTime"]);c!=null&&y(e,["startTime"],c);const d=p(t,["endTime"]);d!=null&&y(e,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(e,["updateTime"],h);const v=p(t,["model"]);v!=null&&y(e,["model"],v);const b=p(t,["inputConfig"]);b!=null&&y(e,["src"],ZA(b));const w=p(t,["outputConfig"]);w!=null&&y(e,["dest"],XA(vb(w)));const _=p(t,["completionStats"]);return _!=null&&y(e,["completionStats"],_),e}function ZA(t){const e={},n=p(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const a=p(t,["bigquerySource","inputUri"]);return a!=null&&y(e,["bigqueryUri"],a),e}function e4(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&y(n,["fileName"],i);const a=p(e,["inlinedRequests"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>k4(t,l))),y(n,["requests","requests"],o)}return n}function t4(t){const e={},n=p(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const a=p(t,["bigqueryUri"]);if(a!=null&&y(e,["bigquerySource","inputUri"],a),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function n4(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function i4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],qc(t,i)),n}function r4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],qc(t,i)),n}function s4(t){const e={},n=p(t,["content"]);n!=null&&y(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],a4(i));const a=p(t,["tokenCount"]);a!=null&&y(e,["tokenCount"],a);const o=p(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=p(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&y(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&y(e,["logprobsResult"],h);const v=p(t,["safetyRatings"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(_=>_)),y(e,["safetyRatings"],w)}const b=p(t,["urlContextMetadata"]);return b!=null&&y(e,["urlContextMetadata"],b),e}function a4(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),y(e,["citations"],i)}return e}function bb(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>O4(o))),y(e,["parts"],a)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function o4(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function l4(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const a=p(t,["dest"]);return e!==void 0&&a!=null&&y(e,["outputConfig"],QA(WA(a))),n}function D1(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["src"]);a!=null&&y(n,["batch","inputConfig"],e4(t,gb(t,a)));const o=p(e,["config"]);return o!=null&&o4(o,n),n}function u4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],fn(t,i));const a=p(e,["src"]);a!=null&&y(n,["inputConfig"],t4(gb(t,a)));const o=p(e,["config"]);return o!=null&&l4(o,n),n}function c4(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function d4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["src"]);a!=null&&y(n,["batch","inputConfig"],y4(t,a));const o=p(e,["config"]);return o!=null&&c4(o,n),n}function f4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],qc(t,i)),n}function h4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],qc(t,i)),n}function p4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);return o!=null&&y(e,["error"],o),e}function m4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);return o!=null&&y(e,["error"],o),e}function g4(t,e){const n={},i=p(e,["contents"]);if(i!=null){let o=mm(t,i);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["requests[]","request","content"],o)}const a=p(e,["config"]);return a!=null&&(y(n,["_self"],v4(a,n)),hA(n,{"requests[].*":"requests[].request.*"})),n}function v4(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const a=p(t,["title"]);e!==void 0&&a!=null&&y(e,["requests[]","title"],a);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function y4(t,e){const n={},i=p(e,["fileName"]);i!=null&&y(n,["file_name"],i);const a=p(e,["inlinedRequests"]);return a!=null&&y(n,["requests"],g4(t,a)),n}function b4(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function x4(t){const e={},n=p(t,["id"]);n!=null&&y(e,["id"],n);const i=p(t,["args"]);i!=null&&y(e,["args"],i);const a=p(t,["name"]);if(a!=null&&y(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function w4(t){const e={},n=p(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const i=p(t,["mode"]);if(i!=null&&y(e,["mode"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function S4(t,e,n){const i={},a=p(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],bb(gr(a)));const o=p(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&y(i,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&y(i,["responseLogprobs"],b);const w=p(e,["logprobs"]);w!=null&&y(i,["logprobs"],w);const _=p(e,["presencePenalty"]);_!=null&&y(i,["presencePenalty"],_);const T=p(e,["frequencyPenalty"]);T!=null&&y(i,["frequencyPenalty"],T);const k=p(e,["seed"]);k!=null&&y(i,["seed"],k);const R=p(e,["responseMimeType"]);R!=null&&y(i,["responseMimeType"],R);const C=p(e,["responseSchema"]);C!=null&&y(i,["responseSchema"],gm(C));const I=p(e,["responseJsonSchema"]);if(I!=null&&y(i,["responseJsonSchema"],I),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=p(e,["safetySettings"]);if(n!==void 0&&L!=null){let ne=L;Array.isArray(ne)&&(ne=ne.map(re=>j4(re))),y(n,["safetySettings"],ne)}const O=p(e,["tools"]);if(n!==void 0&&O!=null){let ne=Bc(O);Array.isArray(ne)&&(ne=ne.map(re=>B4(Fc(re)))),y(n,["tools"],ne)}const q=p(e,["toolConfig"]);if(n!==void 0&&q!=null&&y(n,["toolConfig"],F4(q)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=p(e,["cachedContent"]);n!==void 0&&W!=null&&y(n,["cachedContent"],Co(t,W));const F=p(e,["responseModalities"]);F!=null&&y(i,["responseModalities"],F);const z=p(e,["mediaResolution"]);z!=null&&y(i,["mediaResolution"],z);const ee=p(e,["speechConfig"]);if(ee!=null&&y(i,["speechConfig"],vm(ee)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=p(e,["thinkingConfig"]);le!=null&&y(i,["thinkingConfig"],le);const B=p(e,["imageConfig"]);B!=null&&y(i,["imageConfig"],C4(B));const j=p(e,["enableEnhancedCivicAnswers"]);return j!=null&&y(i,["enableEnhancedCivicAnswers"],j),i}function _4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>s4(h))),y(e,["candidates"],d)}const a=p(t,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const o=p(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=p(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function N4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],qc(t,i)),n}function A4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],qc(t,i)),n}function T4(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function E4(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function C4(t){const e={},n=p(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),p(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function k4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["request","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let c=Ps(a);Array.isArray(c)&&(c=c.map(d=>bb(d))),y(n,["request","contents"],c)}const o=p(e,["metadata"]);o!=null&&y(n,["metadata"],o);const l=p(e,["config"]);return l!=null&&y(n,["request","generationConfig"],S4(t,l,p(n,["request"],{}))),n}function I4(t){const e={},n=p(t,["response"]);n!=null&&y(e,["response"],_4(n));const i=p(t,["error"]);return i!=null&&y(e,["error"],i),e}function R4(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);if(e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function L4(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const o=p(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function D4(t){const e={},n=p(t,["config"]);return n!=null&&R4(n,e),e}function M4(t){const e={},n=p(t,["config"]);return n!=null&&L4(n,e),e}function P4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["operations"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>ih(l))),y(e,["batchJobs"],o)}return e}function U4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["batchPredictionJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>P0(l))),y(e,["batchJobs"],o)}return e}function O4(t){const e={},n=p(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=p(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const o=p(t,["fileData"]);o!=null&&y(e,["fileData"],b4(o));const l=p(t,["functionCall"]);l!=null&&y(e,["functionCall"],x4(l));const c=p(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&y(e,["inlineData"],n4(d));const h=p(t,["text"]);h!=null&&y(e,["text"],h);const v=p(t,["thought"]);v!=null&&y(e,["thought"],v);const b=p(t,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const w=p(t,["videoMetadata"]);return w!=null&&y(e,["videoMetadata"],w),e}function j4(t){const e={},n=p(t,["category"]);if(n!=null&&y(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function F4(t){const e={},n=p(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const i=p(t,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],w4(i)),e}function B4(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const a=p(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=p(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}const l=p(t,["googleMaps"]);l!=null&&y(e,["googleMaps"],T4(l));const c=p(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],E4(c));const d=p(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ao;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ao||(Ao={}));class Su{constructor(e,n,i,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,a)}init(e,n,i){var a,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(a=l.config)===null||a===void 0?void 0:a.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q4 extends Eo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Su(Ao.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=D1(this.apiClient,e),i=n._url,a=ut("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,d=c.requests,h=[];for(const v of d){const b=Object.assign({},v);if(b.systemInstruction){const w=b.systemInstruction;delete b.systemInstruction;const _=b.request;_.systemInstruction=w,b.request=_}h.push(b)}return c.requests=h,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},a=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${a}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${a}`;else if(l)i.dest=`${l}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=u4(this.apiClient,e);return c=ut("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>P0(v))}else{const h=D1(this.apiClient,e);return c=ut("{model}:batchGenerateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>ih(v))}}async createEmbeddingsInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=d4(this.apiClient,e);return o=ut("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>ih(d))}}async get(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=A4(this.apiClient,e);return c=ut("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>P0(v))}else{const h=N4(this.apiClient,e);return c=ut("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>ih(v))}}async cancel(e){var n,i,a,o;let l="",c={};if(this.apiClient.isVertexAI()){const d=r4(this.apiClient,e);l=ut("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const d=i4(this.apiClient,e);l=ut("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=M4(e);return c=ut("batchPredictionJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=U4(v),w=new k1;return Object.assign(w,b),w})}else{const h=D4(e);return c=ut("batches",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=P4(v),w=new k1;return Object.assign(w,b),w})}}async delete(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=h4(this.apiClient,e);return c=ut("batchPredictionJobs/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>m4(v))}else{const h=f4(this.apiClient,e);return c=ut("batches/{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>p4(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z4(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function M1(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>d3(o))),y(e,["parts"],a)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function H4(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=p(t,["expireTime"]);e!==void 0&&a!=null&&y(e,["expireTime"],a);const o=p(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let v=Ps(l);Array.isArray(v)&&(v=v.map(b=>M1(b))),y(e,["contents"],v)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],M1(gr(c)));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let v=d;Array.isArray(v)&&(v=v.map(b=>h3(b))),y(e,["tools"],v)}const h=p(t,["toolConfig"]);if(e!==void 0&&h!=null&&y(e,["toolConfig"],f3(h)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function G4(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=p(t,["expireTime"]);e!==void 0&&a!=null&&y(e,["expireTime"],a);const o=p(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=p(t,["contents"]);if(e!==void 0&&l!=null){let b=Ps(l);Array.isArray(b)&&(b=b.map(w=>w)),y(e,["contents"],b)}const c=p(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],gr(c));const d=p(t,["tools"]);if(e!==void 0&&d!=null){let b=d;Array.isArray(b)&&(b=b.map(w=>p3(w))),y(e,["tools"],b)}const h=p(t,["toolConfig"]);e!==void 0&&h!=null&&y(e,["toolConfig"],h);const v=p(t,["kmsKeyName"]);return e!==void 0&&v!=null&&y(e,["encryption_spec","kmsKeyName"],v),n}function V4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],ob(t,i));const a=p(e,["config"]);return a!=null&&H4(a,n),n}function $4(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["model"],ob(t,i));const a=p(e,["config"]);return a!=null&&G4(a,n),n}function J4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Co(t,i)),n}function Y4(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Co(t,i)),n}function W4(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function K4(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function X4(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Q4(t){const e={},n=p(t,["id"]);n!=null&&y(e,["id"],n);const i=p(t,["args"]);i!=null&&y(e,["args"],i);const a=p(t,["name"]);if(a!=null&&y(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Z4(t){const e={},n=p(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const i=p(t,["mode"]);if(i!=null&&y(e,["mode"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function e3(t){const e={},n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const a=p(t,["parameters"]);a!=null&&y(e,["parameters"],a);const o=p(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);if(c!=null&&y(e,["responseJsonSchema"],c),p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function t3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Co(t,i)),n}function n3(t,e){const n={},i=p(e,["name"]);return i!=null&&y(n,["_url","name"],Co(t,i)),n}function i3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function r3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function s3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function a3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function o3(t){const e={},n=p(t,["config"]);return n!=null&&s3(n,e),e}function l3(t){const e={},n=p(t,["config"]);return n!=null&&a3(n,e),e}function u3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function c3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["cachedContents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function d3(t){const e={},n=p(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=p(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const o=p(t,["fileData"]);o!=null&&y(e,["fileData"],X4(o));const l=p(t,["functionCall"]);l!=null&&y(e,["functionCall"],Q4(l));const c=p(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&y(e,["inlineData"],z4(d));const h=p(t,["text"]);h!=null&&y(e,["text"],h);const v=p(t,["thought"]);v!=null&&y(e,["thought"],v);const b=p(t,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const w=p(t,["videoMetadata"]);return w!=null&&y(e,["videoMetadata"],w),e}function f3(t){const e={},n=p(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const i=p(t,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],Z4(i)),e}function h3(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const a=p(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=p(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}const l=p(t,["googleMaps"]);l!=null&&y(e,["googleMaps"],i3(l));const c=p(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],r3(c));const d=p(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function p3(t){const e={},n=p(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const i=p(t,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(t,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const o=p(t,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const l=p(t,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(w=>e3(w))),y(e,["functionDeclarations"],b)}const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const h=p(t,["googleSearchRetrieval"]);h!=null&&y(e,["googleSearchRetrieval"],h);const v=p(t,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function m3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=p(t,["expireTime"]);return e!==void 0&&a!=null&&y(e,["expireTime"],a),n}function g3(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=p(t,["expireTime"]);return e!==void 0&&a!=null&&y(e,["expireTime"],a),n}function v3(t,e){const n={},i=p(e,["name"]);i!=null&&y(n,["_url","name"],Co(t,i));const a=p(e,["config"]);return a!=null&&m3(a,n),n}function y3(t,e){const n={},i=p(e,["name"]);i!=null&&y(n,["_url","name"],Co(t,i));const a=p(e,["config"]);return a!=null&&g3(a,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b3 extends Eo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Su(Ao.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=$4(this.apiClient,e);return c=ut("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>v)}else{const h=V4(this.apiClient,e);return c=ut("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>v)}}async get(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=n3(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>v)}else{const h=t3(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>v)}}async delete(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=Y4(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=K4(v),w=new E1;return Object.assign(w,b),w})}else{const h=J4(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=W4(v),w=new E1;return Object.assign(w,b),w})}}async update(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=y3(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>v)}else{const h=v3(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>v)}}async listInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=l3(e);return c=ut("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=c3(v),w=new C1;return Object.assign(w,b),w})}else{const h=o3(e);return c=ut("cachedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=u3(v),w=new C1;return Object.assign(w,b),w})}}}function mh(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function P1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(t){return this instanceof Bt?(this.v=t,this):new Bt(t)}function oa(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(_){return function(T){return Promise.resolve(T).then(_,b)}}function c(_,T){i[_]&&(a[_]=function(k){return new Promise(function(R,C){o.push([_,k,R,C])>1||d(_,k)})},T&&(a[_]=T(a[_])))}function d(_,T){try{h(i[_](T))}catch(k){w(o[0][3],k)}}function h(_){_.value instanceof Bt?Promise.resolve(_.value.v).then(v,b):w(o[0][2],_)}function v(_){d("next",_)}function b(_){d("throw",_)}function w(_,T){_(T),o.shift(),o.length&&d(o[0][0],o[0][1])}}function la(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof P1=="function"?P1(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,d){l=t[o](l),a(c,d,l.done,l.value)})}}function a(o,l,c,d){Promise.resolve(d).then(function(h){o({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x3(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:xb(n)}function xb(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function w3(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function U1(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const a=[];let o=!0;for(;i<n&&t[i].role==="model";)a.push(t[i]),o&&!xb(t[i])&&(o=!1),i++;o?e.push(...a):e.pop()}return e}class S3{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new _3(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class _3{constructor(e,n,i,a={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=a,this.history=o,this.sendPromise=Promise.resolve(),w3(o)}async sendMessage(e){var n;await this.sendPromise;const i=gr(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const d=await a,h=(l=(o=d.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,v=d.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let w=[];v!=null&&(w=(c=v.slice(b))!==null&&c!==void 0?c:[]);const _=h?[h]:[];this.recordHistory(i,_,w)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var n;await this.sendPromise;const i=gr(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const o=await a;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?U1(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return oa(this,arguments,function*(){var a,o,l,c,d,h;const v=[];try{for(var b=!0,w=la(e),_;_=yield Bt(w.next()),a=_.done,!a;b=!0){c=_.value,b=!1;const T=c;if(x3(T)){const k=(h=(d=T.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content;k!==void 0&&v.push(k)}yield yield Bt(T)}}catch(T){o={error:T}}finally{try{!b&&!a&&(l=w.return)&&(yield Bt(l.call(w)))}finally{if(o)throw o.error}}this.recordHistory(n,v)})}recordHistory(e,n,i){let a=[];n.length>0&&n.every(o=>o.role!==void 0)?a=n:a.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...U1(i)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ah extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ah.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N3(t){const e={},n=p(t,["file"]);return n!=null&&y(e,["file"],n),e}function A3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function T3(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","file"],hb(n)),e}function E3(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function C3(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","file"],hb(n)),e}function k3(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function I3(t){const e={},n=p(t,["config"]);return n!=null&&k3(n,e),e}function R3(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["files"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L3 extends Eo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Su(Ao.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=I3(e);return o=ut("files",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>{const h=R3(d),v=new UA;return Object.assign(v,h),v})}}async createInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=N3(e);return o=ut("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=A3(d),v=new OA;return Object.assign(v,h),v})}}async get(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=C3(e);return o=ut("files/{file}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async delete(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=T3(e);return o=ut("files/{file}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>{const h=E3(d),v=new jA;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rh(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function D3(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>W3(o))),y(e,["parts"],a)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function M3(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function P3(t){const e={},n=p(t,["id"]);n!=null&&y(e,["id"],n);const i=p(t,["args"]);i!=null&&y(e,["args"],i);const a=p(t,["name"]);if(a!=null&&y(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function U3(t){const e={},n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const a=p(t,["parameters"]);a!=null&&y(e,["parameters"],a);const o=p(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);if(c!=null&&y(e,["responseJsonSchema"],c),p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function O3(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const a=p(t,["audioTimestamp"]);a!=null&&y(e,["audioTimestamp"],a);const o=p(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=p(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&y(e,["maxOutputTokens"],h);const v=p(t,["mediaResolution"]);v!=null&&y(e,["mediaResolution"],v);const b=p(t,["presencePenalty"]);b!=null&&y(e,["presencePenalty"],b);const w=p(t,["responseLogprobs"]);w!=null&&y(e,["responseLogprobs"],w);const _=p(t,["responseMimeType"]);_!=null&&y(e,["responseMimeType"],_);const T=p(t,["responseModalities"]);T!=null&&y(e,["responseModalities"],T);const k=p(t,["responseSchema"]);k!=null&&y(e,["responseSchema"],k);const R=p(t,["routingConfig"]);R!=null&&y(e,["routingConfig"],R);const C=p(t,["seed"]);C!=null&&y(e,["seed"],C);const I=p(t,["speechConfig"]);I!=null&&y(e,["speechConfig"],I);const L=p(t,["stopSequences"]);L!=null&&y(e,["stopSequences"],L);const O=p(t,["temperature"]);O!=null&&y(e,["temperature"],O);const q=p(t,["thinkingConfig"]);q!=null&&y(e,["thinkingConfig"],q);const W=p(t,["topK"]);W!=null&&y(e,["topK"],W);const F=p(t,["topP"]);if(F!=null&&y(e,["topP"],F),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function j3(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function F3(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function B3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const a=p(t,["responseModalities"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","responseModalities"],a);const o=p(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const v=p(t,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const b=p(t,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],ym(b));const w=p(t,["thinkingConfig"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","thinkingConfig"],w);const _=p(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],_);const T=p(t,["systemInstruction"]);e!==void 0&&T!=null&&y(e,["setup","systemInstruction"],D3(gr(T)));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let W=Bc(k);Array.isArray(W)&&(W=W.map(F=>X3(Fc(F)))),y(e,["setup","tools"],W)}const R=p(t,["sessionResumption"]);e!==void 0&&R!=null&&y(e,["setup","sessionResumption"],K3(R));const C=p(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&y(e,["setup","inputAudioTranscription"],C);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&y(e,["setup","outputAudioTranscription"],I);const L=p(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&y(e,["setup","realtimeInputConfig"],L);const O=p(t,["contextWindowCompression"]);e!==void 0&&O!=null&&y(e,["setup","contextWindowCompression"],O);const q=p(t,["proactivity"]);if(e!==void 0&&q!=null&&y(e,["setup","proactivity"],q),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function q3(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],O3(i));const a=p(t,["responseModalities"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","responseModalities"],a);const o=p(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const v=p(t,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const b=p(t,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],ym(b));const w=p(t,["thinkingConfig"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","thinkingConfig"],w);const _=p(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],_);const T=p(t,["systemInstruction"]);e!==void 0&&T!=null&&y(e,["setup","systemInstruction"],gr(T));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let F=Bc(k);Array.isArray(F)&&(F=F.map(z=>Q3(Fc(z)))),y(e,["setup","tools"],F)}const R=p(t,["sessionResumption"]);e!==void 0&&R!=null&&y(e,["setup","sessionResumption"],R);const C=p(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&y(e,["setup","inputAudioTranscription"],C);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&y(e,["setup","outputAudioTranscription"],I);const L=p(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&y(e,["setup","realtimeInputConfig"],L);const O=p(t,["contextWindowCompression"]);e!==void 0&&O!=null&&y(e,["setup","contextWindowCompression"],O);const q=p(t,["proactivity"]);e!==void 0&&q!=null&&y(e,["setup","proactivity"],q);const W=p(t,["explicitVadSignal"]);return e!==void 0&&W!=null&&y(e,["setup","explicitVadSignal"],W),n}function z3(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],fn(t,i));const a=p(e,["config"]);return a!=null&&y(n,["config"],B3(a,n)),n}function H3(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],fn(t,i));const a=p(e,["config"]);return a!=null&&y(n,["config"],q3(a,n)),n}function G3(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function V3(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),y(e,["weightedPrompts"],i)}return e}function $3(t){const e={},n=p(t,["media"]);if(n!=null){let h=lb(n);Array.isArray(h)&&(h=h.map(v=>rh(v))),y(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&y(e,["audio"],rh(cb(i)));const a=p(t,["audioStreamEnd"]);a!=null&&y(e,["audioStreamEnd"],a);const o=p(t,["video"]);o!=null&&y(e,["video"],rh(ub(o)));const l=p(t,["text"]);l!=null&&y(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function J3(t){const e={},n=p(t,["media"]);if(n!=null){let h=lb(n);Array.isArray(h)&&(h=h.map(v=>v)),y(e,["mediaChunks"],h)}const i=p(t,["audio"]);i!=null&&y(e,["audio"],cb(i));const a=p(t,["audioStreamEnd"]);a!=null&&y(e,["audioStreamEnd"],a);const o=p(t,["video"]);o!=null&&y(e,["video"],ub(o));const l=p(t,["text"]);l!=null&&y(e,["text"],l);const c=p(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const d=p(t,["activityEnd"]);return d!=null&&y(e,["activityEnd"],d),e}function Y3(t){const e={},n=p(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const a=p(t,["toolCall"]);a!=null&&y(e,["toolCall"],a);const o=p(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const l=p(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],Z3(l));const c=p(t,["goAway"]);c!=null&&y(e,["goAway"],c);const d=p(t,["sessionResumptionUpdate"]);d!=null&&y(e,["sessionResumptionUpdate"],d);const h=p(t,["voiceActivityDetectionSignal"]);return h!=null&&y(e,["voiceActivityDetectionSignal"],h),e}function W3(t){const e={},n=p(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=p(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const o=p(t,["fileData"]);o!=null&&y(e,["fileData"],M3(o));const l=p(t,["functionCall"]);l!=null&&y(e,["functionCall"],P3(l));const c=p(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&y(e,["inlineData"],rh(d));const h=p(t,["text"]);h!=null&&y(e,["text"],h);const v=p(t,["thought"]);v!=null&&y(e,["thought"],v);const b=p(t,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const w=p(t,["videoMetadata"]);return w!=null&&y(e,["videoMetadata"],w),e}function K3(t){const e={},n=p(t,["handle"]);if(n!=null&&y(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function X3(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const a=p(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=p(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}const l=p(t,["googleMaps"]);l!=null&&y(e,["googleMaps"],j3(l));const c=p(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],F3(c));const d=p(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function Q3(t){const e={},n=p(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const i=p(t,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(t,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const o=p(t,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const l=p(t,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(w=>U3(w))),y(e,["functionDeclarations"],b)}const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const h=p(t,["googleSearchRetrieval"]);h!=null&&y(e,["googleSearchRetrieval"],h);const v=p(t,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function Z3(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const a=p(t,["candidatesTokenCount"]);a!=null&&y(e,["responseTokenCount"],a);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const l=p(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=p(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const d=p(t,["promptTokensDetails"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(T=>T)),y(e,["promptTokensDetails"],_)}const h=p(t,["cacheTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(T=>T)),y(e,["cacheTokensDetails"],_)}const v=p(t,["candidatesTokensDetails"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>T)),y(e,["responseTokensDetails"],_)}const b=p(t,["toolUsePromptTokensDetails"]);if(b!=null){let _=b;Array.isArray(_)&&(_=_.map(T=>T)),y(e,["toolUsePromptTokensDetails"],_)}const w=p(t,["trafficType"]);return w!=null&&y(e,["trafficType"],w),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eT(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function tT(t){const e={},n=p(t,["content"]);n!=null&&y(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],nT(i));const a=p(t,["tokenCount"]);a!=null&&y(e,["tokenCount"],a);const o=p(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=p(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const d=p(t,["index"]);d!=null&&y(e,["index"],d);const h=p(t,["logprobsResult"]);h!=null&&y(e,["logprobsResult"],h);const v=p(t,["safetyRatings"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(_=>_)),y(e,["safetyRatings"],w)}const b=p(t,["urlContextMetadata"]);return b!=null&&y(e,["urlContextMetadata"],b),e}function nT(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),y(e,["citations"],i)}return e}function iT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let o=Ps(a);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["contents"],o)}return n}function rT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["tokensInfo"],a)}return e}function sT(t){const e={},n=p(t,["values"]);n!=null&&y(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&y(e,["statistics"],aT(i)),e}function aT(t){const e={},n=p(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function Th(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>mE(o))),y(e,["parts"],a)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function oT(t){const e={},n=p(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function lT(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function uT(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],gr(i));const a=p(t,["tools"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Nb(c))),y(e,["tools"],l)}const o=p(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],eE(o)),n}function cT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let l=Ps(a);Array.isArray(l)&&(l=l.map(c=>Th(c))),y(n,["contents"],l)}const o=p(e,["config"]);return o!=null&&lT(o),n}function dT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let l=Ps(a);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=p(e,["config"]);return o!=null&&uT(o,n),n}function fT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const a=p(t,["cachedContentTokenCount"]);return a!=null&&y(e,["cachedContentTokenCount"],a),e}function hT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function pT(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],fn(t,i)),n}function mT(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],fn(t,i)),n}function gT(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function vT(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function yT(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const a=p(t,["negativePrompt"]);e!==void 0&&a!=null&&y(e,["parameters","negativePrompt"],a);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const v=p(t,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const b=p(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&y(e,["parameters","includeSafetyAttributes"],b);const w=p(t,["includeRaiReason"]);e!==void 0&&w!=null&&y(e,["parameters","includeRaiReason"],w);const _=p(t,["language"]);e!==void 0&&_!=null&&y(e,["parameters","language"],_);const T=p(t,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const k=p(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&y(e,["parameters","outputOptions","compressionQuality"],k);const R=p(t,["addWatermark"]);e!==void 0&&R!=null&&y(e,["parameters","addWatermark"],R);const C=p(t,["labels"]);e!==void 0&&C!=null&&y(e,["labels"],C);const I=p(t,["editMode"]);e!==void 0&&I!=null&&y(e,["parameters","editMode"],I);const L=p(t,["baseSteps"]);return e!==void 0&&L!=null&&y(e,["parameters","editConfig","baseSteps"],L),n}function bT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const o=p(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>wE(d))),y(n,["instances[0]","referenceImages"],c)}const l=p(e,["config"]);return l!=null&&yT(l,n),n}function xT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Eh(o))),y(e,["generatedImages"],a)}return e}function wT(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const a=p(t,["title"]);e!==void 0&&a!=null&&y(e,["requests[]","title"],a);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ST(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const a=p(t,["title"]);e!==void 0&&a!=null&&y(e,["instances[]","title"],a);const o=p(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const l=p(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=p(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function _T(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let c=mm(t,a);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["requests[]","content"],c)}const o=p(e,["config"]);o!=null&&wT(o,n);const l=p(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],fn(t,l)),n}function NT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let l=mm(t,a);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const o=p(e,["config"]);return o!=null&&ST(o,n),n}function AT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["embeddings"],o)}const a=p(t,["metadata"]);return a!=null&&y(e,["metadata"],a),e}function TT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>sT(l))),y(e,["embeddings"],o)}const a=p(t,["metadata"]);return a!=null&&y(e,["metadata"],a),e}function ET(t){const e={},n=p(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function CT(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function kT(t){const e={},n=p(t,["id"]);n!=null&&y(e,["id"],n);const i=p(t,["args"]);i!=null&&y(e,["args"],i);const a=p(t,["name"]);if(a!=null&&y(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function IT(t){const e={},n=p(t,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const i=p(t,["mode"]);if(i!=null&&y(e,["mode"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function RT(t){const e={},n=p(t,["description"]);n!=null&&y(e,["description"],n);const i=p(t,["name"]);i!=null&&y(e,["name"],i);const a=p(t,["parameters"]);a!=null&&y(e,["parameters"],a);const o=p(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=p(t,["response"]);l!=null&&y(e,["response"],l);const c=p(t,["responseJsonSchema"]);if(c!=null&&y(e,["responseJsonSchema"],c),p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function LT(t,e,n){const i={},a=p(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],Th(gr(a)));const o=p(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&y(i,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&y(i,["responseLogprobs"],b);const w=p(e,["logprobs"]);w!=null&&y(i,["logprobs"],w);const _=p(e,["presencePenalty"]);_!=null&&y(i,["presencePenalty"],_);const T=p(e,["frequencyPenalty"]);T!=null&&y(i,["frequencyPenalty"],T);const k=p(e,["seed"]);k!=null&&y(i,["seed"],k);const R=p(e,["responseMimeType"]);R!=null&&y(i,["responseMimeType"],R);const C=p(e,["responseSchema"]);C!=null&&y(i,["responseSchema"],gm(C));const I=p(e,["responseJsonSchema"]);if(I!=null&&y(i,["responseJsonSchema"],I),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=p(e,["safetySettings"]);if(n!==void 0&&L!=null){let ne=L;Array.isArray(ne)&&(ne=ne.map(re=>SE(re))),y(n,["safetySettings"],ne)}const O=p(e,["tools"]);if(n!==void 0&&O!=null){let ne=Bc(O);Array.isArray(ne)&&(ne=ne.map(re=>kE(Fc(re)))),y(n,["tools"],ne)}const q=p(e,["toolConfig"]);if(n!==void 0&&q!=null&&y(n,["toolConfig"],CE(q)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=p(e,["cachedContent"]);n!==void 0&&W!=null&&y(n,["cachedContent"],Co(t,W));const F=p(e,["responseModalities"]);F!=null&&y(i,["responseModalities"],F);const z=p(e,["mediaResolution"]);z!=null&&y(i,["mediaResolution"],z);const ee=p(e,["speechConfig"]);if(ee!=null&&y(i,["speechConfig"],vm(ee)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=p(e,["thinkingConfig"]);le!=null&&y(i,["thinkingConfig"],le);const B=p(e,["imageConfig"]);B!=null&&y(i,["imageConfig"],sE(B));const j=p(e,["enableEnhancedCivicAnswers"]);return j!=null&&y(i,["enableEnhancedCivicAnswers"],j),i}function DT(t,e,n){const i={},a=p(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],gr(a));const o=p(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=p(e,["topP"]);l!=null&&y(i,["topP"],l);const c=p(e,["topK"]);c!=null&&y(i,["topK"],c);const d=p(e,["candidateCount"]);d!=null&&y(i,["candidateCount"],d);const h=p(e,["maxOutputTokens"]);h!=null&&y(i,["maxOutputTokens"],h);const v=p(e,["stopSequences"]);v!=null&&y(i,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&y(i,["responseLogprobs"],b);const w=p(e,["logprobs"]);w!=null&&y(i,["logprobs"],w);const _=p(e,["presencePenalty"]);_!=null&&y(i,["presencePenalty"],_);const T=p(e,["frequencyPenalty"]);T!=null&&y(i,["frequencyPenalty"],T);const k=p(e,["seed"]);k!=null&&y(i,["seed"],k);const R=p(e,["responseMimeType"]);R!=null&&y(i,["responseMimeType"],R);const C=p(e,["responseSchema"]);C!=null&&y(i,["responseSchema"],gm(C));const I=p(e,["responseJsonSchema"]);I!=null&&y(i,["responseJsonSchema"],I);const L=p(e,["routingConfig"]);L!=null&&y(i,["routingConfig"],L);const O=p(e,["modelSelectionConfig"]);O!=null&&y(i,["modelConfig"],O);const q=p(e,["safetySettings"]);if(n!==void 0&&q!=null){let P=q;Array.isArray(P)&&(P=P.map($=>$)),y(n,["safetySettings"],P)}const W=p(e,["tools"]);if(n!==void 0&&W!=null){let P=Bc(W);Array.isArray(P)&&(P=P.map($=>Nb(Fc($)))),y(n,["tools"],P)}const F=p(e,["toolConfig"]);n!==void 0&&F!=null&&y(n,["toolConfig"],F);const z=p(e,["labels"]);n!==void 0&&z!=null&&y(n,["labels"],z);const ee=p(e,["cachedContent"]);n!==void 0&&ee!=null&&y(n,["cachedContent"],Co(t,ee));const le=p(e,["responseModalities"]);le!=null&&y(i,["responseModalities"],le);const B=p(e,["mediaResolution"]);B!=null&&y(i,["mediaResolution"],B);const j=p(e,["speechConfig"]);j!=null&&y(i,["speechConfig"],vm(j));const ne=p(e,["audioTimestamp"]);ne!=null&&y(i,["audioTimestamp"],ne);const re=p(e,["thinkingConfig"]);re!=null&&y(i,["thinkingConfig"],re);const be=p(e,["imageConfig"]);if(be!=null&&y(i,["imageConfig"],aE(be)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function O1(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let l=Ps(a);Array.isArray(l)&&(l=l.map(c=>Th(c))),y(n,["contents"],l)}const o=p(e,["config"]);return o!=null&&y(n,["generationConfig"],LT(t,o,n)),n}function j1(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["contents"]);if(a!=null){let l=Ps(a);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=p(e,["config"]);return o!=null&&y(n,["generationConfig"],DT(t,o,n)),n}function F1(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>tT(h))),y(e,["candidates"],d)}const a=p(t,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const o=p(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=p(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function B1(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(v=>v)),y(e,["candidates"],h)}const a=p(t,["createTime"]);a!=null&&y(e,["createTime"],a);const o=p(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=p(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=p(t,["responseId"]);c!=null&&y(e,["responseId"],c);const d=p(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function MT(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const o=p(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const d=p(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&y(e,["parameters","includeSafetyAttributes"],d);const h=p(t,["includeRaiReason"]);e!==void 0&&h!=null&&y(e,["parameters","includeRaiReason"],h);const v=p(t,["language"]);e!==void 0&&v!=null&&y(e,["parameters","language"],v);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","mimeType"],b);const w=p(t,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&y(e,["parameters","outputOptions","compressionQuality"],w),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=p(t,["imageSize"]);if(e!==void 0&&_!=null&&y(e,["parameters","sampleImageSize"],_),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function PT(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const a=p(t,["negativePrompt"]);e!==void 0&&a!=null&&y(e,["parameters","negativePrompt"],a);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=p(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const h=p(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&y(e,["parameters","safetySetting"],h);const v=p(t,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const b=p(t,["includeSafetyAttributes"]);e!==void 0&&b!=null&&y(e,["parameters","includeSafetyAttributes"],b);const w=p(t,["includeRaiReason"]);e!==void 0&&w!=null&&y(e,["parameters","includeRaiReason"],w);const _=p(t,["language"]);e!==void 0&&_!=null&&y(e,["parameters","language"],_);const T=p(t,["outputMimeType"]);e!==void 0&&T!=null&&y(e,["parameters","outputOptions","mimeType"],T);const k=p(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&y(e,["parameters","outputOptions","compressionQuality"],k);const R=p(t,["addWatermark"]);e!==void 0&&R!=null&&y(e,["parameters","addWatermark"],R);const C=p(t,["labels"]);e!==void 0&&C!=null&&y(e,["labels"],C);const I=p(t,["imageSize"]);e!==void 0&&I!=null&&y(e,["parameters","sampleImageSize"],I);const L=p(t,["enhancePrompt"]);return e!==void 0&&L!=null&&y(e,["parameters","enhancePrompt"],L),n}function UT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const o=p(e,["config"]);return o!=null&&MT(o,n),n}function OT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const o=p(e,["config"]);return o!=null&&PT(o,n),n}function jT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>KT(l))),y(e,["generatedImages"],o)}const a=p(t,["positivePromptSafetyAttributes"]);return a!=null&&y(e,["positivePromptSafetyAttributes"],Sb(a)),e}function FT(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Eh(l))),y(e,["generatedImages"],o)}const a=p(t,["positivePromptSafetyAttributes"]);return a!=null&&y(e,["positivePromptSafetyAttributes"],_b(a)),e}function BT(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=p(t,["durationSeconds"]);if(e!==void 0&&a!=null&&y(e,["parameters","durationSeconds"],a),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=p(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=p(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=p(t,["negativePrompt"]);e!==void 0&&d!=null&&y(e,["parameters","negativePrompt"],d);const h=p(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&y(e,["parameters","enhancePrompt"],h),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=p(t,["lastFrame"]);e!==void 0&&v!=null&&y(e,["instances[0]","lastFrame"],Ch(v));const b=p(t,["referenceImages"]);if(e!==void 0&&b!=null){let w=b;Array.isArray(w)&&(w=w.map(_=>zE(_))),y(e,["instances[0]","referenceImages"],w)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function qT(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const a=p(t,["outputGcsUri"]);e!==void 0&&a!=null&&y(e,["parameters","storageUri"],a);const o=p(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const l=p(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const d=p(t,["aspectRatio"]);e!==void 0&&d!=null&&y(e,["parameters","aspectRatio"],d);const h=p(t,["resolution"]);e!==void 0&&h!=null&&y(e,["parameters","resolution"],h);const v=p(t,["personGeneration"]);e!==void 0&&v!=null&&y(e,["parameters","personGeneration"],v);const b=p(t,["pubsubTopic"]);e!==void 0&&b!=null&&y(e,["parameters","pubsubTopic"],b);const w=p(t,["negativePrompt"]);e!==void 0&&w!=null&&y(e,["parameters","negativePrompt"],w);const _=p(t,["enhancePrompt"]);e!==void 0&&_!=null&&y(e,["parameters","enhancePrompt"],_);const T=p(t,["generateAudio"]);e!==void 0&&T!=null&&y(e,["parameters","generateAudio"],T);const k=p(t,["lastFrame"]);e!==void 0&&k!=null&&y(e,["instances[0]","lastFrame"],ua(k));const R=p(t,["referenceImages"]);if(e!==void 0&&R!=null){let L=R;Array.isArray(L)&&(L=L.map(O=>HE(O))),y(e,["instances[0]","referenceImages"],L)}const C=p(t,["mask"]);e!==void 0&&C!=null&&y(e,["instances[0]","mask"],qE(C));const I=p(t,["compressionQuality"]);return e!==void 0&&I!=null&&y(e,["parameters","compressionQuality"],I),n}function zT(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],$T(l)),e}function HT(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response"]);return l!=null&&y(e,["response"],JT(l)),e}function GT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const o=p(e,["image"]);o!=null&&y(n,["instances[0]","image"],Ch(o));const l=p(e,["video"]);l!=null&&y(n,["instances[0]","video"],Ab(l));const c=p(e,["source"]);c!=null&&YT(c,n);const d=p(e,["config"]);return d!=null&&BT(d,n),n}function VT(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const o=p(e,["image"]);o!=null&&y(n,["instances[0]","image"],ua(o));const l=p(e,["video"]);l!=null&&y(n,["instances[0]","video"],Tb(l));const c=p(e,["source"]);c!=null&&WT(c,n);const d=p(e,["config"]);return d!=null&&qT(d,n),n}function $T(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>QT(l))),y(e,["generatedVideos"],o)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function JT(t){const e={},n=p(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>ZT(l))),y(e,["generatedVideos"],o)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=p(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function YT(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=p(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],Ch(a));const o=p(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],Ab(o)),n}function WT(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=p(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],ua(a));const o=p(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],Tb(o)),n}function KT(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["image"],oE(n));const i=p(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const a=p(t,["_self"]);return a!=null&&y(e,["safetyAttributes"],Sb(a)),e}function Eh(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["image"],wb(n));const i=p(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const a=p(t,["_self"]);a!=null&&y(e,["safetyAttributes"],_b(a));const o=p(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function XT(t){const e={},n=p(t,["_self"]);n!=null&&y(e,["mask"],wb(n));const i=p(t,["labels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),y(e,["labels"],a)}return e}function QT(t){const e={},n=p(t,["video"]);return n!=null&&y(e,["video"],FE(n)),e}function ZT(t){const e={},n=p(t,["_self"]);return n!=null&&y(e,["video"],BE(n)),e}function eE(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const a=p(t,["audioTimestamp"]);a!=null&&y(e,["audioTimestamp"],a);const o=p(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=p(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=p(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const d=p(t,["logprobs"]);d!=null&&y(e,["logprobs"],d);const h=p(t,["maxOutputTokens"]);h!=null&&y(e,["maxOutputTokens"],h);const v=p(t,["mediaResolution"]);v!=null&&y(e,["mediaResolution"],v);const b=p(t,["presencePenalty"]);b!=null&&y(e,["presencePenalty"],b);const w=p(t,["responseLogprobs"]);w!=null&&y(e,["responseLogprobs"],w);const _=p(t,["responseMimeType"]);_!=null&&y(e,["responseMimeType"],_);const T=p(t,["responseModalities"]);T!=null&&y(e,["responseModalities"],T);const k=p(t,["responseSchema"]);k!=null&&y(e,["responseSchema"],k);const R=p(t,["routingConfig"]);R!=null&&y(e,["routingConfig"],R);const C=p(t,["seed"]);C!=null&&y(e,["seed"],C);const I=p(t,["speechConfig"]);I!=null&&y(e,["speechConfig"],I);const L=p(t,["stopSequences"]);L!=null&&y(e,["stopSequences"],L);const O=p(t,["temperature"]);O!=null&&y(e,["temperature"],O);const q=p(t,["thinkingConfig"]);q!=null&&y(e,["thinkingConfig"],q);const W=p(t,["topK"]);W!=null&&y(e,["topK"],W);const F=p(t,["topP"]);if(F!=null&&y(e,["topP"],F),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function tE(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],fn(t,i)),n}function nE(t,e){const n={},i=p(e,["model"]);return i!=null&&y(n,["_url","name"],fn(t,i)),n}function iE(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function rE(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function sE(t){const e={},n=p(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),p(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function aE(t){const e={},n=p(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=p(t,["imageSize"]);i!=null&&y(e,["imageSize"],i);const a=p(t,["personGeneration"]);a!=null&&y(e,["personGeneration"],a);const o=p(t,["outputMimeType"]);o!=null&&y(e,["imageOutputOptions","mimeType"],o);const l=p(t,["outputCompressionQuality"]);return l!=null&&y(e,["imageOutputOptions","compressionQuality"],l),e}function oE(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],kl(n));const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function wb(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],kl(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function Ch(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],kl(n));const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function ua(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],kl(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function lE(t,e,n){const i={},a=p(e,["pageSize"]);n!==void 0&&a!=null&&y(n,["_query","pageSize"],a);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=p(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],pb(t,c)),i}function uE(t,e,n){const i={},a=p(e,["pageSize"]);n!==void 0&&a!=null&&y(n,["_query","pageSize"],a);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=p(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=p(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],pb(t,c)),i}function cE(t,e){const n={},i=p(e,["config"]);return i!=null&&lE(t,i,n),n}function dE(t,e){const n={},i=p(e,["config"]);return i!=null&&uE(t,i,n),n}function fE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["_self"]);if(a!=null){let o=mb(a);Array.isArray(o)&&(o=o.map(l=>U0(l))),y(e,["models"],o)}return e}function hE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["_self"]);if(a!=null){let o=mb(a);Array.isArray(o)&&(o=o.map(l=>O0(l))),y(e,["models"],o)}return e}function pE(t){const e={},n=p(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const a=p(t,["maskDilation"]);return a!=null&&y(e,["dilation"],a),e}function U0(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const a=p(t,["description"]);a!=null&&y(e,["description"],a);const o=p(t,["version"]);o!=null&&y(e,["version"],o);const l=p(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],IE(l));const c=p(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const d=p(t,["outputTokenLimit"]);d!=null&&y(e,["outputTokenLimit"],d);const h=p(t,["supportedGenerationMethods"]);h!=null&&y(e,["supportedActions"],h);const v=p(t,["temperature"]);v!=null&&y(e,["temperature"],v);const b=p(t,["maxTemperature"]);b!=null&&y(e,["maxTemperature"],b);const w=p(t,["topP"]);w!=null&&y(e,["topP"],w);const _=p(t,["topK"]);_!=null&&y(e,["topK"],_);const T=p(t,["thinking"]);return T!=null&&y(e,["thinking"],T),e}function O0(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["displayName"]);i!=null&&y(e,["displayName"],i);const a=p(t,["description"]);a!=null&&y(e,["description"],a);const o=p(t,["versionId"]);o!=null&&y(e,["version"],o);const l=p(t,["deployedModels"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(w=>ET(w))),y(e,["endpoints"],b)}const c=p(t,["labels"]);c!=null&&y(e,["labels"],c);const d=p(t,["_self"]);d!=null&&y(e,["tunedModelInfo"],RE(d));const h=p(t,["defaultCheckpointId"]);h!=null&&y(e,["defaultCheckpointId"],h);const v=p(t,["checkpoints"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(w=>w)),y(e,["checkpoints"],b)}return e}function mE(t){const e={},n=p(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=p(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const o=p(t,["fileData"]);o!=null&&y(e,["fileData"],CT(o));const l=p(t,["functionCall"]);l!=null&&y(e,["functionCall"],kT(l));const c=p(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&y(e,["inlineData"],eT(d));const h=p(t,["text"]);h!=null&&y(e,["text"],h);const v=p(t,["thought"]);v!=null&&y(e,["thought"],v);const b=p(t,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const w=p(t,["videoMetadata"]);return w!=null&&y(e,["videoMetadata"],w),e}function gE(t){const e={},n=p(t,["productImage"]);return n!=null&&y(e,["image"],ua(n)),e}function vE(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const a=p(t,["baseSteps"]);e!==void 0&&a!=null&&y(e,["parameters","baseSteps"],a);const o=p(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=p(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const h=p(t,["addWatermark"]);e!==void 0&&h!=null&&y(e,["parameters","addWatermark"],h);const v=p(t,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const b=p(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&y(e,["parameters","outputOptions","compressionQuality"],b);const w=p(t,["enhancePrompt"]);e!==void 0&&w!=null&&y(e,["parameters","enhancePrompt"],w);const _=p(t,["labels"]);return e!==void 0&&_!=null&&y(e,["labels"],_),n}function yE(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["source"]);a!=null&&xE(a,n);const o=p(e,["config"]);return o!=null&&vE(o,n),n}function bE(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Eh(a))),y(e,["generatedImages"],i)}return e}function xE(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=p(t,["personImage"]);e!==void 0&&a!=null&&y(e,["instances[0]","personImage","image"],ua(a));const o=p(t,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>gE(c))),y(e,["instances[0]","productImages"],l)}return n}function wE(t){const e={},n=p(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],ua(n));const i=p(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const a=p(t,["referenceType"]);a!=null&&y(e,["referenceType"],a);const o=p(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],pE(o));const l=p(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],oT(l));const c=p(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const d=p(t,["subjectImageConfig"]);return d!=null&&y(e,["subjectImageConfig"],d),e}function Sb(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const a=p(t,["contentType"]);return a!=null&&y(e,["contentType"],a),e}function _b(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const a=p(t,["contentType"]);return a!=null&&y(e,["contentType"],a),e}function SE(t){const e={},n=p(t,["category"]);if(n!=null&&y(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function _E(t){const e={},n=p(t,["image"]);return n!=null&&y(e,["image"],ua(n)),e}function NE(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const a=p(t,["maxPredictions"]);e!==void 0&&a!=null&&y(e,["parameters","maxPredictions"],a);const o=p(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const l=p(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=p(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const d=p(t,["labels"]);return e!==void 0&&d!=null&&y(e,["labels"],d),n}function AE(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["source"]);a!=null&&EE(a,n);const o=p(e,["config"]);return o!=null&&NE(o,n),n}function TE(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>XT(a))),y(e,["generatedMasks"],i)}return e}function EE(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=p(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],ua(a));const o=p(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],_E(o)),n}function CE(t){const e={},n=p(t,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const i=p(t,["functionCallingConfig"]);return i!=null&&y(e,["functionCallingConfig"],IT(i)),e}function kE(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const a=p(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=p(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}const l=p(t,["googleMaps"]);l!=null&&y(e,["googleMaps"],iE(l));const c=p(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],rE(c));const d=p(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}function Nb(t){const e={},n=p(t,["retrieval"]);n!=null&&y(e,["retrieval"],n);const i=p(t,["computerUse"]);if(i!=null&&y(e,["computerUse"],i),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(t,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const o=p(t,["enterpriseWebSearch"]);o!=null&&y(e,["enterpriseWebSearch"],o);const l=p(t,["functionDeclarations"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(w=>RT(w))),y(e,["functionDeclarations"],b)}const c=p(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],c);const d=p(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const h=p(t,["googleSearchRetrieval"]);h!=null&&y(e,["googleSearchRetrieval"],h);const v=p(t,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function IE(t){const e={},n=p(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&y(e,["createTime"],i);const a=p(t,["updateTime"]);return a!=null&&y(e,["updateTime"],a),e}function RE(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&y(e,["createTime"],i);const a=p(t,["updateTime"]);return a!=null&&y(e,["updateTime"],a),e}function LE(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const a=p(t,["description"]);e!==void 0&&a!=null&&y(e,["description"],a);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function DE(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const a=p(t,["description"]);e!==void 0&&a!=null&&y(e,["description"],a);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function ME(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","name"],fn(t,i));const a=p(e,["config"]);return a!=null&&LE(a,n),n}function PE(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["config"]);return a!=null&&DE(a,n),n}function UE(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const a=p(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&y(e,["parameters","safetySetting"],a);const o=p(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const l=p(t,["includeRaiReason"]);e!==void 0&&l!=null&&y(e,["parameters","includeRaiReason"],l);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","mimeType"],c);const d=p(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","compressionQuality"],d);const h=p(t,["enhanceInputImage"]);e!==void 0&&h!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],h);const v=p(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const b=p(t,["labels"]);e!==void 0&&b!=null&&y(e,["labels"],b);const w=p(t,["numberOfImages"]);e!==void 0&&w!=null&&y(e,["parameters","sampleCount"],w);const _=p(t,["mode"]);return e!==void 0&&_!=null&&y(e,["parameters","mode"],_),n}function OE(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["_url","model"],fn(t,i));const a=p(e,["image"]);a!=null&&y(n,["instances[0]","image"],ua(a));const o=p(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=p(e,["config"]);return l!=null&&UE(l,n),n}function jE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Eh(o))),y(e,["generatedImages"],a)}return e}function FE(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],kl(i));const a=p(t,["encoding"]);return a!=null&&y(e,["mimeType"],a),e}function BE(t){const e={},n=p(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],kl(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function qE(t){const e={},n=p(t,["image"]);n!=null&&y(e,["_self"],ua(n));const i=p(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function zE(t){const e={},n=p(t,["image"]);n!=null&&y(e,["image"],Ch(n));const i=p(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function HE(t){const e={},n=p(t,["image"]);n!=null&&y(e,["image"],ua(n));const i=p(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function Ab(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],kl(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["encoding"],a),e}function Tb(t){const e={},n=p(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],kl(i));const a=p(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GE(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function VE(t){const e={},n=p(t,["config"]);return n!=null&&GE(n,e),e}function $E(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function JE(t){const e={},n=p(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&$E(i,e),e}function YE(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function WE(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["customMetadata"],o)}const a=p(t,["chunkingConfig"]);return e!==void 0&&a!=null&&y(e,["chunkingConfig"],a),n}function KE(t){const e={},n=p(t,["name"]);n!=null&&y(e,["name"],n);const i=p(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=p(t,["done"]);a!=null&&y(e,["done"],a);const o=p(t,["error"]);o!=null&&y(e,["error"],o);const l=p(t,["response"]);return l!=null&&y(e,["response"],QE(l)),e}function XE(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&y(e,["fileName"],i);const a=p(t,["config"]);return a!=null&&WE(a,e),e}function QE(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&y(e,["parent"],i);const a=p(t,["documentName"]);return a!=null&&y(e,["documentName"],a),e}function ZE(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function eC(t){const e={},n=p(t,["config"]);return n!=null&&ZE(n,e),e}function tC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["fileSearchStores"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["fileSearchStores"],o)}return e}function Eb(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const a=p(t,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const o=p(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),y(e,["customMetadata"],c)}const l=p(t,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),n}function nC(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&Eb(i,e),e}function iC(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rC="Content-Type",sC="X-Server-Timeout",aC="User-Agent",j0="x-goog-api-client",oC="1.35.0",lC=`google-genai-sdk/${oC}`,uC="v1beta1",cC="v1beta";class dC{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:uC,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:cC,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const a=[this.getRequestUrlInternal(n)];return i&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))a.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,a.toString(),e.abortSignal),this.unaryApiCall(a,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[a,o]of Object.entries(n))typeof o=="object"?i[a]=Object.assign(Object.assign({},i[a]),o):o!==void 0&&(i[a]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,i);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,a.toString(),e.abortSignal),this.streamApiCall(a,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,a){if(n&&n.timeout||a){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}a&&a.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&fC(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await q1(a),new D0(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await q1(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return oa(this,arguments,function*(){var i;const a=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let l="";const c="data:",d=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield Bt(a.read());if(h){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=o.decode(v,{stream:!0});try{const T=JSON.parse(b);if("error"in T){const k=JSON.parse(JSON.stringify(T.error)),R=k.status,C=k.code,I=`got status: ${R}. ${JSON.stringify(T)}`;if(C>=400&&C<600)throw new Ah({message:I,status:C})}}catch(T){if(T.name==="ApiError")throw T}l+=b;let w=-1,_=0;for(;;){w=-1,_=0;for(const R of d){const C=l.indexOf(R);C!==-1&&(w===-1||C<w)&&(w=C,_=R.length)}if(w===-1)break;const T=l.substring(0,w);l=l.substring(w+_);const k=T.trim();if(k.startsWith(c)){const R=k.substring(c.length).trim();try{const C=new Response(R,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Bt(new D0(C))}catch(C){throw new Error(`exception parsing stream chunk ${R}. ${C}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=lC+" "+this.clientOptions.userAgentExtra;return e[aC]=n,e[j0]=n,e[rC]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[a,o]of Object.entries(e.headers))i.append(a,o);e.timeout&&e.timeout>0&&i.append(sC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);a.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=c;const d={file:a},h=this.getFileName(e),v=ut("upload/v1beta/files",d._url),b=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,h,d,n==null?void 0:n.httpOptions);return o.upload(e,b,this)}async uploadFileToFileSearchStore(e,n,i){var a;const o=this.clientOptions.uploader,l=await o.stat(n),c=String(l.size),d=(a=i==null?void 0:i.mimeType)!==null&&a!==void 0?a:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),b={};i!=null&&Eb(i,b);const w=await this.fetchUploadUrl(h,c,d,v,b,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,w,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,a,o,l){var c;let d={};l?d=l:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},a?{"X-Goog-Upload-File-Name":a}:{})};const h=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:d});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function q1(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(i);throw n>=400&&n<600?new Ah({message:a,status:n}):new Error(a)}}function fC(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const h=l[d],v=c[d];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?c[d]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),c[d]=h)}return c}const a=i(n,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hC="mcp_used/unknown";let pC=!1;function Cb(t){for(const e of t)if(mC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return pC}function kb(t){var e;const n=(e=t[j0])!==null&&e!==void 0?e:"";t[j0]=(n+` ${hC}`).trimStart()}function mC(t){return t!==null&&typeof t=="object"&&t instanceof bm}function gC(t){return oa(this,arguments,function*(n,i=100){let a,o=0;for(;o<i;){const l=yield Bt(n.listTools({cursor:a}));for(const c of l.tools)yield yield Bt(c),o++;if(!l.nextCursor)break;a=l.nextCursor}})}class bm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new bm(e,n)}async initialize(){var e,n,i,a;if(this.mcpTools.length>0)return;const o={},l=[];for(const v of this.mcpClients)try{for(var c=!0,d=(n=void 0,la(gC(v))),h;h=await d.next(),e=h.done,!e;c=!0){a=h.value,c=!1;const b=a;l.push(b);const w=b.name;if(o[w])throw new Error(`Duplicate function name ${w} found in MCP tools. Please ensure function names are unique.`);o[w]=v}}catch(b){n={error:b}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),YA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await a.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function vC(t,e,n){const i=new BA;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(i,a),e(i)}class yC{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=wC(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${a}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const v=new Promise(L=>{h=L}),b=e.callbacks,w=function(){h({})},_=this.apiClient,T={onopen:w,onmessage:L=>{vC(_,b.onmessage,L)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(L){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(L){}},k=this.webSocketFactory.create(d,xC(l),T);k.connect(),await v;const I={setup:{model:fn(this.apiClient,e.model)}};return k.send(JSON.stringify(I)),new bC(k,this.apiClient)}}class bC{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=V3(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=G3(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Rc.PLAY)}pause(){this.sendPlaybackControl(Rc.PAUSE)}stop(){this.sendPlaybackControl(Rc.STOP)}resetContext(){this.sendPlaybackControl(Rc.RESET_CONTEXT)}close(){this.conn.close()}}function xC(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function wC(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function _C(t,e,n){const i=new FA;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const o=JSON.parse(a);if(t.isVertexAI()){const l=Y3(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class NC{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new yC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,a,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&Cb(e.config.tools)&&kb(b);const w=CC(b);if(this.apiClient.isVertexAI())v=`${d}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(w,v);else{const ee=this.apiClient.getApiKey();let le="BidiGenerateContent",B="key";ee!=null&&ee.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),le="BidiGenerateContentConstrained",B="access_token"),v=`${d}/ws/google.ai.generativelanguage.${h}.GenerativeService.${le}?${B}=${ee}`}let _=()=>{};const T=new Promise(ee=>{_=ee}),k=e.callbacks,R=function(){var ee;(ee=k==null?void 0:k.onopen)===null||ee===void 0||ee.call(k),_({})},C=this.apiClient,I={onopen:R,onmessage:ee=>{_C(C,k.onmessage,ee)},onerror:(n=k==null?void 0:k.onerror)!==null&&n!==void 0?n:function(ee){},onclose:(i=k==null?void 0:k.onclose)!==null&&i!==void 0?i:function(ee){}},L=this.webSocketFactory.create(v,EC(w),I);L.connect(),await T;let O=fn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const ee=this.apiClient.getProject(),le=this.apiClient.getLocation();O=`projects/${ee}/locations/${le}/`+O}let q={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[fh.AUDIO]}:e.config.responseModalities=[fh.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],F=[];for(const ee of W)if(this.isCallableTool(ee)){const le=ee;F.push(await le.tool())}else F.push(ee);F.length>0&&(e.config.tools=F);const z={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=H3(this.apiClient,z):q=z3(this.apiClient,z),delete q.config,L.send(JSON.stringify(q)),new TC(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const AC={turnComplete:!0};class TC{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Ps(n.turns),e.isVertexAI()||(i=i.map(a=>Th(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(SC)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},AC),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:J3(e)}:n={realtimeInput:$3(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function EC(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function CC(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z1=10;function H1(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Uc(l)){a=!0;break}if(!a)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Uc(t){return"callTool"in t&&typeof t.callTool=="function"}function kC(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>Uc(a)))!==null&&i!==void 0?i:!1}function G1(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,a)=>{if(Uc(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(a)}),n}function V1(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IC extends Eo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,a,o,l,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!kC(n)||H1(n.config))return await this.generateContentInternal(d);const h=G1(n);if(h.length>0){const k=h.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let v,b;const w=Ps(d.contents),_=(o=(a=(i=d.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&o!==void 0?o:z1;let T=0;for(;T<_&&(v=await this.generateContentInternal(d),!(!v.functionCalls||v.functionCalls.length===0));){const k=v.candidates[0].content,R=[];for(const C of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Uc(C)){const L=await C.callTool(v.functionCalls);R.push(...L)}T++,b={role:"user",parts:R},d.contents=Ps(d.contents),d.contents.push(k),d.contents.push(b),V1(d.config)&&(w.push(k),w.push(b))}return V1(d.config)&&(v.automaticFunctionCallingHistory=w),v},this.generateContentStream=async n=>{var i,a,o,l,c;if(this.maybeMoveToResponseJsonSchem(n),H1(n.config)){const b=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(b)}const d=G1(n);if(d.length>0){const b=d.map(w=>`tools[${w}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(o=(a=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,v=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var a;let o;const l=[];if(i!=null&&i.generatedImages)for(const d of i.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((a=d==null?void 0:d.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?o=d==null?void 0:d.safetyAttributes:l.push(d);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Su(Ao.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var i,a,o,l,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,a;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const l=await Promise.all(o.map(async d=>Uc(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&Cb(e.config.tools)){const d=(a=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&a!==void 0?a:{};let h=Object.assign({},d);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),kb(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var n,i,a;const o=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Uc(l)){const c=l,d=await c.tool();for(const h of(a=d.functionDeclarations)!==null&&a!==void 0?a:[]){if(!h.name)throw new Error("Function declaration name is required.");if(o.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);o.set(h.name,c)}}return o}async processAfcStream(e){var n,i,a;const o=(a=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:z1;let l=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(h,v,b){return oa(this,arguments,function*(){for(var w,_,T,k,R,C;c<o;){l&&(c++,l=!1);const q=yield Bt(h.processParamsMaybeAddMcpUsage(b)),W=yield Bt(h.generateContentStreamInternal(q)),F=[],z=[];try{for(var I=!0,L=(_=void 0,la(W)),O;O=yield Bt(L.next()),w=O.done,!w;I=!0){k=O.value,I=!1;const ee=k;if(yield yield Bt(ee),ee.candidates&&(!((R=ee.candidates[0])===null||R===void 0)&&R.content)){z.push(ee.candidates[0].content);for(const le of(C=ee.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(c<o&&le.functionCall){if(!le.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(le.functionCall.name)){const B=yield Bt(v.get(le.functionCall.name).callTool([le.functionCall]));F.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${le.functionCall.name}`)}}}}catch(ee){_={error:ee}}finally{try{!I&&!w&&(T=L.return)&&(yield Bt(T.call(L)))}finally{if(_)throw _.error}}if(F.length>0){l=!0;const ee=new Ed;ee.candidates=[{content:{role:"user",parts:F}}],yield yield Bt(ee);const le=[];le.push(...z),le.push({role:"user",parts:F});const B=Ps(b.contents).concat(le);b.contents=B}else break}})})(this,d,e)}async generateContentInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=j1(this.apiClient,e);return c=ut("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=B1(v),w=new Ed;return Object.assign(w,b),w})}else{const h=O1(this.apiClient,e);return c=ut("{model}:generateContent",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=F1(v),w=new Ed;return Object.assign(w,b),w})}}async generateContentStreamInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=j1(this.apiClient,e);return c=ut("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(b){return oa(this,arguments,function*(){var w,_,T,k;try{for(var R=!0,C=la(b),I;I=yield Bt(C.next()),w=I.done,!w;R=!0){k=I.value,R=!1;const L=k,O=B1(yield Bt(L.json()));O.sdkHttpResponse={headers:L.headers};const q=new Ed;Object.assign(q,O),yield yield Bt(q)}}catch(L){_={error:L}}finally{try{!R&&!w&&(T=C.return)&&(yield Bt(T.call(C)))}finally{if(_)throw _.error}}})})}else{const h=O1(this.apiClient,e);return c=ut("{model}:streamGenerateContent?alt=sse",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(b){return oa(this,arguments,function*(){var w,_,T,k;try{for(var R=!0,C=la(b),I;I=yield Bt(C.next()),w=I.done,!w;R=!0){k=I.value,R=!1;const L=k,O=F1(yield Bt(L.json()));O.sdkHttpResponse={headers:L.headers};const q=new Ed;Object.assign(q,O),yield yield Bt(q)}}catch(L){_={error:L}}finally{try{!R&&!w&&(T=C.return)&&(yield Bt(T.call(C)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=NT(this.apiClient,e);return c=ut("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=TT(v),w=new x1;return Object.assign(w,b),w})}else{const h=_T(this.apiClient,e);return c=ut("{model}:batchEmbedContents",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=AT(v),w=new x1;return Object.assign(w,b),w})}}async generateImagesInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=OT(this.apiClient,e);return c=ut("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=FT(v),w=new w1;return Object.assign(w,b),w})}else{const h=UT(this.apiClient,e);return c=ut("{model}:predict",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=jT(v),w=new w1;return Object.assign(w,b),w})}}async editImageInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=bT(this.apiClient,e);return o=ut("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>{const h=xT(d),v=new CA;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=OE(this.apiClient,e);return o=ut("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>{const h=jE(d),v=new kA;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=yE(this.apiClient,e);return o=ut("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=bE(d),v=new IA;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=AE(this.apiClient,e);return o=ut("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=TE(d),v=new RA;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=nE(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>O0(v))}else{const h=tE(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>U0(v))}}async listInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=dE(this.apiClient,e);return c=ut("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=hE(v),w=new S1;return Object.assign(w,b),w})}else{const h=cE(this.apiClient,e);return c=ut("{models_url}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=fE(v),w=new S1;return Object.assign(w,b),w})}}async update(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=PE(this.apiClient,e);return c=ut("{model}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>O0(v))}else{const h=ME(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>U0(v))}}async delete(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=mT(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=vT(v),w=new _1;return Object.assign(w,b),w})}else{const h=pT(this.apiClient,e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=gT(v),w=new _1;return Object.assign(w,b),w})}}async countTokens(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=dT(this.apiClient,e);return c=ut("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=hT(v),w=new N1;return Object.assign(w,b),w})}else{const h=cT(this.apiClient,e);return c=ut("{model}:countTokens",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=fT(v),w=new N1;return Object.assign(w,b),w})}}async computeTokens(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=iT(this.apiClient,e);return o=ut("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>{const h=rT(d),v=new LA;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=VT(this.apiClient,e);return c=ut("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l.then(v=>{const b=HT(v),w=new hh;return Object.assign(w,b),w})}else{const h=GT(this.apiClient,e);return c=ut("{model}:predictLongRunning",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l.then(v=>{const b=zT(v),w=new hh;return Object.assign(w,b),w})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RC extends Eo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=SA(e);return c=ut("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),l}else{const h=wA(e);return c=ut("{operationName}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=pA(e);return o=ut("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LC(t){const e={},n=p(t,["data"]);if(n!=null&&y(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function DC(t){const e={},n=p(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>zC(o))),y(e,["parts"],a)}const i=p(t,["role"]);return i!=null&&y(e,["role"],i),e}function MC(t,e,n){const i={},a=p(e,["expireTime"]);n!==void 0&&a!=null&&y(n,["expireTime"],a);const o=p(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const l=p(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=p(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],qC(t,c));const d=p(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&y(n,["fieldMask"],d),i}function PC(t,e){const n={},i=p(e,["config"]);return i!=null&&y(n,["config"],MC(t,i,n)),n}function UC(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function OC(t){const e={},n=p(t,["id"]);n!=null&&y(e,["id"],n);const i=p(t,["args"]);i!=null&&y(e,["args"],i);const a=p(t,["name"]);if(a!=null&&y(e,["name"],a),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jC(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function FC(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function BC(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const a=p(t,["responseModalities"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","responseModalities"],a);const o=p(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=p(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=p(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const d=p(t,["maxOutputTokens"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","maxOutputTokens"],d);const h=p(t,["mediaResolution"]);e!==void 0&&h!=null&&y(e,["setup","generationConfig","mediaResolution"],h);const v=p(t,["seed"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","seed"],v);const b=p(t,["speechConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","speechConfig"],ym(b));const w=p(t,["thinkingConfig"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","thinkingConfig"],w);const _=p(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],_);const T=p(t,["systemInstruction"]);e!==void 0&&T!=null&&y(e,["setup","systemInstruction"],DC(gr(T)));const k=p(t,["tools"]);if(e!==void 0&&k!=null){let W=Bc(k);Array.isArray(W)&&(W=W.map(F=>GC(Fc(F)))),y(e,["setup","tools"],W)}const R=p(t,["sessionResumption"]);e!==void 0&&R!=null&&y(e,["setup","sessionResumption"],HC(R));const C=p(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&y(e,["setup","inputAudioTranscription"],C);const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&y(e,["setup","outputAudioTranscription"],I);const L=p(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&y(e,["setup","realtimeInputConfig"],L);const O=p(t,["contextWindowCompression"]);e!==void 0&&O!=null&&y(e,["setup","contextWindowCompression"],O);const q=p(t,["proactivity"]);if(e!==void 0&&q!=null&&y(e,["setup","proactivity"],q),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function qC(t,e){const n={},i=p(e,["model"]);i!=null&&y(n,["setup","model"],fn(t,i));const a=p(e,["config"]);return a!=null&&y(n,["config"],BC(a,n)),n}function zC(t){const e={},n=p(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=p(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const o=p(t,["fileData"]);o!=null&&y(e,["fileData"],UC(o));const l=p(t,["functionCall"]);l!=null&&y(e,["functionCall"],OC(l));const c=p(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=p(t,["inlineData"]);d!=null&&y(e,["inlineData"],LC(d));const h=p(t,["text"]);h!=null&&y(e,["text"],h);const v=p(t,["thought"]);v!=null&&y(e,["thought"],v);const b=p(t,["thoughtSignature"]);b!=null&&y(e,["thoughtSignature"],b);const w=p(t,["videoMetadata"]);return w!=null&&y(e,["videoMetadata"],w),e}function HC(t){const e={},n=p(t,["handle"]);if(n!=null&&y(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function GC(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&y(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&y(e,["fileSearch"],i);const a=p(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=p(t,["functionDeclarations"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(b=>b)),y(e,["functionDeclarations"],v)}const l=p(t,["googleMaps"]);l!=null&&y(e,["googleMaps"],jC(l));const c=p(t,["googleSearch"]);c!=null&&y(e,["googleSearch"],FC(c));const d=p(t,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const h=p(t,["urlContext"]);return h!=null&&y(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VC(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const a=Object.keys(i).map(o=>`${n}.${o}`);e.push(...a)}else e.push(n)}return e.join(",")}function $C(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(n){const o=VC(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];a.length>0&&(c=a.map(h=>l.includes(h)?`generationConfig.${h}`:h));const d=[];o&&d.push(o),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class JC extends Eo{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=PC(this.apiClient,e);o=ut("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const d=$C(c,e.config);return a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),a.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YC(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function WC(t){const e={},n=p(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&YC(i,e),e}function KC(t){const e={},n=p(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function XC(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=p(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function QC(t){const e={},n=p(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&XC(i,e),e}function ZC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=p(t,["documents"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e6 extends Eo{constructor(e){super(),this.apiClient=e,this.list=async n=>new Su(Ao.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=KC(e);return o=ut("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async delete(e){var n,i;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=WC(e);a=ut("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=QC(e);return o=ut("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=ZC(d),v=new DA;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t6 extends Eo{constructor(e,n=new e6(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Su(Ao.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=VE(e);return o=ut("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async get(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=YE(e);return o=ut("{name}",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async delete(e){var n,i;let a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=JE(e);a=ut("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=eC(e);return o=ut("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=tC(d),v=new MA;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nC(e);return o=ut("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=iC(d),v=new PA;return Object.assign(v,h),v})}}async importFile(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=XE(e);return o=ut("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const h=KE(d),v=new hm;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ib=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Ib=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const n6=()=>Ib();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const B0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Us extends Error{}class Er extends Us{constructor(e,n,i,a){super(`${Er.makeMessage(e,n,i)}`),this.status=e,this.headers=a,this.error=n}static makeMessage(e,n,i){const a=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,i,a){if(!e||!a)return new kh({message:i,cause:B0(n)});const o=n;return e===400?new Lb(e,o,i,a):e===401?new Db(e,o,i,a):e===403?new Mb(e,o,i,a):e===404?new Pb(e,o,i,a):e===409?new Ub(e,o,i,a):e===422?new Ob(e,o,i,a):e===429?new jb(e,o,i,a):e>=500?new Fb(e,o,i,a):new Er(e,o,i,a)}}class q0 extends Er{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class kh extends Er{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Rb extends kh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Lb extends Er{}class Db extends Er{}class Mb extends Er{}class Pb extends Er{}class Ub extends Er{}class Ob extends Er{}class jb extends Er{}class Fb extends Er{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i6=/^[a-z][a-z0-9+.-]*:/i,r6=t=>i6.test(t);let z0=t=>(z0=Array.isArray,z0(t));const s6=z0;let a6=s6;const $1=a6;function o6(t){if(!t)return!0;for(const e in t)return!1;return!0}function l6(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const u6=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Us(`${t} must be an integer`);if(e<0)throw new Us(`${t} must be a positive integer`);return e},c6=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d6=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ec="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const h6=()=>{var t,e,n,i,a;const o=f6();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ec,"X-Stainless-OS":Y1(Deno.build.os),"X-Stainless-Arch":J1(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ec,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ec,"X-Stainless-OS":Y1((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":J1((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const l=p6();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ec,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ec,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function p6(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const a=i[1]||0,o=i[2]||0,l=i[3]||0;return{browser:e,version:`${a}.${o}.${l}`}}}return null}const J1=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Y1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Yf;const m6=()=>Yf??(Yf=h6());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bb(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function v6(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Bb({start(){},async pull(n){const{done:i,value:a}=await e.next();i?n.close():n.enqueue(a)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function qb(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function y6(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),a=i.cancel();i.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const b6=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zb=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function a0(t,e,n){return zb(),new File(t,e??"unknown_file",n)}function x6(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const w6=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hb=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",S6=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Hb(t),_6=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function N6(t,e,n){if(zb(),t=await t,S6(t))return t instanceof File?t:a0([await t.arrayBuffer()],t.name);if(_6(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),a0(await H0(a),e,n)}const i=await H0(t);if(e||(e=x6(t)),!(n!=null&&n.type)){const a=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof a=="string"&&(n=Object.assign(Object.assign({},n),{type:a}))}return a0(i,e,n)}async function H0(t){var e,n,i,a,o;let l=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)l.push(t);else if(Hb(t))l.push(t instanceof Blob?t:await t.arrayBuffer());else if(w6(t))try{for(var c=!0,d=la(t),h;h=await d.next(),e=h.done,!e;c=!0){a=h.value,c=!1;const v=a;l.push(...await H0(v))}}catch(v){n={error:v}}finally{try{!c&&!e&&(i=d.return)&&await i.call(d)}finally{if(n)throw n.error}}else{const v=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${A6(t)}`)}return l}function A6(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gb{constructor(e){this._client=e}}Gb._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vb(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const W1=Object.freeze(Object.create(null)),T6=(t=Vb)=>(function(n,...i){if(n.length===1)return n[0];let a=!1;const o=[],l=n.reduce((v,b,w)=>{var _,T,k;/[?#]/.test(b)&&(a=!0);const R=i[w];let C=(a?encodeURIComponent:t)(""+R);return w!==i.length&&(R==null||typeof R=="object"&&R.toString===((k=Object.getPrototypeOf((T=Object.getPrototypeOf((_=R.hasOwnProperty)!==null&&_!==void 0?_:W1))!==null&&T!==void 0?T:W1))===null||k===void 0?void 0:k.toString))&&(C=R+"",o.push({start:v.length+b.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(R).slice(8,-1)} is not a valid path parameter`})),v+b+(w===i.length?"":C)},""),c=l.split(/[?#]/,1)[0],d=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=d.exec(c))!==null;)o.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(o.sort((v,b)=>v.start-b.start),o.length>0){let v=0;const b=o.reduce((w,_)=>{const T=" ".repeat(_.start-v),k="^".repeat(_.length);return v=_.start+_.length,w+T+k},"");throw new Us(`Path parameters result in path with invalid segments:
${o.map(w=>w.error).join(`
`)}
${l}
${b}`)}return l}),Wf=T6(Vb);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $b extends Gb{create(e,n){var i;const{api_version:a=this._client.apiVersion}=e,o=mh(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Us("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Us("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Wf`/${a}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:a=this._client.apiVersion}=n??{};return this._client.delete(Wf`/${a}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:a=this._client.apiVersion}=n??{};return this._client.post(Wf`/${a}/interactions/${e}/cancel`,i)}get(e,n={},i){var a;const o=n??{},{api_version:l=this._client.apiVersion}=o,c=mh(o,["api_version"]);return this._client.get(Wf`/${l}/interactions/${e}`,Object.assign(Object.assign({query:c},i),{stream:(a=n==null?void 0:n.stream)!==null&&a!==void 0?a:!1}))}}$b._key=Object.freeze(["interactions"]);class Jb extends $b{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E6(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let i=0;for(const a of t)n.set(a,i),i+=a.length;return n}let Kf;function xm(t){let e;return(Kf??(e=new globalThis.TextEncoder,Kf=e.encode.bind(e)))(t)}let Xf;function K1(t){let e;return(Xf??(e=new globalThis.TextDecoder,Xf=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ih{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xm(e):e;this.buffer=E6([this.buffer,n]);const i=[];let a;for(;(a=C6(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){i.push(K1(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,l=K1(this.buffer.subarray(0,o));i.push(l),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Ih.NEWLINE_CHARS=new Set([`
`,"\r"]);Ih.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function C6(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function k6(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gh={off:0,error:200,warn:300,info:400,debug:500},X1=(t,e,n)=>{if(t){if(l6(gh,t))return t;Ar(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(gh))}`)}};function Dd(){}function Qf(t,e,n){return!e||gh[t]>gh[n]?Dd:e[t].bind(e)}const I6={error:Dd,warn:Dd,info:Dd,debug:Dd};let Q1=new WeakMap;function Ar(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return I6;const a=Q1.get(n);if(a&&a[0]===i)return a[1];const o={error:Qf("error",n,i),warn:Qf("warn",n,i),info:Qf("info",n,i),debug:Qf("debug",n,i)};return Q1.set(n,[i,o]),o}const fu=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lc{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let a=!1;const o=i?Ar(i):console;function l(){return oa(this,arguments,function*(){var d,h,v,b;if(a)throw new Us("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let w=!1;try{try{for(var _=!0,T=la(R6(e,n)),k;k=yield Bt(T.next()),d=k.done,!d;_=!0){b=k.value,_=!1;const R=b;if(!w)if(R.data.startsWith("[DONE]")){w=!0;continue}else try{yield yield Bt(JSON.parse(R.data))}catch(C){throw o.error("Could not parse message into JSON:",R.data),o.error("From chunk:",R.raw),C}}}catch(R){h={error:R}}finally{try{!_&&!d&&(v=T.return)&&(yield Bt(v.call(T)))}finally{if(h)throw h.error}}w=!0}catch(R){if(F0(R))return yield Bt(void 0);throw R}finally{w||n.abort()}})}return new Lc(l,n,i)}static fromReadableStream(e,n,i){let a=!1;function o(){return oa(this,arguments,function*(){var d,h,v,b;const w=new Ih,_=qb(e);try{for(var T=!0,k=la(_),R;R=yield Bt(k.next()),d=R.done,!d;T=!0){b=R.value,T=!1;const C=b;for(const I of w.decode(C))yield yield Bt(I)}}catch(C){h={error:C}}finally{try{!T&&!d&&(v=k.return)&&(yield Bt(v.call(k)))}finally{if(h)throw h.error}}for(const C of w.flush())yield yield Bt(C)})}function l(){return oa(this,arguments,function*(){var d,h,v,b;if(a)throw new Us("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let w=!1;try{try{for(var _=!0,T=la(o()),k;k=yield Bt(T.next()),d=k.done,!d;_=!0){b=k.value,_=!1;const R=b;w||R&&(yield yield Bt(JSON.parse(R)))}}catch(R){h={error:R}}finally{try{!_&&!d&&(v=T.return)&&(yield Bt(v.call(T)))}finally{if(h)throw h.error}}w=!0}catch(R){if(F0(R))return yield Bt(void 0);throw R}finally{w||n.abort()}})}return new Lc(l,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),a=o=>({next:()=>{if(o.length===0){const l=i.next();e.push(l),n.push(l)}return o.shift()}});return[new Lc(()=>a(e),this.controller,this.client),new Lc(()=>a(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Bb({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await n.next();if(o)return i.close();const l=xm(JSON.stringify(a)+`
`);i.enqueue(l)}catch(a){i.error(a)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function R6(t,e){return oa(this,arguments,function*(){var i,a,o,l;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Us("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Us("Attempted to iterate over a response with no body");const c=new D6,d=new Ih,h=qb(t.body);try{for(var v=!0,b=la(L6(h)),w;w=yield Bt(b.next()),i=w.done,!i;v=!0){l=w.value,v=!1;const _=l;for(const T of d.decode(_)){const k=c.decode(T);k&&(yield yield Bt(k))}}}catch(_){a={error:_}}finally{try{!v&&!i&&(o=b.return)&&(yield Bt(o.call(b)))}finally{if(a)throw a.error}}for(const _ of d.flush()){const T=c.decode(_);T&&(yield yield Bt(T))}})}function L6(t){return oa(this,arguments,function*(){var n,i,a,o;let l=new Uint8Array;try{for(var c=!0,d=la(t),h;h=yield Bt(d.next()),n=h.done,!n;c=!0){o=h.value,c=!1;const v=o;if(v==null)continue;const b=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?xm(v):v;let w=new Uint8Array(l.length+b.length);w.set(l),w.set(b,l.length),l=w;let _;for(;(_=k6(l))!==-1;)yield yield Bt(l.slice(0,_)),l=l.slice(_)}}catch(v){i={error:v}}finally{try{!c&&!n&&(a=d.return)&&(yield Bt(a.call(d)))}finally{if(i)throw i.error}}l.length>0&&(yield yield Bt(l))})}class D6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,a]=M6(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function M6(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function P6(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:a,startTime:o}=e,l=await(async()=>{var c;if(e.options.stream)return Ar(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Lc.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const d=n.headers.get("content-type"),h=(c=d==null?void 0:d.split(";")[0])===null||c===void 0?void 0:c.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await n.json():await n.text()})();return Ar(t).debug(`[${i}] response parsed`,fu({retryOfRequestLogID:a,url:n.url,status:n.status,body:l,durationMs:Date.now()-o})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wm extends Promise{constructor(e,n,i=P6){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new wm(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yb=Symbol("brand.privateNullableHeaders");function*U6(t){if(!t)return;if(Yb in t){const{values:i,nulls:a}=t;yield*i.entries();for(const o of a)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():$1(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const a=i[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const o=$1(i[1])?i[1]:[i[1]];let l=!1;for(const c of o)c!==void 0&&(e&&!l&&(l=!0,yield[a,null]),yield[a,c])}}const Cd=t=>{const e=new Headers,n=new Set;for(const i of t){const a=new Set;for(const[o,l]of U6(i)){const c=o.toLowerCase();a.has(c)||(e.delete(o),a.add(c)),l===null?(e.delete(o),n.add(c)):(e.append(o,l),n.delete(c))}}return{[Yb]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o0=t=>{var e,n,i,a,o,l;if(typeof globalThis.process<"u")return(i=(n=(e=lA)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(o=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||o===void 0?void 0:o.call(a,t))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wb;class Rh{constructor(e){var n,i,a,o,l,c,d,{baseURL:h=o0("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=o0("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:b="v1beta"}=e,w=mh(e,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:v,apiVersion:b},w),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(i=_.timeout)!==null&&i!==void 0?i:Rh.DEFAULT_TIMEOUT,this.logger=(a=_.logger)!==null&&a!==void 0?a:console;const T="warn";this.logLevel=T,this.logLevel=(l=(o=X1(_.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:X1(o0("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:T,this.fetchOptions=_.fetchOptions,this.maxRetries=(c=_.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(d=_.fetch)!==null&&d!==void 0?d:g6(),this.encoder=b6,this._options=_,this.apiKey=v,this.apiVersion=b,this.clientAdapter=_.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Cd([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Cd([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Cd([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Us(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ec}`}defaultIdempotencyKey(){return`stainless-node-retry-${n6()}`}makeStatusError(e,n,i,a){return Er.generate(e,n,i,a)}buildURL(e,n,i){const a=!this.baseURLOverridden()&&i||this.baseURL,o=r6(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return o6(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(a=>Object.assign({method:e,path:n},a)))}request(e,n=null){return new wm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var a,o,l;const c=await e,d=(a=c.maxRetries)!==null&&a!==void 0?a:this.maxRetries;n==null&&(n=d),await this.prepareOptions(c);const{req:h,url:v,timeout:b}=await this.buildRequest(c,{retryCount:d-n});await this.prepareRequest(h,{url:v,options:c});const w="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=i===void 0?"":`, retryOf: ${i}`,T=Date.now();if(Ar(this).debug(`[${w}] sending request`,fu({retryOfRequestLogID:i,method:c.method,url:v,options:c,headers:h.headers})),!((o=c.signal)===null||o===void 0)&&o.aborted)throw new q0;const k=new AbortController,R=await this.fetchWithTimeout(v,h,b,k).catch(B0),C=Date.now();if(R instanceof globalThis.Error){const L=`retrying, ${n} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new q0;const O=F0(R)||/timed? ?out/i.test(String(R)+("cause"in R?String(R.cause):""));if(n)return Ar(this).info(`[${w}] connection ${O?"timed out":"failed"} - ${L}`),Ar(this).debug(`[${w}] connection ${O?"timed out":"failed"} (${L})`,fu({retryOfRequestLogID:i,url:v,durationMs:C-T,message:R.message})),this.retryRequest(c,n,i??w);throw Ar(this).info(`[${w}] connection ${O?"timed out":"failed"} - error; no more retries left`),Ar(this).debug(`[${w}] connection ${O?"timed out":"failed"} (error; no more retries left)`,fu({retryOfRequestLogID:i,url:v,durationMs:C-T,message:R.message})),O?new Rb:new kh({cause:R})}const I=`[${w}${_}] ${h.method} ${v} ${R.ok?"succeeded":"failed"} with status ${R.status} in ${C-T}ms`;if(!R.ok){const L=await this.shouldRetry(R);if(n&&L){const ee=`retrying, ${n} attempts remaining`;return await y6(R.body),Ar(this).info(`${I} - ${ee}`),Ar(this).debug(`[${w}] response error (${ee})`,fu({retryOfRequestLogID:i,url:R.url,status:R.status,headers:R.headers,durationMs:C-T})),this.retryRequest(c,n,i??w,R.headers)}const O=L?"error; no more retries left":"error; not retryable";Ar(this).info(`${I} - ${O}`);const q=await R.text().catch(ee=>B0(ee).message),W=c6(q),F=W?void 0:q;throw Ar(this).debug(`[${w}] response error (${O})`,fu({retryOfRequestLogID:i,url:R.url,status:R.status,headers:R.headers,message:F,durationMs:Date.now()-T})),this.makeStatusError(R.status,W,F,R.headers)}return Ar(this).info(I),Ar(this).debug(`[${w}] response start`,fu({retryOfRequestLogID:i,url:R.url,status:R.status,headers:R.headers,durationMs:C-T})),{response:R,options:c,controller:k,requestLogID:w,retryOfRequestLogID:i,startTime:T}}async fetchWithTimeout(e,n,i,a){const o=n||{},{signal:l,method:c}=o,d=mh(o,["signal","method"]);l&&l.addEventListener("abort",()=>a.abort());const h=setTimeout(()=>a.abort(),i),v=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,b=Object.assign(Object.assign(Object.assign({signal:a.signal},v?{duplex:"half"}:{}),{method:"GET"}),d);c&&(b.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,a){var o;let l;const c=a==null?void 0:a.get("retry-after-ms");if(c){const h=parseFloat(c);Number.isNaN(h)||(l=h)}const d=a==null?void 0:a.get("retry-after");if(d&&!l){const h=parseFloat(d);Number.isNaN(h)?l=Date.parse(d)-Date.now():l=h*1e3}if(!(l&&0<=l&&l<60*1e3)){const h=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,h)}return await d6(l),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,l=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,a,o;const l=Object.assign({},e),{method:c,path:d,query:h,defaultBaseURL:v}=l,b=this.buildURL(d,h,v);"timeout"in l&&u6("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:w,body:_}=this.buildBody({options:l}),T=await this.buildHeaders({options:e,method:c,bodyHeaders:w,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:T},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"}),_&&{body:_}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(o=l.fetchOptions)!==null&&o!==void 0?o:{}),url:b,timeout:l.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:a}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let c=Cd([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),m6()),this._options.defaultHeaders,i,e.headers,l]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Cd([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:v6(e)}:this.encoder({body:e,headers:i})}}Rh.DEFAULT_TIMEOUT=6e4;class Ji extends Rh{constructor(){super(...arguments),this.interactions=new Jb(this)}}Wb=Ji;Ji.GeminiNextGenAPIClient=Wb;Ji.GeminiNextGenAPIClientError=Us;Ji.APIError=Er;Ji.APIConnectionError=kh;Ji.APIConnectionTimeoutError=Rb;Ji.APIUserAbortError=q0;Ji.NotFoundError=Pb;Ji.ConflictError=Ub;Ji.RateLimitError=jb;Ji.BadRequestError=Lb;Ji.AuthenticationError=Db;Ji.InternalServerError=Fb;Ji.PermissionDeniedError=Mb;Ji.UnprocessableEntityError=Ob;Ji.toFile=N6;Ji.Interactions=Jb;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O6(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function j6(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function F6(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&y(n,["sdkHttpResponse"],i),n}function B6(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&y(n,["sdkHttpResponse"],i),n}function q6(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=p(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&y(e,["displayName"],a),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=p(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const l=p(t,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=p(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const d=p(t,["learningRate"]);if(e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","learningRate"],d),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function z6(t,e,n){const i={};let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const _=p(t,["validationDataset"]);e!==void 0&&_!=null&&y(e,["supervisedTuningSpec"],Z1(_))}else if(a==="PREFERENCE_TUNING"){const _=p(t,["validationDataset"]);e!==void 0&&_!=null&&y(e,["preferenceOptimizationSpec"],Z1(_))}const o=p(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const l=p(t,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const _=p(t,["epochCount"]);e!==void 0&&_!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(c==="PREFERENCE_TUNING"){const _=p(t,["epochCount"]);e!==void 0&&_!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let d=p(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const _=p(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(d==="PREFERENCE_TUNING"){const _=p(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let h=p(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const _=p(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(h==="PREFERENCE_TUNING"){const _=p(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let v=p(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const _=p(t,["adapterSize"]);e!==void 0&&_!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(v==="PREFERENCE_TUNING"){const _=p(t,["adapterSize"]);e!==void 0&&_!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=p(t,["labels"]);e!==void 0&&b!=null&&y(e,["labels"],b);const w=p(t,["beta"]);return e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],w),i}function H6(t,e){const n={},i=p(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const a=p(t,["preTunedModel"]);a!=null&&y(n,["preTunedModel"],a);const o=p(t,["trainingDataset"]);o!=null&&ek(o);const l=p(t,["config"]);return l!=null&&q6(l,n),n}function G6(t,e){const n={},i=p(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const a=p(t,["preTunedModel"]);a!=null&&y(n,["preTunedModel"],a);const o=p(t,["trainingDataset"]);o!=null&&tk(o,n,e);const l=p(t,["config"]);return l!=null&&z6(l,n,e),n}function V6(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function $6(t,e){const n={},i=p(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function J6(t,e,n){const i={},a=p(t,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const o=p(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=p(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function Y6(t,e,n){const i={},a=p(t,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const o=p(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=p(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function W6(t,e){const n={},i=p(t,["config"]);return i!=null&&J6(i,n),n}function K6(t,e){const n={},i=p(t,["config"]);return i!=null&&Y6(i,n),n}function X6(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=p(t,["nextPageToken"]);a!=null&&y(n,["nextPageToken"],a);const o=p(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Kb(c))),y(n,["tuningJobs"],l)}return n}function Q6(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=p(t,["nextPageToken"]);a!=null&&y(n,["nextPageToken"],a);const o=p(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>G0(c))),y(n,["tuningJobs"],l)}return n}function Z6(t,e){const n={},i=p(t,["name"]);i!=null&&y(n,["model"],i);const a=p(t,["name"]);return a!=null&&y(n,["endpoint"],a),n}function ek(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),y(n,["examples","examples"],a)}return n}function tk(t,e,n){const i={};let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=p(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=p(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Kb(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=p(t,["name"]);a!=null&&y(n,["name"],a);const o=p(t,["state"]);o!=null&&y(n,["state"],fb(o));const l=p(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=p(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const d=p(t,["tuningTask","completeTime"]);d!=null&&y(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(n,["updateTime"],h);const v=p(t,["description"]);v!=null&&y(n,["description"],v);const b=p(t,["baseModel"]);b!=null&&y(n,["baseModel"],b);const w=p(t,["_self"]);return w!=null&&y(n,["tunedModel"],Z6(w)),n}function G0(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=p(t,["name"]);a!=null&&y(n,["name"],a);const o=p(t,["state"]);o!=null&&y(n,["state"],fb(o));const l=p(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=p(t,["startTime"]);c!=null&&y(n,["startTime"],c);const d=p(t,["endTime"]);d!=null&&y(n,["endTime"],d);const h=p(t,["updateTime"]);h!=null&&y(n,["updateTime"],h);const v=p(t,["error"]);v!=null&&y(n,["error"],v);const b=p(t,["description"]);b!=null&&y(n,["description"],b);const w=p(t,["baseModel"]);w!=null&&y(n,["baseModel"],w);const _=p(t,["tunedModel"]);_!=null&&y(n,["tunedModel"],_);const T=p(t,["preTunedModel"]);T!=null&&y(n,["preTunedModel"],T);const k=p(t,["supervisedTuningSpec"]);k!=null&&y(n,["supervisedTuningSpec"],k);const R=p(t,["preferenceOptimizationSpec"]);R!=null&&y(n,["preferenceOptimizationSpec"],R);const C=p(t,["tuningDataStats"]);C!=null&&y(n,["tuningDataStats"],C);const I=p(t,["encryptionSpec"]);I!=null&&y(n,["encryptionSpec"],I);const L=p(t,["partnerModelTuningSpec"]);L!=null&&y(n,["partnerModelTuningSpec"],L);const O=p(t,["customBaseModel"]);O!=null&&y(n,["customBaseModel"],O);const q=p(t,["experiment"]);q!=null&&y(n,["experiment"],q);const W=p(t,["labels"]);W!=null&&y(n,["labels"],W);const F=p(t,["outputUri"]);F!=null&&y(n,["outputUri"],F);const z=p(t,["pipelineJob"]);z!=null&&y(n,["pipelineJob"],z);const ee=p(t,["serviceAccount"]);ee!=null&&y(n,["serviceAccount"],ee);const le=p(t,["tunedModelDisplayName"]);le!=null&&y(n,["tunedModelDisplayName"],le);const B=p(t,["veoTuningSpec"]);return B!=null&&y(n,["veoTuningSpec"],B),n}function nk(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=p(t,["name"]);a!=null&&y(n,["name"],a);const o=p(t,["metadata"]);o!=null&&y(n,["metadata"],o);const l=p(t,["done"]);l!=null&&y(n,["done"],l);const c=p(t,["error"]);return c!=null&&y(n,["error"],c),n}function Z1(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const a=p(t,["vertexDatasetResource"]);return a!=null&&y(n,["validationDatasetUri"],a),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ik extends Eo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Su(Ao.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:a});return o.baseModel=void 0,await this.tuneInternal(o)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),o=await this.tuneMldevInternal(a);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:L0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=$6(e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>G0(v))}else{const h=V6(e);return c=ut("{name}",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>Kb(v))}}async listInternal(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=K6(e);return c=ut("tuningJobs",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=Q6(v),w=new A1;return Object.assign(w,b),w})}else{const h=W6(e);return c=ut("tunedModels",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=X6(v),w=new A1;return Object.assign(w,b),w})}}async cancel(e){var n,i,a,o;let l,c="",d={};if(this.apiClient.isVertexAI()){const h=j6(e);return c=ut("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=B6(v),w=new T1;return Object.assign(w,b),w})}else{const h=O6(e);return c=ut("{name}:cancel",h._url),d=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(b=>{const w=b;return w.sdkHttpResponse={headers:v.headers},w})),l.then(v=>{const b=F6(v),w=new T1;return Object.assign(w,b),w})}}async tuneInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI()){const c=G6(e,e);return o=ut("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>G0(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let a,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=H6(e);return o=ut("tunedModels",c._url),l=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:d.headers},v})),a.then(d=>nk(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rk{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const sk=1024*1024*8,ak=3,ok=1e3,lk=2,vh="x-goog-upload-status";async function uk(t,e,n){var i;const a=await Xb(t,e,n),o=await(a==null?void 0:a.json());if(((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[vh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function ck(t,e,n){var i;const a=await Xb(t,e,n),o=await(a==null?void 0:a.json());if(((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[vh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=ab(o),c=new pm;return Object.assign(c,l),c}async function Xb(t,e,n){var i,a;let o=0,l=0,c=new D0(new Response),d="upload";for(o=t.size;l<o;){const h=Math.min(sk,o-l),v=t.slice(l,l+h);l+h>=o&&(d+=", finalize");let b=0,w=ok;for(;b<ak&&(c=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[vh]));)b++,await fk(w),w=w*lk;if(l+=h,((a=c==null?void 0:c.headers)===null||a===void 0?void 0:a[vh])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function dk(t){return{size:t.size,type:t.type}}function fk(t){return new Promise(e=>setTimeout(e,t))}class hk{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uk(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ck(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dk(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pk{create(e,n,i){return new mk(e,n,i)}}class mk{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e2="x-goog-api-key";class gk{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(e2)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(e2,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vk="gl-node/";class yk{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ji({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=fA(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new gk(this.apiKey);this.apiClient=new dC({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:vk+"web",uploader:new hk,downloader:new rk}),this.models=new IC(this.apiClient),this.live=new NC(this.apiClient,a,new pk),this.batches=new q4(this.apiClient),this.chats=new S3(this.models,this.apiClient),this.caches=new b3(this.apiClient),this.files=new L3(this.apiClient),this.operations=new RC(this.apiClient),this.authTokens=new JC(this.apiClient),this.tunings=new ik(this.apiClient),this.fileSearchStores=new t6(this.apiClient)}}const bk=()=>{try{return""}catch{return""}},t2=bk(),n2=t2?new yk({apiKey:t2}):null,xk=async(t,e,n,i)=>{if(!n2)return`This is a reminder that a balance remains on Invoice ${e}. Please settle this at your earliest convenience.`;try{let a="";i<0?a=`is OVERDUE by ${Math.abs(i)} days. Be firm but professional.`:i===0?a="is DUE TODAY. Be polite and remind them of the deadline.":a=`is UPCOMING in ${i} days. This is a proactive friendly reminder.`;const l=(await n2.models.generateContent({model:"gemini-3-flash-preview",contents:`Draft a payment reminder email for Clonmel Glass & Mirrors. 
      Customer: ${t}. 
      Invoice: ${e}. 
      Balance Due: ${n.toFixed(2)}. 
      Status: The payment ${a}
      Include a request for settlement. Max 3 sentences.`})).text;return typeof l=="string"?l:`This is a reminder that a balance remains on Invoice ${e}.`}catch{return`Reminder for Invoice ${e}: Outstanding balance of ${n.toFixed(2)} needs attention.`}},wk="modulepreload",Sk=function(t){return"/"+t},i2={},V0=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){let l=function(h){return Promise.all(h.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=l(n.map(h=>{if(h=Sk(h),h in i2)return;i2[h]=!0;const v=h.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":wk,v||(w.as="script"),w.crossOrigin="",w.href=h,d&&w.setAttribute("nonce",d),document.head.appendChild(w),v)return new Promise((_,T)=>{w.addEventListener("load",_),w.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return a.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function xn(t){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(t)}var Xr=Uint8Array,Tr=Uint16Array,Kd=Uint32Array,Lh=new Xr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Dh=new Xr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$0=new Xr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qb=function(t,e){for(var n=new Tr(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var a=new Kd(n[30]),i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)a[o]=o-n[i]<<5|i;return[n,a]},Zb=Qb(Lh,2),e5=Zb[0],J0=Zb[1];e5[28]=258,J0[258]=28;var t5=Qb(Dh,0),_k=t5[0],r2=t5[1],Y0=new Tr(32768);for(var Gn=0;Gn<32768;++Gn){var ml=(Gn&43690)>>>1|(Gn&21845)<<1;ml=(ml&52428)>>>2|(ml&13107)<<2,ml=(ml&61680)>>>4|(ml&3855)<<4,Y0[Gn]=((ml&65280)>>>8|(ml&255)<<8)>>>1}var Va=(function(t,e,n){for(var i=t.length,a=0,o=new Tr(e);a<i;++a)++o[t[a]-1];var l=new Tr(e);for(a=0;a<e;++a)l[a]=l[a-1]+o[a-1]<<1;var c;if(n){c=new Tr(1<<e);var d=15-e;for(a=0;a<i;++a)if(t[a])for(var h=a<<4|t[a],v=e-t[a],b=l[t[a]-1]++<<v,w=b|(1<<v)-1;b<=w;++b)c[Y0[b]>>>d]=h}else for(c=new Tr(i),a=0;a<i;++a)c[a]=Y0[l[t[a]-1]++]>>>15-t[a];return c}),El=new Xr(288);for(var Gn=0;Gn<144;++Gn)El[Gn]=8;for(var Gn=144;Gn<256;++Gn)El[Gn]=9;for(var Gn=256;Gn<280;++Gn)El[Gn]=7;for(var Gn=280;Gn<288;++Gn)El[Gn]=8;var Xd=new Xr(32);for(var Gn=0;Gn<32;++Gn)Xd[Gn]=5;var Nk=Va(El,9,0),Ak=Va(El,9,1),Tk=Va(Xd,5,0),Ek=Va(Xd,5,1),l0=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ta=function(t,e,n){var i=e/8>>0;return(t[i]|t[i+1]<<8)>>>(e&7)&n},u0=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(e&7)},Sm=function(t){return(t/8>>0)+(t&7&&1)},n5=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Tr?Tr:t instanceof Kd?Kd:Xr)(n-e);return i.set(t.subarray(e,n)),i},Ck=function(t,e,n){var i=t.length,a=!e||n,o=!n||n.i;n||(n={}),e||(e=new Xr(i*3));var l=function(se){var de=e.length;if(se>de){var fe=new Xr(Math.max(de*2,se));fe.set(e),e=fe}},c=n.f||0,d=n.p||0,h=n.b||0,v=n.l,b=n.d,w=n.m,_=n.n,T=i*8;do{if(!v){n.f=c=ta(t,d,1);var k=ta(t,d+1,3);if(d+=3,k)if(k==1)v=Ak,b=Ek,w=9,_=5;else if(k==2){var L=ta(t,d,31)+257,O=ta(t,d+10,15)+4,q=L+ta(t,d+5,31)+1;d+=14;for(var W=new Xr(q),F=new Xr(19),z=0;z<O;++z)F[$0[z]]=ta(t,d+z*3,7);d+=O*3;var ee=l0(F),le=(1<<ee)-1;if(!o&&d+q*(ee+7)>T)break;for(var B=Va(F,ee,1),z=0;z<q;){var j=B[ta(t,d,le)];d+=j&15;var R=j>>>4;if(R<16)W[z++]=R;else{var ne=0,re=0;for(R==16?(re=3+ta(t,d,3),d+=2,ne=W[z-1]):R==17?(re=3+ta(t,d,7),d+=3):R==18&&(re=11+ta(t,d,127),d+=7);re--;)W[z++]=ne}}var be=W.subarray(0,L),P=W.subarray(L);w=l0(be),_=l0(P),v=Va(be,w,1),b=Va(P,_,1)}else throw"invalid block type";else{var R=Sm(d)+4,C=t[R-4]|t[R-3]<<8,I=R+C;if(I>i){if(o)throw"unexpected EOF";break}a&&l(h+C),e.set(t.subarray(R,I),h),n.b=h+=C,n.p=d=I*8;continue}if(d>T)throw"unexpected EOF"}a&&l(h+131072);for(var $=(1<<w)-1,ie=(1<<_)-1,ae=w+_+18;o||d+ae<T;){var ne=v[u0(t,d)&$],he=ne>>>4;if(d+=ne&15,d>T)throw"unexpected EOF";if(!ne)throw"invalid length/literal";if(he<256)e[h++]=he;else if(he==256){v=null;break}else{var Ne=he-254;if(he>264){var z=he-257,D=Lh[z];Ne=ta(t,d,(1<<D)-1)+e5[z],d+=D}var H=b[u0(t,d)&ie],K=H>>>4;if(!H)throw"invalid distance";d+=H&15;var P=_k[K];if(K>3){var D=Dh[K];P+=u0(t,d)&(1<<D)-1,d+=D}if(d>T)throw"unexpected EOF";a&&l(h+131072);for(var Z=h+Ne;h<Z;h+=4)e[h]=e[h-P],e[h+1]=e[h+1-P],e[h+2]=e[h+2-P],e[h+3]=e[h+3-P];h=Z}}n.l=v,n.p=d,n.b=h,v&&(c=1,n.m=w,n.d=b,n.n=_)}while(!c);return h==e.length?e:n5(e,0,h)},So=function(t,e,n){n<<=e&7;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},kd=function(t,e,n){n<<=e&7;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},c0=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var a=n.length,o=n.slice();if(!a)return[new Xr(0),0];if(a==1){var l=new Xr(n[0].s+1);return l[n[0].s]=1,[l,1]}n.sort(function(q,W){return q.f-W.f}),n.push({s:-1,f:25001});var c=n[0],d=n[1],h=0,v=1,b=2;for(n[0]={s:-1,f:c.f+d.f,l:c,r:d};v!=a-1;)c=n[n[h].f<n[b].f?h++:b++],d=n[h!=v&&n[h].f<n[b].f?h++:b++],n[v++]={s:-1,f:c.f+d.f,l:c,r:d};for(var w=o[0].s,i=1;i<a;++i)o[i].s>w&&(w=o[i].s);var _=new Tr(w+1),T=W0(n[v-1],_,0);if(T>e){var i=0,k=0,R=T-e,C=1<<R;for(o.sort(function(W,F){return _[F.s]-_[W.s]||W.f-F.f});i<a;++i){var I=o[i].s;if(_[I]>e)k+=C-(1<<T-_[I]),_[I]=e;else break}for(k>>>=R;k>0;){var L=o[i].s;_[L]<e?k-=1<<e-_[L]++-1:++i}for(;i>=0&&k;--i){var O=o[i].s;_[O]==e&&(--_[O],++k)}T=e}return[new Xr(_),T]},W0=function(t,e,n){return t.s==-1?Math.max(W0(t.l,e,n+1),W0(t.r,e,n+1)):e[t.s]=n},s2=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Tr(++e),i=0,a=t[0],o=1,l=function(d){n[i++]=d},c=1;c<=e;++c)if(t[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(a),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(a);o=1,a=t[c]}return[n.subarray(0,i),e]},Id=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},K0=function(t,e,n){var i=n.length,a=Sm(e+2);t[a]=i&255,t[a+1]=i>>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var o=0;o<i;++o)t[a+o+4]=n[o];return(a+4+i)*8},a2=function(t,e,n,i,a,o,l,c,d,h,v){So(e,v++,n),++a[256];for(var b=c0(a,15),w=b[0],_=b[1],T=c0(o,15),k=T[0],R=T[1],C=s2(w),I=C[0],L=C[1],O=s2(k),q=O[0],W=O[1],F=new Tr(19),z=0;z<I.length;++z)F[I[z]&31]++;for(var z=0;z<q.length;++z)F[q[z]&31]++;for(var ee=c0(F,7),le=ee[0],B=ee[1],j=19;j>4&&!le[$0[j-1]];--j);var ne=h+5<<3,re=Id(a,El)+Id(o,Xd)+l,be=Id(a,w)+Id(o,k)+l+14+3*j+Id(F,le)+(2*F[16]+3*F[17]+7*F[18]);if(ne<=re&&ne<=be)return K0(e,v,t.subarray(d,d+h));var P,$,ie,ae;if(So(e,v,1+(be<re)),v+=2,be<re){P=Va(w,_,0),$=w,ie=Va(k,R,0),ae=k;var he=Va(le,B,0);So(e,v,L-257),So(e,v+5,W-1),So(e,v+10,j-4),v+=14;for(var z=0;z<j;++z)So(e,v+3*z,le[$0[z]]);v+=3*j;for(var Ne=[I,q],D=0;D<2;++D)for(var H=Ne[D],z=0;z<H.length;++z){var K=H[z]&31;So(e,v,he[K]),v+=le[K],K>15&&(So(e,v,H[z]>>>5&127),v+=H[z]>>>12)}}else P=Nk,$=El,ie=Tk,ae=Xd;for(var z=0;z<c;++z)if(i[z]>255){var K=i[z]>>>18&31;kd(e,v,P[K+257]),v+=$[K+257],K>7&&(So(e,v,i[z]>>>23&31),v+=Lh[K]);var Z=i[z]&31;kd(e,v,ie[Z]),v+=ae[Z],Z>3&&(kd(e,v,i[z]>>>5&8191),v+=Dh[Z])}else kd(e,v,P[i[z]]),v+=$[i[z]];return kd(e,v,P[256]),v+$[256]},kk=new Kd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ik=function(t,e,n,i,a,o){var l=t.length,c=new Xr(i+l+5*(1+Math.floor(l/7e3))+a),d=c.subarray(i,c.length-a),h=0;if(!e||l<8)for(var v=0;v<=l;v+=65535){var b=v+65535;b<l?h=K0(d,h,t.subarray(v,b)):(d[v]=o,h=K0(d,h,t.subarray(v,l)))}else{for(var w=kk[e-1],_=w>>>13,T=w&8191,k=(1<<n)-1,R=new Tr(32768),C=new Tr(k+1),I=Math.ceil(n/3),L=2*I,O=function(et){return(t[et]^t[et+1]<<I^t[et+2]<<L)&k},q=new Kd(25e3),W=new Tr(288),F=new Tr(32),z=0,ee=0,v=0,le=0,B=0,j=0;v<l;++v){var ne=O(v),re=v&32767,be=C[ne];if(R[re]=be,C[ne]=re,B<=v){var P=l-v;if((z>7e3||le>24576)&&P>423){h=a2(t,d,0,q,W,F,ee,le,j,v-j,h),le=z=ee=0,j=v;for(var $=0;$<286;++$)W[$]=0;for(var $=0;$<30;++$)F[$]=0}var ie=2,ae=0,he=T,Ne=re-be&32767;if(P>2&&ne==O(v-Ne))for(var D=Math.min(_,P)-1,H=Math.min(32767,v),K=Math.min(258,P);Ne<=H&&--he&&re!=be;){if(t[v+ie]==t[v+ie-Ne]){for(var Z=0;Z<K&&t[v+Z]==t[v+Z-Ne];++Z);if(Z>ie){if(ie=Z,ae=Ne,Z>D)break;for(var se=Math.min(Ne,Z-2),de=0,$=0;$<se;++$){var fe=v-Ne+$+32768&32767,me=R[fe],Me=fe-me+32768&32767;Me>de&&(de=Me,be=fe)}}}re=be,be=R[re],Ne+=re-be+32768&32767}if(ae){q[le++]=268435456|J0[ie]<<18|r2[ae];var we=J0[ie]&31,Pe=r2[ae]&31;ee+=Lh[we]+Dh[Pe],++W[257+we],++F[Pe],B=v+ie,++z}else q[le++]=t[v],++W[t[v]]}}h=a2(t,d,o,q,W,F,ee,le,j,v-j,h)}return n5(c,0,i+Sm(h)+a)},Rk=function(){var t=1,e=0;return{p:function(n){for(var i=t,a=e,o=n.length,l=0;l!=o;){for(var c=Math.min(l+5552,o);l<c;++l)i+=n[l],a+=i;i%=65521,a%=65521}t=i,e=a},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},Lk=function(t,e,n,i,a){return Ik(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,i,!0)},Dk=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Mk=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;t[0]=120,t[1]=i<<6|(i?32-2*i:1)},Pk=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function X0(t,e){e===void 0&&(e={});var n=Rk();n.p(t);var i=Lk(t,e,2,4);return Mk(i,e),Dk(i,i.length-4,n.d()),i}function Uk(t,e){return Ck((Pk(t),t.subarray(2,-4)),e)}var Dt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function d0(){Dt.console&&typeof Dt.console.log=="function"&&Dt.console.log.apply(Dt.console,arguments)}var Rn={log:d0,warn:function(t){Dt.console&&(typeof Dt.console.warn=="function"?Dt.console.warn.apply(Dt.console,arguments):d0.call(null,arguments))},error:function(t){Dt.console&&(typeof Dt.console.error=="function"?Dt.console.error.apply(Dt.console,arguments):d0(t))}};function f0(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){hu(i.response,e,n)},i.onerror=function(){Rn.error("could not download file")},i.send()}function o2(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Zf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Od,Q0,hu=Dt.saveAs||((typeof window>"u"?"undefined":xn(window))!=="object"||window!==Dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=Dt.URL||Dt.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?o2(a.href)?f0(t,e,n):Zf(a,a.target="_blank"):Zf(a)):(a.href=i.createObjectURL(t),setTimeout((function(){i.revokeObjectURL(a.href)}),4e4),setTimeout((function(){Zf(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(o2(t))f0(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){Zf(i)}))}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:xn(o)!=="object"&&(Rn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return f0(t,e,n);var a=t.type==="application/octet-stream",o=/constructor/i.test(Dt.HTMLElement)||Dt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&o)&&(typeof FileReader>"u"?"undefined":xn(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var v=c.result;v=l?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=v:location=v,i=null},c.readAsDataURL(t)}else{var d=Dt.URL||Dt.webkitURL,h=d.createObjectURL(t);i?i.location=h:location.href=h,i=null,setTimeout((function(){d.revokeObjectURL(h)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function i5(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],i=0;i<n.length;i++){var a=n[i].re,o=n[i].process,l=a.exec(t);l&&(e=o(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),d=this.g.toString(16),h=this.b.toString(16);return c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),"#"+c+d+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function h0(t,e){var n=t[0],i=t[1],a=t[2],o=t[3];n=fr(n,i,a,o,e[0],7,-680876936),o=fr(o,n,i,a,e[1],12,-389564586),a=fr(a,o,n,i,e[2],17,606105819),i=fr(i,a,o,n,e[3],22,-1044525330),n=fr(n,i,a,o,e[4],7,-176418897),o=fr(o,n,i,a,e[5],12,1200080426),a=fr(a,o,n,i,e[6],17,-1473231341),i=fr(i,a,o,n,e[7],22,-45705983),n=fr(n,i,a,o,e[8],7,1770035416),o=fr(o,n,i,a,e[9],12,-1958414417),a=fr(a,o,n,i,e[10],17,-42063),i=fr(i,a,o,n,e[11],22,-1990404162),n=fr(n,i,a,o,e[12],7,1804603682),o=fr(o,n,i,a,e[13],12,-40341101),a=fr(a,o,n,i,e[14],17,-1502002290),n=hr(n,i=fr(i,a,o,n,e[15],22,1236535329),a,o,e[1],5,-165796510),o=hr(o,n,i,a,e[6],9,-1069501632),a=hr(a,o,n,i,e[11],14,643717713),i=hr(i,a,o,n,e[0],20,-373897302),n=hr(n,i,a,o,e[5],5,-701558691),o=hr(o,n,i,a,e[10],9,38016083),a=hr(a,o,n,i,e[15],14,-660478335),i=hr(i,a,o,n,e[4],20,-405537848),n=hr(n,i,a,o,e[9],5,568446438),o=hr(o,n,i,a,e[14],9,-1019803690),a=hr(a,o,n,i,e[3],14,-187363961),i=hr(i,a,o,n,e[8],20,1163531501),n=hr(n,i,a,o,e[13],5,-1444681467),o=hr(o,n,i,a,e[2],9,-51403784),a=hr(a,o,n,i,e[7],14,1735328473),n=pr(n,i=hr(i,a,o,n,e[12],20,-1926607734),a,o,e[5],4,-378558),o=pr(o,n,i,a,e[8],11,-2022574463),a=pr(a,o,n,i,e[11],16,1839030562),i=pr(i,a,o,n,e[14],23,-35309556),n=pr(n,i,a,o,e[1],4,-1530992060),o=pr(o,n,i,a,e[4],11,1272893353),a=pr(a,o,n,i,e[7],16,-155497632),i=pr(i,a,o,n,e[10],23,-1094730640),n=pr(n,i,a,o,e[13],4,681279174),o=pr(o,n,i,a,e[0],11,-358537222),a=pr(a,o,n,i,e[3],16,-722521979),i=pr(i,a,o,n,e[6],23,76029189),n=pr(n,i,a,o,e[9],4,-640364487),o=pr(o,n,i,a,e[12],11,-421815835),a=pr(a,o,n,i,e[15],16,530742520),n=mr(n,i=pr(i,a,o,n,e[2],23,-995338651),a,o,e[0],6,-198630844),o=mr(o,n,i,a,e[7],10,1126891415),a=mr(a,o,n,i,e[14],15,-1416354905),i=mr(i,a,o,n,e[5],21,-57434055),n=mr(n,i,a,o,e[12],6,1700485571),o=mr(o,n,i,a,e[3],10,-1894986606),a=mr(a,o,n,i,e[10],15,-1051523),i=mr(i,a,o,n,e[1],21,-2054922799),n=mr(n,i,a,o,e[8],6,1873313359),o=mr(o,n,i,a,e[15],10,-30611744),a=mr(a,o,n,i,e[6],15,-1560198380),i=mr(i,a,o,n,e[13],21,1309151649),n=mr(n,i,a,o,e[4],6,-145523070),o=mr(o,n,i,a,e[11],10,-1120210379),a=mr(a,o,n,i,e[2],15,718787259),i=mr(i,a,o,n,e[9],21,-343485551),t[0]=Nl(n,t[0]),t[1]=Nl(i,t[1]),t[2]=Nl(a,t[2]),t[3]=Nl(o,t[3])}function Mh(t,e,n,i,a,o){return e=Nl(Nl(e,t),Nl(i,o)),Nl(e<<a|e>>>32-a,n)}function fr(t,e,n,i,a,o,l){return Mh(e&n|~e&i,t,e,a,o,l)}function hr(t,e,n,i,a,o,l){return Mh(e&i|n&~i,t,e,a,o,l)}function pr(t,e,n,i,a,o,l){return Mh(e^n^i,t,e,a,o,l)}function mr(t,e,n,i,a,o,l){return Mh(n^(e|~i),t,e,a,o,l)}function r5(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)h0(i,Ok(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(h0(i,a),e=0;e<16;e++)a[e]=0;return a[14]=8*n,h0(i,a),i}function Ok(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Od=Dt.atob.bind(Dt),Q0=Dt.btoa.bind(Dt);var l2="0123456789abcdef".split("");function jk(t){for(var e="",n=0;n<4;n++)e+=l2[t>>8*n+4&15]+l2[t>>8*n&15];return e}function Fk(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Z0(t){return r5(t).map(Fk).join("")}var Bk=(function(t){for(var e=0;e<t.length;e++)t[e]=jk(t[e]);return t.join("")})(r5("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nl(t,e){if(Bk){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function em(t,e){var n,i,a,o;if(t!==n){for(var l=(a=t,o=1+(256/t.length>>0),new Array(o+1).join(a)),c=[],d=0;d<256;d++)c[d]=d;var h=0;for(d=0;d<256;d++){var v=c[d];h=(h+v+l.charCodeAt(d))%256,c[d]=c[h],c[h]=v}n=t,i=c}else c=i;var b=e.length,w=0,_=0,T="";for(d=0;d<b;d++)_=(_+(v=c[w=(w+1)%256]))%256,c[w]=c[_],c[_]=v,l=c[(c[w]+c[_])%256],T+=String.fromCharCode(e.charCodeAt(d)^l);return T}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var u2={print:4,modify:8,copy:16,"annot-forms":32};function Cc(t,e,n,i){this.v=1,this.r=2;var a=192;t.forEach((function(c){if(u2.perm!==void 0)throw new Error("Invalid permission: "+c);a+=u2[c]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),l=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^a)),this.encryptionKey=Z0(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=em(this.encryptionKey,this.padding)}function kc(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var a=t.charCodeAt(i);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=t[i]}return e}function c2(t){if(xn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,i,a){if(a=a||!1,typeof n!="string"||typeof i!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var o=Math.random().toString(35);return e[n][o]=[i,!!a],o},this.unsubscribe=function(n){for(var i in e)if(e[i][n])return delete e[i][n],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[n]){var l=e[n][o];try{l[0].apply(t,i)}catch(c){Dt.console&&Rn.error("jsPDF PubSub Error",c.message,c)}l[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Qd(t){if(!(this instanceof Qd))return new Qd(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function s5(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function wl(t,e,n,i,a){if(!(this instanceof wl))return new wl(t,e,n,i,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,s5.call(this,i,a)}function vu(t,e,n,i,a){if(!(this instanceof vu))return new vu(t,e,n,i,a);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,s5.call(this,i,a)}function Et(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],a=arguments[2],o=arguments[3],l=[],c=1,d=16,h="S",v=null;xn(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,a=t.format||a,o=t.compress||t.compressPdf||o,(v=t.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(d=t.floatPrecision),h=t.defaultPathOperation||"S"),l=t.filters||(o===!0?["FlateEncode"]:l),i=i||"mm",n=(""+(n||"P")).toLowerCase();var b=t.putOnlyUsedFonts||!1,w={},_={internal:{},__private__:{}};_.__private__.PubSub=c2;var T="1.3",k=_.__private__.getPdfVersion=function(){return T};_.__private__.setPdfVersion=function(A){T=A};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};_.__private__.getPageFormats=function(){return R};var C=_.__private__.getPageFormat=function(A){return R[A]};a=a||"a4";var I={COMPAT:"compat",ADVANCED:"advanced"},L=I.COMPAT;function O(){this.saveGraphicsState(),ue(new wt(rt,0,0,-rt,0,Sa()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),h="n",L=I.ADVANCED}function q(){this.restoreGraphicsState(),h="S",L=I.COMPAT}var W=_.__private__.combineFontStyleAndFontWeight=function(A,V){if(A=="bold"&&V=="normal"||A=="bold"&&V==400||A=="normal"&&V=="italic"||A=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(A=V==400||V==="normal"?A==="italic"?"italic":"normal":V!=700&&V!=="bold"||A!=="normal"?(V==700?"bold":V)+""+A:"bold"),A};_.advancedAPI=function(A){var V=L===I.COMPAT;return V&&O.call(this),typeof A!="function"||(A(this),V&&q.call(this)),this},_.compatAPI=function(A){var V=L===I.ADVANCED;return V&&q.call(this),typeof A!="function"||(A(this),V&&O.call(this)),this},_.isAdvancedAPI=function(){return L===I.ADVANCED};var F,z=function(A){if(L!==I.ADVANCED)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ee=_.roundToPrecision=_.__private__.roundToPrecision=function(A,V){var ce=e||V;if(isNaN(A)||isNaN(ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(ce).replace(/0+$/,"")};F=_.hpf=_.__private__.hpf=typeof d=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(A,d)}:d==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(A,16)};var le=_.f2=_.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return ee(A,2)},B=_.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return ee(A,3)},j=_.scale=_.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return L===I.COMPAT?A*rt:L===I.ADVANCED?A:void 0},ne=function(A){return L===I.COMPAT?Sa()-A:L===I.ADVANCED?A:void 0},re=function(A){return j(ne(A))};_.__private__.setPrecision=_.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var be,P="00000000000000000000000000000000",$=_.__private__.getFileId=function(){return P},ie=_.__private__.setFileId=function(A){return P=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():P.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),v!==null&&(Pn=new Cc(v.userPermissions,v.userPassword,v.ownerPassword,P)),P};_.setFileId=function(A){return ie(A),this},_.getFileId=function(){return $()};var ae=_.__private__.convertDateToPDFDate=function(A){var V=A.getTimezoneOffset(),ce=V<0?"+":"-",ge=Math.floor(Math.abs(V/60)),Ee=Math.abs(V%60),Be=[ce,K(ge),"'",K(Ee),"'"].join("");return["D:",A.getFullYear(),K(A.getMonth()+1),K(A.getDate()),K(A.getHours()),K(A.getMinutes()),K(A.getSeconds()),Be].join("")},he=_.__private__.convertPDFDateToDate=function(A){var V=parseInt(A.substr(2,4),10),ce=parseInt(A.substr(6,2),10)-1,ge=parseInt(A.substr(8,2),10),Ee=parseInt(A.substr(10,2),10),Be=parseInt(A.substr(12,2),10),Qe=parseInt(A.substr(14,2),10);return new Date(V,ce,ge,Ee,Be,Qe,0)},Ne=_.__private__.setCreationDate=function(A){var V;if(A===void 0&&(A=new Date),A instanceof Date)V=ae(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=A}return be=V},D=_.__private__.getCreationDate=function(A){var V=be;return A==="jsDate"&&(V=he(be)),V};_.setCreationDate=function(A){return Ne(A),this},_.getCreationDate=function(A){return D(A)};var H,K=_.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},Z=_.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},se=0,de=[],fe=[],me=0,Me=[],we=[],Pe=!1,Ue=fe,et=function(){se=0,me=0,fe=[],de=[],Me=[],ci=Ln(),ln=Ln()};_.__private__.setCustomOutputDestination=function(A){Pe=!0,Ue=A};var Ie=function(A){Pe||(Ue=A)};_.__private__.resetCustomOutputDestination=function(){Pe=!1,Ue=fe};var ue=_.__private__.out=function(A){return A=A.toString(),me+=A.length+1,Ue.push(A),Ue},yt=_.__private__.write=function(A){return ue(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},at=_.__private__.getArrayBuffer=function(A){for(var V=A.length,ce=new ArrayBuffer(V),ge=new Uint8Array(ce);V--;)ge[V]=A.charCodeAt(V);return ce},Ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];_.__private__.getStandardFonts=function(){return Ye};var Ze=t.fontSize||16;_.__private__.setFontSize=_.setFontSize=function(A){return Ze=L===I.ADVANCED?A/rt:A,this};var nt,tt=_.__private__.getFontSize=_.getFontSize=function(){return L===I.COMPAT?Ze:Ze*rt},Xe=t.R2L||!1;_.__private__.setR2L=_.setR2L=function(A){return Xe=A,this},_.__private__.getR2L=_.getR2L=function(){return Xe};var Se,Ge=_.__private__.setZoomMode=function(A){var V=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))nt=A;else if(isNaN(A)){if(V.indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');nt=A}else nt=parseInt(A,10)};_.__private__.getZoomMode=function(){return nt};var ct,xt=_.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');Se=A};_.__private__.getPageMode=function(){return Se};var Ht=_.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');ct=A};_.__private__.getLayoutMode=function(){return ct},_.__private__.setDisplayMode=_.setDisplayMode=function(A,V,ce){return Ge(A),Ht(V),xt(ce),this};var pt={title:"",subject:"",author:"",keywords:"",creator:""};_.__private__.getDocumentProperty=function(A){if(Object.keys(pt).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pt[A]},_.__private__.getDocumentProperties=function(){return pt},_.__private__.setDocumentProperties=_.setProperties=_.setDocumentProperties=function(A){for(var V in pt)pt.hasOwnProperty(V)&&A[V]&&(pt[V]=A[V]);return this},_.__private__.setDocumentProperty=function(A,V){if(Object.keys(pt).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pt[A]=V};var At,rt,En,Lt,qt,Pt={},_t={},Xn=[],Yt={},Cr={},an={},vi={},Yi=null,on=0,Nt=[],Vt=new c2(_),Zr=t.hotfixes||[],gn={},ji={},yi=[],wt=function A(V,ce,ge,Ee,Be,Qe){if(!(this instanceof A))return new A(V,ce,ge,Ee,Be,Qe);isNaN(V)&&(V=1),isNaN(ce)&&(ce=0),isNaN(ge)&&(ge=0),isNaN(Ee)&&(Ee=1),isNaN(Be)&&(Be=0),isNaN(Qe)&&(Qe=0),this._matrix=[V,ce,ge,Ee,Be,Qe]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(A)},wt.prototype.multiply=function(A){var V=A.sx*this.sx+A.shy*this.shx,ce=A.sx*this.shy+A.shy*this.sy,ge=A.shx*this.sx+A.sy*this.shx,Ee=A.shx*this.shy+A.sy*this.sy,Be=A.tx*this.sx+A.ty*this.shx+this.tx,Qe=A.tx*this.shy+A.ty*this.sy+this.ty;return new wt(V,ce,ge,Ee,Be,Qe)},wt.prototype.decompose=function(){var A=this.sx,V=this.shy,ce=this.shx,ge=this.sy,Ee=this.tx,Be=this.ty,Qe=Math.sqrt(A*A+V*V),lt=(A/=Qe)*ce+(V/=Qe)*ge;ce-=A*lt,ge-=V*lt;var bt=Math.sqrt(ce*ce+ge*ge);return lt/=bt,A*(ge/=bt)<V*(ce/=bt)&&(A=-A,V=-V,lt=-lt,Qe=-Qe),{scale:new wt(Qe,0,0,bt,0,0),translate:new wt(1,0,0,1,Ee,Be),rotate:new wt(A,V,-V,A,0,0),skew:new wt(1,0,lt,1,0,0)}},wt.prototype.toString=function(A){return this.join(" ")},wt.prototype.inversed=function(){var A=this.sx,V=this.shy,ce=this.shx,ge=this.sy,Ee=this.tx,Be=this.ty,Qe=1/(A*ge-V*ce),lt=ge*Qe,bt=-V*Qe,Ut=-ce*Qe,jt=A*Qe;return new wt(lt,bt,Ut,jt,-lt*Ee-Ut*Be,-bt*Ee-jt*Be)},wt.prototype.applyToPoint=function(A){var V=A.x*this.sx+A.y*this.shx+this.tx,ce=A.x*this.shy+A.y*this.sy+this.ty;return new Za(V,ce)},wt.prototype.applyToRectangle=function(A){var V=this.applyToPoint(A),ce=this.applyToPoint(new Za(A.x+A.w,A.y+A.h));return new Hl(V.x,V.y,ce.x-V.x,ce.y-V.y)},wt.prototype.clone=function(){var A=this.sx,V=this.shy,ce=this.shx,ge=this.sy,Ee=this.tx,Be=this.ty;return new wt(A,V,ce,ge,Ee,Be)},_.Matrix=wt;var sr=_.matrixMult=function(A,V){return V.multiply(A)},ar=new wt(1,0,0,1,0,0);_.unitMatrix=_.identityMatrix=ar;var Ei=function(A,V){if(!Cr[A]){var ce=(V instanceof wl?"Sh":"P")+(Object.keys(Yt).length+1).toString(10);V.id=ce,Cr[A]=ce,Yt[ce]=V,Vt.publish("addPattern",V)}};_.ShadingPattern=wl,_.TilingPattern=vu,_.addShadingPattern=function(A,V){return z("addShadingPattern()"),Ei(A,V),this},_.beginTilingPattern=function(A){z("beginTilingPattern()"),Lu(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},_.endTilingPattern=function(A,V){z("endTilingPattern()"),V.stream=we[H].join(`
`),Ei(A,V),Vt.publish("endTilingPattern",V),yi.pop().restore()};var Fn=_.__private__.newObject=function(){var A=Ln();return Ci(A,!0),A},Ln=_.__private__.newObjectDeferred=function(){return se++,de[se]=function(){return me},se},Ci=function(A,V){return V=typeof V=="boolean"&&V,de[A]=me,V&&ue(A+" 0 obj"),A},vs=_.__private__.newAdditionalObject=function(){var A={objId:Ln(),content:""};return Me.push(A),A},ci=Ln(),ln=Ln(),wn=_.__private__.decodeColorString=function(A){var V=A.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length===5&&(V[4]==="k"||V[4]==="K")&&(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var ce=parseFloat(V[0]);V=[ce,ce,ce,"r"]}for(var ge="#",Ee=0;Ee<3;Ee++)ge+=("0"+Math.floor(255*parseFloat(V[Ee])).toString(16)).slice(-2);return ge},di=_.__private__.encodeColorString=function(A){var V;typeof A=="string"&&(A={ch1:A});var ce=A.ch1,ge=A.ch2,Ee=A.ch3,Be=A.ch4,Qe=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ce=="string"&&ce.charAt(0)!=="#"){var lt=new i5(ce);if(lt.ok)ce=lt.toHex();else if(!/^\d*\.?\d*$/.test(ce))throw new Error('Invalid color "'+ce+'" passed to jsPDF.encodeColorString.')}if(typeof ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ce)&&(ce="#"+ce[1]+ce[1]+ce[2]+ce[2]+ce[3]+ce[3]),typeof ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ce)){var bt=parseInt(ce.substr(1),16);ce=bt>>16&255,ge=bt>>8&255,Ee=255&bt}if(ge===void 0||Be===void 0&&ce===ge&&ge===Ee)if(typeof ce=="string")V=ce+" "+Qe[0];else switch(A.precision){case 2:V=le(ce/255)+" "+Qe[0];break;case 3:default:V=B(ce/255)+" "+Qe[0]}else if(Be===void 0||xn(Be)==="object"){if(Be&&!isNaN(Be.a)&&Be.a===0)return V=["1.","1.","1.",Qe[1]].join(" ");if(typeof ce=="string")V=[ce,ge,Ee,Qe[1]].join(" ");else switch(A.precision){case 2:V=[le(ce/255),le(ge/255),le(Ee/255),Qe[1]].join(" ");break;default:case 3:V=[B(ce/255),B(ge/255),B(Ee/255),Qe[1]].join(" ")}}else if(typeof ce=="string")V=[ce,ge,Ee,Be,Qe[2]].join(" ");else switch(A.precision){case 2:V=[le(ce),le(ge),le(Ee),le(Be),Qe[2]].join(" ");break;case 3:default:V=[B(ce),B(ge),B(Ee),B(Be),Qe[2]].join(" ")}return V},ze=_.__private__.getFilters=function(){return l},Mt=_.__private__.putStream=function(A){var V=(A=A||{}).data||"",ce=A.filters||ze(),ge=A.alreadyAppliedFilters||[],Ee=A.addLength1||!1,Be=V.length,Qe=A.objectId,lt=function(ki){return ki};if(v!==null&&Qe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(lt=Pn.encryptor(Qe,0));var bt={};ce===!0&&(ce=["FlateEncode"]);var Ut=A.additionalKeyValues||[],jt=(bt=Et.API.processDataByFilters!==void 0?Et.API.processDataByFilters(V,ce):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(bt.data.length!==0&&(Ut.push({key:"Length",value:bt.data.length}),Ee===!0&&Ut.push({key:"Length1",value:Be})),jt.length!=0)if(jt.split("/").length-1==1)Ut.push({key:"Filter",value:jt});else{Ut.push({key:"Filter",value:"["+jt+"]"});for(var Zt=0;Zt<Ut.length;Zt+=1)if(Ut[Zt].key==="DecodeParms"){for(var Un=[],qn=0;qn<bt.reverseChain.split("/").length-1;qn+=1)Un.push("null");Un.push(Ut[Zt].value),Ut[Zt].value="["+Un.join(" ")+"]"}}ue("<<");for(var Qn=0;Qn<Ut.length;Qn++)ue("/"+Ut[Qn].key+" "+Ut[Qn].value);ue(">>"),bt.data.length!==0&&(ue("stream"),ue(lt(bt.data)),ue("endstream"))},$t=_.__private__.putPage=function(A){var V=A.number,ce=A.data,ge=A.objId,Ee=A.contentsObjId;Ci(ge,!0),ue("<</Type /Page"),ue("/Parent "+A.rootDictionaryObjId+" 0 R"),ue("/Resources "+A.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(F(A.mediaBox.bottomLeftX))+" "+parseFloat(F(A.mediaBox.bottomLeftY))+" "+F(A.mediaBox.topRightX)+" "+F(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&ue("/CropBox ["+F(A.cropBox.bottomLeftX)+" "+F(A.cropBox.bottomLeftY)+" "+F(A.cropBox.topRightX)+" "+F(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&ue("/BleedBox ["+F(A.bleedBox.bottomLeftX)+" "+F(A.bleedBox.bottomLeftY)+" "+F(A.bleedBox.topRightX)+" "+F(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&ue("/TrimBox ["+F(A.trimBox.bottomLeftX)+" "+F(A.trimBox.bottomLeftY)+" "+F(A.trimBox.topRightX)+" "+F(A.trimBox.topRightY)+"]"),A.artBox!==null&&ue("/ArtBox ["+F(A.artBox.bottomLeftX)+" "+F(A.artBox.bottomLeftY)+" "+F(A.artBox.topRightX)+" "+F(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&ue("/UserUnit "+A.userUnit),Vt.publish("putPage",{objId:ge,pageContext:Nt[V],pageNumber:V,page:ce}),ue("/Contents "+Ee+" 0 R"),ue(">>"),ue("endobj");var Be=ce.join(`
`);return L===I.ADVANCED&&(Be+=`
Q`),Ci(Ee,!0),Mt({data:Be,filters:ze(),objectId:Ee}),ue("endobj"),ge},Dn=_.__private__.putPages=function(){var A,V,ce=[];for(A=1;A<=on;A++)Nt[A].objId=Ln(),Nt[A].contentsObjId=Ln();for(A=1;A<=on;A++)ce.push($t({number:A,data:we[A],objId:Nt[A].objId,contentsObjId:Nt[A].contentsObjId,mediaBox:Nt[A].mediaBox,cropBox:Nt[A].cropBox,bleedBox:Nt[A].bleedBox,trimBox:Nt[A].trimBox,artBox:Nt[A].artBox,userUnit:Nt[A].userUnit,rootDictionaryObjId:ci,resourceDictionaryObjId:ln}));Ci(ci,!0),ue("<</Type /Pages");var ge="/Kids [";for(V=0;V<on;V++)ge+=ce[V]+" 0 R ";ue(ge+"]"),ue("/Count "+on),ue(">>"),ue("endobj"),Vt.publish("postPutPages")},Bn=function(A){Vt.publish("putFont",{font:A,out:ue,newObject:Fn,putStream:Mt}),A.isAlreadyPutted!==!0&&(A.objectNumber=Fn(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+kc(A.postScriptName)),ue("/Subtype /Type1"),typeof A.encoding=="string"&&ue("/Encoding /"+A.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},ys=function(){for(var A in Pt)Pt.hasOwnProperty(A)&&(b===!1||b===!0&&w.hasOwnProperty(A))&&Bn(Pt[A])},es=function(A){A.objectNumber=Fn();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[F(A.x),F(A.y),F(A.x+A.width),F(A.y+A.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var ce=A.pages[1].join(`
`);Mt({data:ce,additionalKeyValues:V,objectId:A.objectNumber}),ue("endobj")},ts=function(){for(var A in gn)gn.hasOwnProperty(A)&&es(gn[A])},fa=function(A,V){var ce,ge=[],Ee=1/(V-1);for(ce=0;ce<1;ce+=Ee)ge.push(ce);if(ge.push(1),A[0].offset!=0){var Be={offset:0,color:A[0].color};A.unshift(Be)}if(A[A.length-1].offset!=1){var Qe={offset:1,color:A[A.length-1].color};A.push(Qe)}for(var lt="",bt=0,Ut=0;Ut<ge.length;Ut++){for(ce=ge[Ut];ce>A[bt+1].offset;)bt++;var jt=A[bt].offset,Zt=(ce-jt)/(A[bt+1].offset-jt),Un=A[bt].color,qn=A[bt+1].color;lt+=Z(Math.round((1-Zt)*Un[0]+Zt*qn[0]).toString(16))+Z(Math.round((1-Zt)*Un[1]+Zt*qn[1]).toString(16))+Z(Math.round((1-Zt)*Un[2]+Zt*qn[2]).toString(16))}return lt.trim()},ha=function(A,V){V||(V=21);var ce=Fn(),ge=fa(A.colors,V),Ee=[];Ee.push({key:"FunctionType",value:"0"}),Ee.push({key:"Domain",value:"[0.0 1.0]"}),Ee.push({key:"Size",value:"["+V+"]"}),Ee.push({key:"BitsPerSample",value:"8"}),Ee.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ee.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Mt({data:ge,additionalKeyValues:Ee,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ce}),ue("endobj"),A.objectNumber=Fn(),ue("<< /ShadingType "+A.type),ue("/ColorSpace /DeviceRGB");var Be="/Coords ["+F(parseFloat(A.coords[0]))+" "+F(parseFloat(A.coords[1]))+" ";A.type===2?Be+=F(parseFloat(A.coords[2]))+" "+F(parseFloat(A.coords[3])):Be+=F(parseFloat(A.coords[2]))+" "+F(parseFloat(A.coords[3]))+" "+F(parseFloat(A.coords[4]))+" "+F(parseFloat(A.coords[5])),ue(Be+="]"),A.matrix&&ue("/Matrix ["+A.matrix.toString()+"]"),ue("/Function "+ce+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},ii=function(A,V){var ce=Ln(),ge=Fn();V.push({resourcesOid:ce,objectOid:ge}),A.objectNumber=ge;var Ee=[];Ee.push({key:"Type",value:"/Pattern"}),Ee.push({key:"PatternType",value:"1"}),Ee.push({key:"PaintType",value:"1"}),Ee.push({key:"TilingType",value:"1"}),Ee.push({key:"BBox",value:"["+A.boundingBox.map(F).join(" ")+"]"}),Ee.push({key:"XStep",value:F(A.xStep)}),Ee.push({key:"YStep",value:F(A.yStep)}),Ee.push({key:"Resources",value:ce+" 0 R"}),A.matrix&&Ee.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),Mt({data:A.stream,additionalKeyValues:Ee,objectId:A.objectNumber}),ue("endobj")},Ja=function(A){var V;for(V in Yt)Yt.hasOwnProperty(V)&&(Yt[V]instanceof wl?ha(Yt[V]):Yt[V]instanceof vu&&ii(Yt[V],A))},Il=function(A){for(var V in A.objectNumber=Fn(),ue("<<"),A)switch(V){case"opacity":ue("/ca "+le(A[V]));break;case"stroke-opacity":ue("/CA "+le(A[V]))}ue(">>"),ue("endobj")},js=function(){var A;for(A in an)an.hasOwnProperty(A)&&Il(an[A])},bs=function(){for(var A in ue("/XObject <<"),gn)gn.hasOwnProperty(A)&&gn[A].objectNumber>=0&&ue("/"+A+" "+gn[A].objectNumber+" 0 R");Vt.publish("putXobjectDict"),ue(">>")},zc=function(){Pn.oid=Fn(),ue("<<"),ue("/Filter /Standard"),ue("/V "+Pn.v),ue("/R "+Pn.r),ue("/U <"+Pn.toHexString(Pn.U)+">"),ue("/O <"+Pn.toHexString(Pn.O)+">"),ue("/P "+Pn.P),ue(">>"),ue("endobj")},Rl=function(){for(var A in ue("/Font <<"),Pt)Pt.hasOwnProperty(A)&&(b===!1||b===!0&&w.hasOwnProperty(A))&&ue("/"+A+" "+Pt[A].objectNumber+" 0 R");ue(">>")},Nu=function(){if(Object.keys(Yt).length>0){for(var A in ue("/Shading <<"),Yt)Yt.hasOwnProperty(A)&&Yt[A]instanceof wl&&Yt[A].objectNumber>=0&&ue("/"+A+" "+Yt[A].objectNumber+" 0 R");Vt.publish("putShadingPatternDict"),ue(">>")}},ko=function(A){if(Object.keys(Yt).length>0){for(var V in ue("/Pattern <<"),Yt)Yt.hasOwnProperty(V)&&Yt[V]instanceof _.TilingPattern&&Yt[V].objectNumber>=0&&Yt[V].objectNumber<A&&ue("/"+V+" "+Yt[V].objectNumber+" 0 R");Vt.publish("putTilingPatternDict"),ue(">>")}},Io=function(){if(Object.keys(an).length>0){var A;for(A in ue("/ExtGState <<"),an)an.hasOwnProperty(A)&&an[A].objectNumber>=0&&ue("/"+A+" "+an[A].objectNumber+" 0 R");Vt.publish("putGStateDict"),ue(">>")}},Mn=function(A){Ci(A.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Rl(),Nu(),ko(A.objectOid),Io(),bs(),ue(">>"),ue("endobj")},kr=function(){var A=[];ys(),js(),ts(),Ja(A),Vt.publish("putResources"),A.forEach(Mn),Mn({resourcesOid:ln,objectOid:Number.MAX_SAFE_INTEGER}),Vt.publish("postPutResources")},Wi=function(){Vt.publish("putAdditionalObjects");for(var A=0;A<Me.length;A++){var V=Me[A];Ci(V.objId,!0),ue(V.content),ue("endobj")}Vt.publish("postPutAdditionalObjects")},Ll=function(A){_t[A.fontName]=_t[A.fontName]||{},_t[A.fontName][A.fontStyle]=A.id},Dl=function(A,V,ce,ge,Ee){var Be={id:"F"+(Object.keys(Pt).length+1).toString(10),postScriptName:A,fontName:V,fontStyle:ce,encoding:ge,isStandardFont:Ee||!1,metadata:{}};return Vt.publish("addFont",{font:Be,instance:this}),Pt[Be.id]=Be,Ll(Be),Be.id},Ml=function(A){for(var V=0,ce=Ye.length;V<ce;V++){var ge=Dl.call(this,A[V][0],A[V][1],A[V][2],Ye[V][3],!0);b===!1&&(w[ge]=!0);var Ee=A[V][0].split("-");Ll({id:ge,fontName:Ee[0],fontStyle:Ee[1]||""})}Vt.publish("addFonts",{fonts:Pt,dictionary:_t})},Ir=function(A){return A.foo=function(){try{return A.apply(this,arguments)}catch(ge){var V=ge.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var ce="Error in function "+V.split(`
`)[0].split("<")[0]+": "+ge.message;if(!Dt.console)throw new Error(ce);Dt.console.error(ce,ge),Dt.alert&&alert(ce)}},A.foo.bar=A,A.foo},Fs=function(A,V){var ce,ge,Ee,Be,Qe,lt,bt,Ut,jt;if(Ee=(V=V||{}).sourceEncoding||"Unicode",Qe=V.outputEncoding,(V.autoencode||Qe)&&Pt[At].metadata&&Pt[At].metadata[Ee]&&Pt[At].metadata[Ee].encoding&&(Be=Pt[At].metadata[Ee].encoding,!Qe&&Pt[At].encoding&&(Qe=Pt[At].encoding),!Qe&&Be.codePages&&(Qe=Be.codePages[0]),typeof Qe=="string"&&(Qe=Be[Qe]),Qe)){for(bt=!1,lt=[],ce=0,ge=A.length;ce<ge;ce++)(Ut=Qe[A.charCodeAt(ce)])?lt.push(String.fromCharCode(Ut)):lt.push(A[ce]),lt[ce].charCodeAt(0)>>8&&(bt=!0);A=lt.join("")}for(ce=A.length;bt===void 0&&ce!==0;)A.charCodeAt(ce-1)>>8&&(bt=!0),ce--;if(!bt)return A;for(lt=V.noBOM?[]:[254,255],ce=0,ge=A.length;ce<ge;ce++){if((jt=(Ut=A.charCodeAt(ce))>>8)>>8)throw new Error("Character at position "+ce+" of string '"+A+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lt.push(jt),lt.push(Ut-(jt<<8))}return String.fromCharCode.apply(void 0,lt)},or=_.__private__.pdfEscape=_.pdfEscape=function(A,V){return Fs(A,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fi=_.__private__.beginPage=function(A){we[++on]=[],Nt[on]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},Lo(on),Ie(we[H])},Ro=function(A,V){var ce,ge,Ee;switch(n=V||n,typeof A=="string"&&(ce=C(A.toLowerCase()),Array.isArray(ce)&&(ge=ce[0],Ee=ce[1])),Array.isArray(A)&&(ge=A[0]*rt,Ee=A[1]*rt),isNaN(ge)&&(ge=a[0],Ee=a[1]),(ge>14400||Ee>14400)&&(Rn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),Ee=Math.min(14400,Ee)),a=[ge,Ee],n.substr(0,1)){case"l":Ee>ge&&(a=[Ee,ge]);break;case"p":ge>Ee&&(a=[Ee,ge])}Fi(a),Xa(bi),ue(ss),ql!==0&&ue(ql+" J"),zl!==0&&ue(zl+" j"),Vt.publish("addPage",{pageNumber:on})},Au=function(A){A>0&&A<=on&&(we.splice(A,1),Nt.splice(A,1),on--,H>on&&(H=on),this.setPage(H))},Lo=function(A){A>0&&A<=on&&(H=A)},pa=_.__private__.getNumberOfPages=_.getNumberOfPages=function(){return we.length-1},Pl=function(A,V,ce){var ge,Ee=void 0;return ce=ce||{},A=A!==void 0?A:Pt[At].fontName,V=V!==void 0?V:Pt[At].fontStyle,ge=A.toLowerCase(),_t[ge]!==void 0&&_t[ge][V]!==void 0?Ee=_t[ge][V]:_t[A]!==void 0&&_t[A][V]!==void 0?Ee=_t[A][V]:ce.disableWarning===!1&&Rn.warn("Unable to look up font label for font '"+A+"', '"+V+"'. Refer to getFontList() for available fonts."),Ee||ce.noFallback||(Ee=_t.times[V])==null&&(Ee=_t.times.normal),Ee},Tu=_.__private__.putInfo=function(){var A=Fn(),V=function(ge){return ge};for(var ce in v!==null&&(V=Pn.encryptor(A,0)),ue("<<"),ue("/Producer ("+or(V("jsPDF "+Et.version))+")"),pt)pt.hasOwnProperty(ce)&&pt[ce]&&ue("/"+ce.substr(0,1).toUpperCase()+ce.substr(1)+" ("+or(V(pt[ce]))+")");ue("/CreationDate ("+or(V(be))+")"),ue(">>"),ue("endobj")},xs=_.__private__.putCatalog=function(A){var V=(A=A||{}).rootDictionaryObjId||ci;switch(Fn(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+V+" 0 R"),nt||(nt="fullwidth"),nt){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ce=""+nt;ce.substr(ce.length-1)==="%"&&(nt=parseInt(nt)/100),typeof nt=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+le(nt)+"]")}switch(ct||(ct="continuous"),ct){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}Se&&ue("/PageMode /"+Se),Vt.publish("putCatalog"),ue(">>"),ue("endobj")},Hc=_.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(se+1)),ue("/Root "+se+" 0 R"),ue("/Info "+(se-1)+" 0 R"),v!==null&&ue("/Encrypt "+Pn.oid+" 0 R"),ue("/ID [ <"+P+"> <"+P+"> ]"),ue(">>")},Eu=_.__private__.putHeader=function(){ue("%PDF-"+T),ue("%")},Cu=_.__private__.putXRef=function(){var A="0000000000";ue("xref"),ue("0 "+(se+1)),ue("0000000000 65535 f ");for(var V=1;V<=se;V++)typeof de[V]=="function"?ue((A+de[V]()).slice(-10)+" 00000 n "):de[V]!==void 0?ue((A+de[V]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},ns=_.__private__.buildDocument=function(){et(),Ie(fe),Vt.publish("buildDocument"),Eu(),Dn(),Wi(),kr(),v!==null&&zc(),Tu(),xs();var A=me;return Cu(),Hc(),ue("startxref"),ue(""+A),ue("%%EOF"),Ie(we[H]),fe.join(`
`)},Do=_.__private__.getBlob=function(A){return new Blob([at(A)],{type:"application/pdf"})},Mo=_.output=_.__private__.output=Ir((function(A,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",A){case void 0:return ns();case"save":_.save(V.filename);break;case"arraybuffer":return at(ns());case"blob":return Do(ns());case"bloburi":case"bloburl":if(Dt.URL!==void 0&&typeof Dt.URL.createObjectURL=="function")return Dt.URL&&Dt.URL.createObjectURL(Do(ns()))||void 0;Rn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ce="",ge=ns();try{ce=Q0(ge)}catch{ce=Q0(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+V.filename+";base64,"+ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var Ee="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(Ee=V.pdfObjectUrl,Be="");var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ee+'"'+Be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",lt=Dt.open();return lt!==null&&lt.document.write(Qe),lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',Ut=Dt.open();if(Ut!==null){Ut.document.write(bt);var jt=this;Ut.document.documentElement.querySelector("#pdfViewer").onload=function(){Ut.document.title=V.filename,Ut.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(jt.output("bloburl"))}}return Ut}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',Un=Dt.open();if(Un!==null&&(Un.document.write(Zt),Un.document.title=V.filename),Un||typeof safari>"u")return Un;break;case"datauri":case"dataurl":return Dt.document.location.href=this.output("datauristring",V);default:return null}})),Ya=function(A){return Array.isArray(Zr)===!0&&Zr.indexOf(A)>-1};switch(i){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=Ya("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);rt=i}var Pn=null;Ne(),ie();var Ul=function(A){return v!==null?Pn.encryptor(A,0):function(V){return V}},Po=_.__private__.getPageInfo=_.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[A].objId,pageNumber:A,pageContext:Nt[A]}},Tt=_.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in Nt)if(Nt[V].objId===A)break;return Po(V)},ma=_.__private__.getCurrentPageInfo=_.getCurrentPageInfo=function(){return{objId:Nt[H].objId,pageNumber:H,pageContext:Nt[H]}};_.addPage=function(){return Ro.apply(this,arguments),this},_.setPage=function(){return Lo.apply(this,arguments),Ie.call(this,we[H]),this},_.insertPage=function(A){return this.addPage(),this.movePage(H,A),this},_.movePage=function(A,V){var ce,ge;if(A>V){ce=we[A],ge=Nt[A];for(var Ee=A;Ee>V;Ee--)we[Ee]=we[Ee-1],Nt[Ee]=Nt[Ee-1];we[V]=ce,Nt[V]=ge,this.setPage(V)}else if(A<V){ce=we[A],ge=Nt[A];for(var Be=A;Be<V;Be++)we[Be]=we[Be+1],Nt[Be]=Nt[Be+1];we[V]=ce,Nt[V]=ge,this.setPage(V)}return this},_.deletePage=function(){return Au.apply(this,arguments),this},_.__private__.text=_.text=function(A,V,ce,ge,Ee){var Be,Qe,lt,bt,Ut,jt,Zt,Un,qn,Qn=(ge=ge||{}).scope||this;if(typeof A=="number"&&typeof V=="number"&&(typeof ce=="string"||Array.isArray(ce))){var ki=ce;ce=V,V=A,A=ki}if(arguments[3]instanceof wt?(z("The transform parameter of text() with a Matrix value"),qn=Ee):(lt=arguments[4],bt=arguments[5],xn(Zt=arguments[3])==="object"&&Zt!==null||(typeof lt=="string"&&(bt=lt,lt=null),typeof Zt=="string"&&(bt=Zt,Zt=null),typeof Zt=="number"&&(lt=Zt,Zt=null),ge={flags:Zt,angle:lt,align:bt})),isNaN(V)||isNaN(ce)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return Qn;var fi="",Bi=!1,vr=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:ba,qs=Qn.internal.scaleFactor;function Du(Sn){return Sn=Sn.split("	").join(Array(ge.TabLen||9).join(" ")),or(Sn,Zt)}function qo(Sn){for(var _n,Zn=Sn.concat(),ri=[],As=Zn.length;As--;)typeof(_n=Zn.shift())=="string"?ri.push(_n):Array.isArray(Sn)&&(_n.length===1||_n[1]===void 0&&_n[2]===void 0)?ri.push(_n[0]):ri.push([_n[0],_n[1],_n[2]]);return ri}function zo(Sn,_n){var Zn;if(typeof Sn=="string")Zn=_n(Sn)[0];else if(Array.isArray(Sn)){for(var ri,As,Ts=Sn.concat(),zi=[],no=Ts.length;no--;)typeof(ri=Ts.shift())=="string"?zi.push(_n(ri)[0]):Array.isArray(ri)&&typeof ri[0]=="string"&&(As=_n(ri[0],ri[1],ri[2]),zi.push([As[0],As[1],As[2]]));Zn=zi}return Zn}var Ss=!1,zs=!0;if(typeof A=="string")Ss=!0;else if(Array.isArray(A)){var $l=A.concat();Qe=[];for(var Hs,Ki=$l.length;Ki--;)(typeof(Hs=$l.shift())!="string"||Array.isArray(Hs)&&typeof Hs[0]!="string")&&(zs=!1);Ss=zs}if(Ss===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var to=Ze/Qn.internal.scaleFactor,_a=to*(vr-1);switch(ge.baseline){case"bottom":ce-=_a;break;case"top":ce+=to-_a;break;case"hanging":ce+=to-2*_a;break;case"middle":ce+=to/2-_a}if((jt=ge.maxWidth||0)>0&&(typeof A=="string"?A=Qn.splitTextToSize(A,jt):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce((function(Sn,_n){return Sn.concat(Qn.splitTextToSize(_n,jt))}),[]))),Be={text:A,x:V,y:ce,options:ge,mutex:{pdfEscape:or,activeFontKey:At,fonts:Pt,activeFontSize:Ze}},Vt.publish("preProcessText",Be),A=Be.text,lt=(ge=Be.options).angle,!(qn instanceof wt)&&lt&&typeof lt=="number"){lt*=Math.PI/180,ge.rotationDirection===0&&(lt=-lt),L===I.ADVANCED&&(lt=-lt);var Na=Math.cos(lt),Ho=Math.sin(lt);qn=new wt(Na,Ho,-Ho,Na,0,0)}else lt&&lt instanceof wt&&(qn=lt);L!==I.ADVANCED||qn||(qn=ar),(Ut=ge.charSpace||Fo)!==void 0&&(fi+=F(j(Ut))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Un=ge.horizontalScale)!==void 0&&(fi+=F(100*Un)+` Tz
`),ge.lang;var Xi=-1,Mu=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,Jl=Qn.internal.getCurrentPageInfo().pageContext;switch(Mu){case 0:case!1:case"fill":Xi=0;break;case 1:case!0:case"stroke":Xi=1;break;case 2:case"fillThenStroke":Xi=2;break;case 3:case"invisible":Xi=3;break;case 4:case"fillAndAddForClipping":Xi=4;break;case 5:case"strokeAndAddPathForClipping":Xi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Xi=6;break;case 7:case"addToPathForClipping":Xi=7}var Pu=Jl.usedRenderingMode!==void 0?Jl.usedRenderingMode:-1;Xi!==-1?fi+=Xi+` Tr
`:Pu!==-1&&(fi+=`0 Tr
`),Xi!==-1&&(Jl.usedRenderingMode=Xi),bt=ge.align||"left";var as,Yl=Ze*vr,$c=Qn.internal.pageSize.getWidth(),Qi=Pt[At];Ut=ge.charSpace||Fo,jt=ge.maxWidth||0,Zt=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var Mr=[];if(Object.prototype.toString.call(A)==="[object Array]"){var yr;Qe=qo(A),bt!=="left"&&(as=Qe.map((function(Sn){return Qn.getStringUnitWidth(Sn,{font:Qi,charSpace:Ut,fontSize:Ze,doKerning:!1})*Ze/qs})));var Pr,Gs=0;if(bt==="right"){V-=as[0],A=[],Ki=Qe.length;for(var os=0;os<Ki;os++)os===0?(Pr=rs(V),yr=Dr(ce)):(Pr=j(Gs-as[os]),yr=-Yl),A.push([Qe[os],Pr,yr]),Gs=as[os]}else if(bt==="center"){V-=as[0]/2,A=[],Ki=Qe.length;for(var ls=0;ls<Ki;ls++)ls===0?(Pr=rs(V),yr=Dr(ce)):(Pr=j((Gs-as[ls])/2),yr=-Yl),A.push([Qe[ls],Pr,yr]),Gs=as[ls]}else if(bt==="left"){A=[],Ki=Qe.length;for(var Go=0;Go<Ki;Go++)A.push(Qe[Go])}else{if(bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');A=[],Ki=Qe.length,jt=jt!==0?jt:$c;for(var qi=0;qi<Ki;qi++)yr=qi===0?Dr(ce):-Yl,Pr=qi===0?rs(V):0,qi<Ki-1?Mr.push(F(j((jt-as[qi])/(Qe[qi].split(" ").length-1)))):Mr.push(0),A.push([Qe[qi],Pr,yr])}}var Aa=typeof ge.R2L=="boolean"?ge.R2L:Xe;Aa===!0&&(A=zo(A,(function(Sn,_n,Zn){return[Sn.split("").reverse().join(""),_n,Zn]}))),Be={text:A,x:V,y:ce,options:ge,mutex:{pdfEscape:or,activeFontKey:At,fonts:Pt,activeFontSize:Ze}},Vt.publish("postProcessText",Be),A=Be.text,Bi=Be.mutex.isHex||!1;var Vs=Pt[At].encoding;Vs!=="WinAnsiEncoding"&&Vs!=="StandardEncoding"||(A=zo(A,(function(Sn,_n,Zn){return[Du(Sn),_n,Zn]}))),Qe=qo(A),A=[];for(var _s,Ur,Zi,Or=0,Ta=1,Ea=Array.isArray(Qe[0])?Ta:Or,ur="",Vo=function(Sn,_n,Zn){var ri="";return Zn instanceof wt?(Zn=typeof ge.angle=="number"?sr(Zn,new wt(1,0,0,1,Sn,_n)):sr(new wt(1,0,0,1,Sn,_n),Zn),L===I.ADVANCED&&(Zn=sr(new wt(1,0,0,-1,0,0),Zn)),ri=Zn.join(" ")+` Tm
`):ri=F(Sn)+" "+F(_n)+` Td
`,ri},br=0;br<Qe.length;br++){switch(ur="",Ea){case Ta:Zi=(Bi?"<":"(")+Qe[br][0]+(Bi?">":")"),_s=parseFloat(Qe[br][1]),Ur=parseFloat(Qe[br][2]);break;case Or:Zi=(Bi?"<":"(")+Qe[br]+(Bi?">":")"),_s=rs(V),Ur=Dr(ce)}Mr!==void 0&&Mr[br]!==void 0&&(ur=Mr[br]+` Tw
`),br===0?A.push(ur+Vo(_s,Ur,qn)+Zi):Ea===Or?A.push(ur+Zi):Ea===Ta&&A.push(ur+Vo(_s,Ur,qn)+Zi)}A=Ea===Or?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var Ns=`BT
/`;return Ns+=At+" "+Ze+` Tf
`,Ns+=F(Ze*vr)+` TL
`,Ns+=Qa+`
`,Ns+=fi,Ns+=A,ue(Ns+="ET"),w[At]=!0,Qn};var ku=_.__private__.clip=_.clip=function(A){return ue(A==="evenodd"?"W*":"W"),this};_.clipEvenOdd=function(){return ku("evenodd")},_.__private__.discardPath=_.discardPath=function(){return ue("n"),this};var Rr=_.__private__.isValidStyle=function(A){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(V=!0),V};_.__private__.setDefaultPathOperation=_.setDefaultPathOperation=function(A){return Rr(A)&&(h=A),this};var Ol=_.__private__.getStyle=_.getStyle=function(A){var V=h;switch(A){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=A}return V},ga=_.close=function(){return ue("h"),this};_.stroke=function(){return ue("S"),this},_.fill=function(A){return lr("f",A),this},_.fillEvenOdd=function(A){return lr("f*",A),this},_.fillStroke=function(A){return lr("B",A),this},_.fillStrokeEvenOdd=function(A){return lr("B*",A),this};var lr=function(A,V){xn(V)==="object"?ws(V,A):ue(A)},Wa=function(A){A===null||L===I.ADVANCED&&A===void 0||(A=Ol(A),ue(A))};function Ka(A,V,ce,ge,Ee){var Be=new vu(V||this.boundingBox,ce||this.xStep,ge||this.yStep,this.gState,Ee||this.matrix);Be.stream=this.stream;var Qe=A+"$$"+this.cloneIndex+++"$$";return Ei(Qe,Be),Be}var ws=function(A,V){var ce=Cr[A.key],ge=Yt[ce];if(ge instanceof wl)ue("q"),ue(jl(V)),ge.gState&&_.setGState(ge.gState),ue(A.matrix.toString()+" cm"),ue("/"+ce+" sh"),ue("Q");else if(ge instanceof vu){var Ee=new wt(1,0,0,-1,0,Sa());A.matrix&&(Ee=Ee.multiply(A.matrix||ar),ce=Ka.call(ge,A.key,A.boundingBox,A.xStep,A.yStep,Ee).id),ue("q"),ue("/Pattern cs"),ue("/"+ce+" scn"),ge.gState&&_.setGState(ge.gState),ue(V),ue("Q")}},jl=function(A){switch(A){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},va=_.moveTo=function(A,V){return ue(F(j(A))+" "+F(re(V))+" m"),this},ya=_.lineTo=function(A,V){return ue(F(j(A))+" "+F(re(V))+" l"),this},is=_.curveTo=function(A,V,ce,ge,Ee,Be){return ue([F(j(A)),F(re(V)),F(j(ce)),F(re(ge)),F(j(Ee)),F(re(Be)),"c"].join(" ")),this};_.__private__.line=_.line=function(A,V,ce,ge,Ee){if(isNaN(A)||isNaN(V)||isNaN(ce)||isNaN(ge)||!Rr(Ee))throw new Error("Invalid arguments passed to jsPDF.line");return L===I.COMPAT?this.lines([[ce-A,ge-V]],A,V,[1,1],Ee||"S"):this.lines([[ce-A,ge-V]],A,V,[1,1]).stroke()},_.__private__.lines=_.lines=function(A,V,ce,ge,Ee,Be){var Qe,lt,bt,Ut,jt,Zt,Un,qn,Qn,ki,fi,Bi;if(typeof A=="number"&&(Bi=ce,ce=V,V=A,A=Bi),ge=ge||[1,1],Be=Be||!1,isNaN(V)||isNaN(ce)||!Array.isArray(A)||!Array.isArray(ge)||!Rr(Ee)||typeof Be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(va(V,ce),Qe=ge[0],lt=ge[1],Ut=A.length,ki=V,fi=ce,bt=0;bt<Ut;bt++)(jt=A[bt]).length===2?(ki=jt[0]*Qe+ki,fi=jt[1]*lt+fi,ya(ki,fi)):(Zt=jt[0]*Qe+ki,Un=jt[1]*lt+fi,qn=jt[2]*Qe+ki,Qn=jt[3]*lt+fi,ki=jt[4]*Qe+ki,fi=jt[5]*lt+fi,is(Zt,Un,qn,Qn,ki,fi));return Be&&ga(),Wa(Ee),this},_.path=function(A){for(var V=0;V<A.length;V++){var ce=A[V],ge=ce.c;switch(ce.op){case"m":va(ge[0],ge[1]);break;case"l":ya(ge[0],ge[1]);break;case"c":is.apply(this,ge);break;case"h":ga()}}return this},_.__private__.rect=_.rect=function(A,V,ce,ge,Ee){if(isNaN(A)||isNaN(V)||isNaN(ce)||isNaN(ge)||!Rr(Ee))throw new Error("Invalid arguments passed to jsPDF.rect");return L===I.COMPAT&&(ge=-ge),ue([F(j(A)),F(re(V)),F(j(ce)),F(j(ge)),"re"].join(" ")),Wa(Ee),this},_.__private__.triangle=_.triangle=function(A,V,ce,ge,Ee,Be,Qe){if(isNaN(A)||isNaN(V)||isNaN(ce)||isNaN(ge)||isNaN(Ee)||isNaN(Be)||!Rr(Qe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ce-A,ge-V],[Ee-ce,Be-ge],[A-Ee,V-Be]],A,V,[1,1],Qe,!0),this},_.__private__.roundedRect=_.roundedRect=function(A,V,ce,ge,Ee,Be,Qe){if(isNaN(A)||isNaN(V)||isNaN(ce)||isNaN(ge)||isNaN(Ee)||isNaN(Be)||!Rr(Qe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lt=4/3*(Math.SQRT2-1);return Ee=Math.min(Ee,.5*ce),Be=Math.min(Be,.5*ge),this.lines([[ce-2*Ee,0],[Ee*lt,0,Ee,Be-Be*lt,Ee,Be],[0,ge-2*Be],[0,Be*lt,-Ee*lt,Be,-Ee,Be],[2*Ee-ce,0],[-Ee*lt,0,-Ee,-Be*lt,-Ee,-Be],[0,2*Be-ge],[0,-Be*lt,Ee*lt,-Be,Ee,-Be]],A+Ee,V,[1,1],Qe,!0),this},_.__private__.ellipse=_.ellipse=function(A,V,ce,ge,Ee){if(isNaN(A)||isNaN(V)||isNaN(ce)||isNaN(ge)||!Rr(Ee))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Be=4/3*(Math.SQRT2-1)*ce,Qe=4/3*(Math.SQRT2-1)*ge;return va(A+ce,V),is(A+ce,V-Qe,A+Be,V-ge,A,V-ge),is(A-Be,V-ge,A-ce,V-Qe,A-ce,V),is(A-ce,V+Qe,A-Be,V+ge,A,V+ge),is(A+Be,V+ge,A+ce,V+Qe,A+ce,V),Wa(Ee),this},_.__private__.circle=_.circle=function(A,V,ce,ge){if(isNaN(A)||isNaN(V)||isNaN(ce)||!Rr(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,V,ce,ce,ge)},_.setFont=function(A,V,ce){return ce&&(V=W(V,ce)),At=Pl(A,V,{disableWarning:!1}),this};var Uo=_.__private__.getFont=_.getFont=function(){return Pt[Pl.apply(_,arguments)]};_.__private__.getFontList=_.getFontList=function(){var A,V,ce={};for(A in _t)if(_t.hasOwnProperty(A))for(V in ce[A]=[],_t[A])_t[A].hasOwnProperty(V)&&ce[A].push(V);return ce},_.addFont=function(A,V,ce,ge,Ee){var Be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Be.indexOf(arguments[3])!==-1?Ee=arguments[3]:arguments[3]&&Be.indexOf(arguments[3])==-1&&(ce=W(ce,ge)),Ee=Ee||"Identity-H",Dl.call(this,A,V,ce,Ee)};var ba,bi=t.lineWidth||.200025,Lr=_.__private__.getLineWidth=_.getLineWidth=function(){return bi},Xa=_.__private__.setLineWidth=_.setLineWidth=function(A){return bi=A,ue(F(j(A))+" w"),this};_.__private__.setLineDash=Et.API.setLineDash=Et.API.setLineDashPattern=function(A,V){if(A=A||[],V=V||0,isNaN(V)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map((function(ce){return F(j(ce))})).join(" "),V=F(j(V)),ue("["+A+"] "+V+" d"),this};var xa=_.__private__.getLineHeight=_.getLineHeight=function(){return Ze*ba};_.__private__.getLineHeight=_.getLineHeight=function(){return Ze*ba};var Iu=_.__private__.setLineHeightFactor=_.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(ba=A),this},Oo=_.__private__.getLineHeightFactor=_.getLineHeightFactor=function(){return ba};Iu(t.lineHeight);var rs=_.__private__.getHorizontalCoordinate=function(A){return j(A)},Dr=_.__private__.getVerticalCoordinate=function(A){return L===I.ADVANCED?A:Nt[H].mediaBox.topRightY-Nt[H].mediaBox.bottomLeftY-j(A)},jo=_.__private__.getHorizontalCoordinateString=_.getHorizontalCoordinateString=function(A){return F(rs(A))},Bs=_.__private__.getVerticalCoordinateString=_.getVerticalCoordinateString=function(A){return F(Dr(A))},ss=t.strokeColor||"0 G";_.__private__.getStrokeColor=_.getDrawColor=function(){return wn(ss)},_.__private__.setStrokeColor=_.setDrawColor=function(A,V,ce,ge){return ss=di({ch1:A,ch2:V,ch3:ce,ch4:ge,pdfColorType:"draw",precision:2}),ue(ss),this};var Fl=t.fillColor||"0 g";_.__private__.getFillColor=_.getFillColor=function(){return wn(Fl)},_.__private__.setFillColor=_.setFillColor=function(A,V,ce,ge){return Fl=di({ch1:A,ch2:V,ch3:ce,ch4:ge,pdfColorType:"fill",precision:2}),ue(Fl),this};var Qa=t.textColor||"0 g",Bl=_.__private__.getTextColor=_.getTextColor=function(){return wn(Qa)};_.__private__.setTextColor=_.setTextColor=function(A,V,ce,ge){return Qa=di({ch1:A,ch2:V,ch3:ce,ch4:ge,pdfColorType:"text",precision:3}),this};var Fo=t.charSpace,Gc=_.__private__.getCharSpace=_.getCharSpace=function(){return parseFloat(Fo||0)};_.__private__.setCharSpace=_.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fo=A,this};var ql=0;_.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_.__private__.setLineCap=_.setLineCap=function(A){var V=_.CapJoinStyles[A];if(V===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ql=V,ue(V+" J"),this};var zl=0;_.__private__.setLineJoin=_.setLineJoin=function(A){var V=_.CapJoinStyles[A];if(V===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zl=V,ue(V+" j"),this},_.__private__.setLineMiterLimit=_.__private__.setMiterLimit=_.setLineMiterLimit=_.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(F(j(A))+" M"),this},_.GState=Qd,_.setGState=function(A){(A=typeof A=="string"?an[vi[A]]:Ru(null,A)).equals(Yi)||(ue("/"+A.id+" gs"),Yi=A)};var Ru=function(A,V){if(!A||!vi[A]){var ce=!1;for(var ge in an)if(an.hasOwnProperty(ge)&&an[ge].equals(V)){ce=!0;break}if(ce)V=an[ge];else{var Ee="GS"+(Object.keys(an).length+1).toString(10);an[Ee]=V,V.id=Ee}return A&&(vi[A]=V.id),Vt.publish("addGState",V),V}};_.addGState=function(A,V){return Ru(A,V),this},_.saveGraphicsState=function(){return ue("q"),Xn.push({key:At,size:Ze,color:Qa}),this},_.restoreGraphicsState=function(){ue("Q");var A=Xn.pop();return At=A.key,Ze=A.size,Qa=A.color,Yi=null,this},_.setCurrentTransformationMatrix=function(A){return ue(A.toString()+" cm"),this},_.comment=function(A){return ue("#"+A),this};var Za=function(A,V){var ce=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ce},set:function(Be){isNaN(Be)||(ce=parseFloat(Be))}});var ge=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(Be){isNaN(Be)||(ge=parseFloat(Be))}});var Ee="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ee},set:function(Be){Ee=Be.toString()}}),this},Hl=function(A,V,ce,ge){Za.call(this,A,V),this.type="rect";var Ee=ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ee},set:function(Qe){isNaN(Qe)||(Ee=parseFloat(Qe))}});var Be=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Be},set:function(Qe){isNaN(Qe)||(Be=parseFloat(Qe))}}),this},Gl=function(){this.page=on,this.currentPage=H,this.pages=we.slice(0),this.pagesContext=Nt.slice(0),this.x=En,this.y=Lt,this.matrix=qt,this.width=eo(H),this.height=Sa(H),this.outputDestination=Ue,this.id="",this.objectNumber=-1};Gl.prototype.restore=function(){on=this.page,H=this.currentPage,Nt=this.pagesContext,we=this.pages,En=this.x,Lt=this.y,qt=this.matrix,Vl(H,this.width),Bo(H,this.height),Ue=this.outputDestination};var Lu=function(A,V,ce,ge,Ee){yi.push(new Gl),on=H=0,we=[],En=A,Lt=V,qt=Ee,Fi([ce,ge])},Vc=function(A){if(ji[A])yi.pop().restore();else{var V=new Gl,ce="Xo"+(Object.keys(gn).length+1).toString(10);V.id=ce,ji[A]=ce,gn[ce]=V,Vt.publish("addFormObject",V),yi.pop().restore()}};for(var wa in _.beginFormObject=function(A,V,ce,ge,Ee){return Lu(A,V,ce,ge,Ee),this},_.endFormObject=function(A){return Vc(A),this},_.doFormObject=function(A,V){var ce=gn[ji[A]];return ue("q"),ue(V.toString()+" cm"),ue("/"+ce.id+" Do"),ue("Q"),this},_.getFormObject=function(A){var V=gn[ji[A]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},_.save=function(A,V){return A=A||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(hu(Do(ns()),A),typeof hu.unload=="function"&&Dt.setTimeout&&setTimeout(hu.unload,911),this):new Promise((function(ce,ge){try{var Ee=hu(Do(ns()),A);typeof hu.unload=="function"&&Dt.setTimeout&&setTimeout(hu.unload,911),ce(Ee)}catch(Be){ge(Be.message)}}))},Et.API)Et.API.hasOwnProperty(wa)&&(wa==="events"&&Et.API.events.length?(function(A,V){var ce,ge,Ee;for(Ee=V.length-1;Ee!==-1;Ee--)ce=V[Ee][0],ge=V[Ee][1],A.subscribe.apply(A,[ce].concat(typeof ge=="function"?[ge]:ge))})(Vt,Et.API.events):_[wa]=Et.API[wa]);var eo=_.getPageWidth=function(A){return(Nt[A=A||H].mediaBox.topRightX-Nt[A].mediaBox.bottomLeftX)/rt},Vl=_.setPageWidth=function(A,V){Nt[A].mediaBox.topRightX=V*rt+Nt[A].mediaBox.bottomLeftX},Sa=_.getPageHeight=function(A){return(Nt[A=A||H].mediaBox.topRightY-Nt[A].mediaBox.bottomLeftY)/rt},Bo=_.setPageHeight=function(A,V){Nt[A].mediaBox.topRightY=V*rt+Nt[A].mediaBox.bottomLeftY};return _.internal={pdfEscape:or,getStyle:Ol,getFont:Uo,getFontSize:tt,getCharSpace:Gc,getTextColor:Bl,getLineHeight:xa,getLineHeightFactor:Oo,getLineWidth:Lr,write:yt,getHorizontalCoordinate:rs,getVerticalCoordinate:Dr,getCoordinateString:jo,getVerticalCoordinateString:Bs,collections:{},newObject:Fn,newAdditionalObject:vs,newObjectDeferred:Ln,newObjectDeferredBegin:Ci,getFilters:ze,putStream:Mt,events:Vt,scaleFactor:rt,pageSize:{getWidth:function(){return eo(H)},setWidth:function(A){Vl(H,A)},getHeight:function(){return Sa(H)},setHeight:function(A){Bo(H,A)}},encryptionOptions:v,encryption:Pn,getEncryptor:Ul,output:Mo,getNumberOfPages:pa,pages:we,out:ue,f2:le,f3:B,getPageInfo:Po,getPageInfoByObjId:Tt,getCurrentPageInfo:ma,getPDFVersion:k,Point:Za,Rectangle:Hl,Matrix:wt,hasHotfix:Ya},Object.defineProperty(_.internal.pageSize,"width",{get:function(){return eo(H)},set:function(A){Vl(H,A)},enumerable:!0,configurable:!0}),Object.defineProperty(_.internal.pageSize,"height",{get:function(){return Sa(H)},set:function(A){Bo(H,A)},enumerable:!0,configurable:!0}),Ml.call(_,Ye),At="F1",Ro(a,n),Vt.publish("initialized"),_}Cc.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Cc.prototype.toHexString=function(t){return t.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Cc.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Cc.prototype.processOwnerPassword=function(t,e){return em(Z0(e).substr(0,5),t)},Cc.prototype.encryptor=function(t,e){var n=Z0(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return em(n,i)}},Qd.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||xn(t)!==xn(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return i===0},Et.API={events:[]},Et.version="2.5.1";var li=Et.API,_m=1,_u=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Sc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zt=function(t){return t.toFixed(2)},gl=function(t){return t.toFixed(5)};li.__acroform__={};var Qr=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},d2=function(t){return t*_m},qa=function(t){var e=new o5,n=ft.internal.getHeight(t)||0,i=ft.internal.getWidth(t)||0;return e.BBox=[0,0,Number(zt(i)),Number(zt(n))],e},qk=li.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},zk=li.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Hk=li.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},pi=li.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Hk(t,e-1)},mi=li.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return qk(t,e-1)},gi=li.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zk(t,e-1)},Gk=li.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,a=t[0],o=t[1],l=t[2],c=t[3],d={};return d.lowerLeft_X=n(a)||0,d.lowerLeft_Y=i(o+c)||0,d.upperRight_X=n(a+l)||0,d.upperRight_Y=i(o)||0,[Number(zt(d.lowerLeft_X)),Number(zt(d.lowerLeft_Y)),Number(zt(d.upperRight_X)),Number(zt(d.upperRight_Y))]},Vk=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=tm(t,n),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+zt(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=qa(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},tm=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map((function(B){return B.split(`
`)})):a.map((function(B){return[B]}));var o=n,l=ft.internal.getHeight(t)||0;l=l<0?-l:l;var c=ft.internal.getWidth(t)||0;c=c<0?-c:c;var d=function(B,j,ne){if(B+1<a.length){var re=j+" "+a[B+1][0];return eh(re,t,ne).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var h,v,b=eh("3",t,o).height,w=t.multiline?l-o:(l-b)/2,_=w+=2,T=0,k=0,R=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+eh(e,t,o=12).width+", FieldWidth:"+c+`
`;break}for(var C="",I=0,L=0;L<a.length;L++)if(a.hasOwnProperty(L)){var O=!1;if(a[L].length!==1&&R!==a[L].length-1){if((b+2)*(I+2)+2>l)continue e;C+=a[L][R],O=!0,k=L,L--}else{C=(C+=a[L][R]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var q=parseInt(L),W=d(q,C,o),F=L>=a.length-1;if(W&&!F){C+=" ",R=0;continue}if(W||F){if(F)k=q;else if(t.multiline&&(b+2)*(I+2)+2>l)continue e}else{if(!t.multiline||(b+2)*(I+2)+2>l)continue e;k=q}}for(var z="",ee=T;ee<=k;ee++){var le=a[ee];if(t.multiline){if(ee===k){z+=le[R]+" ",R=(R+1)%le.length;continue}if(ee===T){z+=le[le.length-1]+" ";continue}}z+=le[0]+" "}switch(z=z.substr(z.length-1)==" "?z.substr(0,z.length-1):z,v=eh(z,t,o).width,t.textAlign){case"right":h=c-v-2;break;case"center":h=(c-v)/2;break;case"left":default:h=2}e+=zt(h)+" "+zt(_)+` Td
`,e+="("+_u(z)+`) Tj
`,e+=-zt(h)+` 0 Td
`,_=-(o+2),v=0,T=O?k:k+1,I++,C=""}break}return i.text=e,i.fontSize=o,i},eh=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},$k={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Jk=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find((function(i){return i.type===n.type&&i.object===n.object}))===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Yk=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,a=t[n];e.internal.newObjectDeferredBegin(a.objId,!0),xn(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete t[i]}},Wk=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ca.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify($k)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_m=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new l5,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)})),t.internal.events.subscribe("buildDocument",(function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];o.objId=void 0,o.hasAnnotation&&Jk(o,n)}})(t)})),t.internal.events.subscribe("putCatalog",(function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)})),t.internal.events.subscribe("postPutPages",(function(n){(function(i,a){var o=!i;for(var l in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var c=i[l],d=[],h=c.Rect;if(c.Rect&&(c.Rect=Gk(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=ft.createDefaultAppearanceStream(c),xn(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(d=c.getKeyValueListForStream()),c.Rect=h,c.hasAppearanceStream&&!c.appearanceStreamContent){var v=Vk(c);d.push({key:"AP",value:"<</N "+v+">>"}),a.internal.acroformPlugin.xForms.push(v)}if(c.appearanceStreamContent){var b="";for(var w in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(w)){var _=c.appearanceStreamContent[w];if(b+="/"+w+" ",b+="<<",Object.keys(_).length>=1||Array.isArray(_)){for(var l in _)if(_.hasOwnProperty(l)){var T=_[l];typeof T=="function"&&(T=T.call(a,c)),b+="/"+l+" "+T+" ",a.internal.acroformPlugin.xForms.indexOf(T)>=0||a.internal.acroformPlugin.xForms.push(T)}}else typeof(T=_)=="function"&&(T=T.call(a,c)),b+="/"+l+" "+T,a.internal.acroformPlugin.xForms.indexOf(T)>=0||a.internal.acroformPlugin.xForms.push(T);b+=">>"}d.push({key:"AP",value:`<<
`+b+">>"})}a.internal.putStream({additionalKeyValues:d,objectId:c.objId}),a.internal.out("endobj")}o&&Yk(a.internal.acroformPlugin.xForms,a)})(n,t)})),t.internal.acroformPlugin.isInitialized=!0}},a5=li.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(l){return l};if(Array.isArray(t)){for(var a="[",o=0;o<t.length;o++)switch(o!==0&&(a+=" "),xn(t[o])){case"boolean":case"number":case"object":a+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&n&&(i=n.internal.getEncryptor(e)),a+="("+_u(i(t[o].toString()))+")"):a+=t[o].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},p0=function(t,e,n){var i=function(a){return a};return e!==void 0&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+_u(i(t))+")"},Ha=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ha.prototype.toString=function(){return this.objId+" 0 R"},Ha.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ha.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"}));for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var i=e[n],a=this[i];a&&(Array.isArray(a)?t.push({key:i,value:a5(a,this.objId,this.scope)}):a instanceof Ha?(a.scope=this.scope,t.push({key:i,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:i,value:a}))}return t};var o5=function(){Ha.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Qr(o5,Ha);var l5=function(){Ha.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+_u(n(t))+")"}},set:function(n){t=n}})};Qr(l5,Ha);var ca=function t(){Ha.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!pi(e,3)},set:function(C){C?this.F=mi(e,3):this.F=gi(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');n=C}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(C){i=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(C){i[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(C){i[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(C){i[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(C){i[3]=C}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof yh)return;o="FieldObject"+t.FieldNum++}var C=function(I){return I};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+_u(C(o))+")"},set:function(C){o=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(C){o=C}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(C){l=C}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(C){d=C}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/_m:h},set:function(C){h=C}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(C){v=C}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof yh||this instanceof Al))return p0(b,this.objId,this.scope)},set:function(C){C=C.toString(),b=C}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Oi?w:p0(w,this.objId,this.scope)},set:function(C){C=C.toString(),w=this instanceof Oi?C:C.substr(0,1)==="("?Sc(C.substr(1,C.length-2)):Sc(C)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oi?Sc(w.substr(1,w.length-1)):w},set:function(C){C=C.toString(),w=this instanceof Oi?"/"+C:C}});var _=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(_)return _},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Oi?_:p0(_,this.objId,this.scope)},set:function(C){C=C.toString(),_=this instanceof Oi?C:C.substr(0,1)==="("?Sc(C.substr(1,C.length-2)):Sc(C)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oi?Sc(_.substr(1,_.length-1)):_},set:function(C){C=C.toString(),_=this instanceof Oi?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var T,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(C){C=!!C,k=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(T)return T},set:function(C){T=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,1)},set:function(C){C?this.Ff=mi(this.Ff,1):this.Ff=gi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,2)},set:function(C){C?this.Ff=mi(this.Ff,2):this.Ff=gi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,3)},set:function(C){C?this.Ff=mi(this.Ff,3):this.Ff=gi(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');R=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(R){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};Qr(ca,Ha);var yu=function(){ca.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return a5(e,this.objId,this.scope)},set:function(n){var i,a;a=[],typeof(i=n)=="string"&&(a=(function(o,l,c){c||(c=1);for(var d,h=[];d=l.exec(o);)h.push(d[c]);return h})(i,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,18)},set:function(n){n?this.Ff=mi(this.Ff,18):this.Ff=gi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=mi(this.Ff,19):this.Ff=gi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,20)},set:function(n){n?(this.Ff=mi(this.Ff,20),e.sort()):this.Ff=gi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,22)},set:function(n){n?this.Ff=mi(this.Ff,22):this.Ff=gi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,23)},set:function(n){n?this.Ff=mi(this.Ff,23):this.Ff=gi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,27)},set:function(n){n?this.Ff=mi(this.Ff,27):this.Ff=gi(this.Ff,27)}}),this.hasAppearanceStream=!1};Qr(yu,ca);var bu=function(){yu.call(this),this.fontName="helvetica",this.combo=!1};Qr(bu,yu);var xu=function(){bu.call(this),this.combo=!0};Qr(xu,bu);var jd=function(){xu.call(this),this.edit=!0};Qr(jd,xu);var Oi=function(){ca.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,15)},set:function(n){n?this.Ff=mi(this.Ff,15):this.Ff=gi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,16)},set:function(n){n?this.Ff=mi(this.Ff,16):this.Ff=gi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,17)},set:function(n){n?this.Ff=mi(this.Ff,17):this.Ff=gi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,26)},set:function(n){n?this.Ff=mi(this.Ff,26):this.Ff=gi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,a=[];for(i in a.push("<<"),e)a.push("/"+i+" ("+_u(n(e[i]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){xn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Qr(Oi,ca);var Fd=function(){Oi.call(this),this.pushButton=!0};Qr(Fd,Oi);var wu=function(){Oi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Qr(wu,Oi);var yh=function(){var t,e;ca.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),i)l.push("/"+o+" ("+_u(a(i[o]))+")");return l.push(">>"),l.join(`
`)},set:function(a){xn(a)==="object"&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){typeof a=="string"&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ft.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Qr(yh,ca),wu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},wu.prototype.createOption=function(t){var e=new yh;return e.Parent=this,e.optionName=t,this.Kids.push(e),Kk.call(this.scope,e),e};var Bd=function(){Oi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ft.CheckBox.createAppearanceStream()};Qr(Bd,Oi);var Al=function(){ca.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,13)},set:function(e){e?this.Ff=mi(this.Ff,13):this.Ff=gi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,21)},set:function(e){e?this.Ff=mi(this.Ff,21):this.Ff=gi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,23)},set:function(e){e?this.Ff=mi(this.Ff,23):this.Ff=gi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,24)},set:function(e){e?this.Ff=mi(this.Ff,24):this.Ff=gi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,25)},set:function(e){e?this.Ff=mi(this.Ff,25):this.Ff=gi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,26)},set:function(e){e?this.Ff=mi(this.Ff,26):this.Ff=gi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Qr(Al,ca);var qd=function(){Al.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!pi(this.Ff,14)},set:function(t){t?this.Ff=mi(this.Ff,14):this.Ff=gi(this.Ff,14)}}),this.password=!0};Qr(qd,Al);var ft={CheckBox:{createAppearanceStream:function(){return{N:{On:ft.CheckBox.YesNormal},D:{On:ft.CheckBox.YesPushDown,Off:ft.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=qa(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),o=tm(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+zt(ft.internal.getWidth(t))+" "+zt(ft.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+zt(o.fontSize)+" Tf "+a),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=qa(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=[],o=ft.internal.getHeight(t),l=ft.internal.getWidth(t),c=tm(t,t.caption);return a.push("1 g"),a.push("0 0 "+zt(l)+" "+zt(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+zt(l-1)+" "+zt(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+zt(c.fontSize)+" Tf "+i),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=qa(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+zt(ft.internal.getWidth(t))+" "+zt(ft.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ft.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ft.RadioButton.Circle.YesNormal,e.D[t]=ft.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=qa(t);e.scope=t.scope;var n=[],i=ft.internal.getWidth(t)<=ft.internal.getHeight(t)?ft.internal.getWidth(t)/4:ft.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var a=ft.internal.Bezier_C,o=Number((i*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+gl(ft.internal.getWidth(t)/2)+" "+gl(ft.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=qa(t);e.scope=t.scope;var n=[],i=ft.internal.getWidth(t)<=ft.internal.getHeight(t)?ft.internal.getWidth(t)/4:ft.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),o=Number((a*ft.internal.Bezier_C).toFixed(5)),l=Number((i*ft.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+gl(ft.internal.getWidth(t)/2)+" "+gl(ft.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+gl(ft.internal.getWidth(t)/2)+" "+gl(ft.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=qa(t);e.scope=t.scope;var n=[],i=ft.internal.getWidth(t)<=ft.internal.getHeight(t)?ft.internal.getWidth(t)/4:ft.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),o=Number((a*ft.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+gl(ft.internal.getWidth(t)/2)+" "+gl(ft.internal.getHeight(t)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),n.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),n.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),n.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ft.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ft.RadioButton.Cross.YesNormal,e.D[t]=ft.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=qa(t);e.scope=t.scope;var n=[],i=ft.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+zt(ft.internal.getWidth(t)-2)+" "+zt(ft.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(zt(i.x1.x)+" "+zt(i.x1.y)+" m"),n.push(zt(i.x2.x)+" "+zt(i.x2.y)+" l"),n.push(zt(i.x4.x)+" "+zt(i.x4.y)+" m"),n.push(zt(i.x3.x)+" "+zt(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=qa(t);e.scope=t.scope;var n=ft.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+zt(ft.internal.getWidth(t))+" "+zt(ft.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+zt(ft.internal.getWidth(t)-2)+" "+zt(ft.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(zt(n.x1.x)+" "+zt(n.x1.y)+" m"),i.push(zt(n.x2.x)+" "+zt(n.x2.y)+" l"),i.push(zt(n.x4.x)+" "+zt(n.x4.y)+" m"),i.push(zt(n.x3.x)+" "+zt(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=qa(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+zt(ft.internal.getWidth(t))+" "+zt(ft.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ft.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ft.internal.getWidth(t),n=ft.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},ft.internal.getWidth=function(t){var e=0;return xn(t)==="object"&&(e=d2(t.Rect[2])),e},ft.internal.getHeight=function(t){var e=0;return xn(t)==="object"&&(e=d2(t.Rect[3])),e};var Kk=li.addField=function(t){if(Wk(this,t),!(t instanceof ca))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};li.AcroFormChoiceField=yu,li.AcroFormListBox=bu,li.AcroFormComboBox=xu,li.AcroFormEditBox=jd,li.AcroFormButton=Oi,li.AcroFormPushButton=Fd,li.AcroFormRadioButton=wu,li.AcroFormCheckBox=Bd,li.AcroFormTextField=Al,li.AcroFormPasswordField=qd,li.AcroFormAppearance=ft,li.AcroForm={ChoiceField:yu,ListBox:bu,ComboBox:xu,EditBox:jd,Button:Oi,PushButton:Fd,RadioButton:wu,CheckBox:Bd,TextField:Al,PasswordField:qd,Appearance:ft},Et.AcroForm={ChoiceField:yu,ListBox:bu,ComboBox:xu,EditBox:jd,Button:Oi,PushButton:Fd,RadioButton:wu,CheckBox:Bd,TextField:Al,PasswordField:qd,Appearance:ft};var Xk=Et.AcroForm;function u5(t){return t.reduce((function(e,n,i){return e[n]=i,e}),{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(B,j){var ne,re,be,P,$,ie=e;if((j=j||e)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(W(B))for($ in n)for(be=n[$],ne=0;ne<be.length;ne+=1){for(P=!0,re=0;re<be[ne].length;re+=1)if(be[ne][re]!==void 0&&be[ne][re]!==B[re]){P=!1;break}if(P===!0){ie=$;break}}else for($ in n)for(be=n[$],ne=0;ne<be.length;ne+=1){for(P=!0,re=0;re<be[ne].length;re+=1)if(be[ne][re]!==void 0&&be[ne][re]!==B.charCodeAt(re)){P=!1;break}if(P===!0){ie=$;break}}return ie===e&&j!==e&&(ie=j),ie},a=function B(j){for(var ne=this.internal.write,re=this.internal.putStream,be=(0,this.internal.getFilters)();be.indexOf("FlateEncode")!==-1;)be.splice(be.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var P=[];if(P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Image"}),P.push({key:"Width",value:j.width}),P.push({key:"Height",value:j.height}),j.colorSpace===R.INDEXED?P.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(P.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===R.DEVICE_CMYK&&P.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),P.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&P.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)){for(var $="",ie=0,ae=j.transparency.length;ie<ae;ie++)$+=j.transparency[ie]+" "+j.transparency[ie]+" ";P.push({key:"Mask",value:"["+$+"]"})}j.sMask!==void 0&&P.push({key:"SMask",value:j.objectId+1+" 0 R"});var he=j.filter!==void 0?["/"+j.filter]:void 0;if(re({data:j.data,additionalKeyValues:P,alreadyAppliedFilters:he,objectId:j.objectId}),ne("endobj"),"sMask"in j&&j.sMask!==void 0){var Ne="/Predictor "+j.predictor+" /Colors 1 /BitsPerComponent "+j.bitsPerComponent+" /Columns "+j.width,D={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:j.bitsPerComponent,decodeParameters:Ne,data:j.sMask};"filter"in j&&(D.filter=j.filter),B.call(this,D)}if(j.colorSpace===R.INDEXED){var H=this.internal.newObject();re({data:z(new Uint8Array(j.palette)),objectId:H}),ne("endobj")}},o=function(){var B=this.internal.collections.addImage_images;for(var j in B)a.call(this,B[j])},l=function(){var B,j=this.internal.collections.addImage_images,ne=this.internal.write;for(var re in j)ne("/I"+(B=j[re]).index,B.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var B=this.internal.collections.addImage_images;return c.call(this),B},h=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function(B){return typeof t["process"+B.toUpperCase()]=="function"},b=function(B){return xn(B)==="object"&&B.nodeType===1},w=function(B,j){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var ne=""+B.getAttribute("src");if(ne.indexOf("data:image/")===0)return Od(unescape(ne).split("base64,").pop());var re=t.loadFile(ne,!0);if(re!==void 0)return re}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var be;switch(j){case"PNG":be="image/png";break;case"WEBP":be="image/webp";break;case"JPEG":case"JPG":default:be="image/jpeg"}return Od(B.toDataURL(be,1).split("base64,").pop())}},_=function(B){var j=this.internal.collections.addImage_images;if(j){for(var ne in j)if(B===j[ne].alias)return j[ne]}},T=function(B,j,ne){return B||j||(B=-96,j=-96),B<0&&(B=-1*ne.width*72/B/this.internal.scaleFactor),j<0&&(j=-1*ne.height*72/j/this.internal.scaleFactor),B===0&&(B=j*ne.width/ne.height),j===0&&(j=B*ne.height/ne.width),[B,j]},k=function(B,j,ne,re,be,P){var $=T.call(this,ne,re,be),ie=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,he=d.call(this);if(ne=$[0],re=$[1],he[be.index]=be,P){P*=Math.PI/180;var Ne=Math.cos(P),D=Math.sin(P),H=function(Z){return Z.toFixed(4)},K=[H(Ne),H(D),H(-1*D),H(Ne),0,0,"cm"]}this.internal.write("q"),P?(this.internal.write([1,"0","0",1,ie(B),ae(j+re),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([ie(ne),"0","0",ie(re),"0","0","cm"].join(" "))):this.internal.write([ie(ne),"0","0",ie(re),ie(B),ae(j+re),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+be.index+" Do"),this.internal.write("Q")},R=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=t.__addimage__.sHashCode=function(B){var j,ne,re=0;if(typeof B=="string")for(ne=B.length,j=0;j<ne;j++)re=(re<<5)-re+B.charCodeAt(j),re|=0;else if(W(B))for(ne=B.byteLength/2,j=0;j<ne;j++)re=(re<<5)-re+B[j],re|=0;return re},L=t.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var j=!0;return B.length===0&&(j=!1),B.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&(j=!1),j},O=t.__addimage__.extractImageFromDataUrl=function(B){var j=(B=B||"").split("base64,"),ne=null;if(j.length===2){var re=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(j[0]);Array.isArray(re)&&(ne={mimeType:re[1],charset:re[2],data:j[1]})}return ne},q=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(B){return q()&&B instanceof ArrayBuffer};var W=t.__addimage__.isArrayBufferView=function(B){return q()&&typeof Uint32Array<"u"&&(B instanceof Int8Array||B instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array)},F=t.__addimage__.binaryStringToUint8Array=function(B){for(var j=B.length,ne=new Uint8Array(j),re=0;re<j;re++)ne[re]=B.charCodeAt(re);return ne},z=t.__addimage__.arrayBufferToBinaryString=function(B){for(var j="",ne=W(B)?B:new Uint8Array(B),re=0;re<ne.length;re+=8192)j+=String.fromCharCode.apply(null,ne.subarray(re,re+8192));return j};t.addImage=function(){var B,j,ne,re,be,P,$,ie,ae;if(typeof arguments[1]=="number"?(j=e,ne=arguments[1],re=arguments[2],be=arguments[3],P=arguments[4],$=arguments[5],ie=arguments[6],ae=arguments[7]):(j=arguments[1],ne=arguments[2],re=arguments[3],be=arguments[4],P=arguments[5],$=arguments[6],ie=arguments[7],ae=arguments[8]),xn(B=arguments[0])==="object"&&!b(B)&&"imageData"in B){var he=B;B=he.imageData,j=he.format||j||e,ne=he.x||ne||0,re=he.y||re||0,be=he.w||he.width||be,P=he.h||he.height||P,$=he.alias||$,ie=he.compression||ie,ae=he.rotation||he.angle||ae}var Ne=this.internal.getFilters();if(ie===void 0&&Ne.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(ne)||isNaN(re))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var D=ee.call(this,B,j,$,ie);return k.call(this,ne,re,be,P,D,ae),this};var ee=function(B,j,ne,re){var be,P,$;if(typeof B=="string"&&i(B)===e){B=unescape(B);var ie=le(B,!1);(ie!==""||(ie=t.loadFile(B,!0))!==void 0)&&(B=ie)}if(b(B)&&(B=w(B,j)),j=i(B,j),!v(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if((($=ne)==null||$.length===0)&&(ne=(function(ae){return typeof ae=="string"||W(ae)?I(ae):W(ae.data)?I(ae.data):null})(B)),(be=_.call(this,ne))||(q()&&(B instanceof Uint8Array||j==="RGBA"||(P=B,B=F(B))),be=this["process"+j.toUpperCase()](B,h.call(this),ne,(function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in t.image_compression?ae:C.NONE})(re),P)),!be)throw new Error("An unknown error occurred whilst processing the image.");return be},le=t.__addimage__.convertBase64ToBinaryString=function(B,j){var ne;j=typeof j!="boolean"||j;var re,be="";if(typeof B=="string"){re=(ne=O(B))!==null?ne.data:B;try{be=Od(re)}catch(P){if(j)throw L(re)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+P.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return be};t.getImageProperties=function(B){var j,ne,re="";if(b(B)&&(B=w(B)),typeof B=="string"&&i(B)===e&&((re=le(B,!1))===""&&(re=t.loadFile(B)||""),B=re),ne=i(B),!v(ne))throw new Error("addImage does not support files of type '"+ne+"', please ensure that a plugin for '"+ne+"' support is added.");if(!q()||B instanceof Uint8Array||(B=F(B)),!(j=this["process"+ne.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=ne,j}})(Et.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Et.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,a,o,l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,v=!1,b=0;b<h.length&&!v;b++)switch((i=h[b]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var w=0;w<h.length;w++){i=h[w];var _=this.internal.pdfEscape,T=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(k.objId),I=i.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y)+"] ")+"/Contents ("+_(C(i.contents))+")",o+=" /Popup "+R.objId+" 0 R",o+=" /P "+d.objId+" 0 R",o+=" /T ("+_(C(I))+") >>",k.content=o;var L=k.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(i.bounds.x+30)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+c(i.bounds.y)+"] ")+" /Parent "+L,i.open&&(o+=" /Open true"),o+=" >>",R.content=o,this.internal.write(k.objId,"0 R",R.objId,"0 R");break;case"freetext":a="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y+i.bounds.h)+"] ";var O=i.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+_(T(i.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(i.options.name){var q=this.annotations._nameMap[i.options.name];i.options.pageNumber=q.page,i.options.top=q.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",o="",i.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+_(T(i.options.url))+") >>";else if(i.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,o+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var W=c(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),o+=" /XYZ "+i.options.left+" "+W+" "+i.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,a,o,l){var c=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:d(n),y:h(i),w:d(n+a),h:h(i+o)},options:l,type:"link"})},t.textWithLink=function(n,i,a,o){var l,c,d=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var v=this.splitTextToSize(n,c).length;l=Math.ceil(h*v)}else c=d,l=h;return this.text(n,i,a,o),a+=.2*h,o.align==="center"&&(i-=d/2),o.align==="right"&&(i-=d),this.link(i,a-h,c,l,o),d},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}})(Et.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(k){return e[k.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},c=t.__arabicParser__.isArabicEndLetter=function(k){return l(k)&&o(k)&&e[k.charCodeAt(0)].length<=2},d=t.__arabicParser__.isArabicAlfLetter=function(k){return l(k)&&a.indexOf(k.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return l(k)&&o(k)&&e[k.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(k){return l(k)&&o(k)&&e[k.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(k){return l(k)&&o(k)&&e[k.charCodeAt(0)].length>=3};var v=t.__arabicParser__.arabicLetterHasMedialForm=function(k){return l(k)&&o(k)&&e[k.charCodeAt(0)].length==4},b=t.__arabicParser__.resolveLigatures=function(k){var R=0,C=n,I="",L=0;for(R=0;R<k.length;R+=1)C[k.charCodeAt(R)]!==void 0?(L++,typeof(C=C[k.charCodeAt(R)])=="number"&&(I+=String.fromCharCode(C),C=n,L=0),R===k.length-1&&(C=n,I+=k.charAt(R-(L-1)),R-=L-1,L=0)):(C=n,I+=k.charAt(R-L),R-=L,L=0);return I};t.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&i[k.charCodeAt(0)]!==void 0};var w=t.__arabicParser__.getCorrectForm=function(k,R,C){return l(k)?o(k)===!1?-1:!h(k)||!l(R)&&!l(C)||!l(C)&&c(R)||c(k)&&!l(R)||c(k)&&d(R)||c(k)&&c(R)?0:v(k)&&l(R)&&!c(R)&&l(C)&&h(C)?3:c(k)||!l(C)?1:2:-1},_=function(k){var R=0,C=0,I=0,L="",O="",q="",W=(k=k||"").split("\\s+"),F=[];for(R=0;R<W.length;R+=1){for(F.push(""),C=0;C<W[R].length;C+=1)L=W[R][C],O=W[R][C-1],q=W[R][C+1],l(L)?(I=w(L,O,q),F[R]+=I!==-1?String.fromCharCode(e[L.charCodeAt(0)][I]):L):F[R]+=L;F[R]=b(F[R])}return F.join(" ")},T=t.__arabicParser__.processArabic=t.processArabic=function(){var k,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(R)){var I=0;for(C=[],I=0;I<R.length;I+=1)Array.isArray(R[I])?C.push([_(R[I][0]),R[I][1],R[I][2]]):C.push([_(R[I])]);k=C}else k=_(R);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};t.events.push(["preProcessText",T])})(Et.API),Et.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(c){n=c}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(c){l=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,i){var a;if((n=n||"2d")!=="2d")return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Et.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(k){d=k}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(k){h=k}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(k){v=k}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(k){b=k}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(k){w=k}});var _=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return _},set:function(k){_=k}});var T=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return T},set:function(k){T=k}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(d){return i.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},t.getTextDimensions=function(d,h){i.call(this);var v=(h=h||{}).fontSize||this.getFontSize(),b=h.font||this.getFont(),w=h.scaleFactor||this.internal.scaleFactor,_=0,T=0,k=0,R=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var C=h.maxWidth;C>0?typeof d=="string"?d=this.splitTextToSize(d,C):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce((function(L,O){return L.concat(R.splitTextToSize(O,C))}),[])):d=Array.isArray(d)?d:[d];for(var I=0;I<d.length;I++)_<(k=this.getStringUnitWidth(d[I],{font:b})*v)&&(_=k);return _!==0&&(T=d.length),{w:_/=w,h:Math.max((T*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/w,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var d=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var d;d=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var h=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,_=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===d.lineNumber?(d.x=(h.x||0)+(h.width||0),d.y=h.y||0):h.y+h.height+d.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=b.top,_&&w&&(this.printHeaderRow(d.lineNumber,!0),d.y+=w[0].height)):d.y=h.y+h.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,n===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-v,d.y+v,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+v,{align:"center",baseline:"top",maxWidth:d.width-v-v}):this.text(d.text,d.x+v,d.y+v,{align:"left",baseline:"top",maxWidth:d.width-v-v})),this.internal.__cell__.lastCell=d,this};t.table=function(d,h,v,b,w){if(i.call(this),!v)throw new Error("No data for PDF table.");var _,T,k,R,C=[],I=[],L=[],O={},q={},W=[],F=[],z=(w=w||{}).autoSize||!1,ee=w.printHeaders!==!1,le=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,B=w.margins||Object.assign({width:this.getPageWidth()},e),j=typeof w.padding=="number"?w.padding:3,ne=w.headerBackgroundColor||"#c8c8c8",re=w.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=ee,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=le,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=ne,this.internal.__cell__.headerTextColor=re,this.setFontSize(le),b==null)I=C=Object.keys(v[0]),L=C.map((function(){return"left"}));else if(Array.isArray(b)&&xn(b[0])==="object")for(C=b.map((function(he){return he.name})),I=b.map((function(he){return he.prompt||he.name||""})),L=b.map((function(he){return he.align||"left"})),_=0;_<b.length;_+=1)q[b[_].name]=b[_].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(I=C=b,L=C.map((function(){return"left"})));if(z||Array.isArray(b)&&typeof b[0]=="string")for(_=0;_<C.length;_+=1){for(O[R=C[_]]=v.map((function(he){return he[R]})),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(I[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),T=O[R],this.setFont(void 0,"normal"),k=0;k<T.length;k+=1)W.push(this.getTextDimensions(T[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[R]=Math.max.apply(null,W)+j+j,W=[]}if(ee){var be={};for(_=0;_<C.length;_+=1)be[C[_]]={},be[C[_]].text=I[_],be[C[_]].align=L[_];var P=c.call(this,be,q);F=C.map((function(he){return new o(d,h,q[he],P,be[he].text,void 0,be[he].align)})),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var $=b.reduce((function(he,Ne){return he[Ne.name]=Ne.align,he}),{});for(_=0;_<v.length;_+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:_,data:v[_]},this);var ie=c.call(this,v[_],q);for(k=0;k<C.length;k+=1){var ae=v[_][C[k]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:_,col:k,data:ae},this),l.call(this,new o(d,h,q[C[k]],ie,ae,_+2,$[C[k]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=h,this};var c=function(d,h){var v=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(d).map((function(_){var T=d[_];return this.splitTextToSize(T.hasOwnProperty("text")?T.text:T,h[_]-v-v)}),this).map((function(_){return this.getLineHeightFactor()*_.length*b/w+v+v}),this).reduce((function(_,T){return Math.max(_,T)}),0)};t.setTableHeaderRow=function(d){i.call(this),this.internal.__cell__.tableHeaderRow=d},t.printHeaderRow=function(d,h){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],_=0;_<this.internal.__cell__.tableHeaderRow.length;_+=1){v=this.internal.__cell__.tableHeaderRow[_].clone(),h&&(v.y=this.internal.__cell__.margins.top||0,w.push(v)),v.lineNumber=d;var T=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,v),this.setTextColor(T)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),n=!1}})(Et.API);var c5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},d5=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],nm=u5(d5),f5=[100,200,300,400,500,600,700,800,900],Qk=u5(f5);function im(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(o){return c5[o=o||"normal"]?o:"normal"})(t.style),i=(function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}})(t.weight),a=(function(o){return typeof nm[o=o||"normal"]=="number"?o:"normal"})(t.stretch);return{family:e,style:n,weight:i,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,n,i].join(" ")}}}function f2(t,e,n,i){var a;for(a=n;a>=0&&a<e.length;a+=i)if(t[e[a]])return t[e[a]];for(a=n;a>=0&&a<e.length;a-=i)if(t[e[a]])return t[e[a]]}var Zk={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},h2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function p2(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function eI(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",a=Object.assign({},Zk,n.genericFontFamilies||{}),o=null,l=null,c=0;c<e.length;++c)if(a[(o=im(e[c])).family]&&(o.family=a[o.family]),t.hasOwnProperty(o.family)){l=t[o.family];break}if(!(l=l||t[i]))throw new Error("Could not find a font-family for the rule '"+p2(o)+"' and default family '"+i+"'.");if(l=(function(d,h){if(h[d])return h[d];var v=nm[d],b=v<=nm.normal?-1:1,w=f2(h,d5,v,b);if(!w)throw new Error("Could not find a matching font-stretch value for "+d);return w})(o.stretch,l),l=(function(d,h){if(h[d])return h[d];for(var v=c5[d],b=0;b<v.length;++b)if(h[v[b]])return h[v[b]];throw new Error("Could not find a matching font-style for "+d)})(o.style,l),!(l=(function(d,h){if(h[d])return h[d];if(d===400&&h[500])return h[500];if(d===500&&h[400])return h[400];var v=Qk[d],b=f2(h,f5,v,d<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+d);return b})(o.weight,l)))throw new Error("Failed to resolve a font for the rule '"+p2(o)+"'.");return l}function m2(t){return t.trimLeft()}function tI(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function nI(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var th,g2,v2,m0=["times"];(function(t){var e,n,i,a,o,l,c,d,h,v=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new d,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new l,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new l,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,c=this.internal.Rectangle,d=this.internal.Matrix,h=new v}]);var b=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=D;Object.defineProperty(this,"pdf",{get:function(){return H}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(Ie){K=!!Ie}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(Ie){Z=!!Ie}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Ie){isNaN(Ie)||(se=Ie)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(Ie){isNaN(Ie)||(de=Ie)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(Ie){var ue;typeof Ie=="number"?ue=[Ie,Ie,Ie,Ie]:((ue=new Array(4))[0]=Ie[0],ue[1]=Ie.length>=2?Ie[1]:ue[0],ue[2]=Ie.length>=3?Ie[2]:ue[0],ue[3]=Ie.length>=4?Ie[3]:ue[1]),h.margin=ue}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(Ie){fe=Ie}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(Ie){me=Ie}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(Ie){Me=Ie}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(Ie){Ie instanceof v&&(h=Ie)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(Ie){h.path=Ie}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(Ie){we=Ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ie){var ue;ue=w(Ie),this.ctx.fillStyle=ue.style,this.ctx.isFillTransparent=ue.a===0,this.ctx.fillOpacity=ue.a,this.pdf.setFillColor(ue.r,ue.g,ue.b,{a:ue.a}),this.pdf.setTextColor(ue.r,ue.g,ue.b,{a:ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ie){var ue=w(Ie);this.ctx.strokeStyle=ue.style,this.ctx.isStrokeTransparent=ue.a===0,this.ctx.strokeOpacity=ue.a,ue.a===0?this.pdf.setDrawColor(255,255,255):(ue.a,this.pdf.setDrawColor(ue.r,ue.g,ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ie){["butt","round","square"].indexOf(Ie)!==-1&&(this.ctx.lineCap=Ie,this.pdf.setLineCap(Ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ie){isNaN(Ie)||(this.ctx.lineWidth=Ie,this.pdf.setLineWidth(Ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ie){["bevel","round","miter"].indexOf(Ie)!==-1&&(this.ctx.lineJoin=Ie,this.pdf.setLineJoin(Ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ie){isNaN(Ie)||(this.ctx.miterLimit=Ie,this.pdf.setMiterLimit(Ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ie){this.ctx.textBaseline=Ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ie){["right","end","center","left","start"].indexOf(Ie)!==-1&&(this.ctx.textAlign=Ie)}});var Pe=null;function Ue(Ie,ue){if(Pe===null){var yt=(function(at){var Ye=[];return Object.keys(at).forEach((function(Ze){at[Ze].forEach((function(nt){var tt=null;switch(nt){case"bold":tt={family:Ze,weight:"bold"};break;case"italic":tt={family:Ze,style:"italic"};break;case"bolditalic":tt={family:Ze,weight:"bold",style:"italic"};break;case"":case"normal":tt={family:Ze}}tt!==null&&(tt.ref={name:Ze,style:nt},Ye.push(tt))}))})),Ye})(Ie.getFontList());Pe=(function(at){for(var Ye={},Ze=0;Ze<at.length;++Ze){var nt=im(at[Ze]),tt=nt.family,Xe=nt.stretch,Se=nt.style,Ge=nt.weight;Ye[tt]=Ye[tt]||{},Ye[tt][Xe]=Ye[tt][Xe]||{},Ye[tt][Xe][Se]=Ye[tt][Xe][Se]||{},Ye[tt][Xe][Se][Ge]=nt}return Ye})(yt.concat(ue))}return Pe}var et=null;Object.defineProperty(this,"fontFaces",{get:function(){return et},set:function(Ie){Pe=null,et=Ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ie){var ue;if(this.ctx.font=Ie,(ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ie))!==null){var yt=ue[1],at=(ue[2],ue[3]),Ye=ue[4],Ze=(ue[5],ue[6]),nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ye)[2];Ye=Math.floor(nt==="px"?parseFloat(Ye)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(Ye)*this.pdf.getFontSize():parseFloat(Ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ye);var tt=(function(pt){var At,rt,En=[],Lt=pt.trim();if(Lt==="")return m0;if(Lt in h2)return[h2[Lt]];for(;Lt!=="";){switch(rt=null,At=(Lt=m2(Lt)).charAt(0)){case'"':case"'":rt=tI(Lt.substring(1),At);break;default:rt=nI(Lt)}if(rt===null||(En.push(rt[0]),(Lt=m2(rt[1]))!==""&&Lt.charAt(0)!==","))return m0;Lt=Lt.replace(/^,/,"")}return En})(Ze);if(this.fontFaces){var Xe=eI(Ue(this.pdf,this.fontFaces),tt.map((function(pt){return{family:pt,stretch:"normal",weight:at,style:yt}})));this.pdf.setFont(Xe.ref.name,Xe.ref.style)}else{var Se="";(at==="bold"||parseInt(at,10)>=700||yt==="bold")&&(Se="bold"),yt==="italic"&&(Se+="italic"),Se.length===0&&(Se="normal");for(var Ge="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},xt=0;xt<tt.length;xt++){if(this.pdf.internal.getFont(tt[xt],Se,{noFallback:!0,disableWarning:!0})!==void 0){Ge=tt[xt];break}if(Se==="bolditalic"&&this.pdf.internal.getFont(tt[xt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ge=tt[xt],Se="bold";else if(this.pdf.internal.getFont(tt[xt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ge=tt[xt],Se="normal";break}}if(Ge===""){for(var Ht=0;Ht<tt.length;Ht++)if(ct[tt[Ht]]){Ge=ct[tt[Ht]];break}}Ge=Ge===""?"Times":Ge,this.pdf.setFont(Ge,Se)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ie){this.ctx.globalCompositeOperation=Ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ie){this.ctx.globalAlpha=Ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ie){this.ctx.lineDashOffset=Ie,Ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ie){this.ctx.lineDash=Ie,Ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ie){this.ctx.ignoreClearRect=!!Ie}})};b.prototype.setLineDash=function(D){this.lineDash=D},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){O.call(this,"fill",!1)},b.prototype.stroke=function(){O.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(D,H){if(isNaN(D)||isNaN(H))throw Rn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new l(D,H));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new l(D,H)},b.prototype.closePath=function(){var D=new l(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&xn(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){D=new l(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(D.x,D.y)},b.prototype.lineTo=function(D,H){if(isNaN(D)||isNaN(H))throw Rn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new l(D,H));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new l(K.x,K.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},b.prototype.quadraticCurveTo=function(D,H,K,Z){if(isNaN(K)||isNaN(Z)||isNaN(D)||isNaN(H))throw Rn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new l(K,Z)),de=this.ctx.transform.applyToPoint(new l(D,H));this.path.push({type:"qct",x1:de.x,y1:de.y,x:se.x,y:se.y}),this.ctx.lastPoint=new l(se.x,se.y)},b.prototype.bezierCurveTo=function(D,H,K,Z,se,de){if(isNaN(se)||isNaN(de)||isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z))throw Rn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new l(se,de)),me=this.ctx.transform.applyToPoint(new l(D,H)),Me=this.ctx.transform.applyToPoint(new l(K,Z));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:Me.x,y2:Me.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new l(fe.x,fe.y)},b.prototype.arc=function(D,H,K,Z,se,de){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z)||isNaN(se))throw Rn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new l(D,H));D=fe.x,H=fe.y;var me=this.ctx.transform.applyToPoint(new l(0,K)),Me=this.ctx.transform.applyToPoint(new l(0,0));K=Math.sqrt(Math.pow(me.x-Me.x,2)+Math.pow(me.y-Me.y,2))}Math.abs(se-Z)>=2*Math.PI&&(Z=0,se=2*Math.PI),this.path.push({type:"arc",x:D,y:H,radius:K,startAngle:Z,endAngle:se,counterclockwise:de})},b.prototype.arcTo=function(D,H,K,Z,se){throw new Error("arcTo not implemented.")},b.prototype.rect=function(D,H,K,Z){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z))throw Rn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,H),this.lineTo(D+K,H),this.lineTo(D+K,H+Z),this.lineTo(D,H+Z),this.lineTo(D,H),this.lineTo(D+K,H),this.lineTo(D,H)},b.prototype.fillRect=function(D,H,K,Z){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z))throw Rn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!_.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,H,K,Z),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},b.prototype.strokeRect=function(D,H,K,Z){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z))throw Rn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");T.call(this)||(this.beginPath(),this.rect(D,H,K,Z),this.stroke())},b.prototype.clearRect=function(D,H,K,Z){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z))throw Rn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,H,K,Z))},b.prototype.save=function(D){D=typeof D!="boolean"||D;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},b.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(H),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(D){var H,K,Z,se;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))H=0,K=0,Z=0,se=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(de!==null)H=parseInt(de[1]),K=parseInt(de[2]),Z=parseInt(de[3]),se=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)H=parseInt(de[1]),K=parseInt(de[2]),Z=parseInt(de[3]),se=parseFloat(de[4]);else{if(se=1,typeof D=="string"&&D.charAt(0)!=="#"){var fe=new i5(D);D=fe.ok?fe.toHex():"#000000"}D.length===4?(H=D.substring(1,2),H+=H,K=D.substring(2,3),K+=K,Z=D.substring(3,4),Z+=Z):(H=D.substring(1,3),K=D.substring(3,5),Z=D.substring(5,7)),H=parseInt(H,16),K=parseInt(K,16),Z=parseInt(Z,16)}}return{r:H,g:K,b:Z,a:se,style:D}},_=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},T=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(D,H,K,Z){if(isNaN(H)||isNaN(K)||typeof D!="string")throw Rn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!_.call(this)){var se=ie(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;j.call(this,{text:D,x:H,y:K,scale:de,angle:se,align:this.textAlign,maxWidth:Z})}},b.prototype.strokeText=function(D,H,K,Z){if(isNaN(H)||isNaN(K)||typeof D!="string")throw Rn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!T.call(this)){Z=isNaN(Z)?void 0:Z;var se=ie(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;j.call(this,{text:D,x:H,y:K,scale:de,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:Z})}},b.prototype.measureText=function(D){if(typeof D!="string")throw Rn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,K=this.pdf.internal.scaleFactor,Z=H.internal.getFontSize(),se=H.getStringUnitWidth(D)*Z/H.internal.scaleFactor,de=function(fe){var me=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this};return new de({width:se*=Math.round(96*K/72*1e4)/1e4})},b.prototype.scale=function(D,H){if(isNaN(D)||isNaN(H))throw Rn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new d(D,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},b.prototype.rotate=function(D){if(isNaN(D))throw Rn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new d(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},b.prototype.translate=function(D,H){if(isNaN(D)||isNaN(H))throw Rn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new d(1,0,0,1,D,H);this.ctx.transform=this.ctx.transform.multiply(K)},b.prototype.transform=function(D,H,K,Z,se,de){if(isNaN(D)||isNaN(H)||isNaN(K)||isNaN(Z)||isNaN(se)||isNaN(de))throw Rn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new d(D,H,K,Z,se,de);this.ctx.transform=this.ctx.transform.multiply(fe)},b.prototype.setTransform=function(D,H,K,Z,se,de){D=isNaN(D)?1:D,H=isNaN(H)?0:H,K=isNaN(K)?0:K,Z=isNaN(Z)?1:Z,se=isNaN(se)?0:se,de=isNaN(de)?0:de,this.ctx.transform=new d(D,H,K,Z,se,de)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(D,H,K,Z,se,de,fe,me,Me){var we=this.pdf.getImageProperties(D),Pe=1,Ue=1,et=1,Ie=1;Z!==void 0&&me!==void 0&&(et=me/Z,Ie=Me/se,Pe=we.width/Z*me/Z,Ue=we.height/se*Me/se),de===void 0&&(de=H,fe=K,H=0,K=0),Z!==void 0&&me===void 0&&(me=Z,Me=se),Z===void 0&&me===void 0&&(me=we.width,Me=we.height);for(var ue,yt=this.ctx.transform.decompose(),at=ie(yt.rotate.shx),Ye=new d,Ze=(Ye=(Ye=(Ye=Ye.multiply(yt.translate)).multiply(yt.skew)).multiply(yt.scale)).applyToRectangle(new c(de-H*et,fe-K*Ie,Z*Pe,se*Ue)),nt=R.call(this,Ze),tt=[],Xe=0;Xe<nt.length;Xe+=1)tt.indexOf(nt[Xe])===-1&&tt.push(nt[Xe]);if(L(tt),this.autoPaging)for(var Se=tt[0],Ge=tt[tt.length-1],ct=Se;ct<Ge+1;ct++){this.pdf.setPage(ct);var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=ct===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=ct===1?0:pt+(ct-2)*At;if(this.ctx.clip_path.length!==0){var En=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(ue,this.posX+this.margin[3],-rt+Ht+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=En}var Lt=JSON.parse(JSON.stringify(Ze));Lt=I([Lt],this.posX+this.margin[3],-rt+Ht+this.ctx.prevPageLastElemOffset)[0];var qt=(ct>Se||ct<Ge)&&k.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,At,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Lt.x,Lt.y,Lt.w,Lt.h,null,null,at),qt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,at)};var R=function(D,H,K){var Z=[];H=H||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":Z.push(Math.floor((D.y+se)/K)+1);break;case"arc":Z.push(Math.floor((D.y+se-D.radius)/K)+1),Z.push(Math.floor((D.y+se+D.radius)/K)+1);break;case"qct":var de=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);Z.push(Math.floor((de.y+se)/K)+1),Z.push(Math.floor((de.y+de.h+se)/K)+1);break;case"bct":var fe=he(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);Z.push(Math.floor((fe.y+se)/K)+1),Z.push(Math.floor((fe.y+fe.h+se)/K)+1);break;case"rect":Z.push(Math.floor((D.y+se)/K)+1),Z.push(Math.floor((D.y+D.h+se)/K)+1)}for(var me=0;me<Z.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<Z[me];)C.call(this);return Z},C=function(){var D=this.fillStyle,H=this.strokeStyle,K=this.font,Z=this.lineCap,se=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=H,this.font=K,this.lineCap=Z,this.lineWidth=se,this.lineJoin=de},I=function(D,H,K){for(var Z=0;Z<D.length;Z++)switch(D[Z].type){case"bct":D[Z].x2+=H,D[Z].y2+=K;case"qct":D[Z].x1+=H,D[Z].y1+=K;case"mt":case"lt":case"arc":default:D[Z].x+=H,D[Z].y+=K}return D},L=function(D){return D.sort((function(H,K){return H-K}))},O=function(D,H){for(var K,Z,se=this.fillStyle,de=this.strokeStyle,fe=this.lineCap,me=this.lineWidth,Me=Math.abs(me*this.ctx.transform.scaleX),we=this.lineJoin,Pe=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),et=[],Ie=0;Ie<Ue.length;Ie++)if(Ue[Ie].x!==void 0)for(var ue=R.call(this,Ue[Ie]),yt=0;yt<ue.length;yt+=1)et.indexOf(ue[yt])===-1&&et.push(ue[yt]);for(var at=0;at<et.length;at++)for(;this.pdf.internal.getNumberOfPages()<et[at];)C.call(this);if(L(et),this.autoPaging)for(var Ye=et[0],Ze=et[et.length-1],nt=Ye;nt<Ze+1;nt++){this.pdf.setPage(nt),this.fillStyle=se,this.strokeStyle=de,this.lineCap=fe,this.lineWidth=Me,this.lineJoin=we;var tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xe=nt===1?this.posY+this.margin[0]:this.margin[0],Se=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=nt===1?0:Se+(nt-2)*Ge;if(this.ctx.clip_path.length!==0){var xt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(K,this.posX+this.margin[3],-ct+Xe+this.ctx.prevPageLastElemOffset),q.call(this,D,!0),this.path=xt}if(Z=JSON.parse(JSON.stringify(Pe)),this.path=I(Z,this.posX+this.margin[3],-ct+Xe+this.ctx.prevPageLastElemOffset),H===!1||nt===0){var Ht=(nt>Ye||nt<Ze)&&k.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Ge,null).clip().discardPath()),q.call(this,D,H),Ht&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=Me,q.call(this,D,H),this.lineWidth=me;this.path=Pe},q=function(D,H){if((D!=="stroke"||H||!T.call(this))&&(D==="stroke"||H||!_.call(this))){for(var K,Z,se=[],de=this.path,fe=0;fe<de.length;fe++){var me=de[fe];switch(me.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:me,deltas:[],abs:[]});break;case"lt":var Me=se.length;if(de[fe-1]&&!isNaN(de[fe-1].x)&&(K=[me.x-de[fe-1].x,me.y-de[fe-1].y],Me>0)){for(;Me>=0;Me--)if(se[Me-1].close!==!0&&se[Me-1].begin!==!0){se[Me-1].deltas.push(K),se[Me-1].abs.push(me);break}}break;case"bct":K=[me.x1-de[fe-1].x,me.y1-de[fe-1].y,me.x2-de[fe-1].x,me.y2-de[fe-1].y,me.x-de[fe-1].x,me.y-de[fe-1].y],se[se.length-1].deltas.push(K);break;case"qct":var we=de[fe-1].x+2/3*(me.x1-de[fe-1].x),Pe=de[fe-1].y+2/3*(me.y1-de[fe-1].y),Ue=me.x+2/3*(me.x1-me.x),et=me.y+2/3*(me.y1-me.y),Ie=me.x,ue=me.y;K=[we-de[fe-1].x,Pe-de[fe-1].y,Ue-de[fe-1].x,et-de[fe-1].y,Ie-de[fe-1].x,ue-de[fe-1].y],se[se.length-1].deltas.push(K);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(me)}}Z=H?null:D==="stroke"?"stroke":"fill";for(var yt=!1,at=0;at<se.length;at++)if(se[at].arc)for(var Ye=se[at].abs,Ze=0;Ze<Ye.length;Ze++){var nt=Ye[Ze];nt.type==="arc"?z.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,H,!yt):ne.call(this,nt.x,nt.y),yt=!0}else if(se[at].close===!0)this.pdf.internal.out("h"),yt=!1;else if(se[at].begin!==!0){var tt=se[at].start.x,Xe=se[at].start.y;re.call(this,se[at].deltas,tt,Xe),yt=!0}Z&&ee.call(this,Z),H&&le.call(this)}},W=function(D){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-K;case"top":return D+H-K;case"hanging":return D+H-2*K;case"middle":return D+H/2-K;case"ideographic":return D;case"alphabetic":default:return D}},F=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(H,K){this.colorStops.push([H,K])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var z=function(D,H,K,Z,se,de,fe,me,Me){for(var we=P.call(this,K,Z,se,de),Pe=0;Pe<we.length;Pe++){var Ue=we[Pe];Pe===0&&(Me?B.call(this,Ue.x1+D,Ue.y1+H):ne.call(this,Ue.x1+D,Ue.y1+H)),be.call(this,D,H,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}me?le.call(this):ee.call(this,fe)},ee=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},le=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(D,H){this.pdf.internal.out(n(D)+" "+i(H)+" m")},j=function(D){var H;switch(D.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var K=this.pdf.getTextDimensions(D.text),Z=W.call(this,D.y),se=F.call(this,Z)-K.h,de=this.ctx.transform.applyToPoint(new l(D.x,Z)),fe=this.ctx.transform.decompose(),me=new d;me=(me=(me=me.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var Me,we,Pe,Ue=this.ctx.transform.applyToRectangle(new c(D.x,Z,K.w,K.h)),et=me.applyToRectangle(new c(D.x,se,K.w,K.h)),Ie=R.call(this,et),ue=[],yt=0;yt<Ie.length;yt+=1)ue.indexOf(Ie[yt])===-1&&ue.push(Ie[yt]);if(L(ue),this.autoPaging)for(var at=ue[0],Ye=ue[ue.length-1],Ze=at;Ze<Ye+1;Ze++){this.pdf.setPage(Ze);var nt=Ze===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xe=this.pdf.internal.pageSize.height-this.margin[2],Se=Xe-this.margin[0],Ge=this.pdf.internal.pageSize.width-this.margin[1],ct=Ge-this.margin[3],xt=Ze===1?0:tt+(Ze-2)*Se;if(this.ctx.clip_path.length!==0){var Ht=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Me,this.posX+this.margin[3],-1*xt+nt),q.call(this,"fill",!0),this.path=Ht}var pt=I([JSON.parse(JSON.stringify(et))],this.posX+this.margin[3],-xt+nt+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*D.scale),Pe=this.lineWidth,this.lineWidth=Pe*D.scale);var At=this.autoPaging!=="text";if(At||pt.y+pt.h<=Xe){if(At||pt.y>=nt&&pt.x<=Ge){var rt=At?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Ge-pt.x)[0],En=I([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-xt+nt+this.ctx.prevPageLastElemOffset)[0],Lt=At&&(Ze>at||Ze<Ye)&&k.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Se,null).clip().discardPath()),this.pdf.text(rt,En.x,En.y,{angle:D.angle,align:H,renderingMode:D.renderingMode}),Lt&&this.pdf.restoreGraphicsState()}}else pt.y<Xe&&(this.ctx.prevPageLastElemOffset+=Xe-pt.y);D.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Pe)}else D.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*D.scale),Pe=this.lineWidth,this.lineWidth=Pe*D.scale),this.pdf.text(D.text,de.x+this.posX,de.y+this.posY,{angle:D.angle,align:H,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Pe)},ne=function(D,H,K,Z){K=K||0,Z=Z||0,this.pdf.internal.out(n(D+K)+" "+i(H+Z)+" l")},re=function(D,H,K){return this.pdf.lines(D,H,K,null,null)},be=function(D,H,K,Z,se,de,fe,me){this.pdf.internal.out([e(a(K+D)),e(o(Z+H)),e(a(se+D)),e(o(de+H)),e(a(fe+D)),e(o(me+H)),"c"].join(" "))},P=function(D,H,K,Z){for(var se=2*Math.PI,de=Math.PI/2;H>K;)H-=se;var fe=Math.abs(K-H);fe<se&&Z&&(fe=se-fe);for(var me=[],Me=Z?-1:1,we=H;fe>1e-5;){var Pe=we+Me*Math.min(fe,de);me.push($.call(this,D,we,Pe)),fe-=Math.abs(Pe-we),we=Pe}return me},$=function(D,H,K){var Z=(K-H)/2,se=D*Math.cos(Z),de=D*Math.sin(Z),fe=se,me=-de,Me=fe*fe+me*me,we=Me+fe*se+me*de,Pe=4/3*(Math.sqrt(2*Me*we)-we)/(fe*de-me*se),Ue=fe-Pe*me,et=me+Pe*fe,Ie=Ue,ue=-et,yt=Z+H,at=Math.cos(yt),Ye=Math.sin(yt);return{x1:D*Math.cos(H),y1:D*Math.sin(H),x2:Ue*at-et*Ye,y2:Ue*Ye+et*at,x3:Ie*at-ue*Ye,y3:Ie*Ye+ue*at,x4:D*Math.cos(K),y4:D*Math.sin(K)}},ie=function(D){return 180*D/Math.PI},ae=function(D,H,K,Z,se,de){var fe=D+.5*(K-D),me=H+.5*(Z-H),Me=se+.5*(K-se),we=de+.5*(Z-de),Pe=Math.min(D,se,fe,Me),Ue=Math.max(D,se,fe,Me),et=Math.min(H,de,me,we),Ie=Math.max(H,de,me,we);return new c(Pe,et,Ue-Pe,Ie-et)},he=function(D,H,K,Z,se,de,fe,me){var Me,we,Pe,Ue,et,Ie,ue,yt,at,Ye,Ze,nt,tt,Xe,Se=K-D,Ge=Z-H,ct=se-K,xt=de-Z,Ht=fe-se,pt=me-de;for(we=0;we<41;we++)at=(ue=(Pe=D+(Me=we/40)*Se)+Me*((et=K+Me*ct)-Pe))+Me*(et+Me*(se+Me*Ht-et)-ue),Ye=(yt=(Ue=H+Me*Ge)+Me*((Ie=Z+Me*xt)-Ue))+Me*(Ie+Me*(de+Me*pt-Ie)-yt),we==0?(Ze=at,nt=Ye,tt=at,Xe=Ye):(Ze=Math.min(Ze,at),nt=Math.min(nt,Ye),tt=Math.max(tt,at),Xe=Math.max(Xe,Ye));return new c(Math.round(Ze),Math.round(nt),Math.round(tt-Ze),Math.round(Xe-nt))},Ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,H,K=(D=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:H}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Et.API),(function(t){var e=function(o){var l,c,d,h,v,b,w,_,T,k;for(c=[],d=0,h=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;h>d;d+=4)(v=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(b=(v=((v=((v=((v=(v-(k=v%85))/85)-(T=v%85))/85)-(_=v%85))/85)-(w=v%85))/85)%85,c.push(b+33,w+33,_+33,T+33,k+33)):c.push(122);return(function(R,C){for(var I=C;I>0;I--)R.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(o){var l,c,d,h,v,b=String,w="length",_=255,T="charCodeAt",k="slice",R="replace";for(o[k](-2),o=o[k](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),d=[],h=0,v=(o+=l="uuuuu"[k](o[w]%5||5))[w];v>h;h+=5)c=52200625*(o[T](h)-33)+614125*(o[T](h+1)-33)+7225*(o[T](h+2)-33)+85*(o[T](h+3)-33)+(o[T](h+4)-33),d.push(_&c>>24,_&c>>16,_&c>>8,_&c);return(function(C,I){for(var L=I;L>0;L--)C.pop()})(d,l[w]),b.fromCharCode.apply(b,d)},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},a=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return o=(l=X0(l)).reduce((function(d,h){return d+String.fromCharCode(h)}),"")};t.processDataByFilters=function(o,l){var c=0,d=o||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map((function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)})).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=a(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}})(Et.API),(function(t){t.loadFile=function(e,n,i){return(function(a,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var c=void 0;try{c=(function(d,h,v){var b=new XMLHttpRequest,w=0,_=function(T){var k=T.length,R=[],C=String.fromCharCode;for(w=0;w<k;w+=1)R.push(C(255&T.charCodeAt(w)));return R.join("")};if(b.open("GET",d,!h),b.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(b.onload=function(){b.status===200?v(_(this.responseText)):v(void 0)}),b.send(null),h&&b.status===200)return _(b.responseText)})(a,o,l)}catch{}return c})(e,n,i)},t.loadImageFile=t.loadFile})(Et.API),(function(t){function e(){return(Dt.html2canvas?Promise.resolve(Dt.html2canvas):V0(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))})).then((function(l){return l.default?l.default:l}))}function n(){return(Dt.DOMPurify?Promise.resolve(Dt.DOMPurify):V0(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(l){return Promise.reject(new Error("Could not load dompurify: "+l))})).then((function(l){return l.default?l.default:l}))}var i=function(l){var c=xn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var d=document.createElement(l);for(var h in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[h]=c.style[h];return d},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),d);return h=(h=h.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then((function(){switch(c=c||(function(d){switch(i(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l)){case"string":return this.then(n).then((function(d){return this.set({src:a("div",{innerHTML:l,dompurify:d})})}));case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=(function d(h,v){for(var b=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),w=h.firstChild;w;w=w.nextSibling)v!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||b.appendChild(d(w,v));return h.nodeType===1&&(h.nodeName==="CANVAS"?(b.width=h.width,b.height=h.height,b.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(b.value=h.value),b.addEventListener("load",(function(){b.scrollTop=h.scrollTop,b.scrollLeft=h.scrollLeft}),!0)),b})(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then((function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)})).then((function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then((function(c){var d=this.opt.jsPDF,h=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var w=0;w<h.length;++w){var _=h[w],T=_.src.find((function(k){return k.format==="truetype"}));T&&d.addFont(T.url,_.ref.name,_.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,d.context2d.save(!0),c(this.prop.container,b)})).then((function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(l,c)}))},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}}))},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(l){if(i(l)!=="object")return this;var c=Object.keys(l||{}).map((function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}}),this);return this.then((function(){return this.thenList(c)}))},o.prototype.get=function(l,c){return this.then((function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d}))},o.prototype.setMargin=function(l){return this.then((function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l})).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,h){return Math.floor(d*h/72*96)}return this.then((function(){(l=l||Et.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l}))},o.prototype.setProgress=function(l,c,d,h){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,h){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,(function(h,v){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,(function(b){return d.updateProgress(null,h),b})).then(h,v).then((function(b){return d.updateProgress(1),b}))}))},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then,l&&(l=l.bind(this)),c&&(c=c.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),v=d.call(h,l,c);return o.convert(v,this.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach((function(d){c=c.thenCore(d)})),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then((function(){throw new Error(l)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Et.getPageSize=function(l,c,d){if(xn(l)==="object"){var h=l;l=h.orientation,c=h.unit||c,d=h.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var v,b=(""+d).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+c}var _,T=0,k=0;if(w.hasOwnProperty(b))T=w[b][1]/v,k=w[b][0]/v;else try{T=d[1],k=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",k>T&&(_=k,k=T,T=_);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",T>k&&(_=k,k=T,T=_)}return{width:k,height:T,unit:c,k:v,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(im):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}})(Et.API),Et.API.addJS=function(t){return v2=t,this.internal.events.subscribe("postPutResources",(function(){th=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(th+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),g2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+v2+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){th!==void 0&&g2!==void 0&&this.internal.out("/Names <</JavaScript "+th+" 0 R>>")})),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),o=0;o<a.length;o++){var l=a[o],c=i.exec(l);if(c!=null){var d=c[1];n.internal.newObjectDeferredBegin(d,!1)}n.internal.write(l)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,v=[];for(o=0;o<h;o++){var b=n.internal.newObject();v.push(b);var w=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var _=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<v.length;o++)n.internal.write("(page_"+(o+1)+")"+v[o]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+_+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,a,o){var l={title:a,options:o,children:[]};return i==null&&(i=this.root),i.children.push(l),l},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<i.children.length;o++){var l=i.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),o>0&&this.line("/Prev "+this.makeRef(i.children[o-1])),o<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var c=this.count=this.count_r({count:0},l);if(c>0&&this.line("/Count "+c),l.options&&l.options.pageNumber){var d=n.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var h=0;h<i.children.length;h++)this.renderItems(i.children[h])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,a){for(var o=0;o<a.children.length;o++)i.count++,this.count_r(i,a.children[o]);return i.count}}])})(Et.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,a,o,l,c){var d,h=this.decode.DCT_DECODE,v=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=l||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(d=(function(b){for(var w,_=256*b.charCodeAt(4)+b.charCodeAt(5),T=b.length,k={width:0,height:0,numcomponents:1},R=4;R<T;R+=2){if(R+=_,e.indexOf(b.charCodeAt(R+1))!==-1){w=256*b.charCodeAt(R+5)+b.charCodeAt(R+6),k={width:256*b.charCodeAt(R+7)+b.charCodeAt(R+8),height:w,numcomponents:b.charCodeAt(R+9)};break}_=256*b.charCodeAt(R+2)+b.charCodeAt(R+3)}return k})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}v={data:n,width:d.width,height:d.height,colorSpace:c,bitsPerComponent:8,filter:h,index:i,alias:a}}return v}})(Et.API);var _c,nh,y2,b2,x2,iI=(function(){var t,e,n;function i(o){var l,c,d,h,v,b,w,_,T,k,R,C,I,L;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(l=this.readUInt32(),T=(function(){var O,q;for(q=[],O=0;O<4;++O)q.push(String.fromCharCode(this.data[this.pos++]));return q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),h=this.readUInt16()||100,b.delay=1e3*v/h,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(T==="fdAT"&&(this.pos+=4,l-=4),o=(b!=null?b.data:void 0)||this.imgData,C=0;0<=l?C<l:C>l;0<=l?++C:--C)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((k=d-this.transparency.indexed.length)>0)for(I=0;0<=k?I<k:I>k;0<=k?++I:--I)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":w=(R=this.read(l)).indexOf(0),_=String.fromCharCode.apply(String,R.slice(0,w)),this.text[_]=String.fromCharCode.apply(String,R.slice(w+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(o){var l,c;for(c=[],l=0;0<=o?l<o:l>o;0<=o?++l:--l)c.push(this.data[this.pos++]);return c},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(o){var l=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*l),d=0,h=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function v(b,w,_,T){var k,R,C,I,L,O,q,W,F,z,ee,le,B,j,ne,re,be,P,$,ie,ae,he=Math.ceil((h.width-b)/_),Ne=Math.ceil((h.height-w)/T),D=h.width==he&&h.height==Ne;for(j=l*he,le=D?c:new Uint8Array(j*Ne),O=o.length,B=0,R=0;B<Ne&&d<O;){switch(o[d++]){case 0:for(I=be=0;be<j;I=be+=1)le[R++]=o[d++];break;case 1:for(I=P=0;P<j;I=P+=1)k=o[d++],L=I<l?0:le[R-l],le[R++]=(k+L)%256;break;case 2:for(I=$=0;$<j;I=$+=1)k=o[d++],C=(I-I%l)/l,ne=B&&le[(B-1)*j+C*l+I%l],le[R++]=(ne+k)%256;break;case 3:for(I=ie=0;ie<j;I=ie+=1)k=o[d++],C=(I-I%l)/l,L=I<l?0:le[R-l],ne=B&&le[(B-1)*j+C*l+I%l],le[R++]=(k+Math.floor((L+ne)/2))%256;break;case 4:for(I=ae=0;ae<j;I=ae+=1)k=o[d++],C=(I-I%l)/l,L=I<l?0:le[R-l],B===0?ne=re=0:(ne=le[(B-1)*j+C*l+I%l],re=C&&le[(B-1)*j+(C-1)*l+I%l]),q=L+ne-re,W=Math.abs(q-L),z=Math.abs(q-ne),ee=Math.abs(q-re),F=W<=z&&W<=ee?L:z<=ee?ne:re,le[R++]=(k+F)%256;break;default:throw new Error("Invalid filter algorithm: "+o[d-1])}if(!D){var H=((w+B*T)*h.width+b)*l,K=B*j;for(I=0;I<he;I+=1){for(var Z=0;Z<l;Z+=1)c[H++]=le[K++];H+=(_-1)*l}}B++}}return o=Uk(o),h.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),c},i.prototype.decodePalette=function(){var o,l,c,d,h,v,b,w,_;for(c=this.palette,v=this.transparency.indexed||[],h=new Uint8Array((v.length||0)+c.length),d=0,o=0,l=b=0,w=c.length;b<w;l=b+=3)h[d++]=c[l],h[d++]=c[l+1],h[d++]=c[l+2],h[d++]=(_=v[o++])!=null?_:255;return h},i.prototype.copyToImageData=function(o,l){var c,d,h,v,b,w,_,T,k,R,C;if(d=this.colors,k=null,c=this.hasAlphaChannel,this.palette.length&&(k=(C=this._decodedPalette)!=null?C:this._decodedPalette=this.decodePalette(),d=4,c=!0),T=(h=o.data||o).length,b=k||l,v=w=0,d===1)for(;v<T;)_=k?4*l[v/4]:w,R=b[_++],h[v++]=R,h[v++]=R,h[v++]=R,h[v++]=c?b[_++]:255,w=_;else for(;v<T;)_=k?4*l[v/4]:w,h[v++]=b[_++],h[v++]=b[_++],h[v++]=b[_++],h[v++]=c?b[_++]:255,w=_},i.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var a=function(){if(Object.prototype.toString.call(Dt)==="[object Window]"){try{e=Dt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),t=function(o){var l;if(a()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(l=new Image).src=e.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(o){var l,c,d,h,v,b,w,_;if(this.animation){for(_=[],c=v=0,b=(w=this.animation.frames).length;v<b;c=++v)l=w[c],d=o.createImageData(l.width,l.height),h=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(d,h),l.imageData=d,_.push(l.image=t(d));return _}},i.prototype.renderFrame=function(o,l){var c,d,h;return c=(d=this.animation.frames)[l],h=d[l-1],l===0&&o.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?o.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&o.putImageData(h.imageData,h.xOffset,h.yOffset),c.blendOp===0&&o.clearRect(c.xOffset,c.yOffset,c.width,c.height),o.drawImage(c.image,c.xOffset,c.yOffset)},i.prototype.animate=function(o){var l,c,d,h,v,b,w=this;return c=0,b=this.animation,h=b.numFrames,d=b.frames,v=b.numPlays,(l=function(){var _,T;if(_=c++%h,T=d[_],w.renderFrame(o,_),h>1&&c/h<v)return w.animation._timeout=setTimeout(l,T.delay)})()},i.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},i.prototype.render=function(o){var l,c;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,l=o.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(c=l.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),l.putImageData(c,0,0))},i})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function rI(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,a=t[e++],o=a>>7,l=1<<(7&a)+1;t[e++],t[e++];var c=null,d=null;o&&(c=e,d=l,e+=3*l);var h=!0,v=[],b=0,w=null,_=0,T=null;for(this.width=n,this.height=i;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,T=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var k=t[e++];b=t[e++]|t[e++]<<8,w=t[e++],(1&k)==0&&(w=null),_=k>>2&7,e++;break;case 254:for(;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var R=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,L=t[e++]|t[e++]<<8,O=t[e++],q=O>>6&1,W=1<<(7&O)+1,F=c,z=d,ee=!1;O>>7&&(ee=!0,F=e,z=W,e+=3*W);var le=e;for(e++;;){var B;if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}v.push({x:R,y:C,width:I,height:L,has_local_palette:ee,palette_offset:F,palette_size:z,data_offset:le,data_length:e-le,transparent_index:w,interlaced:!!q,delay:b,disposal:_});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return T},this.frameInfo=function(j){if(j<0||j>=v.length)throw new Error("Frame index out of range.");return v[j]},this.decodeAndBlitFrameBGRA=function(j,ne){var re=this.frameInfo(j),be=re.width*re.height,P=new Uint8Array(be);w2(t,re.data_offset,P,be);var $=re.palette_offset,ie=re.transparent_index;ie===null&&(ie=256);var ae=re.width,he=n-ae,Ne=ae,D=4*(re.y*n+re.x),H=4*((re.y+re.height)*n+re.x),K=D,Z=4*he;re.interlaced===!0&&(Z+=4*n*7);for(var se=8,de=0,fe=P.length;de<fe;++de){var me=P[de];if(Ne===0&&(Ne=ae,(K+=Z)>=H&&(Z=4*he+4*n*(se-1),K=D+(ae+he)*(se<<1),se>>=1)),me===ie)K+=4;else{var Me=t[$+3*me],we=t[$+3*me+1],Pe=t[$+3*me+2];ne[K++]=Pe,ne[K++]=we,ne[K++]=Me,ne[K++]=255}--Ne}},this.decodeAndBlitFrameRGBA=function(j,ne){var re=this.frameInfo(j),be=re.width*re.height,P=new Uint8Array(be);w2(t,re.data_offset,P,be);var $=re.palette_offset,ie=re.transparent_index;ie===null&&(ie=256);var ae=re.width,he=n-ae,Ne=ae,D=4*(re.y*n+re.x),H=4*((re.y+re.height)*n+re.x),K=D,Z=4*he;re.interlaced===!0&&(Z+=4*n*7);for(var se=8,de=0,fe=P.length;de<fe;++de){var me=P[de];if(Ne===0&&(Ne=ae,(K+=Z)>=H&&(Z=4*he+4*n*(se-1),K=D+(ae+he)*(se<<1),se>>=1)),me===ie)K+=4;else{var Me=t[$+3*me],we=t[$+3*me+1],Pe=t[$+3*me+2];ne[K++]=Me,ne[K++]=we,ne[K++]=Pe,ne[K++]=255}--Ne}}}function w2(t,e,n,i){for(var a=t[e++],o=1<<a,l=o+1,c=l+1,d=a+1,h=(1<<d)-1,v=0,b=0,w=0,_=t[e++],T=new Int32Array(4096),k=null;;){for(;v<16&&_!==0;)b|=t[e++]<<v,v+=8,_===1?_=t[e++]:--_;if(v<d)break;var R=b&h;if(b>>=d,v-=d,R!==o){if(R===l)break;for(var C=R<c?R:k,I=0,L=C;L>o;)L=T[L]>>8,++I;var O=L;if(w+I+(C!==R?1:0)>i)return void Rn.log("Warning, gif stream longer than expected.");n[w++]=O;var q=w+=I;for(C!==R&&(n[w++]=O),L=C;I--;)L=T[L],n[--q]=255&L,L>>=8;k!==null&&c<4096&&(T[c++]=k<<8|O,c>=h+1&&d<12&&(++d,h=h<<1|1)),k=R}else c=l+1,h=(1<<(d=a+1))-1,k=null}return w!==i&&Rn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function g0(t){var e,n,i,a,o,l=Math.floor,c=new Array(64),d=new Array(64),h=new Array(64),v=new Array(64),b=new Array(65535),w=new Array(65535),_=new Array(64),T=new Array(64),k=[],R=0,C=7,I=new Array(64),L=new Array(64),O=new Array(64),q=new Array(256),W=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],z=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ee=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ne=[0,1,2,3,4,5,6,7,8,9,10,11],re=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],be=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function P(D,H){for(var K=0,Z=0,se=new Array,de=1;de<=16;de++){for(var fe=1;fe<=D[de];fe++)se[H[Z]]=[],se[H[Z]][0]=K,se[H[Z]][1]=de,Z++,K++;K*=2}return se}function $(D){for(var H=D[0],K=D[1]-1;K>=0;)H&1<<K&&(R|=1<<C),K--,--C<0&&(R==255?(ie(255),ie(0)):ie(R),C=7,R=0)}function ie(D){k.push(D)}function ae(D){ie(D>>8&255),ie(255&D)}function he(D,H,K,Z,se){for(var de,fe=se[0],me=se[240],Me=(function(Ye,Ze){var nt,tt,Xe,Se,Ge,ct,xt,Ht,pt,At,rt=0;for(pt=0;pt<8;++pt){nt=Ye[rt],tt=Ye[rt+1],Xe=Ye[rt+2],Se=Ye[rt+3],Ge=Ye[rt+4],ct=Ye[rt+5],xt=Ye[rt+6];var En=nt+(Ht=Ye[rt+7]),Lt=nt-Ht,qt=tt+xt,Pt=tt-xt,_t=Xe+ct,Xn=Xe-ct,Yt=Se+Ge,Cr=Se-Ge,an=En+Yt,vi=En-Yt,Yi=qt+_t,on=qt-_t;Ye[rt]=an+Yi,Ye[rt+4]=an-Yi;var Nt=.707106781*(on+vi);Ye[rt+2]=vi+Nt,Ye[rt+6]=vi-Nt;var Vt=.382683433*((an=Cr+Xn)-(on=Pt+Lt)),Zr=.5411961*an+Vt,gn=1.306562965*on+Vt,ji=.707106781*(Yi=Xn+Pt),yi=Lt+ji,wt=Lt-ji;Ye[rt+5]=wt+Zr,Ye[rt+3]=wt-Zr,Ye[rt+1]=yi+gn,Ye[rt+7]=yi-gn,rt+=8}for(rt=0,pt=0;pt<8;++pt){nt=Ye[rt],tt=Ye[rt+8],Xe=Ye[rt+16],Se=Ye[rt+24],Ge=Ye[rt+32],ct=Ye[rt+40],xt=Ye[rt+48];var sr=nt+(Ht=Ye[rt+56]),ar=nt-Ht,Ei=tt+xt,Fn=tt-xt,Ln=Xe+ct,Ci=Xe-ct,vs=Se+Ge,ci=Se-Ge,ln=sr+vs,wn=sr-vs,di=Ei+Ln,ze=Ei-Ln;Ye[rt]=ln+di,Ye[rt+32]=ln-di;var Mt=.707106781*(ze+wn);Ye[rt+16]=wn+Mt,Ye[rt+48]=wn-Mt;var $t=.382683433*((ln=ci+Ci)-(ze=Fn+ar)),Dn=.5411961*ln+$t,Bn=1.306562965*ze+$t,ys=.707106781*(di=Ci+Fn),es=ar+ys,ts=ar-ys;Ye[rt+40]=ts+Dn,Ye[rt+24]=ts-Dn,Ye[rt+8]=es+Bn,Ye[rt+56]=es-Bn,rt++}for(pt=0;pt<64;++pt)At=Ye[pt]*Ze[pt],_[pt]=At>0?At+.5|0:At-.5|0;return _})(D,H),we=0;we<64;++we)T[F[we]]=Me[we];var Pe=T[0]-K;K=T[0],Pe==0?$(Z[0]):($(Z[w[de=32767+Pe]]),$(b[de]));for(var Ue=63;Ue>0&&T[Ue]==0;)Ue--;if(Ue==0)return $(fe),K;for(var et,Ie=1;Ie<=Ue;){for(var ue=Ie;T[Ie]==0&&Ie<=Ue;)++Ie;var yt=Ie-ue;if(yt>=16){et=yt>>4;for(var at=1;at<=et;++at)$(me);yt&=15}de=32767+T[Ie],$(se[(yt<<4)+w[de]]),$(b[de]),Ie++}return Ue!=63&&$(fe),K}function Ne(D){D=Math.min(Math.max(D,1),100),o!=D&&((function(H){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var se=l((K[Z]*H+50)/100);se=Math.min(Math.max(se,1),255),c[F[Z]]=se}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var me=l((de[fe]*H+50)/100);me=Math.min(Math.max(me,1),255),d[F[fe]]=me}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,Pe=0;Pe<8;Pe++)for(var Ue=0;Ue<8;Ue++)h[we]=1/(c[F[we]]*Me[Pe]*Me[Ue]*8),v[we]=1/(d[F[we]]*Me[Pe]*Me[Ue]*8),we++})(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),o=D)}this.encode=function(D,H){H&&Ne(H),k=new Array,R=0,C=7,ae(65496),ae(65504),ae(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),ae(1),ae(1),ie(0),ie(0),(function(){ae(65499),ae(132),ie(0);for(var tt=0;tt<64;tt++)ie(c[tt]);ie(1);for(var Xe=0;Xe<64;Xe++)ie(d[Xe])})(),(function(tt,Xe){ae(65472),ae(17),ie(8),ae(Xe),ae(tt),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)})(D.width,D.height),(function(){ae(65476),ae(418),ie(0);for(var tt=0;tt<16;tt++)ie(z[tt+1]);for(var Xe=0;Xe<=11;Xe++)ie(ee[Xe]);ie(16);for(var Se=0;Se<16;Se++)ie(le[Se+1]);for(var Ge=0;Ge<=161;Ge++)ie(B[Ge]);ie(1);for(var ct=0;ct<16;ct++)ie(j[ct+1]);for(var xt=0;xt<=11;xt++)ie(ne[xt]);ie(17);for(var Ht=0;Ht<16;Ht++)ie(re[Ht+1]);for(var pt=0;pt<=161;pt++)ie(be[pt])})(),ae(65498),ae(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var K=0,Z=0,se=0;R=0,C=7,this.encode.displayName="_encode_";for(var de,fe,me,Me,we,Pe,Ue,et,Ie,ue=D.data,yt=D.width,at=D.height,Ye=4*yt,Ze=0;Ze<at;){for(de=0;de<Ye;){for(we=Ye*Ze+de,Ue=-1,et=0,Ie=0;Ie<64;Ie++)Pe=we+(et=Ie>>3)*Ye+(Ue=4*(7&Ie)),Ze+et>=at&&(Pe-=Ye*(Ze+1+et-at)),de+Ue>=Ye&&(Pe-=de+Ue-Ye+4),fe=ue[Pe++],me=ue[Pe++],Me=ue[Pe++],I[Ie]=(W[fe]+W[me+256>>0]+W[Me+512>>0]>>16)-128,L[Ie]=(W[fe+768>>0]+W[me+1024>>0]+W[Me+1280>>0]>>16)-128,O[Ie]=(W[fe+1280>>0]+W[me+1536>>0]+W[Me+1792>>0]>>16)-128;K=he(I,h,K,e,i),Z=he(L,v,Z,n,a),se=he(O,v,se,n,a),de+=32}Ze+=8}if(C>=0){var nt=[];nt[1]=C+1,nt[0]=(1<<C+1)-1,$(nt)}return ae(65497),new Uint8Array(k)},t=t||50,(function(){for(var D=String.fromCharCode,H=0;H<256;H++)q[H]=D(H)})(),e=P(z,ee),n=P(j,ne),i=P(le,B),a=P(re,be),(function(){for(var D=1,H=2,K=1;K<=15;K++){for(var Z=D;Z<H;Z++)w[32767+Z]=K,b[32767+Z]=[],b[32767+Z][1]=K,b[32767+Z][0]=Z;for(var se=-(H-1);se<=-D;se++)w[32767+se]=K,b[32767+se]=[],b[32767+se][1]=K,b[32767+se][0]=H-1+se;D<<=1,H<<=1}})(),(function(){for(var D=0;D<256;D++)W[D]=19595*D,W[D+256>>0]=38470*D,W[D+512>>0]=7471*D+32768,W[D+768>>0]=-11059*D,W[D+1024>>0]=-21709*D,W[D+1280>>0]=32768*D+8421375,W[D+1536>>0]=-27439*D,W[D+1792>>0]=-5329*D})(),Ne(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function na(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function S2(t){function e(z){if(!z)throw Error("assert :P")}function n(z,ee,le){for(var B=0;4>B;B++)if(z[ee+B]!=le.charCodeAt(B))return!0;return!1}function i(z,ee,le,B,j){for(var ne=0;ne<j;ne++)z[ee+ne]=le[B+ne]}function a(z,ee,le,B){for(var j=0;j<B;j++)z[ee+j]=le}function o(z){return new Int32Array(z)}function l(z,ee){for(var le=[],B=0;B<z;B++)le.push(new ee);return le}function c(z,ee){var le=[];return(function B(j,ne,re){for(var be=re[ne],P=0;P<be&&(j.push(re.length>ne+1?[]:new ee),!(re.length<ne+1));P++)B(j[P],ne+1,re)})(le,0,z),le}var d=function(){var z=this;function ee(m,S){for(var E=1<<S-1>>>0;m&E;)E>>>=1;return E?(m&E-1)+E:m}function le(m,S,E,M,G){e(!(M%E));do m[S+(M-=E)]=G;while(0<M)}function B(m,S,E,M,G){if(e(2328>=G),512>=G)var J=o(512);else if((J=o(G))==null)return 0;return(function(Y,X,te,oe,ve,ke){var Ce,Ae,Je=X,je=1<<te,ye=o(16),_e=o(16);for(e(ve!=0),e(oe!=null),e(Y!=null),e(0<te),Ae=0;Ae<ve;++Ae){if(15<oe[Ae])return 0;++ye[oe[Ae]]}if(ye[0]==ve)return 0;for(_e[1]=0,Ce=1;15>Ce;++Ce){if(ye[Ce]>1<<Ce)return 0;_e[Ce+1]=_e[Ce]+ye[Ce]}for(Ae=0;Ae<ve;++Ae)Ce=oe[Ae],0<oe[Ae]&&(ke[_e[Ce]++]=Ae);if(_e[15]==1)return(oe=new j).g=0,oe.value=ke[0],le(Y,Je,1,je,oe),je;var Ve,Ke=-1,He=je-1,ot=0,it=1,mt=1,st=1<<te;for(Ae=0,Ce=1,ve=2;Ce<=te;++Ce,ve<<=1){if(it+=mt<<=1,0>(mt-=ye[Ce]))return 0;for(;0<ye[Ce];--ye[Ce])(oe=new j).g=Ce,oe.value=ke[Ae++],le(Y,Je+ot,ve,st,oe),ot=ee(ot,Ce)}for(Ce=te+1,ve=2;15>=Ce;++Ce,ve<<=1){if(it+=mt<<=1,0>(mt-=ye[Ce]))return 0;for(;0<ye[Ce];--ye[Ce]){if(oe=new j,(ot&He)!=Ke){for(Je+=st,Ve=1<<(Ke=Ce)-te;15>Ke&&!(0>=(Ve-=ye[Ke]));)++Ke,Ve<<=1;je+=st=1<<(Ve=Ke-te),Y[X+(Ke=ot&He)].g=Ve+te,Y[X+Ke].value=Je-X-Ke}oe.g=Ce-te,oe.value=ke[Ae++],le(Y,Je+(ot>>te),ve,st,oe),ot=ee(ot,Ce)}}return it!=2*_e[15]-1?0:je})(m,S,E,M,G,J)}function j(){this.value=this.g=0}function ne(){this.value=this.g=0}function re(){this.G=l(5,j),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Ki,ne)}function be(m,S,E,M){e(m!=null),e(S!=null),e(2147483648>M),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=S,m.pa=E,m.Jd=S,m.Yc=E+M,m.Zc=4<=M?E+M-4+1:E,de(m)}function P(m,S){for(var E=0;0<S--;)E|=me(m,128)<<S;return E}function $(m,S){var E=P(m,S);return fe(m)?-E:E}function ie(m,S,E,M){var G,J=0;for(e(m!=null),e(S!=null),e(4294967288>M),m.Sb=M,m.Ra=0,m.u=0,m.h=0,4<M&&(M=4),G=0;G<M;++G)J+=S[E+G]<<8*G;m.Ra=J,m.bb=M,m.oa=S,m.pa=E}function ae(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Na-8>>>0,++m.bb,m.u-=8;K(m)&&(m.h=1,m.u=0)}function he(m,S){if(e(0<=S),!m.h&&S<=_a){var E=H(m)&to[S];return m.u+=S,ae(m),E}return m.h=1,m.u=0}function Ne(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(m){return m.Ra>>>(m.u&Na-1)>>>0}function K(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Na}function Z(m,S){m.u=S,m.h=K(m)}function se(m){m.u>=Ho&&(e(m.u>=Ho),ae(m))}function de(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function fe(m){return P(m,1)}function me(m,S){var E=m.Ca;0>m.b&&de(m);var M=m.b,G=E*S>>>8,J=(m.I>>>M>G)+0;for(J?(E-=G,m.I-=G+1<<M>>>0):E=G+1,M=E,G=0;256<=M;)G+=8,M>>=8;return M=7^G+Xi[M],m.b-=M,m.Ca=(E<<M)-1,J}function Me(m,S,E){m[S+0]=E>>24&255,m[S+1]=E>>16&255,m[S+2]=E>>8&255,m[S+3]=E>>0&255}function we(m,S){return m[S+0]<<0|m[S+1]<<8}function Pe(m,S){return we(m,S)|m[S+2]<<16}function Ue(m,S){return we(m,S)|we(m,S+2)<<16}function et(m,S){var E=1<<S;return e(m!=null),e(0<S),m.X=o(E),m.X==null?0:(m.Mb=32-S,m.Xa=S,1)}function Ie(m,S){e(m!=null),e(S!=null),e(m.Xa==S.Xa),i(S.X,0,m.X,0,1<<S.Xa)}function ue(){this.X=[],this.Xa=this.Mb=0}function yt(m,S,E,M){e(E!=null),e(M!=null);var G=E[0],J=M[0];return G==0&&(G=(m*J+S/2)/S),J==0&&(J=(S*G+m/2)/m),0>=G||0>=J?0:(E[0]=G,M[0]=J,1)}function at(m,S){return m+(1<<S)-1>>>S}function Ye(m,S){return((4278255360&m)+(4278255360&S)>>>0&4278255360)+((16711935&m)+(16711935&S)>>>0&16711935)>>>0}function Ze(m,S){z[S]=function(E,M,G,J,Y,X,te){var oe;for(oe=0;oe<Y;++oe){var ve=z[m](X[te+oe-1],G,J+oe);X[te+oe]=Ye(E[M+oe],ve)}}}function nt(){this.ud=this.hd=this.jd=0}function tt(m,S){return((4278124286&(m^S))>>>1)+(m&S)>>>0}function Xe(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function Se(m,S){return Xe(m+(m-S+.5>>1))}function Ge(m,S,E){return Math.abs(S-E)-Math.abs(m-E)}function ct(m,S,E,M,G,J,Y){for(M=J[Y-1],E=0;E<G;++E)J[Y+E]=M=Ye(m[S+E],M)}function xt(m,S,E,M,G){var J;for(J=0;J<E;++J){var Y=m[S+J],X=Y>>8&255,te=16711935&(te=(te=16711935&Y)+((X<<16)+X));M[G+J]=(4278255360&Y)+te>>>0}}function Ht(m,S){S.jd=m>>0&255,S.hd=m>>8&255,S.ud=m>>16&255}function pt(m,S,E,M,G,J){var Y;for(Y=0;Y<M;++Y){var X=S[E+Y],te=X>>>8,oe=X,ve=255&(ve=(ve=X>>>16)+((m.jd<<24>>24)*(te<<24>>24)>>>5));oe=255&(oe=(oe=oe+((m.hd<<24>>24)*(te<<24>>24)>>>5))+((m.ud<<24>>24)*(ve<<24>>24)>>>5)),G[J+Y]=(4278255360&X)+(ve<<16)+oe}}function At(m,S,E,M,G){z[S]=function(J,Y,X,te,oe,ve,ke,Ce,Ae){for(te=ke;te<Ce;++te)for(ke=0;ke<Ae;++ke)oe[ve++]=G(X[M(J[Y++])])},z[m]=function(J,Y,X,te,oe,ve,ke){var Ce=8>>J.b,Ae=J.Ea,Je=J.K[0],je=J.w;if(8>Ce)for(J=(1<<J.b)-1,je=(1<<Ce)-1;Y<X;++Y){var ye,_e=0;for(ye=0;ye<Ae;++ye)ye&J||(_e=M(te[oe++])),ve[ke++]=G(Je[_e&je]),_e>>=Ce}else z["VP8LMapColor"+E](te,oe,Je,je,ve,ke,Y,X,Ae)}}function rt(m,S,E,M,G){for(E=S+E;S<E;){var J=m[S++];M[G++]=J>>16&255,M[G++]=J>>8&255,M[G++]=J>>0&255}}function En(m,S,E,M,G){for(E=S+E;S<E;){var J=m[S++];M[G++]=J>>16&255,M[G++]=J>>8&255,M[G++]=J>>0&255,M[G++]=J>>24&255}}function Lt(m,S,E,M,G){for(E=S+E;S<E;){var J=(Y=m[S++])>>16&240|Y>>12&15,Y=Y>>0&240|Y>>28&15;M[G++]=J,M[G++]=Y}}function qt(m,S,E,M,G){for(E=S+E;S<E;){var J=(Y=m[S++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;M[G++]=J,M[G++]=Y}}function Pt(m,S,E,M,G){for(E=S+E;S<E;){var J=m[S++];M[G++]=J>>0&255,M[G++]=J>>8&255,M[G++]=J>>16&255}}function _t(m,S,E,M,G,J){if(J==0)for(E=S+E;S<E;)Me(M,((J=m[S++])[0]>>24|J[1]>>8&65280|J[2]<<8&16711680|J[3]<<24)>>>0),G+=32;else i(M,G,m,S,E)}function Xn(m,S){z[S][0]=z[m+"0"],z[S][1]=z[m+"1"],z[S][2]=z[m+"2"],z[S][3]=z[m+"3"],z[S][4]=z[m+"4"],z[S][5]=z[m+"5"],z[S][6]=z[m+"6"],z[S][7]=z[m+"7"],z[S][8]=z[m+"8"],z[S][9]=z[m+"9"],z[S][10]=z[m+"10"],z[S][11]=z[m+"11"],z[S][12]=z[m+"12"],z[S][13]=z[m+"13"],z[S][14]=z[m+"0"],z[S][15]=z[m+"0"]}function Yt(m){return m==Zl||m==Bu||m==Jo||m==qu}function Cr(){this.eb=[],this.size=this.A=this.fb=0}function an(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Cr,this.f.kb=new an,this.sd=null}function Yi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function on(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nt(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Vt(m,S){var E=m.T,M=S.ba.f.RGBA,G=M.eb,J=M.fb+m.ka*M.A,Y=Li[S.ba.S],X=m.y,te=m.O,oe=m.f,ve=m.N,ke=m.ea,Ce=m.W,Ae=S.cc,Je=S.dc,je=S.Mc,ye=S.Nc,_e=m.ka,Ve=m.ka+m.T,Ke=m.U,He=Ke+1>>1;for(_e==0?Y(X,te,null,null,oe,ve,ke,Ce,oe,ve,ke,Ce,G,J,null,null,Ke):(Y(S.ec,S.fc,X,te,Ae,Je,je,ye,oe,ve,ke,Ce,G,J-M.A,G,J,Ke),++E);_e+2<Ve;_e+=2)Ae=oe,Je=ve,je=ke,ye=Ce,ve+=m.Rc,Ce+=m.Rc,J+=2*M.A,Y(X,(te+=2*m.fa)-m.fa,X,te,Ae,Je,je,ye,oe,ve,ke,Ce,G,J-M.A,G,J,Ke);return te+=m.fa,m.j+Ve<m.o?(i(S.ec,S.fc,X,te,Ke),i(S.cc,S.dc,oe,ve,He),i(S.Mc,S.Nc,ke,Ce,He),E--):1&Ve||Y(X,te,null,null,oe,ve,ke,Ce,oe,ve,ke,Ce,G,J+M.A,null,null,Ke),E}function Zr(m,S,E){var M=m.F,G=[m.J];if(M!=null){var J=m.U,Y=S.ba.S,X=Y==Ql||Y==Jo;S=S.ba.f.RGBA;var te=[0],oe=m.ka;te[0]=m.T,m.Kb&&(oe==0?--te[0]:(--oe,G[0]-=m.width),m.j+m.ka+m.T==m.o&&(te[0]=m.o-m.j-oe));var ve=S.eb;oe=S.fb+oe*S.A,m=no(M,G[0],m.width,J,te,ve,oe+(X?0:3),S.A),e(E==te),m&&Yt(Y)&&Ts(ve,oe,X,J,te,S.A)}return 0}function gn(m){var S=m.ma,E=S.ba.S,M=11>E,G=E==Gi||E==jr||E==Ql||E==$o||E==12||Yt(E);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!zs(S.Oa,m,G?11:12))return 0;if(G&&Yt(E)&&Qe(),m.da)alert("todo:use_scaling");else{if(M){if(S.Ib=Nt,m.Kb){if(E=m.U+1>>1,S.memory=o(m.U+2*E),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+m.U,S.Mc=S.cc,S.Nc=S.dc+E,S.Ib=Vt,Qe()}}else alert("todo:EmitYUV");G&&(S.Jb=Zr,M&&Ee())}if(M&&!Ma){for(m=0;256>m;++m)Di[m]=89858*(m-128)+Ko>>Gr,Ph[m]=-22014*(m-128)+Ko,nf[m]=-45773*(m-128),$u[m]=113618*(m-128)+Ko>>Gr;for(m=ao;m<Da;++m)S=76283*(m-16)+Ko>>Gr,Uh[m-ao]=vr(S,255),Oh[m-ao]=vr(S+8>>4,15);Ma=1}return 1}function ji(m){var S=m.ma,E=m.U,M=m.T;return e(!(1&m.ka)),0>=E||0>=M?0:(E=S.Ib(m,S),S.Jb!=null&&S.Jb(m,S,E),S.Dc+=E,1)}function yi(m){m.ma.memory=null}function wt(m,S,E,M){return he(m,8)!=47?0:(S[0]=he(m,14)+1,E[0]=he(m,14)+1,M[0]=he(m,1),he(m,3)!=0?0:!m.h)}function sr(m,S){if(4>m)return m+1;var E=m-2>>1;return(2+(1&m)<<E)+he(S,E)+1}function ar(m,S){return 120<S?S-120:1<=(E=((E=Br[S-1])>>4)*m+(8-(15&E)))?E:1;var E}function Ei(m,S,E){var M=H(E),G=m[S+=255&M].g-8;return 0<G&&(Z(E,E.u+8),M=H(E),S+=m[S].value,S+=M&(1<<G)-1),Z(E,E.u+m[S].g),m[S].value}function Fn(m,S,E){return E.g+=m.g,E.value+=m.value<<S>>>0,e(8>=E.g),m.g}function Ln(m,S,E){var M=m.xc;return e((S=M==0?0:m.vc[m.md*(E>>M)+(S>>M)])<m.Wb),m.Ya[S]}function Ci(m,S,E,M){var G=m.ab,J=m.c*S,Y=m.C;S=Y+S;var X=E,te=M;for(M=m.Ta,E=m.Ua;0<G--;){var oe=m.gc[G],ve=Y,ke=S,Ce=X,Ae=te,Je=(te=M,X=E,oe.Ea);switch(e(ve<ke),e(ke<=oe.nc),oe.hc){case 2:Pu(Ce,Ae,(ke-ve)*Je,te,X);break;case 0:var je=ve,ye=ke,_e=te,Ve=X,Ke=(st=oe).Ea;je==0&&(Mu(Ce,Ae,null,null,1,_e,Ve),ct(Ce,Ae+1,0,0,Ke-1,_e,Ve+1),Ae+=Ke,Ve+=Ke,++je);for(var He=1<<st.b,ot=He-1,it=at(Ke,st.b),mt=st.K,st=st.w+(je>>st.b)*it;je<ye;){var sn=mt,Kt=st,en=1;for(Jl(Ce,Ae,_e,Ve-Ke,1,_e,Ve);en<Ke;){var Ft=(en&~ot)+He;Ft>Ke&&(Ft=Ke),(0,Mr[sn[Kt++]>>8&15])(Ce,Ae+ +en,_e,Ve+en-Ke,Ft-en,_e,Ve+en),en=Ft}Ae+=Ke,Ve+=Ke,++je&ot||(st+=it)}ke!=oe.nc&&i(te,X-Je,te,X+(ke-ve-1)*Je,Je);break;case 1:for(Je=Ce,ye=Ae,Ke=(Ce=oe.Ea)-(Ve=Ce&~(_e=(Ae=1<<oe.b)-1)),je=at(Ce,oe.b),He=oe.K,oe=oe.w+(ve>>oe.b)*je;ve<ke;){for(ot=He,it=oe,mt=new nt,st=ye+Ve,sn=ye+Ce;ye<st;)Ht(ot[it++],mt),yr(mt,Je,ye,Ae,te,X),ye+=Ae,X+=Ae;ye<sn&&(Ht(ot[it++],mt),yr(mt,Je,ye,Ke,te,X),ye+=Ke,X+=Ke),++ve&_e||(oe+=je)}break;case 3:if(Ce==te&&Ae==X&&0<oe.b){for(ye=te,Ce=Je=X+(ke-ve)*Je-(Ve=(ke-ve)*at(oe.Ea,oe.b)),Ae=te,_e=X,je=[],Ve=(Ke=Ve)-1;0<=Ve;--Ve)je[Ve]=Ae[_e+Ve];for(Ve=Ke-1;0<=Ve;--Ve)ye[Ce+Ve]=je[Ve];as(oe,ve,ke,te,Je,te,X)}else as(oe,ve,ke,Ce,Ae,te,X)}X=M,te=E}te!=E&&i(M,E,X,te,J)}function vs(m,S){var E=m.V,M=m.Ba+m.c*m.C,G=S-m.C;if(e(S<=m.l.o),e(16>=G),0<G){var J=m.l,Y=m.Ta,X=m.Ua,te=J.width;if(Ci(m,G,E,M),G=X=[X],e((E=m.C)<(M=S)),e(J.v<J.va),M>J.o&&(M=J.o),E<J.j){var oe=J.j-E;E=J.j,G[0]+=oe*te}if(E>=M?E=0:(G[0]+=4*J.v,J.ka=E-J.j,J.U=J.va-J.v,J.T=M-E,E=1),E){if(X=X[0],11>(E=m.ca).S){var ve=E.f.RGBA,ke=(M=E.S,G=J.U,J=J.T,oe=ve.eb,ve.A),Ce=J;for(ve=ve.fb+m.Ma*ve.A;0<Ce--;){var Ae=Y,Je=X,je=G,ye=oe,_e=ve;switch(M){case ju:Pr(Ae,Je,je,ye,_e);break;case Gi:Gs(Ae,Je,je,ye,_e);break;case Zl:Gs(Ae,Je,je,ye,_e),Ts(ye,_e,0,je,1,0);break;case Fu:Go(Ae,Je,je,ye,_e);break;case jr:_t(Ae,Je,je,ye,_e,1);break;case Bu:_t(Ae,Je,je,ye,_e,1),Ts(ye,_e,0,je,1,0);break;case Ql:_t(Ae,Je,je,ye,_e,0);break;case Jo:_t(Ae,Je,je,ye,_e,0),Ts(ye,_e,1,je,1,0);break;case $o:os(Ae,Je,je,ye,_e);break;case qu:os(Ae,Je,je,ye,_e),zi(ye,_e,je,1,0);break;case Ca:ls(Ae,Je,je,ye,_e);break;default:e(0)}X+=te,ve+=ke}m.Ma+=J}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=E.height)}}m.C=S,e(m.C<=m.i)}function ci(m){var S;if(0<m.ua)return 0;for(S=0;S<m.Wb;++S){var E=m.Ya[S].G,M=m.Ya[S].H;if(0<E[1][M[1]+0].g||0<E[2][M[2]+0].g||0<E[3][M[3]+0].g)return 0}return 1}function ln(m,S,E,M,G,J){if(m.Z!=0){var Y=m.qd,X=m.rd;for(e(Js[m.Z]!=null);S<E;++S)Js[m.Z](Y,X,M,G,M,G,J),Y=M,X=G,G+=J;m.qd=Y,m.rd=X}}function wn(m,S){var E=m.l.ma,M=E.Z==0||E.Z==1?m.l.j:m.C;if(M=m.C<M?M:m.C,e(S<=m.l.o),S>M){var G=m.l.width,J=E.ca,Y=E.tb+G*M,X=m.V,te=m.Ba+m.c*M,oe=m.gc;e(m.ab==1),e(oe[0].hc==3),$c(oe[0],M,S,X,te,J,Y),ln(E,M,S,J,Y,G)}m.C=m.Ma=S}function di(m,S,E,M,G,J,Y){var X=m.$/M,te=m.$%M,oe=m.m,ve=m.s,ke=E+m.$,Ce=ke;G=E+M*G;var Ae=E+M*J,Je=280+ve.ua,je=m.Pb?X:16777216,ye=0<ve.ua?ve.Wa:null,_e=ve.wc,Ve=ke<Ae?Ln(ve,te,X):null;e(m.C<J),e(Ae<=G);var Ke=!1;e:for(;;){for(;Ke||ke<Ae;){var He=0;if(X>=je){var ot=ke-E;e((je=m).Pb),je.wd=je.m,je.xd=ot,0<je.s.ua&&Ie(je.s.Wa,je.s.vb),je=X+ka}if(te&_e||(Ve=Ln(ve,te,X)),e(Ve!=null),Ve.Qb&&(S[ke]=Ve.qb,Ke=!0),!Ke)if(se(oe),Ve.jc){He=oe,ot=S;var it=ke,mt=Ve.pd[H(He)&Ki-1];e(Ve.jc),256>mt.g?(Z(He,He.u+mt.g),ot[it]=mt.value,He=0):(Z(He,He.u+mt.g-256),e(256<=mt.value),He=mt.value),He==0&&(Ke=!0)}else He=Ei(Ve.G[0],Ve.H[0],oe);if(oe.h)break;if(Ke||256>He){if(!Ke)if(Ve.nd)S[ke]=(Ve.qb|He<<8)>>>0;else{if(se(oe),Ke=Ei(Ve.G[1],Ve.H[1],oe),se(oe),ot=Ei(Ve.G[2],Ve.H[2],oe),it=Ei(Ve.G[3],Ve.H[3],oe),oe.h)break;S[ke]=(it<<24|Ke<<16|He<<8|ot)>>>0}if(Ke=!1,++ke,++te>=M&&(te=0,++X,Y!=null&&X<=J&&!(X%16)&&Y(m,X),ye!=null))for(;Ce<ke;)He=S[Ce++],ye.X[(506832829*He&4294967295)>>>ye.Mb]=He}else if(280>He){if(He=sr(He-256,oe),ot=Ei(Ve.G[4],Ve.H[4],oe),se(oe),ot=ar(M,ot=sr(ot,oe)),oe.h)break;if(ke-E<ot||G-ke<He)break e;for(it=0;it<He;++it)S[ke+it]=S[ke+it-ot];for(ke+=He,te+=He;te>=M;)te-=M,++X,Y!=null&&X<=J&&!(X%16)&&Y(m,X);if(e(ke<=G),te&_e&&(Ve=Ln(ve,te,X)),ye!=null)for(;Ce<ke;)He=S[Ce++],ye.X[(506832829*He&4294967295)>>>ye.Mb]=He}else{if(!(He<Je))break e;for(Ke=He-280,e(ye!=null);Ce<ke;)He=S[Ce++],ye.X[(506832829*He&4294967295)>>>ye.Mb]=He;He=ke,e(!(Ke>>>(ot=ye).Xa)),S[He]=ot.X[Ke],Ke=!0}Ke||e(oe.h==K(oe))}if(m.Pb&&oe.h&&ke<G)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Ie(m.s.vb,m.s.Wa);else{if(oe.h)break e;Y!=null&&Y(m,X>J?J:X),m.a=0,m.$=ke-E}return 1}return m.a=3,0}function ze(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var S=m.Wa;S!=null&&(S.X=null),m.vb=null,e(m!=null)}function Mt(){var m=new Vc;return m==null?null:(m.a=0,m.xb=Yc,Xn("Predictor","VP8LPredictors"),Xn("Predictor","VP8LPredictors_C"),Xn("PredictorAdd","VP8LPredictorsAdd"),Xn("PredictorAdd","VP8LPredictorsAdd_C"),Pu=xt,yr=pt,Pr=rt,Gs=En,os=Lt,ls=qt,Go=Pt,z.VP8LMapColor32b=Yl,z.VP8LMapColor8b=Qi,m)}function $t(m,S,E,M,G){var J=1,Y=[m],X=[S],te=M.m,oe=M.s,ve=null,ke=0;e:for(;;){if(E)for(;J&&he(te,1);){var Ce=Y,Ae=X,Je=M,je=1,ye=Je.m,_e=Je.gc[Je.ab],Ve=he(ye,2);if(Je.Oc&1<<Ve)J=0;else{switch(Je.Oc|=1<<Ve,_e.hc=Ve,_e.Ea=Ce[0],_e.nc=Ae[0],_e.K=[null],++Je.ab,e(4>=Je.ab),Ve){case 0:case 1:_e.b=he(ye,3)+2,je=$t(at(_e.Ea,_e.b),at(_e.nc,_e.b),0,Je,_e.K),_e.K=_e.K[0];break;case 3:var Ke,He=he(ye,8)+1,ot=16<He?0:4<He?1:2<He?2:3;if(Ce[0]=at(_e.Ea,ot),_e.b=ot,Ke=je=$t(He,1,0,Je,_e.K)){var it,mt=He,st=_e,sn=1<<(8>>st.b),Kt=o(sn);if(Kt==null)Ke=0;else{var en=st.K[0],Ft=st.w;for(Kt[0]=st.K[0][0],it=1;it<1*mt;++it)Kt[it]=Ye(en[Ft+it],Kt[it-1]);for(;it<4*sn;++it)Kt[it]=0;st.K[0]=null,st.K[0]=Kt,Ke=1}}je=Ke;break;case 2:break;default:e(0)}J=je}}if(Y=Y[0],X=X[0],J&&he(te,1)&&!(J=1<=(ke=he(te,4))&&11>=ke)){M.a=3;break e}var hn;if(hn=J)t:{var un,Ct,vn,xi=M,$n=Y,Vi=X,rn=ke,Mi=E,cr=xi.m,hi=xi.s,Jn=[null],wi=1,Sr=0,Vr=qr[rn];n:for(;;){if(Mi&&he(cr,1)){var si=he(cr,3)+2,ti=at($n,si),Si=at(Vi,si),_r=ti*Si;if(!$t(ti,Si,0,xi,Jn))break n;for(Jn=Jn[0],hi.xc=si,un=0;un<_r;++un){var Cs=Jn[un]>>8&65535;Jn[un]=Cs,Cs>=wi&&(wi=Cs+1)}}if(cr.h)break n;for(Ct=0;5>Ct;++Ct){var zn=ro[Ct];!Ct&&0<rn&&(zn+=1<<rn),Sr<zn&&(Sr=zn)}var ks=l(wi*Vr,j),dr=wi,Yn=l(dr,re);if(Yn==null)var oo=null;else e(65536>=dr),oo=Yn;var Nr=o(Sr);if(oo==null||Nr==null||ks==null){xi.a=1;break n}var Ot=ks;for(un=vn=0;un<wi;++un){var Jt=oo[un],kn=Jt.G,Ys=Jt.H,lo=0,Is=1,iu=0;for(Ct=0;5>Ct;++Ct){zn=ro[Ct],kn[Ct]=Ot,Ys[Ct]=vn,!Ct&&0<rn&&(zn+=1<<rn);r:{var Pa,Ua=zn,Yu=xi,Nn=Nr,Kc=Ot,Xc=vn,Wu=0,Ws=Yu.m,jh=he(Ws,1);if(a(Nn,0,0,Ua),jh){var Qc=he(Ws,1)+1,Zc=he(Ws,1),Ku=he(Ws,Zc==0?1:8);Nn[Ku]=1,Qc==2&&(Nn[Ku=he(Ws,8)]=1);var _i=1}else{var Wn=o(19),ru=he(Ws,4)+4;if(19<ru){Yu.a=3;var Oa=0;break r}for(Pa=0;Pa<ru;++Pa)Wn[eu[Pa]]=he(Ws,3);var Qo=void 0,uo=void 0,Rs=Yu,Xu=Wn,Zo=Ua,Qu=Nn,Zu=0,Ks=Rs.m,ed=8,td=l(128,j);i:for(;B(td,0,7,Xu,19);){if(he(Ks,1)){var rf=2+2*he(Ks,3);if((Qo=2+he(Ks,rf))>Zo)break i}else Qo=Zo;for(uo=0;uo<Zo&&Qo--;){se(Ks);var nd=td[0+(127&H(Ks))];Z(Ks,Ks.u+nd.g);var ja=nd.value;if(16>ja)Qu[uo++]=ja,ja!=0&&(ed=ja);else{var sf=ja==16,af=ja-16,of=Yo[af],id=he(Ks,Fr[af])+of;if(uo+id>Zo)break i;for(var lf=sf?ed:0;0<id--;)Qu[uo++]=lf}}Zu=1;break i}Zu||(Rs.a=3),_i=Zu}(_i=_i&&!Ws.h)&&(Wu=B(Kc,Xc,8,Nn,Ua)),_i&&Wu!=0?Oa=Wu:(Yu.a=3,Oa=0)}if(Oa==0)break n;if(Is&&zu[Ct]==1&&(Is=Ot[vn].g==0),lo+=Ot[vn].g,vn+=Oa,3>=Ct){var co,ec=Nr[0];for(co=1;co<zn;++co)Nr[co]>ec&&(ec=Nr[co]);iu+=ec}}if(Jt.nd=Is,Jt.Qb=0,Is&&(Jt.qb=(kn[3][Ys[3]+0].value<<24|kn[1][Ys[1]+0].value<<16|kn[2][Ys[2]+0].value)>>>0,lo==0&&256>kn[0][Ys[0]+0].value&&(Jt.Qb=1,Jt.qb+=kn[0][Ys[0]+0].value<<8)),Jt.jc=!Jt.Qb&&6>iu,Jt.jc){var su,Ls=Jt;for(su=0;su<Ki;++su){var Xs=su,Qs=Ls.pd[Xs],tc=Ls.G[0][Ls.H[0]+Xs];256<=tc.value?(Qs.g=tc.g+256,Qs.value=tc.value):(Qs.g=0,Qs.value=0,Xs>>=Fn(tc,8,Qs),Xs>>=Fn(Ls.G[1][Ls.H[1]+Xs],16,Qs),Xs>>=Fn(Ls.G[2][Ls.H[2]+Xs],0,Qs),Fn(Ls.G[3][Ls.H[3]+Xs],24,Qs))}}}hi.vc=Jn,hi.Wb=wi,hi.Ya=oo,hi.yc=ks,hn=1;break t}hn=0}if(!(J=hn)){M.a=3;break e}if(0<ke){if(oe.ua=1<<ke,!et(oe.Wa,ke)){M.a=1,J=0;break e}}else oe.ua=0;var nc=M,fo=Y,uf=X,el=nc.s,tl=el.xc;if(nc.c=fo,nc.i=uf,el.md=at(fo,tl),el.wc=tl==0?-1:(1<<tl)-1,E){M.xb=Ia;break e}if((ve=o(Y*X))==null){M.a=1,J=0;break e}J=(J=di(M,ve,0,Y,X,X,null))&&!te.h;break e}return J?(G!=null?G[0]=ve:(e(ve==null),e(E)),M.$=0,E||ze(oe)):ze(oe),J}function Dn(m,S){var E=m.c*m.i,M=E+S+16*S;return e(m.c<=S),m.V=o(M),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+E+S,1)}function Bn(m,S){var E=m.C,M=S-E,G=m.V,J=m.Ba+m.c*E;for(e(S<=m.l.o);0<M;){var Y=16<M?16:M,X=m.l.ma,te=m.l.width,oe=te*Y,ve=X.ca,ke=X.tb+te*E,Ce=m.Ta,Ae=m.Ua;Ci(m,Y,G,J),xr(Ce,Ae,ve,ke,oe),ln(X,E,E+Y,ve,ke,te),M-=Y,G+=Y*m.c,E+=Y}e(E==S),m.C=m.Ma=S}function ys(){this.ub=this.yd=this.td=this.Rb=0}function es(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ts(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function fa(){this.Yb=(function(){var m=[];return(function S(E,M,G){for(var J=G[M],Y=0;Y<J&&(E.push(G.length>M+1?[]:0),!(G.length<M+1));Y++)S(E[Y],M+1,G)})(m,0,[3,11]),m})()}function ha(){this.jb=o(3),this.Wc=c([4,8],fa),this.Xc=c([4,17],fa)}function ii(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ja(){this.ld=this.La=this.dd=this.tc=0}function Il(){this.Na=this.la=0}function js(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bs(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ja),this.Y=0,this.ya=Array(new bs),this.aa=0,this.l=new ko}function Rl(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Nu(){this.cb=this.a=0,this.sc="",this.m=new Ne,this.Od=new ys,this.Kc=new es,this.ed=new ii,this.Qa=new ts,this.Ic=this.$c=this.Aa=0,this.D=new zc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,Ne),this.ia=0,this.pb=l(4,js),this.Pa=new ha,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Rl),this.Hd=0,this.rb=Array(new Il),this.sb=0,this.wa=Array(new Ja),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bs),this.L=this.aa=0,this.gd=c([4,2],Ja),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ko(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Io(){var m=new Nu;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,wr||(wr=Ll)),m}function Mn(m,S,E){return m.a==0&&(m.a=S,m.sc=E,m.cb=0),0}function kr(m,S,E){return 3<=E&&m[S+0]==157&&m[S+1]==1&&m[S+2]==42}function Wi(m,S){if(m==null)return 0;if(m.a=0,m.sc="OK",S==null)return Mn(m,2,"null VP8Io passed to VP8GetHeaders()");var E=S.data,M=S.w,G=S.ha;if(4>G)return Mn(m,7,"Truncated header.");var J=E[M+0]|E[M+1]<<8|E[M+2]<<16,Y=m.Od;if(Y.Rb=!(1&J),Y.td=J>>1&7,Y.yd=J>>4&1,Y.ub=J>>5,3<Y.td)return Mn(m,3,"Incorrect keyframe parameters.");if(!Y.yd)return Mn(m,4,"Frame not displayable.");M+=3,G-=3;var X=m.Kc;if(Y.Rb){if(7>G)return Mn(m,7,"cannot parse picture header");if(!kr(E,M,G))return Mn(m,3,"Bad code word");X.c=16383&(E[M+4]<<8|E[M+3]),X.Td=E[M+4]>>6,X.i=16383&(E[M+6]<<8|E[M+5]),X.Ud=E[M+6]>>6,M+=7,G-=7,m.za=X.c+15>>4,m.Ub=X.i+15>>4,S.width=X.c,S.height=X.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,a((J=m.Pa).jb,0,255,J.jb.length),e((J=m.Qa)!=null),J.Cb=0,J.Bb=0,J.Fb=1,a(J.Zb,0,0,J.Zb.length),a(J.Lb,0,0,J.Lb)}if(Y.ub>G)return Mn(m,7,"bad partition length");be(J=m.m,E,M,Y.ub),M+=Y.ub,G-=Y.ub,Y.Rb&&(X.Ld=fe(J),X.Kd=fe(J)),X=m.Qa;var te,oe=m.Pa;if(e(J!=null),e(X!=null),X.Cb=fe(J),X.Cb){if(X.Bb=fe(J),fe(J)){for(X.Fb=fe(J),te=0;4>te;++te)X.Zb[te]=fe(J)?$(J,7):0;for(te=0;4>te;++te)X.Lb[te]=fe(J)?$(J,6):0}if(X.Bb)for(te=0;3>te;++te)oe.jb[te]=fe(J)?P(J,8):255}else X.Bb=0;if(J.Ka)return Mn(m,3,"cannot parse segment header");if((X=m.ed).zd=fe(J),X.Tb=P(J,6),X.wb=P(J,3),X.Pc=fe(J),X.Pc&&fe(J)){for(oe=0;4>oe;++oe)fe(J)&&(X.vd[oe]=$(J,6));for(oe=0;4>oe;++oe)fe(J)&&(X.od[oe]=$(J,6))}if(m.L=X.Tb==0?0:X.zd?1:2,J.Ka)return Mn(m,3,"cannot parse filter header");var ve=G;if(G=te=M,M=te+ve,X=ve,m.Xb=(1<<P(m.m,2))-1,ve<3*(oe=m.Xb))E=7;else{for(te+=3*oe,X-=3*oe,ve=0;ve<oe;++ve){var ke=E[G+0]|E[G+1]<<8|E[G+2]<<16;ke>X&&(ke=X),be(m.Jc[+ve],E,te,ke),te+=ke,X-=ke,G+=3}be(m.Jc[+oe],E,te,X),E=te<M?0:5}if(E!=0)return Mn(m,E,"cannot parse partitions");for(E=P(te=m.m,7),G=fe(te)?$(te,4):0,M=fe(te)?$(te,4):0,X=fe(te)?$(te,4):0,oe=fe(te)?$(te,4):0,te=fe(te)?$(te,4):0,ve=m.Qa,ke=0;4>ke;++ke){if(ve.Cb){var Ce=ve.Zb[ke];ve.Fb||(Ce+=E)}else{if(0<ke){m.pb[ke]=m.pb[0];continue}Ce=E}var Ae=m.pb[ke];Ae.Sc[0]=zr[vr(Ce+G,127)],Ae.Sc[1]=Hr[vr(Ce+0,127)],Ae.Eb[0]=2*zr[vr(Ce+M,127)],Ae.Eb[1]=101581*Hr[vr(Ce+X,127)]>>16,8>Ae.Eb[1]&&(Ae.Eb[1]=8),Ae.Qc[0]=zr[vr(Ce+oe,117)],Ae.Qc[1]=Hr[vr(Ce+te,127)],Ae.lc=Ce+te}if(!Y.Rb)return Mn(m,4,"Not a key frame.");for(fe(J),Y=m.Pa,E=0;4>E;++E){for(G=0;8>G;++G)for(M=0;3>M;++M)for(X=0;11>X;++X)oe=me(J,Cn[E][G][M][X])?P(J,8):tf[E][G][M][X],Y.Wc[E][G].Yb[M][X]=oe;for(G=0;17>G;++G)Y.Xc[E][G]=Y.Wc[E][Wt[G]]}return m.kc=fe(J),m.kc&&(m.Bd=P(J,8)),m.cb=1}function Ll(m,S,E,M,G,J,Y){var X=S[G].Yb[E];for(E=0;16>G;++G){if(!me(m,X[E+0]))return G;for(;!me(m,X[E+1]);)if(X=S[++G].Yb[0],E=0,G==16)return 16;var te=S[G+1].Yb;if(me(m,X[E+2])){var oe=m,ve=0;if(me(oe,(Ce=X)[(ke=E)+3]))if(me(oe,Ce[ke+6])){for(X=0,ke=2*(ve=me(oe,Ce[ke+8]))+(Ce=me(oe,Ce[ke+9+ve])),ve=0,Ce=ef[ke];Ce[X];++X)ve+=ve+me(oe,Ce[X]);ve+=3+(8<<ke)}else me(oe,Ce[ke+7])?(ve=7+2*me(oe,165),ve+=me(oe,145)):ve=5+me(oe,159);else ve=me(oe,Ce[ke+4])?3+me(oe,Ce[ke+5]):2;X=te[2]}else ve=1,X=te[1];te=Y+Jc[G],0>(oe=m).b&&de(oe);var ke,Ce=oe.b,Ae=(ke=oe.Ca>>1)-(oe.I>>Ce)>>31;--oe.b,oe.Ca+=Ae,oe.Ca|=1,oe.I-=(ke+1&Ae)<<Ce,J[te]=((ve^Ae)-Ae)*M[(0<G)+0]}return 16}function Dl(m){var S=m.rb[m.sb-1];S.la=0,S.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function Ml(m,S){if(m==null)return 0;if(S==null)return Mn(m,2,"NULL VP8Io parameter in VP8Decode().");if(!m.cb&&!Wi(m,S))return 0;if(e(m.cb),S.ac==null||S.ac(S)){S.ob&&(m.L=0);var E=Xo[m.L];if(m.L==2?(m.yb=0,m.zb=0):(m.yb=S.v-E>>4,m.zb=S.j-E>>4,0>m.yb&&(m.yb=0),0>m.zb&&(m.zb=0)),m.Va=S.o+15+E>>4,m.Hb=S.va+15+E>>4,m.Hb>m.za&&(m.Hb=m.za),m.Va>m.Ub&&(m.Va=m.Ub),0<m.L){var M=m.ed;for(E=0;4>E;++E){var G;if(m.Qa.Cb){var J=m.Qa.Lb[E];m.Qa.Fb||(J+=M.Tb)}else J=M.Tb;for(G=0;1>=G;++G){var Y=m.gd[E][G],X=J;if(M.Pc&&(X+=M.vd[0],G&&(X+=M.od[0])),0<(X=0>X?0:63<X?63:X)){var te=X;0<M.wb&&(te=4<M.wb?te>>2:te>>1)>9-M.wb&&(te=9-M.wb),1>te&&(te=1),Y.dd=te,Y.tc=2*X+te,Y.ld=40<=X?2:15<=X?1:0}else Y.tc=0;Y.La=G}}}E=0}else Mn(m,6,"Frame setup failed"),E=m.a;if(E=E==0){if(E){m.$c=0,0<m.Aa||(m.Ic=nu);e:{E=m.Ic,M=4*(te=m.za);var oe=32*te,ve=te+1,ke=0<m.L?te*(0<m.Aa?2:1):0,Ce=(m.Aa==2?2:1)*te;if((Y=M+832+(G=3*(16*E+Xo[m.L])/2*oe)+(J=m.Fa!=null&&0<m.Fa.length?m.Kc.c*m.Kc.i:0))!=Y)E=0;else{if(Y>m.Vb){if(m.Vb=0,m.Ec=o(Y),m.Fc=0,m.Ec==null){E=Mn(m,1,"no memory during frame initialization.");break e}m.Vb=Y}Y=m.Ec,X=m.Fc,m.Ac=Y,m.Bc=X,X+=M,m.Gd=l(oe,Rl),m.Hd=0,m.rb=l(ve+1,Il),m.sb=1,m.wa=ke?l(ke,Ja):null,m.Y=0,m.D.Nb=0,m.D.wa=m.wa,m.D.Y=m.Y,0<m.Aa&&(m.D.Y+=te),e(!0),m.oc=Y,m.pc=X,X+=832,m.ya=l(Ce,bs),m.aa=0,m.D.ya=m.ya,m.D.aa=m.aa,m.Aa==2&&(m.D.aa+=te),m.R=16*te,m.B=8*te,te=(oe=Xo[m.L])*m.R,oe=oe/2*m.B,m.sa=Y,m.ta=X+te,m.qa=m.sa,m.ra=m.ta+16*E*m.R+oe,m.Ha=m.qa,m.Ia=m.ra+8*E*m.B+oe,m.$c=0,X+=G,m.mb=J?Y:null,m.nb=J?X:null,e(X+J<=m.Fc+m.Vb),Dl(m),a(m.Ac,m.Bc,0,M),E=1}}if(E){if(S.ka=0,S.y=m.sa,S.O=m.ta,S.f=m.qa,S.N=m.ra,S.ea=m.Ha,S.Vd=m.Ia,S.fa=m.R,S.Rc=m.B,S.F=null,S.J=0,!Ou){for(E=-255;255>=E;++E)io[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)Uu[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)Wl[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)Kl[255+E]=0>E?0:255<E?255:E;Ou=1}qi=Tu,Aa=Au,_s=Lo,Ur=pa,Zi=Pl,Vs=Ro,Or=Fl,Ta=Qa,Ea=Gc,ur=ql,Vo=Bl,br=Fo,Ns=zl,Sn=Ru,_n=Oo,Zn=rs,ri=Dr,As=jo,Vn[0]=Rr,Vn[1]=Hc,Vn[2]=ma,Vn[3]=ku,Vn[4]=Ol,Vn[5]=lr,Vn[6]=ga,Vn[7]=Wa,Vn[8]=ws,Vn[9]=Ka,er[0]=Ya,er[1]=Cu,er[2]=ns,er[3]=Do,er[4]=Pn,er[5]=Ul,er[6]=Po,us[0]=is,us[1]=Eu,us[2]=jl,us[3]=va,us[4]=ba,us[5]=Uo,us[6]=bi,E=1}else E=0}E&&(E=(function(Ae,Je){for(Ae.M=0;Ae.M<Ae.Va;++Ae.M){var je,ye=Ae.Jc[Ae.M&Ae.Xb],_e=Ae.m,Ve=Ae;for(je=0;je<Ve.za;++je){var Ke=_e,He=Ve,ot=He.Ac,it=He.Bc+4*je,mt=He.zc,st=He.ya[He.aa+je];if(He.Qa.Bb?st.$b=me(Ke,He.Pa.jb[0])?2+me(Ke,He.Pa.jb[2]):me(Ke,He.Pa.jb[1]):st.$b=0,He.kc&&(st.Ad=me(Ke,He.Bd)),st.Za=!me(Ke,145)+0,st.Za){var sn=st.Ob,Kt=0;for(He=0;4>He;++He){var en,Ft=mt[0+He];for(en=0;4>en;++en){Ft=Ri[ot[it+en]][Ft];for(var hn=Hu[me(Ke,Ft[0])];0<hn;)hn=Hu[2*hn+me(Ke,Ft[hn])];Ft=-hn,ot[it+en]=Ft}i(sn,Kt,ot,it,4),Kt+=4,mt[0+He]=Ft}}else Ft=me(Ke,156)?me(Ke,128)?1:3:me(Ke,163)?2:0,st.Ob[0]=Ft,a(ot,it,Ft,4),a(mt,0,Ft,4);st.Dd=me(Ke,142)?me(Ke,114)?me(Ke,183)?1:3:2:0}if(Ve.m.Ka)return Mn(Ae,7,"Premature end-of-partition0 encountered.");for(;Ae.ja<Ae.za;++Ae.ja){if(Ve=ye,Ke=(_e=Ae).rb[_e.sb-1],ot=_e.rb[_e.sb+_e.ja],je=_e.ya[_e.aa+_e.ja],it=_e.kc?je.Ad:0)Ke.la=ot.la=0,je.Za||(Ke.Na=ot.Na=0),je.Hc=0,je.Gc=0,je.ia=0;else{var un,Ct;if(Ke=ot,ot=Ve,it=_e.Pa.Xc,mt=_e.ya[_e.aa+_e.ja],st=_e.pb[mt.$b],He=mt.ad,sn=0,Kt=_e.rb[_e.sb-1],Ft=en=0,a(He,sn,0,384),mt.Za)var vn=0,xi=it[3];else{hn=o(16);var $n=Ke.Na+Kt.Na;if($n=wr(ot,it[1],$n,st.Eb,0,hn,0),Ke.Na=Kt.Na=(0<$n)+0,1<$n)qi(hn,0,He,sn);else{var Vi=hn[0]+3>>3;for(hn=0;256>hn;hn+=16)He[sn+hn]=Vi}vn=1,xi=it[0]}var rn=15&Ke.la,Mi=15&Kt.la;for(hn=0;4>hn;++hn){var cr=1&Mi;for(Vi=Ct=0;4>Vi;++Vi)rn=rn>>1|(cr=($n=wr(ot,xi,$n=cr+(1&rn),st.Sc,vn,He,sn))>vn)<<7,Ct=Ct<<2|(3<$n?3:1<$n?2:He[sn+0]!=0),sn+=16;rn>>=4,Mi=Mi>>1|cr<<7,en=(en<<8|Ct)>>>0}for(xi=rn,vn=Mi>>4,un=0;4>un;un+=2){for(Ct=0,rn=Ke.la>>4+un,Mi=Kt.la>>4+un,hn=0;2>hn;++hn){for(cr=1&Mi,Vi=0;2>Vi;++Vi)$n=cr+(1&rn),rn=rn>>1|(cr=0<($n=wr(ot,it[2],$n,st.Qc,0,He,sn)))<<3,Ct=Ct<<2|(3<$n?3:1<$n?2:He[sn+0]!=0),sn+=16;rn>>=2,Mi=Mi>>1|cr<<5}Ft|=Ct<<4*un,xi|=rn<<4<<un,vn|=(240&Mi)<<un}Ke.la=xi,Kt.la=vn,mt.Hc=en,mt.Gc=Ft,mt.ia=43690&Ft?0:st.ia,it=!(en|Ft)}if(0<_e.L&&(_e.wa[_e.Y+_e.ja]=_e.gd[je.$b][je.Za],_e.wa[_e.Y+_e.ja].La|=!it),Ve.Ka)return Mn(Ae,7,"Premature end-of-file encountered.")}if(Dl(Ae),_e=Je,Ve=1,je=(ye=Ae).D,Ke=0<ye.L&&ye.M>=ye.zb&&ye.M<=ye.Va,ye.Aa==0)e:{if(je.M=ye.M,je.uc=Ke,zo(ye,je),Ve=1,je=(Ct=ye.D).Nb,Ke=(Ft=Xo[ye.L])*ye.R,ot=Ft/2*ye.B,hn=16*je*ye.R,Vi=8*je*ye.B,it=ye.sa,mt=ye.ta-Ke+hn,st=ye.qa,He=ye.ra-ot+Vi,sn=ye.Ha,Kt=ye.Ia-ot+Vi,Mi=(rn=Ct.M)==0,en=rn>=ye.Va-1,ye.Aa==2&&zo(ye,Ct),Ct.uc)for(cr=($n=ye).D.M,e($n.D.uc),Ct=$n.yb;Ct<$n.Hb;++Ct){vn=Ct,xi=cr;var hi=(Jn=(zn=$n).D).Nb;un=zn.R;var Jn=Jn.wa[Jn.Y+vn],wi=zn.sa,Sr=zn.ta+16*hi*un+16*vn,Vr=Jn.dd,si=Jn.tc;if(si!=0)if(e(3<=si),zn.L==1)0<vn&&Zn(wi,Sr,un,si+4),Jn.La&&As(wi,Sr,un,si),0<xi&&_n(wi,Sr,un,si+4),Jn.La&&ri(wi,Sr,un,si);else{var ti=zn.B,Si=zn.qa,_r=zn.ra+8*hi*ti+8*vn,Cs=zn.Ha,zn=zn.Ia+8*hi*ti+8*vn;hi=Jn.ld,0<vn&&(Ta(wi,Sr,un,si+4,Vr,hi),ur(Si,_r,Cs,zn,ti,si+4,Vr,hi)),Jn.La&&(br(wi,Sr,un,si,Vr,hi),Sn(Si,_r,Cs,zn,ti,si,Vr,hi)),0<xi&&(Or(wi,Sr,un,si+4,Vr,hi),Ea(Si,_r,Cs,zn,ti,si+4,Vr,hi)),Jn.La&&(Vo(wi,Sr,un,si,Vr,hi),Ns(Si,_r,Cs,zn,ti,si,Vr,hi))}}if(ye.ia&&alert("todo:DitherRow"),_e.put!=null){if(Ct=16*rn,rn=16*(rn+1),Mi?(_e.y=ye.sa,_e.O=ye.ta+hn,_e.f=ye.qa,_e.N=ye.ra+Vi,_e.ea=ye.Ha,_e.W=ye.Ia+Vi):(Ct-=Ft,_e.y=it,_e.O=mt,_e.f=st,_e.N=He,_e.ea=sn,_e.W=Kt),en||(rn-=Ft),rn>_e.o&&(rn=_e.o),_e.F=null,_e.J=null,ye.Fa!=null&&0<ye.Fa.length&&Ct<rn&&(_e.J=Bo(ye,_e,Ct,rn-Ct),_e.F=ye.mb,_e.F==null&&_e.F.length==0)){Ve=Mn(ye,3,"Could not decode alpha data.");break e}Ct<_e.j&&(Ft=_e.j-Ct,Ct=_e.j,e(!(1&Ft)),_e.O+=ye.R*Ft,_e.N+=ye.B*(Ft>>1),_e.W+=ye.B*(Ft>>1),_e.F!=null&&(_e.J+=_e.width*Ft)),Ct<rn&&(_e.O+=_e.v,_e.N+=_e.v>>1,_e.W+=_e.v>>1,_e.F!=null&&(_e.J+=_e.v),_e.ka=Ct-_e.j,_e.U=_e.va-_e.v,_e.T=rn-Ct,Ve=_e.put(_e))}je+1!=ye.Ic||en||(i(ye.sa,ye.ta-Ke,it,mt+16*ye.R,Ke),i(ye.qa,ye.ra-ot,st,He+8*ye.B,ot),i(ye.Ha,ye.Ia-ot,sn,Kt+8*ye.B,ot))}if(!Ve)return Mn(Ae,6,"Output aborted.")}return 1})(m,S)),S.bc!=null&&S.bc(S),E&=1}return E?(m.cb=0,E):0}function Ir(m,S,E,M,G){G=m[S+E+32*M]+(G>>3),m[S+E+32*M]=-256&G?0>G?0:255:G}function Fs(m,S,E,M,G,J){Ir(m,S,0,E,M+G),Ir(m,S,1,E,M+J),Ir(m,S,2,E,M-J),Ir(m,S,3,E,M-G)}function or(m){return(20091*m>>16)+m}function Fi(m,S,E,M){var G,J=0,Y=o(16);for(G=0;4>G;++G){var X=m[S+0]+m[S+8],te=m[S+0]-m[S+8],oe=(35468*m[S+4]>>16)-or(m[S+12]),ve=or(m[S+4])+(35468*m[S+12]>>16);Y[J+0]=X+ve,Y[J+1]=te+oe,Y[J+2]=te-oe,Y[J+3]=X-ve,J+=4,S++}for(G=J=0;4>G;++G)X=(m=Y[J+0]+4)+Y[J+8],te=m-Y[J+8],oe=(35468*Y[J+4]>>16)-or(Y[J+12]),Ir(E,M,0,0,X+(ve=or(Y[J+4])+(35468*Y[J+12]>>16))),Ir(E,M,1,0,te+oe),Ir(E,M,2,0,te-oe),Ir(E,M,3,0,X-ve),J++,M+=32}function Ro(m,S,E,M){var G=m[S+0]+4,J=35468*m[S+4]>>16,Y=or(m[S+4]),X=35468*m[S+1]>>16;Fs(E,M,0,G+Y,m=or(m[S+1]),X),Fs(E,M,1,G+J,m,X),Fs(E,M,2,G-J,m,X),Fs(E,M,3,G-Y,m,X)}function Au(m,S,E,M,G){Fi(m,S,E,M),G&&Fi(m,S+16,E,M+4)}function Lo(m,S,E,M){Aa(m,S+0,E,M,1),Aa(m,S+32,E,M+128,1)}function pa(m,S,E,M){var G;for(m=m[S+0]+4,G=0;4>G;++G)for(S=0;4>S;++S)Ir(E,M,S,G,m)}function Pl(m,S,E,M){m[S+0]&&Ur(m,S+0,E,M),m[S+16]&&Ur(m,S+16,E,M+4),m[S+32]&&Ur(m,S+32,E,M+128),m[S+48]&&Ur(m,S+48,E,M+128+4)}function Tu(m,S,E,M){var G,J=o(16);for(G=0;4>G;++G){var Y=m[S+0+G]+m[S+12+G],X=m[S+4+G]+m[S+8+G],te=m[S+4+G]-m[S+8+G],oe=m[S+0+G]-m[S+12+G];J[0+G]=Y+X,J[8+G]=Y-X,J[4+G]=oe+te,J[12+G]=oe-te}for(G=0;4>G;++G)Y=(m=J[0+4*G]+3)+J[3+4*G],X=J[1+4*G]+J[2+4*G],te=J[1+4*G]-J[2+4*G],oe=m-J[3+4*G],E[M+0]=Y+X>>3,E[M+16]=oe+te>>3,E[M+32]=Y-X>>3,E[M+48]=oe-te>>3,M+=64}function xs(m,S,E){var M,G=S-32,J=Hi,Y=255-m[G-1];for(M=0;M<E;++M){var X,te=J,oe=Y+m[S-1];for(X=0;X<E;++X)m[S+X]=te[oe+m[G+X]];S+=32}}function Hc(m,S){xs(m,S,4)}function Eu(m,S){xs(m,S,8)}function Cu(m,S){xs(m,S,16)}function ns(m,S){var E;for(E=0;16>E;++E)i(m,S+32*E,m,S-32,16)}function Do(m,S){var E;for(E=16;0<E;--E)a(m,S,m[S-1],16),S+=32}function Mo(m,S,E){var M;for(M=0;16>M;++M)a(S,E+32*M,m,16)}function Ya(m,S){var E,M=16;for(E=0;16>E;++E)M+=m[S-1+32*E]+m[S+E-32];Mo(M>>5,m,S)}function Pn(m,S){var E,M=8;for(E=0;16>E;++E)M+=m[S-1+32*E];Mo(M>>4,m,S)}function Ul(m,S){var E,M=8;for(E=0;16>E;++E)M+=m[S+E-32];Mo(M>>4,m,S)}function Po(m,S){Mo(128,m,S)}function Tt(m,S,E){return m+2*S+E+2>>2}function ma(m,S){var E,M=S-32;for(M=new Uint8Array([Tt(m[M-1],m[M+0],m[M+1]),Tt(m[M+0],m[M+1],m[M+2]),Tt(m[M+1],m[M+2],m[M+3]),Tt(m[M+2],m[M+3],m[M+4])]),E=0;4>E;++E)i(m,S+32*E,M,0,M.length)}function ku(m,S){var E=m[S-1],M=m[S-1+32],G=m[S-1+64],J=m[S-1+96];Me(m,S+0,16843009*Tt(m[S-1-32],E,M)),Me(m,S+32,16843009*Tt(E,M,G)),Me(m,S+64,16843009*Tt(M,G,J)),Me(m,S+96,16843009*Tt(G,J,J))}function Rr(m,S){var E,M=4;for(E=0;4>E;++E)M+=m[S+E-32]+m[S-1+32*E];for(M>>=3,E=0;4>E;++E)a(m,S+32*E,M,4)}function Ol(m,S){var E=m[S-1+0],M=m[S-1+32],G=m[S-1+64],J=m[S-1-32],Y=m[S+0-32],X=m[S+1-32],te=m[S+2-32],oe=m[S+3-32];m[S+0+96]=Tt(M,G,m[S-1+96]),m[S+1+96]=m[S+0+64]=Tt(E,M,G),m[S+2+96]=m[S+1+64]=m[S+0+32]=Tt(J,E,M),m[S+3+96]=m[S+2+64]=m[S+1+32]=m[S+0+0]=Tt(Y,J,E),m[S+3+64]=m[S+2+32]=m[S+1+0]=Tt(X,Y,J),m[S+3+32]=m[S+2+0]=Tt(te,X,Y),m[S+3+0]=Tt(oe,te,X)}function ga(m,S){var E=m[S+1-32],M=m[S+2-32],G=m[S+3-32],J=m[S+4-32],Y=m[S+5-32],X=m[S+6-32],te=m[S+7-32];m[S+0+0]=Tt(m[S+0-32],E,M),m[S+1+0]=m[S+0+32]=Tt(E,M,G),m[S+2+0]=m[S+1+32]=m[S+0+64]=Tt(M,G,J),m[S+3+0]=m[S+2+32]=m[S+1+64]=m[S+0+96]=Tt(G,J,Y),m[S+3+32]=m[S+2+64]=m[S+1+96]=Tt(J,Y,X),m[S+3+64]=m[S+2+96]=Tt(Y,X,te),m[S+3+96]=Tt(X,te,te)}function lr(m,S){var E=m[S-1+0],M=m[S-1+32],G=m[S-1+64],J=m[S-1-32],Y=m[S+0-32],X=m[S+1-32],te=m[S+2-32],oe=m[S+3-32];m[S+0+0]=m[S+1+64]=J+Y+1>>1,m[S+1+0]=m[S+2+64]=Y+X+1>>1,m[S+2+0]=m[S+3+64]=X+te+1>>1,m[S+3+0]=te+oe+1>>1,m[S+0+96]=Tt(G,M,E),m[S+0+64]=Tt(M,E,J),m[S+0+32]=m[S+1+96]=Tt(E,J,Y),m[S+1+32]=m[S+2+96]=Tt(J,Y,X),m[S+2+32]=m[S+3+96]=Tt(Y,X,te),m[S+3+32]=Tt(X,te,oe)}function Wa(m,S){var E=m[S+0-32],M=m[S+1-32],G=m[S+2-32],J=m[S+3-32],Y=m[S+4-32],X=m[S+5-32],te=m[S+6-32],oe=m[S+7-32];m[S+0+0]=E+M+1>>1,m[S+1+0]=m[S+0+64]=M+G+1>>1,m[S+2+0]=m[S+1+64]=G+J+1>>1,m[S+3+0]=m[S+2+64]=J+Y+1>>1,m[S+0+32]=Tt(E,M,G),m[S+1+32]=m[S+0+96]=Tt(M,G,J),m[S+2+32]=m[S+1+96]=Tt(G,J,Y),m[S+3+32]=m[S+2+96]=Tt(J,Y,X),m[S+3+64]=Tt(Y,X,te),m[S+3+96]=Tt(X,te,oe)}function Ka(m,S){var E=m[S-1+0],M=m[S-1+32],G=m[S-1+64],J=m[S-1+96];m[S+0+0]=E+M+1>>1,m[S+2+0]=m[S+0+32]=M+G+1>>1,m[S+2+32]=m[S+0+64]=G+J+1>>1,m[S+1+0]=Tt(E,M,G),m[S+3+0]=m[S+1+32]=Tt(M,G,J),m[S+3+32]=m[S+1+64]=Tt(G,J,J),m[S+3+64]=m[S+2+64]=m[S+0+96]=m[S+1+96]=m[S+2+96]=m[S+3+96]=J}function ws(m,S){var E=m[S-1+0],M=m[S-1+32],G=m[S-1+64],J=m[S-1+96],Y=m[S-1-32],X=m[S+0-32],te=m[S+1-32],oe=m[S+2-32];m[S+0+0]=m[S+2+32]=E+Y+1>>1,m[S+0+32]=m[S+2+64]=M+E+1>>1,m[S+0+64]=m[S+2+96]=G+M+1>>1,m[S+0+96]=J+G+1>>1,m[S+3+0]=Tt(X,te,oe),m[S+2+0]=Tt(Y,X,te),m[S+1+0]=m[S+3+32]=Tt(E,Y,X),m[S+1+32]=m[S+3+64]=Tt(M,E,Y),m[S+1+64]=m[S+3+96]=Tt(G,M,E),m[S+1+96]=Tt(J,G,M)}function jl(m,S){var E;for(E=0;8>E;++E)i(m,S+32*E,m,S-32,8)}function va(m,S){var E;for(E=0;8>E;++E)a(m,S,m[S-1],8),S+=32}function ya(m,S,E){var M;for(M=0;8>M;++M)a(S,E+32*M,m,8)}function is(m,S){var E,M=8;for(E=0;8>E;++E)M+=m[S+E-32]+m[S-1+32*E];ya(M>>4,m,S)}function Uo(m,S){var E,M=4;for(E=0;8>E;++E)M+=m[S+E-32];ya(M>>3,m,S)}function ba(m,S){var E,M=4;for(E=0;8>E;++E)M+=m[S-1+32*E];ya(M>>3,m,S)}function bi(m,S){ya(128,m,S)}function Lr(m,S,E){var M=m[S-E],G=m[S+0],J=3*(G-M)+$s[1020+m[S-2*E]-m[S+E]],Y=Xl[112+(J+4>>3)];m[S-E]=Hi[255+M+Xl[112+(J+3>>3)]],m[S+0]=Hi[255+G-Y]}function Xa(m,S,E,M){var G=m[S+0],J=m[S+E];return Ii[255+m[S-2*E]-m[S-E]]>M||Ii[255+J-G]>M}function xa(m,S,E,M){return 4*Ii[255+m[S-E]-m[S+0]]+Ii[255+m[S-2*E]-m[S+E]]<=M}function Iu(m,S,E,M,G){var J=m[S-3*E],Y=m[S-2*E],X=m[S-E],te=m[S+0],oe=m[S+E],ve=m[S+2*E],ke=m[S+3*E];return 4*Ii[255+X-te]+Ii[255+Y-oe]>M?0:Ii[255+m[S-4*E]-J]<=G&&Ii[255+J-Y]<=G&&Ii[255+Y-X]<=G&&Ii[255+ke-ve]<=G&&Ii[255+ve-oe]<=G&&Ii[255+oe-te]<=G}function Oo(m,S,E,M){var G=2*M+1;for(M=0;16>M;++M)xa(m,S+M,E,G)&&Lr(m,S+M,E)}function rs(m,S,E,M){var G=2*M+1;for(M=0;16>M;++M)xa(m,S+M*E,1,G)&&Lr(m,S+M*E,1)}function Dr(m,S,E,M){var G;for(G=3;0<G;--G)Oo(m,S+=4*E,E,M)}function jo(m,S,E,M){var G;for(G=3;0<G;--G)rs(m,S+=4,E,M)}function Bs(m,S,E,M,G,J,Y,X){for(J=2*J+1;0<G--;){if(Iu(m,S,E,J,Y))if(Xa(m,S,E,X))Lr(m,S,E);else{var te=m,oe=S,ve=E,ke=te[oe-2*ve],Ce=te[oe-ve],Ae=te[oe+0],Je=te[oe+ve],je=te[oe+2*ve],ye=27*(Ve=$s[1020+3*(Ae-Ce)+$s[1020+ke-Je]])+63>>7,_e=18*Ve+63>>7,Ve=9*Ve+63>>7;te[oe-3*ve]=Hi[255+te[oe-3*ve]+Ve],te[oe-2*ve]=Hi[255+ke+_e],te[oe-ve]=Hi[255+Ce+ye],te[oe+0]=Hi[255+Ae-ye],te[oe+ve]=Hi[255+Je-_e],te[oe+2*ve]=Hi[255+je-Ve]}S+=M}}function ss(m,S,E,M,G,J,Y,X){for(J=2*J+1;0<G--;){if(Iu(m,S,E,J,Y))if(Xa(m,S,E,X))Lr(m,S,E);else{var te=m,oe=S,ve=E,ke=te[oe-ve],Ce=te[oe+0],Ae=te[oe+ve],Je=Xl[112+((je=3*(Ce-ke))+4>>3)],je=Xl[112+(je+3>>3)],ye=Je+1>>1;te[oe-2*ve]=Hi[255+te[oe-2*ve]+ye],te[oe-ve]=Hi[255+ke+je],te[oe+0]=Hi[255+Ce-Je],te[oe+ve]=Hi[255+Ae-ye]}S+=M}}function Fl(m,S,E,M,G,J){Bs(m,S,E,1,16,M,G,J)}function Qa(m,S,E,M,G,J){Bs(m,S,1,E,16,M,G,J)}function Bl(m,S,E,M,G,J){var Y;for(Y=3;0<Y;--Y)ss(m,S+=4*E,E,1,16,M,G,J)}function Fo(m,S,E,M,G,J){var Y;for(Y=3;0<Y;--Y)ss(m,S+=4,1,E,16,M,G,J)}function Gc(m,S,E,M,G,J,Y,X){Bs(m,S,G,1,8,J,Y,X),Bs(E,M,G,1,8,J,Y,X)}function ql(m,S,E,M,G,J,Y,X){Bs(m,S,1,G,8,J,Y,X),Bs(E,M,1,G,8,J,Y,X)}function zl(m,S,E,M,G,J,Y,X){ss(m,S+4*G,G,1,8,J,Y,X),ss(E,M+4*G,G,1,8,J,Y,X)}function Ru(m,S,E,M,G,J,Y,X){ss(m,S+4,1,G,8,J,Y,X),ss(E,M+4,1,G,8,J,Y,X)}function Za(){this.ba=new vi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new on,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Gl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Lu(){this.ua=0,this.Wa=new ue,this.vb=new ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new re,this.yc=new j}function Vc(){this.xb=this.a=0,this.l=new ko,this.ca=new vi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Lu,this.ab=0,this.gc=l(4,Gl),this.Oc=0}function wa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ko,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function eo(m,S,E,M,G,J,Y){for(m=m==null?0:m[S+0],S=0;S<Y;++S)G[J+S]=m+E[M+S]&255,m=G[J+S]}function Vl(m,S,E,M,G,J,Y){var X;if(m==null)eo(null,null,E,M,G,J,Y);else for(X=0;X<Y;++X)G[J+X]=m[S+X]+E[M+X]&255}function Sa(m,S,E,M,G,J,Y){if(m==null)eo(null,null,E,M,G,J,Y);else{var X,te=m[S+0],oe=te,ve=te;for(X=0;X<Y;++X)oe=ve+(te=m[S+X])-oe,ve=E[M+X]+(-256&oe?0>oe?0:255:oe)&255,oe=te,G[J+X]=ve}}function Bo(m,S,E,M){var G=S.width,J=S.o;if(e(m!=null&&S!=null),0>E||0>=M||E+M>J)return null;if(!m.Cc){if(m.ga==null){var Y;if(m.ga=new wa,(Y=m.ga==null)||(Y=S.width*S.o,e(m.Gb.length==0),m.Gb=o(Y),m.Uc=0,m.Gb==null?Y=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,Y=1),Y=!Y),!Y){Y=m.ga;var X=m.Fa,te=m.P,oe=m.qc,ve=m.mb,ke=m.nb,Ce=te+1,Ae=oe-1,Je=Y.l;if(e(X!=null&&ve!=null&&S!=null),Js[0]=null,Js[1]=eo,Js[2]=Vl,Js[3]=Sa,Y.ca=ve,Y.tb=ke,Y.c=S.width,Y.i=S.height,e(0<Y.c&&0<Y.i),1>=oe)S=0;else if(Y.$a=X[te+0]>>0&3,Y.Z=X[te+0]>>2&3,Y.Lc=X[te+0]>>4&3,te=X[te+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||te)S=0;else if(Je.put=ji,Je.ac=gn,Je.bc=yi,Je.ma=Y,Je.width=S.width,Je.height=S.height,Je.Da=S.Da,Je.v=S.v,Je.va=S.va,Je.j=S.j,Je.o=S.o,Y.$a)e:{e(Y.$a==1),S=Mt();t:for(;;){if(S==null){S=0;break e}if(e(Y!=null),Y.mc=S,S.c=Y.c,S.i=Y.i,S.l=Y.l,S.l.ma=Y,S.l.width=Y.c,S.l.height=Y.i,S.a=0,ie(S.m,X,Ce,Ae),!$t(Y.c,Y.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&ci(S.s)?(Y.ic=1,X=S.c*S.i,S.Ta=null,S.Ua=0,S.V=o(X),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(Y.ic=0,S=Dn(S,Y.c)),!S))break t;S=1;break e}Y.mc=null,S=0}else S=Ae>=Y.c*Y.i;Y=!S}if(Y)return null;m.ga.Lc!=1?m.Ga=0:M=J-E}e(m.ga!=null),e(E+M<=J);e:{if(S=(X=m.ga).c,J=X.l.o,X.$a==0){if(Ce=m.rc,Ae=m.Vc,Je=m.Fa,te=m.P+1+E*S,oe=m.mb,ve=m.nb+E*S,e(te<=m.P+m.qc),X.Z!=0)for(e(Js[X.Z]!=null),Y=0;Y<M;++Y)Js[X.Z](Ce,Ae,Je,te,oe,ve,S),Ce=oe,Ae=ve,ve+=S,te+=S;else for(Y=0;Y<M;++Y)i(oe,ve,Je,te,S),Ce=oe,Ae=ve,ve+=S,te+=S;m.rc=Ce,m.Vc=Ae}else{if(e(X.mc!=null),S=E+M,e((Y=X.mc)!=null),e(S<=Y.i),Y.C>=S)S=1;else if(X.ic||Ee(),X.ic){X=Y.V,Ce=Y.Ba,Ae=Y.c;var je=Y.i,ye=(Je=1,te=Y.$/Ae,oe=Y.$%Ae,ve=Y.m,ke=Y.s,Y.$),_e=Ae*je,Ve=Ae*S,Ke=ke.wc,He=ye<Ve?Ln(ke,oe,te):null;e(ye<=_e),e(S<=je),e(ci(ke));t:for(;;){for(;!ve.h&&ye<Ve;){if(oe&Ke||(He=Ln(ke,oe,te)),e(He!=null),se(ve),256>(je=Ei(He.G[0],He.H[0],ve)))X[Ce+ye]=je,++ye,++oe>=Ae&&(oe=0,++te<=S&&!(te%16)&&wn(Y,te));else{if(!(280>je)){Je=0;break t}je=sr(je-256,ve);var ot,it=Ei(He.G[4],He.H[4],ve);if(se(ve),!(ye>=(it=ar(Ae,it=sr(it,ve)))&&_e-ye>=je)){Je=0;break t}for(ot=0;ot<je;++ot)X[Ce+ye+ot]=X[Ce+ye+ot-it];for(ye+=je,oe+=je;oe>=Ae;)oe-=Ae,++te<=S&&!(te%16)&&wn(Y,te);ye<Ve&&oe&Ke&&(He=Ln(ke,oe,te))}e(ve.h==K(ve))}wn(Y,te>S?S:te);break t}!Je||ve.h&&ye<_e?(Je=0,Y.a=ve.h?5:3):Y.$=ye,S=Je}else S=di(Y,Y.V,Y.Ba,Y.c,Y.i,S,Bn);if(!S){M=0;break e}}E+M>=J&&(m.Cc=1),M=1}if(!M)return null;if(m.Cc&&((M=m.ga)!=null&&(M.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+E*G}function A(m,S,E,M,G,J){for(;0<G--;){var Y,X=m,te=S+(E?1:0),oe=m,ve=S+(E?0:3);for(Y=0;Y<M;++Y){var ke=oe[ve+4*Y];ke!=255&&(ke*=32897,X[te+4*Y+0]=X[te+4*Y+0]*ke>>23,X[te+4*Y+1]=X[te+4*Y+1]*ke>>23,X[te+4*Y+2]=X[te+4*Y+2]*ke>>23)}S+=J}}function V(m,S,E,M,G){for(;0<M--;){var J;for(J=0;J<E;++J){var Y=m[S+2*J+0],X=15&(oe=m[S+2*J+1]),te=4369*X,oe=(240&oe|oe>>4)*te>>16;m[S+2*J+0]=(240&Y|Y>>4)*te>>16&240|(15&Y|Y<<4)*te>>16>>4&15,m[S+2*J+1]=240&oe|X}S+=G}}function ce(m,S,E,M,G,J,Y,X){var te,oe,ve=255;for(oe=0;oe<G;++oe){for(te=0;te<M;++te){var ke=m[S+te];J[Y+4*te]=ke,ve&=ke}S+=E,Y+=X}return ve!=255}function ge(m,S,E,M,G){var J;for(J=0;J<G;++J)E[M+J]=m[S+J]>>8}function Ee(){Ts=A,zi=V,no=ce,xr=ge}function Be(m,S,E){z[m]=function(M,G,J,Y,X,te,oe,ve,ke,Ce,Ae,Je,je,ye,_e,Ve,Ke){var He,ot=Ke-1>>1,it=X[te+0]|oe[ve+0]<<16,mt=ke[Ce+0]|Ae[Je+0]<<16;e(M!=null);var st=3*it+mt+131074>>2;for(S(M[G+0],255&st,st>>16,je,ye),J!=null&&(st=3*mt+it+131074>>2,S(J[Y+0],255&st,st>>16,_e,Ve)),He=1;He<=ot;++He){var sn=X[te+He]|oe[ve+He]<<16,Kt=ke[Ce+He]|Ae[Je+He]<<16,en=it+sn+mt+Kt+524296,Ft=en+2*(sn+mt)>>3;st=Ft+it>>1,it=(en=en+2*(it+Kt)>>3)+sn>>1,S(M[G+2*He-1],255&st,st>>16,je,ye+(2*He-1)*E),S(M[G+2*He-0],255&it,it>>16,je,ye+(2*He-0)*E),J!=null&&(st=en+mt>>1,it=Ft+Kt>>1,S(J[Y+2*He-1],255&st,st>>16,_e,Ve+(2*He-1)*E),S(J[Y+2*He+0],255&it,it>>16,_e,Ve+(2*He+0)*E)),it=sn,mt=Kt}1&Ke||(st=3*it+mt+131074>>2,S(M[G+Ke-1],255&st,st>>16,je,ye+(Ke-1)*E),J!=null&&(st=3*mt+it+131074>>2,S(J[Y+Ke-1],255&st,st>>16,_e,Ve+(Ke-1)*E)))}}function Qe(){Li[ju]=so,Li[Gi]=Wo,Li[Fu]=Wc,Li[jr]=Gu,Li[Ql]=Ra,Li[$o]=Es,Li[Ca]=La,Li[Zl]=Wo,Li[Bu]=Gu,Li[Jo]=Ra,Li[qu]=Es}function lt(m){return m&-16384?0>m?0:255:m>>Vu}function bt(m,S){return lt((19077*m>>8)+(26149*S>>8)-14234)}function Ut(m,S,E){return lt((19077*m>>8)-(6419*S>>8)-(13320*E>>8)+8708)}function jt(m,S){return lt((19077*m>>8)+(33050*S>>8)-17685)}function Zt(m,S,E,M,G){M[G+0]=bt(m,E),M[G+1]=Ut(m,S,E),M[G+2]=jt(m,S)}function Un(m,S,E,M,G){M[G+0]=jt(m,S),M[G+1]=Ut(m,S,E),M[G+2]=bt(m,E)}function qn(m,S,E,M,G){var J=Ut(m,S,E);S=J<<3&224|jt(m,S)>>3,M[G+0]=248&bt(m,E)|J>>5,M[G+1]=S}function Qn(m,S,E,M,G){var J=240&jt(m,S)|15;M[G+0]=240&bt(m,E)|Ut(m,S,E)>>4,M[G+1]=J}function ki(m,S,E,M,G){M[G+0]=255,Zt(m,S,E,M,G+1)}function fi(m,S,E,M,G){Un(m,S,E,M,G),M[G+3]=255}function Bi(m,S,E,M,G){Zt(m,S,E,M,G),M[G+3]=255}function vr(m,S){return 0>m?0:m>S?S:m}function qs(m,S,E){z[m]=function(M,G,J,Y,X,te,oe,ve,ke){for(var Ce=ve+(-2&ke)*E;ve!=Ce;)S(M[G+0],J[Y+0],X[te+0],oe,ve),S(M[G+1],J[Y+0],X[te+0],oe,ve+E),G+=2,++Y,++te,ve+=2*E;1&ke&&S(M[G+0],J[Y+0],X[te+0],oe,ve)}}function Du(m,S,E){return E==0?m==0?S==0?6:5:S==0?4:0:E}function qo(m,S,E,M,G){switch(m>>>30){case 3:Aa(S,E,M,G,0);break;case 2:Vs(S,E,M,G);break;case 1:Ur(S,E,M,G)}}function zo(m,S){var E,M,G=S.M,J=S.Nb,Y=m.oc,X=m.pc+40,te=m.oc,oe=m.pc+584,ve=m.oc,ke=m.pc+600;for(E=0;16>E;++E)Y[X+32*E-1]=129;for(E=0;8>E;++E)te[oe+32*E-1]=129,ve[ke+32*E-1]=129;for(0<G?Y[X-1-32]=te[oe-1-32]=ve[ke-1-32]=129:(a(Y,X-32-1,127,21),a(te,oe-32-1,127,9),a(ve,ke-32-1,127,9)),M=0;M<m.za;++M){var Ce=S.ya[S.aa+M];if(0<M){for(E=-1;16>E;++E)i(Y,X+32*E-4,Y,X+32*E+12,4);for(E=-1;8>E;++E)i(te,oe+32*E-4,te,oe+32*E+4,4),i(ve,ke+32*E-4,ve,ke+32*E+4,4)}var Ae=m.Gd,Je=m.Hd+M,je=Ce.ad,ye=Ce.Hc;if(0<G&&(i(Y,X-32,Ae[Je].y,0,16),i(te,oe-32,Ae[Je].f,0,8),i(ve,ke-32,Ae[Je].ea,0,8)),Ce.Za){var _e=Y,Ve=X-32+16;for(0<G&&(M>=m.za-1?a(_e,Ve,Ae[Je].y[15],4):i(_e,Ve,Ae[Je+1].y,0,4)),E=0;4>E;E++)_e[Ve+128+E]=_e[Ve+256+E]=_e[Ve+384+E]=_e[Ve+0+E];for(E=0;16>E;++E,ye<<=2)_e=Y,Ve=X+ei[E],Vn[Ce.Ob[E]](_e,Ve),qo(ye,je,16*+E,_e,Ve)}else if(_e=Du(M,G,Ce.Ob[0]),er[_e](Y,X),ye!=0)for(E=0;16>E;++E,ye<<=2)qo(ye,je,16*+E,Y,X+ei[E]);for(E=Ce.Gc,_e=Du(M,G,Ce.Dd),us[_e](te,oe),us[_e](ve,ke),ye=je,_e=te,Ve=oe,255&(Ce=E>>0)&&(170&Ce?_s(ye,256,_e,Ve):Zi(ye,256,_e,Ve)),Ce=ve,ye=ke,255&(E>>=8)&&(170&E?_s(je,320,Ce,ye):Zi(je,320,Ce,ye)),G<m.Ub-1&&(i(Ae[Je].y,0,Y,X+480,16),i(Ae[Je].f,0,te,oe+224,8),i(Ae[Je].ea,0,ve,ke+224,8)),E=8*J*m.B,Ae=m.sa,Je=m.ta+16*M+16*J*m.R,je=m.qa,Ce=m.ra+8*M+E,ye=m.Ha,_e=m.Ia+8*M+E,E=0;16>E;++E)i(Ae,Je+E*m.R,Y,X+32*E,16);for(E=0;8>E;++E)i(je,Ce+E*m.B,te,oe+32*E,8),i(ye,_e+E*m.B,ve,ke+32*E,8)}}function Ss(m,S,E,M,G,J,Y,X,te){var oe=[0],ve=[0],ke=0,Ce=te!=null?te.kd:0,Ae=te??new Hl;if(m==null||12>E)return 7;Ae.data=m,Ae.w=S,Ae.ha=E,S=[S],E=[E],Ae.gb=[Ae.gb];e:{var Je=S,je=E,ye=Ae.gb;if(e(m!=null),e(je!=null),e(ye!=null),ye[0]=0,12<=je[0]&&!n(m,Je[0],"RIFF")){if(n(m,Je[0]+8,"WEBP")){ye=3;break e}var _e=Ue(m,Je[0]+4);if(12>_e||4294967286<_e){ye=3;break e}if(Ce&&_e>je[0]-8){ye=7;break e}ye[0]=_e,Je[0]+=12,je[0]-=12}ye=0}if(ye!=0)return ye;for(_e=0<Ae.gb[0],E=E[0];;){e:{var Ve=m;je=S,ye=E;var Ke=oe,He=ve,ot=Je=[0];if((st=ke=[ke])[0]=0,8>ye[0])ye=7;else{if(!n(Ve,je[0],"VP8X")){if(Ue(Ve,je[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var it=Ue(Ve,je[0]+8),mt=1+Pe(Ve,je[0]+12);if(2147483648<=mt*(Ve=1+Pe(Ve,je[0]+15))){ye=3;break e}ot!=null&&(ot[0]=it),Ke!=null&&(Ke[0]=mt),He!=null&&(He[0]=Ve),je[0]+=18,ye[0]-=18,st[0]=1}ye=0}}if(ke=ke[0],Je=Je[0],ye!=0)return ye;if(je=!!(2&Je),!_e&&ke)return 3;if(J!=null&&(J[0]=!!(16&Je)),Y!=null&&(Y[0]=je),X!=null&&(X[0]=0),Y=oe[0],Je=ve[0],ke&&je&&te==null){ye=0;break}if(4>E){ye=7;break}if(_e&&ke||!_e&&!ke&&!n(m,S[0],"ALPH")){E=[E],Ae.na=[Ae.na],Ae.P=[Ae.P],Ae.Sa=[Ae.Sa];e:{it=m,ye=S,_e=E;var st=Ae.gb;Ke=Ae.na,He=Ae.P,ot=Ae.Sa,mt=22,e(it!=null),e(_e!=null),Ve=ye[0];var sn=_e[0];for(e(Ke!=null),e(ot!=null),Ke[0]=null,He[0]=null,ot[0]=0;;){if(ye[0]=Ve,_e[0]=sn,8>sn){ye=7;break e}var Kt=Ue(it,Ve+4);if(4294967286<Kt){ye=3;break e}var en=8+Kt+1&-2;if(mt+=en,0<st&&mt>st){ye=3;break e}if(!n(it,Ve,"VP8 ")||!n(it,Ve,"VP8L")){ye=0;break e}if(sn[0]<en){ye=7;break e}n(it,Ve,"ALPH")||(Ke[0]=it,He[0]=Ve+8,ot[0]=Kt),Ve+=en,sn-=en}}if(E=E[0],Ae.na=Ae.na[0],Ae.P=Ae.P[0],Ae.Sa=Ae.Sa[0],ye!=0)break}E=[E],Ae.Ja=[Ae.Ja],Ae.xa=[Ae.xa];e:if(st=m,ye=S,_e=E,Ke=Ae.gb[0],He=Ae.Ja,ot=Ae.xa,it=ye[0],Ve=!n(st,it,"VP8 "),mt=!n(st,it,"VP8L"),e(st!=null),e(_e!=null),e(He!=null),e(ot!=null),8>_e[0])ye=7;else{if(Ve||mt){if(st=Ue(st,it+4),12<=Ke&&st>Ke-12){ye=3;break e}if(Ce&&st>_e[0]-8){ye=7;break e}He[0]=st,ye[0]+=8,_e[0]-=8,ot[0]=mt}else ot[0]=5<=_e[0]&&st[it+0]==47&&!(st[it+4]>>5),He[0]=_e[0];ye=0}if(E=E[0],Ae.Ja=Ae.Ja[0],Ae.xa=Ae.xa[0],S=S[0],ye!=0)break;if(4294967286<Ae.Ja)return 3;if(X==null||je||(X[0]=Ae.xa?2:1),Y=[Y],Je=[Je],Ae.xa){if(5>E){ye=7;break}X=Y,Ce=Je,je=J,m==null||5>E?m=0:5<=E&&m[S+0]==47&&!(m[S+4]>>5)?(_e=[0],st=[0],Ke=[0],ie(He=new D,m,S,E),wt(He,_e,st,Ke)?(X!=null&&(X[0]=_e[0]),Ce!=null&&(Ce[0]=st[0]),je!=null&&(je[0]=Ke[0]),m=1):m=0):m=0}else{if(10>E){ye=7;break}X=Je,m==null||10>E||!kr(m,S+3,E-3)?m=0:(Ce=m[S+0]|m[S+1]<<8|m[S+2]<<16,je=16383&(m[S+7]<<8|m[S+6]),m=16383&(m[S+9]<<8|m[S+8]),1&Ce||3<(Ce>>1&7)||!(Ce>>4&1)||Ce>>5>=Ae.Ja||!je||!m?m=0:(Y&&(Y[0]=je),X&&(X[0]=m),m=1))}if(!m||(Y=Y[0],Je=Je[0],ke&&(oe[0]!=Y||ve[0]!=Je)))return 3;te!=null&&(te[0]=Ae,te.offset=S-te.w,e(4294967286>S-te.w),e(te.offset==te.ha-E));break}return ye==0||ye==7&&ke&&te==null?(J!=null&&(J[0]|=Ae.na!=null&&0<Ae.na.length),M!=null&&(M[0]=Y),G!=null&&(G[0]=Je),0):ye}function zs(m,S,E){var M=S.width,G=S.height,J=0,Y=0,X=M,te=G;if(S.Da=m!=null&&0<m.Da,S.Da&&(X=m.cd,te=m.bd,J=m.v,Y=m.j,11>E||(J&=-2,Y&=-2),0>J||0>Y||0>=X||0>=te||J+X>M||Y+te>G))return 0;if(S.v=J,S.j=Y,S.va=J+X,S.o=Y+te,S.U=X,S.T=te,S.da=m!=null&&0<m.da,S.da){if(!yt(X,te,E=[m.ib],J=[m.hb]))return 0;S.ib=E[0],S.hb=J[0]}return S.ob=m!=null&&m.ob,S.Kb=m==null||!m.Sd,S.da&&(S.ob=S.ib<3*M/4&&S.hb<3*G/4,S.Kb=0),1}function $l(m){if(m==null)return 2;if(11>m.S){var S=m.f.RGBA;S.fb+=(m.height-1)*S.A,S.A=-S.A}else S=m.f.kb,m=m.height,S.O+=(m-1)*S.fa,S.fa=-S.fa,S.N+=(m-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(m-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(m-1)*S.lb,S.lb=-S.lb);return 0}function Hs(m,S,E,M){if(M==null||0>=m||0>=S)return 2;if(E!=null){if(E.Da){var G=E.cd,J=E.bd,Y=-2&E.v,X=-2&E.j;if(0>Y||0>X||0>=G||0>=J||Y+G>m||X+J>S)return 2;m=G,S=J}if(E.da){if(!yt(m,S,G=[E.ib],J=[E.hb]))return 2;m=G[0],S=J[0]}}M.width=m,M.height=S;e:{var te=M.width,oe=M.height;if(m=M.S,0>=te||0>=oe||!(m>=ju&&13>m))m=2;else{if(0>=M.Rd&&M.sd==null){Y=J=G=S=0;var ve=(X=te*Ju[m])*oe;if(11>m||(J=(oe+1)/2*(S=(te+1)/2),m==12&&(Y=(G=te)*oe)),(oe=o(ve+2*J+Y))==null){m=1;break e}M.sd=oe,11>m?((te=M.f.RGBA).eb=oe,te.fb=0,te.A=X,te.size=ve):((te=M.f.kb).y=oe,te.O=0,te.fa=X,te.Fd=ve,te.f=oe,te.N=0+ve,te.Ab=S,te.Cd=J,te.ea=oe,te.W=0+ve+J,te.Db=S,te.Ed=J,m==12&&(te.F=oe,te.J=0+ve+2*J),te.Tc=Y,te.lb=G)}if(S=1,G=M.S,J=M.width,Y=M.height,G>=ju&&13>G)if(11>G)m=M.f.RGBA,S&=(X=Math.abs(m.A))*(Y-1)+J<=m.size,S&=X>=J*Ju[G],S&=m.eb!=null;else{m=M.f.kb,X=(J+1)/2,ve=(Y+1)/2,te=Math.abs(m.fa),oe=Math.abs(m.Ab);var ke=Math.abs(m.Db),Ce=Math.abs(m.lb),Ae=Ce*(Y-1)+J;S&=te*(Y-1)+J<=m.Fd,S&=oe*(ve-1)+X<=m.Cd,S=(S&=ke*(ve-1)+X<=m.Ed)&te>=J&oe>=X&ke>=X,S&=m.y!=null,S&=m.f!=null,S&=m.ea!=null,G==12&&(S&=Ce>=J,S&=Ae<=m.Tc,S&=m.F!=null)}else S=0;m=S?0:2}}return m!=0||E!=null&&E.fd&&(m=$l(M)),m}var Ki=64,to=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_a=24,Na=32,Ho=8,Xi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ze("Predictor0","PredictorAdd0"),z.Predictor0=function(){return 4278190080},z.Predictor1=function(m){return m},z.Predictor2=function(m,S,E){return S[E+0]},z.Predictor3=function(m,S,E){return S[E+1]},z.Predictor4=function(m,S,E){return S[E-1]},z.Predictor5=function(m,S,E){return tt(tt(m,S[E+1]),S[E+0])},z.Predictor6=function(m,S,E){return tt(m,S[E-1])},z.Predictor7=function(m,S,E){return tt(m,S[E+0])},z.Predictor8=function(m,S,E){return tt(S[E-1],S[E+0])},z.Predictor9=function(m,S,E){return tt(S[E+0],S[E+1])},z.Predictor10=function(m,S,E){return tt(tt(m,S[E-1]),tt(S[E+0],S[E+1]))},z.Predictor11=function(m,S,E){var M=S[E+0];return 0>=Ge(M>>24&255,m>>24&255,(S=S[E-1])>>24&255)+Ge(M>>16&255,m>>16&255,S>>16&255)+Ge(M>>8&255,m>>8&255,S>>8&255)+Ge(255&M,255&m,255&S)?M:m},z.Predictor12=function(m,S,E){var M=S[E+0];return(Xe((m>>24&255)+(M>>24&255)-((S=S[E-1])>>24&255))<<24|Xe((m>>16&255)+(M>>16&255)-(S>>16&255))<<16|Xe((m>>8&255)+(M>>8&255)-(S>>8&255))<<8|Xe((255&m)+(255&M)-(255&S)))>>>0},z.Predictor13=function(m,S,E){var M=S[E-1];return(Se((m=tt(m,S[E+0]))>>24&255,M>>24&255)<<24|Se(m>>16&255,M>>16&255)<<16|Se(m>>8&255,M>>8&255)<<8|Se(m>>0&255,M>>0&255))>>>0};var Mu=z.PredictorAdd0;z.PredictorAdd1=ct,Ze("Predictor2","PredictorAdd2"),Ze("Predictor3","PredictorAdd3"),Ze("Predictor4","PredictorAdd4"),Ze("Predictor5","PredictorAdd5"),Ze("Predictor6","PredictorAdd6"),Ze("Predictor7","PredictorAdd7"),Ze("Predictor8","PredictorAdd8"),Ze("Predictor9","PredictorAdd9"),Ze("Predictor10","PredictorAdd10"),Ze("Predictor11","PredictorAdd11"),Ze("Predictor12","PredictorAdd12"),Ze("Predictor13","PredictorAdd13");var Jl=z.PredictorAdd2;At("ColorIndexInverseTransform","MapARGB","32b",(function(m){return m>>8&255}),(function(m){return m})),At("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(m){return m}),(function(m){return m>>8&255}));var Pu,as=z.ColorIndexInverseTransform,Yl=z.MapARGB,$c=z.VP8LColorIndexInverseTransformAlpha,Qi=z.MapAlpha,Mr=z.VP8LPredictorsAdd=[];Mr.length=16,(z.VP8LPredictors=[]).length=16,(z.VP8LPredictorsAdd_C=[]).length=16,(z.VP8LPredictors_C=[]).length=16;var yr,Pr,Gs,os,ls,Go,qi,Aa,Vs,_s,Ur,Zi,Or,Ta,Ea,ur,Vo,br,Ns,Sn,_n,Zn,ri,As,Ts,zi,no,xr,io=o(511),Uu=o(2041),Wl=o(225),Kl=o(767),Ou=0,$s=Uu,Xl=Wl,Hi=Kl,Ii=io,ju=0,Gi=1,Fu=2,jr=3,Ql=4,$o=5,Ca=6,Zl=7,Bu=8,Jo=9,qu=10,Fr=[2,3,7],Yo=[3,3,11],ro=[280,256,256,256,40],zu=[0,1,1,1,0],eu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Br=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ka=8,zr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Hr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],wr=null,ef=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Jc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Hu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],tf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ri=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Cn=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Wt=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],er=[],Vn=[],us=[],Ia=1,Yc=2,Js=[],Li=[];Be("UpsampleRgbLinePair",Zt,3),Be("UpsampleBgrLinePair",Un,3),Be("UpsampleRgbaLinePair",Bi,4),Be("UpsampleBgraLinePair",fi,4),Be("UpsampleArgbLinePair",ki,4),Be("UpsampleRgba4444LinePair",Qn,2),Be("UpsampleRgb565LinePair",qn,2);var so=z.UpsampleRgbLinePair,Wc=z.UpsampleBgrLinePair,Wo=z.UpsampleRgbaLinePair,Gu=z.UpsampleBgraLinePair,Ra=z.UpsampleArgbLinePair,Es=z.UpsampleRgba4444LinePair,La=z.UpsampleRgb565LinePair,Gr=16,Ko=1<<Gr-1,ao=-227,Da=482,Vu=6,Ma=0,Di=o(256),$u=o(256),nf=o(256),Ph=o(256),Uh=o(Da-ao),Oh=o(Da-ao);qs("YuvToRgbRow",Zt,3),qs("YuvToBgrRow",Un,3),qs("YuvToRgbaRow",Bi,4),qs("YuvToBgraRow",fi,4),qs("YuvToArgbRow",ki,4),qs("YuvToRgba4444Row",Qn,2),qs("YuvToRgb565Row",qn,2);var ei=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xo=[0,2,8],tu=[8,7,6,4,4,2,2,2,1,1,1,1],nu=1;this.WebPDecodeRGBA=function(m,S,E,M,G){var J=Gi,Y=new Za,X=new vi;Y.ba=X,X.S=J,X.width=[X.width],X.height=[X.height];var te=X.width,oe=X.height,ve=new Yi;if(ve==null||m==null)var ke=2;else e(ve!=null),ke=Ss(m,S,E,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(ke!=0?te=0:(te!=null&&(te[0]=ve.width[0]),oe!=null&&(oe[0]=ve.height[0]),te=1),te){X.width=X.width[0],X.height=X.height[0],M!=null&&(M[0]=X.width),G!=null&&(G[0]=X.height);e:{if(M=new ko,(G=new Hl).data=m,G.w=S,G.ha=E,G.kd=1,S=[0],e(G!=null),((m=Ss(G.data,G.w,G.ha,null,null,null,S,null,G))==0||m==7)&&S[0]&&(m=4),(S=m)==0){if(e(Y!=null),M.data=G.data,M.w=G.w+G.offset,M.ha=G.ha-G.offset,M.put=ji,M.ac=gn,M.bc=yi,M.ma=Y,G.xa){if((m=Mt())==null){Y=1;break e}if((function(Ce,Ae){var Je=[0],je=[0],ye=[0];t:for(;;){if(Ce==null)return 0;if(Ae==null)return Ce.a=2,0;if(Ce.l=Ae,Ce.a=0,ie(Ce.m,Ae.data,Ae.w,Ae.ha),!wt(Ce.m,Je,je,ye)){Ce.a=3;break t}if(Ce.xb=Yc,Ae.width=Je[0],Ae.height=je[0],!$t(Je[0],je[0],1,Ce,null))break t;return 1}return e(Ce.a!=0),0})(m,M)){if(M=(S=Hs(M.width,M.height,Y.Oa,Y.ba))==0){t:{M=m;n:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((E=M.l)!=null),e((G=E.ma)!=null),M.xb!=0){if(M.ca=G.ba,M.tb=G.tb,e(M.ca!=null),!zs(G.Oa,E,jr)){M.a=2;break n}if(!Dn(M,E.width)||E.da)break n;if((E.da||Yt(M.ca.S))&&Ee(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&Ee()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!et(M.s.vb,M.s.Wa.Xa)){M.a=1;break n}M.xb=0}if(!di(M,M.V,M.Ba,M.c,M.i,E.o,vs))break n;G.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(S=m.a)}else S=m.a}else{if((m=new Io)==null){Y=1;break e}if(m.Fa=G.na,m.P=G.P,m.qc=G.Sa,Wi(m,M)){if((S=Hs(M.width,M.height,Y.Oa,Y.ba))==0){if(m.Aa=0,E=Y.Oa,e((G=m)!=null),E!=null){if(0<(te=0>(te=E.Md)?0:100<te?255:255*te/100)){for(oe=ve=0;4>oe;++oe)12>(ke=G.pb[oe]).lc&&(ke.ia=te*tu[0>ke.lc?0:ke.lc]>>3),ve|=ke.ia;ve&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=E.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}Ml(m,M)||(S=m.a)}}else S=m.a}S==0&&Y.Oa!=null&&Y.Oa.fd&&(S=$l(Y.ba))}Y=S}J=Y!=0?null:11>J?X.f.RGBA.eb:X.f.kb.y}else J=null;return J};var Ju=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(z,ee){for(var le="",B=0;B<4;B++)le+=String.fromCharCode(z[ee++]);return le}function v(z,ee){return(z[ee+0]<<0|z[ee+1]<<8|z[ee+2]<<16)>>>0}function b(z,ee){return(z[ee+0]<<0|z[ee+1]<<8|z[ee+2]<<16|z[ee+3]<<24)>>>0}new d;var w=[0],_=[0],T=[],k=new d,R=t,C=(function(z,ee){var le={},B=0,j=!1,ne=0,re=0;if(le.frames=[],!(function(H,K,Z,se){for(var de=0;de<se;de++)if(H[K+de]!=Z.charCodeAt(de))return!0;return!1})(z,ee,"RIFF",4)){var be,P;for(b(z,ee+=4),ee+=8;ee<z.length;){var $=h(z,ee),ie=b(z,ee+=4);ee+=4;var ae=ie+(1&ie);switch($){case"VP8 ":case"VP8L":le.frames[B]===void 0&&(le.frames[B]={}),(D=le.frames[B]).src_off=j?re:ee-8,D.src_size=ne+ie+8,B++,j&&(j=!1,ne=0,re=0);break;case"VP8X":(D=le.header={}).feature_flags=z[ee];var he=ee+4;D.canvas_width=1+v(z,he),he+=3,D.canvas_height=1+v(z,he),he+=3;break;case"ALPH":j=!0,ne=ae+8,re=ee-8;break;case"ANIM":(D=le.header).bgcolor=b(z,ee),he=ee+4,D.loop_count=(be=z)[(P=he)+0]<<0|be[P+1]<<8,he+=2;break;case"ANMF":var Ne,D;(D=le.frames[B]={}).offset_x=2*v(z,ee),ee+=3,D.offset_y=2*v(z,ee),ee+=3,D.width=1+v(z,ee),ee+=3,D.height=1+v(z,ee),ee+=3,D.duration=v(z,ee),ee+=3,Ne=z[ee++],D.dispose=1&Ne,D.blend=Ne>>1&1}$!="ANMF"&&(ee+=ae)}return le}})(R,0);C.response=R,C.rgbaoutput=!0,C.dataurl=!1;var I=C.header?C.header:null,L=C.frames?C.frames:null;if(I){I.loop_counter=I.loop_count,w=[I.canvas_height],_=[I.canvas_width];for(var O=0;O<L.length&&L[O].blend!=0;O++);}var q=L[0],W=k.WebPDecodeRGBA(R,q.src_off,q.src_size,_,w);q.rgba=W,q.imgwidth=_[0],q.imgheight=w[0];for(var F=0;F<_[0]*w[0]*4;F++)T[F]=W[F];return this.width=_,this.height=w,this.data=T,this}(function(t){var e=function(){return typeof X0=="function"},n=function(w,_,T,k){var R=4,C=l;switch(k){case t.image_compression.FAST:R=1,C=o;break;case t.image_compression.MEDIUM:R=6,C=c;break;case t.image_compression.SLOW:R=9,C=d}w=i(w,_,T,C);var I=X0(w,{level:R});return t.__addimage__.arrayBufferToBinaryString(I)},i=function(w,_,T,k){for(var R,C,I,L=w.length/_,O=new Uint8Array(w.length+L),q=v(),W=0;W<L;W+=1){if(I=W*_,R=w.subarray(I,I+_),k)O.set(k(R,T,C),I+W);else{for(var F,z=q.length,ee=[];F<z;F+=1)ee[F]=q[F](R,T,C);var le=b(ee.concat());O.set(ee[le],I+W)}C=R}return O},a=function(w){var _=Array.apply([],w);return _.unshift(0),_},o=function(w,_){var T,k=[],R=w.length;k[0]=1;for(var C=0;C<R;C+=1)T=w[C-_]||0,k[C+1]=w[C]-T+256&255;return k},l=function(w,_,T){var k,R=[],C=w.length;R[0]=2;for(var I=0;I<C;I+=1)k=T&&T[I]||0,R[I+1]=w[I]-k+256&255;return R},c=function(w,_,T){var k,R,C=[],I=w.length;C[0]=3;for(var L=0;L<I;L+=1)k=w[L-_]||0,R=T&&T[L]||0,C[L+1]=w[L]+256-(k+R>>>1)&255;return C},d=function(w,_,T){var k,R,C,I,L=[],O=w.length;L[0]=4;for(var q=0;q<O;q+=1)k=w[q-_]||0,R=T&&T[q]||0,C=T&&T[q-_]||0,I=h(k,R,C),L[q+1]=w[q]-I+256&255;return L},h=function(w,_,T){if(w===_&&_===T)return w;var k=Math.abs(_-T),R=Math.abs(w-T),C=Math.abs(w+_-T-T);return k<=R&&k<=C?w:R<=C?_:T},v=function(){return[a,o,l,c,d]},b=function(w){var _=w.map((function(T){return T.reduce((function(k,R){return k+Math.abs(R)}),0)}));return _.indexOf(Math.min.apply(null,_))};t.processPNG=function(w,_,T,k){var R,C,I,L,O,q,W,F,z,ee,le,B,j,ne,re,be=this.decode.FLATE_DECODE,P="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(I=new iI(w)).imgData,C=I.bits,R=I.colorSpace,O=I.colors,[4,6].indexOf(I.colorType)!==-1){if(I.bits===8){z=(F=I.pixelBitlength==32?new Uint32Array(I.decodePixels().buffer):I.pixelBitlength==16?new Uint16Array(I.decodePixels().buffer):new Uint8Array(I.decodePixels().buffer)).length,le=new Uint8Array(z*I.colors),ee=new Uint8Array(z);var $,ie=I.pixelBitlength-I.bits;for(ne=0,re=0;ne<z;ne++){for(j=F[ne],$=0;$<ie;)le[re++]=j>>>$&255,$+=I.bits;ee[ne]=j>>>$&255}}if(I.bits===16){z=(F=new Uint32Array(I.decodePixels().buffer)).length,le=new Uint8Array(z*(32/I.pixelBitlength)*I.colors),ee=new Uint8Array(z*(32/I.pixelBitlength)),B=I.colors>1,ne=0,re=0;for(var ae=0;ne<z;)j=F[ne++],le[re++]=j>>>0&255,B&&(le[re++]=j>>>16&255,j=F[ne++],le[re++]=j>>>0&255),ee[ae++]=j>>>16&255;C=8}k!==t.image_compression.NONE&&e()?(w=n(le,I.width*I.colors,I.colors,k),W=n(ee,I.width,1,k)):(w=le,W=ee,be=void 0)}if(I.colorType===3&&(R=this.color_spaces.INDEXED,q=I.palette,I.transparency.indexed)){var he=I.transparency.indexed,Ne=0;for(ne=0,z=he.length;ne<z;++ne)Ne+=he[ne];if((Ne/=255)===z-1&&he.indexOf(0)!==-1)L=[he.indexOf(0)];else if(Ne!==z){for(F=I.decodePixels(),ee=new Uint8Array(F.length),ne=0,z=F.length;ne<z;ne++)ee[ne]=he[F[ne]];W=n(ee,I.width,1)}}var D=(function(H){var K;switch(H){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K})(k);return be===this.decode.FLATE_DECODE&&(P="/Predictor "+D+" "),P+="/Colors "+O+" /BitsPerComponent "+C+" /Columns "+I.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(W&&this.__addimage__.isArrayBuffer(W)||this.__addimage__.isArrayBufferView(W))&&(W=this.__addimage__.arrayBufferToBinaryString(W)),{alias:T,data:w,index:_,filter:be,decodeParameters:P,transparency:L,palette:q,sMask:W,predictor:D,width:I.width,height:I.height,bitsPerComponent:C,colorSpace:R}}}})(Et.API),(function(t){t.processGIF89A=function(e,n,i,a){var o=new rI(e),l=o.width,c=o.height,d=[];o.decodeAndBlitFrameRGBA(0,d);var h={data:d,width:l,height:c},v=new g0(100).encode(h,100);return t.processJPEG.call(this,v,n,i,a)},t.processGIF87A=t.processGIF89A})(Et.API),na.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},na.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Rn.log("bit decode error:"+n)}},na.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var d=this.palette[o>>7-c&1];this.data[l+4*c]=d.blue,this.data[l+4*c+1]=d.green,this.data[l+4*c+2]=d.red,this.data[l+4*c+3]=255}n!==0&&(this.pos+=4-n)}},na.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<t;a++){var o=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*a*4,c=o>>4,d=15&o,h=this.palette[c];if(this.data[l]=h.blue,this.data[l+1]=h.green,this.data[l+2]=h.red,this.data[l+3]=255,2*a+1>=this.width)break;h=this.palette[d],this.data[l+4]=h.blue,this.data[l+4+1]=h.green,this.data[l+4+2]=h.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},na.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(a<this.palette.length){var l=this.palette[a];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},na.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,d=(o>>10&e)/e*255|0,h=o>>15?255:0,v=i*this.width*4+4*a;this.data[v]=d,this.data[v+1]=c,this.data[v+2]=l,this.data[v+3]=h}this.pos+=t}},na.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,d=(l>>5&n)/n*255|0,h=(l>>11)/e*255|0,v=a*this.width*4+4*o;this.data[v]=h,this.data[v+1]=d,this.data[v+2]=c,this.data[v+3]=255}this.pos+=t}},na.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=o,this.data[l+1]=a,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},na.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*n;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=i,this.data[c+3]=l}},na.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,i,a){var o=new na(e,!1),l=o.width,c=o.height,d={data:o.getData(),width:l,height:c},h=new g0(100).encode(d,100);return t.processJPEG.call(this,h,n,i,a)}})(Et.API),S2.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,i,a){var o=new S2(e),l=o.width,c=o.height,d={data:o.getData(),width:l,height:c},h=new g0(100).encode(d,100);return t.processJPEG.call(this,h,n,i,a)}})(Et.API),Et.API.processRGBA=function(t,e,n){for(var i=t.data,a=i.length,o=new Uint8Array(a/4*3),l=new Uint8Array(a/4),c=0,d=0,h=0;h<a;h+=4){var v=i[h],b=i[h+1],w=i[h+2],_=i[h+3];o[c++]=v,o[c++]=b,o[c++]=w,l[d++]=_}var T=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:T,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Et.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},_c=Et.API,nh=_c.getCharWidthsArray=function(t,e){var n,i,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,d=c.fof?c.fof:1,h=e.kerning?e.kerning:a.metadata.Unicode.kerning,v=h.fof?h.fof:1,b=e.doKerning!==!1,w=0,_=t.length,T=0,k=c[0]||d,R=[];for(n=0;n<_;n++)i=t.charCodeAt(n),typeof a.metadata.widthOfString=="function"?R.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+l*(1e3/o)||0)/1e3):(w=b&&xn(h[i])==="object"&&!isNaN(parseInt(h[i][T],10))?h[i][T]/v:0,R.push((c[i]||k)/d+w)),T=i;return R},y2=_c.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return _c.processArabic&&(t=_c.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,a)/n:nh.apply(this,arguments).reduce((function(o,l){return o+l}),0)},b2=function(t,e,n,i){for(var a=[],o=0,l=t.length,c=0;o!==l&&c+e[o]<n;)c+=e[o],o++;a.push(t.slice(0,o));var d=o;for(c=0;o!==l;)c+e[o]>i&&(a.push(t.slice(d,o)),c=0,d=o),c+=e[o],o++;return d!==o&&a.push(t.slice(d,o)),a},x2=function(t,e,n){n||(n={});var i,a,o,l,c,d,h,v=[],b=[v],w=n.textIndent||0,_=0,T=0,k=t.split(" "),R=nh.apply(this,[" ",n])[0];if(d=n.lineIndent===-1?k[0].length+2:n.lineIndent||0){var C=Array(d).join(" "),I=[];k.map((function(O){(O=O.split(/\s*\n/)).length>1?I=I.concat(O.map((function(q,W){return(W&&q.length?`
`:"")+q}))):I.push(O[0])})),k=I,d=y2.apply(this,[C,n])}for(o=0,l=k.length;o<l;o++){var L=0;if(i=k[o],d&&i[0]==`
`&&(i=i.substr(1),L=1),w+_+(T=(a=nh.apply(this,[i,n])).reduce((function(O,q){return O+q}),0))>e||L){if(T>e){for(c=b2.apply(this,[i,a,e-(w+_),e]),v.push(c.shift()),v=[c.pop()];c.length;)b.push([c.shift()]);T=a.slice(i.length-(v[0]?v[0].length:0)).reduce((function(O,q){return O+q}),0)}else v=[i];b.push(v),w=T+d,_=R}else v.push(i),w+=_+T,_=R}return h=d?function(O,q){return(q?C:"")+O.join(" ")}:function(O){return O.join(" ")},b.map(h)},_c.splitTextToSize=function(t,e,n){var i,a=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var b=this.internal.getFont(v.fontName,v.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/a;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=n.lineIndent;var c,d,h=[];for(c=0,d=i.length;c<d;c++)h=h.concat(x2.apply(this,[i[c],l,o]));return h},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},a=0;a<e.length;a++)n[e[a]]="0123456789abcdef"[a],i["0123456789abcdef"[a]]=e[a];var o=function(b){return"0x"+parseInt(b,10).toString(16)},l=t.__fontmetrics__.compress=function(b){var w,_,T,k,R=["{"];for(var C in b){if(w=b[C],isNaN(parseInt(C,10))?_="'"+C+"'":(C=parseInt(C,10),_=(_=o(C).slice(2)).slice(0,-1)+i[_.slice(-1)]),typeof w=="number")w<0?(T=o(w).slice(3),k="-"):(T=o(w).slice(2),k=""),T=k+T.slice(0,-1)+i[T.slice(-1)];else{if(xn(w)!=="object")throw new Error("Don't know what to do with value type "+xn(w)+".");T=l(w)}R.push(_+T)}return R.push("}"),R.join("")},c=t.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,_,T,k,R={},C=1,I=R,L=[],O="",q="",W=b.length-1,F=1;F<W;F+=1)(k=b[F])=="'"?w?(T=w.join(""),w=void 0):w=[]:w?w.push(k):k=="{"?(L.push([I,T]),I={},T=void 0):k=="}"?((_=L.pop())[0][_[1]]=I,T=void 0,I=_[0]):k=="-"?C=-1:T===void 0?n.hasOwnProperty(k)?(O+=n[k],T=parseInt(O,16)*C,C=1,O=""):O+=k:n.hasOwnProperty(k)?(q+=n[k],I[T]=parseInt(q,16)*C,C=1,T=void 0,q=""):q+=k;return R},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},v={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(b){var w=b.font,_=v.Unicode[w.postScriptName];_&&(w.metadata.Unicode={},w.metadata.Unicode.widths=_.widths,w.metadata.Unicode.kerning=_.kerning);var T=h.Unicode[w.postScriptName];T&&(w.metadata.Unicode.encoding=T,w.encoding=T.codePages[0])}])})(Et.API),(function(t){var e=function(n){for(var i=n.length,a=new Uint8Array(i),o=0;o<i;o++)a[o]=n.charCodeAt(o);return a};t.API.events.push(["addFont",function(n){var i=void 0,a=n.font,o=n.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(i=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(Od(c)),l.metadata=t.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,i)}}])})(Et),(function(t){function e(){return(Dt.canvg?Promise.resolve(Dt.canvg):V0(()=>import("./index.es-D7XfXuhd.js"),__vite__mapDeps([0,1,2]))).catch((function(n){return Promise.reject(new Error("Could not load canvg: "+n))})).then((function(n){return n.default?n.default:n}))}Et.API.addSvgAsImage=function(n,i,a,o,l,c,d,h){if(isNaN(i)||isNaN(a))throw Rn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(l))throw Rn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=o,v.height=l;var b=v.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,v.width,v.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return e().then((function(T){return T.fromString(b,n,w)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(T){return T.render(w)})).then((function(){_.addImage(v.toDataURL("image/jpeg",1),i,a,o,l,d,h)}))}})(),Et.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(e,n);return this},Et.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,a,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),d=[],h=0,v=0,b=0;function w(T,k){var R,C=!1;for(R=0;R<T.length;R+=1)T[R]===k&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var _=c.length;for(b=0;b<_;b+=1)n[c[b]].value=n[c[b]].defaultValue,n[c[b]].explicitSet=!1}if(xn(t)==="object"){for(a in t)if(o=t[a],w(c,a)&&o!==void 0){if(n[a].type==="boolean"&&typeof o=="boolean")n[a].value=o;else if(n[a].type==="name"&&w(n[a].valueSet,o))n[a].value=o;else if(n[a].type==="integer"&&Number.isInteger(o))n[a].value=o;else if(n[a].type==="array"){for(h=0;h<o.length;h+=1)if(i=!0,o[h].length===1&&typeof o[h][0]=="number")d.push(String(o[h]-1));else if(o[h].length>1){for(v=0;v<o[h].length;v+=1)typeof o[h][v]!="number"&&(i=!1);i===!0&&d.push([o[h][0]-1,o[h][1]-1].join(" "))}n[a].value="["+d.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var T,k=[];for(T in n)n[T].explicitSet===!0&&(n[T].type==="name"?k.push("/"+T+" /"+n[T].value):k.push("/"+T+" "+n[T].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),h=o.length+l.length+c.length+a.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(a+o+l+c+d),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(Et.API),(function(t){var e=t.API,n=e.pdfEscape16=function(o,l){for(var c,d=l.metadata.Unicode.widths,h=["","0","00","000","0000"],v=[""],b=0,w=o.length;b<w;++b){if(c=l.metadata.characterToGlyph(o.charCodeAt(b)),l.metadata.glyIdsUsed.push(c),l.metadata.toUnicode[c]=o.charCodeAt(b),d.indexOf(c)==-1&&(d.push(c),d.push([parseInt(l.metadata.widthOfGlyph(c),10)])),c=="0")return v.join("");c=c.toString(16),v.push(h[4-c.length],c)}return v.join("")},i=function(o){var l,c,d,h,v,b,w;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],b=0,w=(c=Object.keys(o).sort((function(_,T){return _-T}))).length;b<w;b++)l=c[b],d.length>=100&&(v+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(h=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),d.push("<"+l+"><"+h+">"));return d.length&&(v+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(l){var c=l.font,d=l.out,h=l.newObject,v=l.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var b=c.metadata.Unicode.widths,w=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),_="",T=0;T<w.length;T++)_+=String.fromCharCode(w[T]);var k=h();v({data:_,addLength1:!0,objectId:k}),d("endobj");var R=h();v({data:i(c.metadata.toUnicode),addLength1:!0,objectId:R}),d("endobj");var C=h();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+kc(c.fontName)),d("/FontFile2 "+k+" 0 R"),d("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),d("/Flags "+c.metadata.flags),d("/StemV "+c.metadata.stemV),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d(">>"),d("endobj");var I=h();d("<<"),d("/Type /Font"),d("/BaseFont /"+kc(c.fontName)),d("/FontDescriptor "+C+" 0 R"),d("/W "+t.API.PDFObject.convert(b)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+c.encoding+")"),d(">>"),d(">>"),d("endobj"),c.objectNumber=h(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+R+" 0 R"),d("/BaseFont /"+kc(c.fontName)),d("/Encoding /"+c.encoding),d("/DescendantFonts ["+I+" 0 R]"),d(">>"),d("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(l){var c=l.font,d=l.out,h=l.newObject,v=l.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var b=c.metadata.rawData,w="",_=0;_<b.length;_++)w+=String.fromCharCode(b[_]);var T=h();v({data:w,addLength1:!0,objectId:T}),d("endobj");var k=h();v({data:i(c.metadata.toUnicode),addLength1:!0,objectId:k}),d("endobj");var R=h();d("<<"),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d("/StemV "+c.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+T+" 0 R"),d("/Flags 96"),d("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),d("/FontName /"+kc(c.fontName)),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d(">>"),d("endobj"),c.objectNumber=h();for(var C=0;C<c.metadata.hmtx.widths.length;C++)c.metadata.hmtx.widths[C]=parseInt(c.metadata.hmtx.widths[C]*(1e3/c.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+kc(c.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),d("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var l,c=o.text||"",d=o.x,h=o.y,v=o.options||{},b=o.mutex||{},w=b.pdfEscape,_=b.activeFontKey,T=b.fonts,k=_,R="",C=0,I="",L=T[k].encoding;if(T[k].encoding!=="Identity-H")return{text:c,x:d,y:h,options:v,mutex:b};for(I=c,k=_,Array.isArray(c)&&(I=c[0]),C=0;C<I.length;C+=1)T[k].metadata.hasOwnProperty("cmap")&&(l=T[k].metadata.cmap.unicode.codeMap[I[C].charCodeAt(0)]),l||I[C].charCodeAt(0)<256&&T[k].metadata.hasOwnProperty("Unicode")?R+=I[C]:R+="";var O="";return parseInt(k.slice(1))<14||L==="WinAnsiEncoding"?O=w(R,k).split("").map((function(q){return q.charCodeAt(0).toString(16)})).join(""):L==="Identity-H"&&(O=n(R,T[k])),b.isHex=!0,{text:O,x:d,y:h,options:v,mutex:b}};e.events.push(["postProcessText",function(o){var l=o.text||"",c=[],d={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var h=0;for(h=0;h<l.length;h+=1)Array.isArray(l[h])&&l[h].length===3?c.push([a(Object.assign({},d,{text:l[h][0]})).text,l[h][1],l[h][2]]):c.push(a(Object.assign({},d,{text:l[h]})).text);o.text=c}else o.text=a(Object.assign({},d,{text:l})).text}])})(Et),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return e.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Et.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var a,o,l,c,d,h,v,b=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],_=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],T={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,L=0;this.__bidiEngine__={};var O=function(B){var j=B.charCodeAt(),ne=j>>8,re=k[ne];return re!==void 0?b[256*re+(255&j)]:ne===252||ne===253?"AL":C.test(ne)?"L":ne===8?"R":"N"},q=function(B){for(var j,ne=0;ne<B.length;ne++){if((j=O(B.charAt(ne)))==="L")return!1;if(j==="R")return!0}return!1},W=function(B,j,ne,re){var be,P,$,ie,ae=j[re];switch(ae){case"L":case"R":I=!1;break;case"N":case"AN":break;case"EN":I&&(ae="AN");break;case"AL":I=!0,ae="R";break;case"WS":ae="N";break;case"CS":re<1||re+1>=j.length||(be=ne[re-1])!=="EN"&&be!=="AN"||(P=j[re+1])!=="EN"&&P!=="AN"?ae="N":I&&(P="AN"),ae=P===be?P:"N";break;case"ES":ae=(be=re>0?ne[re-1]:"B")==="EN"&&re+1<j.length&&j[re+1]==="EN"?"EN":"N";break;case"ET":if(re>0&&ne[re-1]==="EN"){ae="EN";break}if(I){ae="N";break}for($=re+1,ie=j.length;$<ie&&j[$]==="ET";)$++;ae=$<ie&&j[$]==="EN"?"EN":"N";break;case"NSM":if(l&&!c){for(ie=j.length,$=re+1;$<ie&&j[$]==="NSM";)$++;if($<ie){var he=B[re],Ne=he>=1425&&he<=2303||he===64286;if(be=j[$],Ne&&(be==="R"||be==="AL")){ae="R";break}}}ae=re<1||(be=j[re-1])==="B"?"N":ne[re-1];break;case"B":I=!1,a=!0,ae=L;break;case"S":o=!0,ae="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"BN":ae="N"}return ae},F=function(B,j,ne){var re=B.split("");return ne&&z(re,ne,{hiLevel:L}),re.reverse(),j&&j.reverse(),re.join("")},z=function(B,j,ne){var re,be,P,$,ie,ae=-1,he=B.length,Ne=0,D=[],H=L?_:w,K=[];for(I=!1,a=!1,o=!1,be=0;be<he;be++)K[be]=O(B[be]);for(P=0;P<he;P++){if(ie=Ne,D[P]=W(B,K,D,P),re=240&(Ne=H[ie][T[D[P]]]),Ne&=15,j[P]=$=H[Ne][5],re>0)if(re===16){for(be=ae;be<P;be++)j[be]=1;ae=-1}else ae=-1;if(H[Ne][6])ae===-1&&(ae=P);else if(ae>-1){for(be=ae;be<P;be++)j[be]=$;ae=-1}K[P]==="B"&&(j[P]=0),ne.hiLevel|=$}o&&(function(Z,se,de){for(var fe=0;fe<de;fe++)if(Z[fe]==="S"){se[fe]=L;for(var me=fe-1;me>=0&&Z[me]==="WS";me--)se[me]=L}})(K,j,he)},ee=function(B,j,ne,re,be){if(!(be.hiLevel<B)){if(B===1&&L===1&&!a)return j.reverse(),void(ne&&ne.reverse());for(var P,$,ie,ae,he=j.length,Ne=0;Ne<he;){if(re[Ne]>=B){for(ie=Ne+1;ie<he&&re[ie]>=B;)ie++;for(ae=Ne,$=ie-1;ae<$;ae++,$--)P=j[ae],j[ae]=j[$],j[$]=P,ne&&(P=ne[ae],ne[ae]=ne[$],ne[$]=P);Ne=ie}Ne++}}},le=function(B,j,ne){var re=B.split(""),be={hiLevel:L};return ne||(ne=[]),z(re,ne,be),(function(P,$,ie){if(ie.hiLevel!==0&&v)for(var ae,he=0;he<P.length;he++)$[he]===1&&(ae=R.indexOf(P[he]))>=0&&(P[he]=R[ae+1])})(re,ne,be),ee(2,re,j,ne,be),ee(1,re,j,ne,be),re.join("")};return this.__bidiEngine__.doBidiReorder=function(B,j,ne){if((function(be,P){if(P)for(var $=0;$<be.length;$++)P[$]=$;c===void 0&&(c=q(be)),h===void 0&&(h=q(be))})(B,j),l||!d||h)if(l&&d&&c^h)L=c?1:0,B=F(B,j,ne);else if(!l&&d&&h)L=c?1:0,B=le(B,j,ne),B=F(B,j);else if(!l||c||d||h){if(l&&!d&&c^h)B=F(B,j),c?(L=0,B=le(B,j,ne)):(L=1,B=le(B,j,ne),B=F(B,j));else if(l&&c&&!d&&h)L=1,B=le(B,j,ne),B=F(B,j);else if(!l&&!d&&c^h){var re=v;c?(L=1,B=le(B,j,ne),L=0,v=!1,B=le(B,j,ne),v=re):(L=0,B=le(B,j,ne),B=F(B,j),L=1,v=!1,B=le(B,j,ne),v=re,B=F(B,j))}}else L=0,B=le(B,j,ne);else L=c?1:0,B=le(B,j,ne);return B},this.__bidiEngine__.setOptions=function(B){B&&(l=B.isInputVisual,d=B.isOutputVisual,c=B.isInputRtl,h=B.isOutputRtl,v=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var a=i.text,o=(i.x,i.y,i.options||{}),l=(i.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(l=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?l.push([n.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):l.push([n.doBidiReorder(a[c])]);i.text=l}else i.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])})(Et),Et.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Cl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new bI(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new sI(this.contents),this.head=new oI(this),this.name=new fI(this),this.cmap=new h5(this),this.toUnicode={},this.hhea=new lI(this),this.maxp=new hI(this),this.hmtx=new pI(this),this.post=new cI(this),this.os2=new uI(this),this.loca=new yI(this),this.glyf=new mI(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,i,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,c,d,h;for(h=[],l=0,c=(d=this.bbox).length;l<c;l++)e=d[l],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),(32768&(n=a>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,i){var a,o,l,c;for(l=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/n)||0;return l*(n/1e3)},t.prototype.lineHeight=function(e,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t})();var da,Cl=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,i;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var n,i,a;for(a=[],n=0,i=e.length;0<=i?n<i:n>i;n=0<=i?++n:--n)a.push(this.writeByte(e.charCodeAt(n)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,i,a,o,l,c,d;return e=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),d=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^o)+65536*(255^l)+256*(255^c)+(255^d)+1):72057594037927940*e+281474976710656*n+1099511627776*i+4294967296*a+16777216*o+65536*l+256*c+d},t.prototype.writeLongLong=function(e){var n,i;return n=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,i;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(e){var n,i,a,o;for(o=[],i=0,a=e.length;i<a;i++)n=e[i],o.push(this.writeByte(n));return o},t})(),sI=(function(){var t;function e(n){var i,a,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(n){var i,a,o,l,c,d,h,v,b,w,_,T,k;for(k in _=Object.keys(n).length,d=Math.log(2),b=16*Math.floor(Math.log(_)/d),l=Math.floor(b/d),v=16*_-b,(a=new Cl).writeInt(this.scalarType),a.writeShort(_),a.writeShort(b),a.writeShort(l),a.writeShort(v),o=16*_,h=a.pos+o,c=null,T=[],n)for(w=n[k],a.writeString(k),a.writeInt(t(w)),a.writeInt(h),a.writeInt(w.length),T=T.concat(w),k==="head"&&(c=h),h+=w.length;h%4;)T.push(0),h++;return a.write(T),i=2981146554-t(a.data),a.pos=c+8,a.writeUInt32(i),a.data},t=function(n){var i,a,o,l;for(n=p5.call(n);n.length%4;)n.push(0);for(o=new Cl(n),a=0,i=0,l=n.length;i<l;i=i+=4)a+=o.readUInt32();return 4294967295&a},e})(),aI={}.hasOwnProperty,$a=function(t,e){for(var n in e)aI.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};da=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var oI=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,da),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new Cl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e})(),_2=(function(){function t(e,n){var i,a,o,l,c,d,h,v,b,w,_,T,k,R,C,I,L;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=e.readByte();break;case 4:for(_=e.readUInt16(),w=_/2,e.pos+=6,o=(function(){var O,q;for(q=[],d=O=0;0<=w?O<w:O>w;d=0<=w?++O:--O)q.push(e.readUInt16());return q})(),e.pos+=2,k=(function(){var O,q;for(q=[],d=O=0;0<=w?O<w:O>w;d=0<=w?++O:--O)q.push(e.readUInt16());return q})(),h=(function(){var O,q;for(q=[],d=O=0;0<=w?O<w:O>w;d=0<=w?++O:--O)q.push(e.readUInt16());return q})(),v=(function(){var O,q;for(q=[],d=O=0;0<=w?O<w:O>w;d=0<=w?++O:--O)q.push(e.readUInt16());return q})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var O,q;for(q=[],d=O=0;0<=a?O<a:O>a;d=0<=a?++O:--O)q.push(e.readUInt16());return q})(),d=C=0,L=o.length;C<L;d=++C)for(R=o[d],i=I=T=k[d];T<=R?I<=R:I>=R;i=T<=R?++I:--I)v[d]===0?l=i+h[d]:(l=c[v[d]/2+(i-T)-(w-d)]||0)!==0&&(l+=h[d]),this.codeMap[i]=65535&l}e.pos=b}return t.encode=function(e,n){var i,a,o,l,c,d,h,v,b,w,_,T,k,R,C,I,L,O,q,W,F,z,ee,le,B,j,ne,re,be,P,$,ie,ae,he,Ne,D,H,K,Z,se,de,fe,me,Me,we,Pe;switch(re=new Cl,l=Object.keys(e).sort((function(Ue,et){return Ue-et})),n){case"macroman":for(k=0,R=(function(){var Ue=[];for(T=0;T<256;++T)Ue.push(0);return Ue})(),I={0:0},o={},be=0,ae=l.length;be<ae;be++)I[me=e[a=l[be]]]==null&&(I[me]=++k),o[a]={old:e[a],new:I[e[a]]},R[a]=I[e[a]];return re.writeUInt16(1),re.writeUInt16(0),re.writeUInt32(12),re.writeUInt16(0),re.writeUInt16(262),re.writeUInt16(0),re.write(R),{charMap:o,subtable:re.data,maxGlyphID:k+1};case"unicode":for(j=[],b=[],L=0,I={},i={},C=h=null,P=0,he=l.length;P<he;P++)I[q=e[a=l[P]]]==null&&(I[q]=++L),i[a]={old:q,new:I[q]},c=I[q]-a,C!=null&&c===h||(C&&b.push(C),j.push(a),h=c),C=a;for(C&&b.push(C),b.push(65535),j.push(65535),le=2*(ee=j.length),z=2*Math.pow(Math.log(ee)/Math.LN2,2),w=Math.log(z/2)/Math.LN2,F=2*ee-z,d=[],W=[],_=[],T=$=0,Ne=j.length;$<Ne;T=++$){if(B=j[T],v=b[T],B===65535){d.push(0),W.push(0);break}if(B-(ne=i[B].new)>=32768)for(d.push(0),W.push(2*(_.length+ee-T)),a=ie=B;B<=v?ie<=v:ie>=v;a=B<=v?++ie:--ie)_.push(i[a].new);else d.push(ne-B),W.push(0)}for(re.writeUInt16(3),re.writeUInt16(1),re.writeUInt32(12),re.writeUInt16(4),re.writeUInt16(16+8*ee+2*_.length),re.writeUInt16(0),re.writeUInt16(le),re.writeUInt16(z),re.writeUInt16(w),re.writeUInt16(F),de=0,D=b.length;de<D;de++)a=b[de],re.writeUInt16(a);for(re.writeUInt16(0),fe=0,H=j.length;fe<H;fe++)a=j[fe],re.writeUInt16(a);for(Me=0,K=d.length;Me<K;Me++)c=d[Me],re.writeUInt16(c);for(we=0,Z=W.length;we<Z;we++)O=W[we],re.writeUInt16(O);for(Pe=0,se=_.length;Pe<se;Pe++)k=_[Pe],re.writeUInt16(k);return{charMap:i,subtable:re.data,maxGlyphID:L+1}}},t})(),h5=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,da),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,a,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)i=new _2(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var a,o;return i==null&&(i="macroman"),a=_2.encode(n,i),(o=new Cl).writeUInt16(0),o.writeUInt16(1),a.table=o.data.concat(a.subtable),a},e})(),lI=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,da),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),uI=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,da),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var i,a;for(a=[],i=0;i<10;++i)a.push(n.readByte());return a})(),this.charRange=(function(){var i,a;for(a=[],i=0;i<4;++i)a.push(n.readInt());return a})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var i,a;for(a=[],i=0;i<2;i=++i)a.push(n.readInt());return a})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),cI=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,da),e.prototype.tag="post",e.prototype.parse=function(n){var i,a,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var l;for(a=n.readUInt16(),this.glyphNameIndex=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)i=n.readByte(),o.push(this.names.push(n.readString(i)));return o;case 151552:return a=n.readUInt16(),this.offsets=n.read(a);case 196608:break;case 262144:return this.map=(function(){var c,d,h;for(h=[],l=c=0,d=this.file.maxp.numGlyphs;0<=d?c<d:c>d;l=0<=d?++c:--c)h.push(n.readUInt32());return h}).call(this)}},e})(),dI=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},fI=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,da),e.prototype.tag="name",e.prototype.parse=function(n){var i,a,o,l,c,d,h,v,b,w,_;for(n.pos=this.offset,n.readShort(),i=n.readShort(),d=n.readShort(),a=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)a.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+d+n.readShort()});for(h={},l=b=0,w=a.length;b<w;l=++b)o=a[l],n.pos=o.offset,v=n.readString(o.length),c=new dI(v,o),h[_=o.nameID]==null&&(h[_]=[]),h[o.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e})(),hI=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,da),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),pI=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,da),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,a,o,l,c,d,h;for(n.pos=this.offset,this.metrics=[],i=0,d=this.file.hhea.numberOfMetrics;0<=d?i<d:i>d;i=0<=d?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var v,b;for(b=[],i=v=0;0<=o?v<o:v>o;i=0<=o?++v:--v)b.push(n.readInt16());return b})(),this.widths=(function(){var v,b,w,_;for(_=[],v=0,b=(w=this.metrics).length;v<b;v++)l=w[v],_.push(l.advance);return _}).call(this),a=this.widths[this.widths.length-1],h=[],i=c=0;0<=o?c<o:c>o;i=0<=o?++c:--c)h.push(this.widths.push(a));return h},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),p5=[].slice,mI=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,da),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,a,o,l,c,d,h,v,b,w;return n in this.cache?this.cache[n]:(l=this.file.loca,i=this.file.contents,a=l.indexOf(n),(o=l.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+a,c=(d=new Cl(i.read(o))).readShort(),v=d.readShort(),w=d.readShort(),h=d.readShort(),b=d.readShort(),this.cache[n]=c===-1?new vI(d,v,w,h,b):new gI(d,c,v,w,h,b),this.cache[n]))},e.prototype.encode=function(n,i,a){var o,l,c,d,h;for(c=[],l=[],d=0,h=i.length;d<h;d++)o=n[i[d]],l.push(c.length),o&&(c=c.concat(o.encode(a)));return l.push(c.length),{table:c,offsets:l}},e})(),gI=(function(){function t(e,n,i,a,o,l){this.raw=e,this.numberOfContours=n,this.xMin=i,this.yMin=a,this.xMax=o,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),vI=(function(){function t(e,n,i,a,o){var l,c;for(this.raw=e,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;c=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&c;)l.pos+=1&c?4:2,128&c?l.pos+=8:64&c?l.pos+=4:8&c&&(l.pos+=2)}return t.prototype.encode=function(){var e,n,i;for(n=new Cl(p5.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),yI=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return $a(e,da),e.prototype.tag="loca",e.prototype.parse=function(n){var i,a;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=2)l.push(2*n.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],a=0,o=this.length;a<o;a+=4)l.push(n.readUInt32());return l}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var a=new Uint32Array(this.offsets.length),o=0,l=0,c=0;c<a.length;++c)if(a[c]=o,l<i.length&&i[l]==c){++l,a[c]=o;var d=this.offsets[c],h=this.offsets[c+1]-d;h>0&&(o+=h)}for(var v=new Array(4*a.length),b=0;b<a.length;++b)v[4*b+3]=255&a[b],v[4*b+2]=(65280&a[b])>>8,v[4*b+1]=(16711680&a[b])>>16,v[4*b]=(4278190080&a[b])>>24;return v},e})(),bI=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,i,a,o;for(n in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)i=o[n],e[n]=a[i];return e},t.prototype.glyphsFor=function(e){var n,i,a,o,l,c,d;for(a={},l=0,c=e.length;l<c;l++)a[o=e[l]]=this.font.glyf.glyphFor(o);for(o in n=[],a)(i=a[o])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(o in d=this.glyphsFor(n))i=d[o],a[o]=i;return a},t.prototype.encode=function(e,n){var i,a,o,l,c,d,h,v,b,w,_,T,k,R,C;for(a in i=h5.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),_={0:0},C=i.charMap)_[(d=C[a]).old]=d.new;for(T in w=i.maxGlyphID,l)T in _||(_[T]=w++);return v=(function(I){var L,O;for(L in O={},I)O[I[L]]=L;return O})(_),b=Object.keys(v).sort((function(I,L){return I-L})),k=(function(){var I,L,O;for(O=[],I=0,L=b.length;I<L;I++)c=b[I],O.push(v[c]);return O})(),o=this.font.glyf.encode(l,k,_),h=this.font.loca.encode(o.offsets,k),R={cmap:this.font.cmap.raw(),glyf:o.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},t})();Et.API.PDFObject=(function(){var t;function e(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},e.convert=function(n){var i,a,o,l;if(Array.isArray(n))return"["+(function(){var c,d,h;for(h=[],c=0,d=n.length;c<d;c++)i=n[c],h.push(e.convert(i));return h})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in o=["<<"],n)l=n[a],o.push("/"+a+" "+e.convert(l));return o.push(">>"),o.join(`
`)}return""+n},e})();const xI=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Xk,AcroFormAppearance:ft,AcroFormButton:Oi,AcroFormCheckBox:Bd,AcroFormChoiceField:yu,AcroFormComboBox:xu,AcroFormEditBox:jd,AcroFormListBox:bu,AcroFormPasswordField:qd,AcroFormPushButton:Fd,AcroFormRadioButton:wu,AcroFormTextField:Al,GState:Qd,ShadingPattern:wl,TilingPattern:vu,default:Et,jsPDF:Et},Symbol.toStringTag,{value:"Module"}));var sh={exports:{}};const wI=Ux(xI);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.1
 *
 *               Copyright (c) 2023 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var N2=sh.exports,A2;function SI(){return A2||(A2=1,(function(t,e){(function(i,a){t.exports=a((function(){try{return wI}catch{}})())})(typeof globalThis<"u"?globalThis:typeof N2<"u"?N2:typeof window<"u"?window:typeof self<"u"?self:Ox,function(n){return(function(){var i={662:(function(c,d){var h=this&&this.__extends||(function(){var w=function(_,T){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,R){k.__proto__=R}||function(k,R){for(var C in R)Object.prototype.hasOwnProperty.call(R,C)&&(k[C]=R[C])},w(_,T)};return function(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");w(_,T);function k(){this.constructor=_}_.prototype=T===null?Object.create(T):(k.prototype=T.prototype,new k)}})();Object.defineProperty(d,"__esModule",{value:!0}),d.CellHookData=d.HookData=void 0;var v=(function(){function w(_,T,k){this.table=T,this.pageNumber=T.pageNumber,this.pageCount=this.pageNumber,this.settings=T.settings,this.cursor=k,this.doc=_.getDocument()}return w})();d.HookData=v;var b=(function(w){h(_,w);function _(T,k,R,C,I,L){var O=w.call(this,T,k,L)||this;return O.cell=R,O.row=C,O.column=I,O.section=C.section,O}return _})(v);d.CellHookData=b}),790:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0});var v=h(148),b=h(938),w=h(323),_=h(587),T=h(49),k=h(858);function R(C){C.API.autoTable=function(){for(var I=[],L=0;L<arguments.length;L++)I[L]=arguments[L];var O;I.length===1?O=I[0]:(console.error("Use of deprecated autoTable initiation"),O=I[2]||{},O.columns=I[0],O.body=I[1]);var q=(0,_.parseInput)(this,O),W=(0,k.createTable)(this,q);return(0,T.drawTable)(this,W),this},C.API.lastAutoTable=!1,C.API.previousAutoTable=!1,C.API.autoTable.previous=!1,C.API.autoTableText=function(I,L,O,q){(0,b.default)(I,L,O,q,this)},C.API.autoTableSetDefaults=function(I){return w.DocHandler.setDefaults(I,this),this},C.autoTableSetDefaults=function(I,L){w.DocHandler.setDefaults(I,L)},C.API.autoTableHtmlToJson=function(I,L){if(L===void 0&&(L=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var O=new w.DocHandler(this),q=(0,v.parseHtml)(O,I,window,L,!1),W=q.head,F=q.body,z=W[0].map(function(ee){return ee.content});return{columns:z,rows:F,data:F}},C.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var I=this.lastAutoTable;return I&&I.finalY?I.finalY:0},C.API.autoTableAddPageContent=function(I){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),C.API.autoTable.globalDefaults||(C.API.autoTable.globalDefaults={}),C.API.autoTable.globalDefaults.addPageContent=I,this},C.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}d.default=R}),938:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0});function h(v,b,w,_,T){_=_||{};var k=1.15,R=T.internal.scaleFactor,C=T.internal.getFontSize()/R,I=T.getLineHeightFactor?T.getLineHeightFactor():k,L=C*I,O=/\r\n|\r|\n/g,q="",W=1;if((_.valign==="middle"||_.valign==="bottom"||_.halign==="center"||_.halign==="right")&&(q=typeof v=="string"?v.split(O):v,W=q.length||1),w+=C*(2-k),_.valign==="middle"?w-=W/2*L:_.valign==="bottom"&&(w-=W*L),_.halign==="center"||_.halign==="right"){var F=C;if(_.halign==="center"&&(F*=.5),q&&W>=1){for(var z=0;z<q.length;z++)T.text(q[z],b-T.getStringUnitWidth(q[z])*F,w),w+=L;return T}b-=T.getStringUnitWidth(v)*F}return _.halign==="justify"?T.text(v,b,w,{maxWidth:_.maxWidth||100,align:"justify"}):T.text(v,b,w),T}d.default=h}),200:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.getPageAvailableWidth=d.parseSpacing=d.getFillStyle=d.addTableBorder=d.getStringWidth=void 0;function h(T,k,R){R.applyStyles(k,!0);var C=Array.isArray(T)?T:[T],I=C.map(function(L){return R.getTextWidth(L)}).reduce(function(L,O){return Math.max(L,O)},0);return I}d.getStringWidth=h;function v(T,k,R,C){var I=k.settings.tableLineWidth,L=k.settings.tableLineColor;T.applyStyles({lineWidth:I,lineColor:L});var O=b(I,!1);O&&T.rect(R.x,R.y,k.getWidth(T.pageSize().width),C.y-R.y,O)}d.addTableBorder=v;function b(T,k){var R=T>0,C=k||k===0;return R&&C?"DF":R?"S":C?"F":null}d.getFillStyle=b;function w(T,k){var R,C,I,L;if(T=T||k,Array.isArray(T)){if(T.length>=4)return{top:T[0],right:T[1],bottom:T[2],left:T[3]};if(T.length===3)return{top:T[0],right:T[1],bottom:T[2],left:T[1]};if(T.length===2)return{top:T[0],right:T[1],bottom:T[0],left:T[1]};T.length===1?T=T[0]:T=k}return typeof T=="object"?(typeof T.vertical=="number"&&(T.top=T.vertical,T.bottom=T.vertical),typeof T.horizontal=="number"&&(T.right=T.horizontal,T.left=T.horizontal),{left:(R=T.left)!==null&&R!==void 0?R:k,top:(C=T.top)!==null&&C!==void 0?C:k,right:(I=T.right)!==null&&I!==void 0?I:k,bottom:(L=T.bottom)!==null&&L!==void 0?L:k}):(typeof T!="number"&&(T=k),{top:T,right:T,bottom:T,left:T})}d.parseSpacing=w;function _(T,k){var R=w(k.settings.margin,0);return T.pageSize().width-(R.left+R.right)}d.getPageAvailableWidth=_}),913:(function(c,d){var h=this&&this.__extends||(function(){var _=function(T,k){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,C){R.__proto__=C}||function(R,C){for(var I in C)Object.prototype.hasOwnProperty.call(C,I)&&(R[I]=C[I])},_(T,k)};return function(T,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");_(T,k);function R(){this.constructor=T}T.prototype=k===null?Object.create(k):(R.prototype=k.prototype,new R)}})();Object.defineProperty(d,"__esModule",{value:!0}),d.getTheme=d.defaultStyles=d.HtmlRowInput=void 0;var v=(function(_){h(T,_);function T(k){var R=_.call(this)||this;return R._element=k,R}return T})(Array);d.HtmlRowInput=v;function b(_){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/_,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}d.defaultStyles=b;function w(_){var T={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return T[_]}d.getTheme=w}),259:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.parseCss=void 0;var v=h(200);function b(R,C,I,L,O){var q={},W=1.3333333333333333,F=_(C,function(ae){return O.getComputedStyle(ae).backgroundColor});F!=null&&(q.fillColor=F);var z=_(C,function(ae){return O.getComputedStyle(ae).color});z!=null&&(q.textColor=z);var ee=k(L,I);ee&&(q.cellPadding=ee);var le="borderTopColor",B=W*I,j=L.borderTopWidth;if(L.borderBottomWidth===j&&L.borderRightWidth===j&&L.borderLeftWidth===j){var ne=(parseFloat(j)||0)/B;ne&&(q.lineWidth=ne)}else q.lineWidth={top:(parseFloat(L.borderTopWidth)||0)/B,right:(parseFloat(L.borderRightWidth)||0)/B,bottom:(parseFloat(L.borderBottomWidth)||0)/B,left:(parseFloat(L.borderLeftWidth)||0)/B},q.lineWidth.top||(q.lineWidth.right?le="borderRightColor":q.lineWidth.bottom?le="borderBottomColor":q.lineWidth.left&&(le="borderLeftColor"));console.log(q.lineWidth);var re=_(C,function(ae){return O.getComputedStyle(ae)[le]});re!=null&&(q.lineColor=re);var be=["left","right","center","justify"];be.indexOf(L.textAlign)!==-1&&(q.halign=L.textAlign),be=["middle","bottom","top"],be.indexOf(L.verticalAlign)!==-1&&(q.valign=L.verticalAlign);var P=parseInt(L.fontSize||"");isNaN(P)||(q.fontSize=P/W);var $=w(L);$&&(q.fontStyle=$);var ie=(L.fontFamily||"").toLowerCase();return R.indexOf(ie)!==-1&&(q.font=ie),q}d.parseCss=b;function w(R){var C="";return(R.fontWeight==="bold"||R.fontWeight==="bolder"||parseInt(R.fontWeight)>=700)&&(C="bold"),(R.fontStyle==="italic"||R.fontStyle==="oblique")&&(C+="italic"),C}function _(R,C){var I=T(R,C);if(!I)return null;var L=I.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!L||!Array.isArray(L))return null;var O=[parseInt(L[1]),parseInt(L[2]),parseInt(L[3])],q=parseInt(L[4]);return q===0||isNaN(O[0])||isNaN(O[1])||isNaN(O[2])?null:O}function T(R,C){var I=C(R);return I==="rgba(0, 0, 0, 0)"||I==="transparent"||I==="initial"||I==="inherit"?R.parentElement==null?null:T(R.parentElement,C):I}function k(R,C){var I=[R.paddingTop,R.paddingRight,R.paddingBottom,R.paddingLeft],L=96/(72/C),O=(parseInt(R.lineHeight)-parseInt(R.fontSize))/C/2,q=I.map(function(F){return parseInt(F||"0")/L}),W=(0,v.parseSpacing)(q,0);return O>W.top&&(W.top=O),O>W.bottom&&(W.bottom=O),W}}),323:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.DocHandler=void 0;var h={},v=(function(){function b(w){this.jsPDFDocument=w,this.userStyles={textColor:w.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:w.internal.getFontSize(),fontStyle:w.internal.getFont().fontStyle,font:w.internal.getFont().fontName,lineWidth:w.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:w.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return b.setDefaults=function(w,_){_===void 0&&(_=null),_?_.__autoTableDocumentDefaults=w:h=w},b.unifyColor=function(w){return Array.isArray(w)?w:typeof w=="number"?[w,w,w]:typeof w=="string"?[w]:null},b.prototype.applyStyles=function(w,_){var T,k,R;_===void 0&&(_=!1),w.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(w.fontStyle);var C=this.jsPDFDocument.internal.getFont(),I=C.fontStyle,L=C.fontName;if(w.font&&(L=w.font),w.fontStyle){I=w.fontStyle;var O=this.getFontList()[L];O&&O.indexOf(I)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(O[0]),I=O[0])}if(this.jsPDFDocument.setFont(L,I),w.fontSize&&this.jsPDFDocument.setFontSize(w.fontSize),!_){var q=b.unifyColor(w.fillColor);q&&(T=this.jsPDFDocument).setFillColor.apply(T,q),q=b.unifyColor(w.textColor),q&&(k=this.jsPDFDocument).setTextColor.apply(k,q),q=b.unifyColor(w.lineColor),q&&(R=this.jsPDFDocument).setDrawColor.apply(R,q),typeof w.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(w.lineWidth)}},b.prototype.splitTextToSize=function(w,_,T){return this.jsPDFDocument.splitTextToSize(w,_,T)},b.prototype.rect=function(w,_,T,k,R){return this.jsPDFDocument.rect(w,_,T,k,R)},b.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},b.prototype.getTextWidth=function(w){return this.jsPDFDocument.getTextWidth(w)},b.prototype.getDocument=function(){return this.jsPDFDocument},b.prototype.setPage=function(w){this.jsPDFDocument.setPage(w)},b.prototype.addPage=function(){return this.jsPDFDocument.addPage()},b.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},b.prototype.getGlobalOptions=function(){return h||{}},b.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},b.prototype.pageSize=function(){var w=this.jsPDFDocument.internal.pageSize;return w.width==null&&(w={width:w.getWidth(),height:w.getHeight()}),w},b.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},b.prototype.getLineHeightFactor=function(){var w=this.jsPDFDocument;return w.getLineHeightFactor?w.getLineHeightFactor():1.15},b.prototype.getLineHeight=function(w){return w/this.scaleFactor()*this.getLineHeightFactor()},b.prototype.pageNumber=function(){var w=this.jsPDFDocument.internal.getCurrentPageInfo();return w?w.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},b})();d.DocHandler=v}),148:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.parseHtml=void 0;var v=h(259),b=h(913);function w(k,R,C,I,L){var O,q;I===void 0&&(I=!1),L===void 0&&(L=!1);var W;typeof R=="string"?W=C.document.querySelector(R):W=R;var F=Object.keys(k.getFontList()),z=k.scaleFactor(),ee=[],le=[],B=[];if(!W)return console.error("Html table could not be found with input: ",R),{head:ee,body:le,foot:B};for(var j=0;j<W.rows.length;j++){var ne=W.rows[j],re=(q=(O=ne==null?void 0:ne.parentElement)===null||O===void 0?void 0:O.tagName)===null||q===void 0?void 0:q.toLowerCase(),be=_(F,z,C,ne,I,L);be&&(re==="thead"?ee.push(be):re==="tfoot"?B.push(be):le.push(be))}return{head:ee,body:le,foot:B}}d.parseHtml=w;function _(k,R,C,I,L,O){for(var q=new b.HtmlRowInput(I),W=0;W<I.cells.length;W++){var F=I.cells[W],z=C.getComputedStyle(F);if(L||z.display!=="none"){var ee=void 0;O&&(ee=(0,v.parseCss)(k,F,R,z,C)),q.push({rowSpan:F.rowSpan,colSpan:F.colSpan,styles:ee,_element:F,content:T(F)})}}var le=C.getComputedStyle(I);if(q.length>0&&(L||le.display!=="none"))return q}function T(k){var R=k.cloneNode(!0);return R.innerHTML=R.innerHTML.replace(/\n/g,"").replace(/ +/g," "),R.innerHTML=R.innerHTML.split(/<br.*?>/).map(function(C){return C.trim()}).join(`
`),R.innerText||R.textContent||""}}),587:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.parseInput=void 0;var v=h(148),b=h(360),w=h(200),_=h(323),T=h(291);function k(W,F){var z=new _.DocHandler(W),ee=z.getDocumentOptions(),le=z.getGlobalOptions();(0,T.default)(z,le,ee,F);var B=(0,b.assign)({},le,ee,F),j;typeof window<"u"&&(j=window);var ne=R(le,ee,F),re=C(le,ee,F),be=I(z,B),P=O(z,B,j);return{id:F.tableId,content:P,hooks:re,styles:ne,settings:be}}d.parseInput=k;function R(W,F,z){for(var ee={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},le=function(re){if(re==="columnStyles"){var be=W[re],P=F[re],$=z[re];ee.columnStyles=(0,b.assign)({},be,P,$)}else{var ie=[W,F,z],ae=ie.map(function(he){return he[re]||{}});ee[re]=(0,b.assign)({},ae[0],ae[1],ae[2])}},B=0,j=Object.keys(ee);B<j.length;B++){var ne=j[B];le(ne)}return ee}function C(W,F,z){for(var ee=[W,F,z],le={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},B=0,j=ee;B<j.length;B++){var ne=j[B];ne.didParseCell&&le.didParseCell.push(ne.didParseCell),ne.willDrawCell&&le.willDrawCell.push(ne.willDrawCell),ne.didDrawCell&&le.didDrawCell.push(ne.didDrawCell),ne.willDrawPage&&le.willDrawPage.push(ne.willDrawPage),ne.didDrawPage&&le.didDrawPage.push(ne.didDrawPage)}return le}function I(W,F){var z,ee,le,B,j,ne,re,be,P,$,ie,ae,he=(0,w.parseSpacing)(F.margin,40/W.scaleFactor()),Ne=(z=L(W,F.startY))!==null&&z!==void 0?z:he.top,D;F.showFoot===!0?D="everyPage":F.showFoot===!1?D="never":D=(ee=F.showFoot)!==null&&ee!==void 0?ee:"everyPage";var H;F.showHead===!0?H="everyPage":F.showHead===!1?H="never":H=(le=F.showHead)!==null&&le!==void 0?le:"everyPage";var K=(B=F.useCss)!==null&&B!==void 0?B:!1,Z=F.theme||(K?"plain":"striped"),se=!!F.horizontalPageBreak,de=(j=F.horizontalPageBreakRepeat)!==null&&j!==void 0?j:null;return{includeHiddenHtml:(ne=F.includeHiddenHtml)!==null&&ne!==void 0?ne:!1,useCss:K,theme:Z,startY:Ne,margin:he,pageBreak:(re=F.pageBreak)!==null&&re!==void 0?re:"auto",rowPageBreak:(be=F.rowPageBreak)!==null&&be!==void 0?be:"auto",tableWidth:(P=F.tableWidth)!==null&&P!==void 0?P:"auto",showHead:H,showFoot:D,tableLineWidth:($=F.tableLineWidth)!==null&&$!==void 0?$:0,tableLineColor:(ie=F.tableLineColor)!==null&&ie!==void 0?ie:200,horizontalPageBreak:se,horizontalPageBreakRepeat:de,horizontalPageBreakBehaviour:(ae=F.horizontalPageBreakBehaviour)!==null&&ae!==void 0?ae:"afterAllRows"}}function L(W,F){var z=W.getLastAutoTable(),ee=W.scaleFactor(),le=W.pageNumber(),B=!1;if(z&&z.startPageNumber){var j=z.startPageNumber+z.pageNumber-1;B=j===le}return typeof F=="number"?F:(F==null||F===!1)&&B&&(z==null?void 0:z.finalY)!=null?z.finalY+20/ee:null}function O(W,F,z){var ee=F.head||[],le=F.body||[],B=F.foot||[];if(F.html){var j=F.includeHiddenHtml;if(z){var ne=(0,v.parseHtml)(W,F.html,z,j,F.useCss)||{};ee=ne.head||ee,le=ne.body||ee,B=ne.foot||ee}else console.error("Cannot parse html in non browser environment")}var re=F.columns||q(ee,le,B);return{columns:re,head:ee,body:le,foot:B}}function q(W,F,z){var ee=W[0]||F[0]||z[0]||[],le=[];return Object.keys(ee).filter(function(B){return B!=="_element"}).forEach(function(B){var j=1,ne;Array.isArray(ee)?ne=ee[parseInt(B)]:ne=ee[B],typeof ne=="object"&&!Array.isArray(ne)&&(j=(ne==null?void 0:ne.colSpan)||1);for(var re=0;re<j;re++){var be=void 0;Array.isArray(ee)?be=le.length:be=B+(re>0?"_".concat(re):"");var P={dataKey:be};le.push(P)}}),le}}),291:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0});function h(b,w,_,T){for(var k=function(L){L&&typeof L!="object"&&console.error("The options parameter should be of type object, is: "+typeof L),typeof L.extendWidth<"u"&&(L.tableWidth=L.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof L.margins<"u"&&(typeof L.margin>"u"&&(L.margin=L.margins),console.error("Use of deprecated option: margins, use margin instead.")),L.startY&&typeof L.startY!="number"&&(console.error("Invalid value for startY option",L.startY),delete L.startY),!L.didDrawPage&&(L.afterPageContent||L.beforePageContent||L.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),L.didDrawPage=function(B){b.applyStyles(b.userStyles),L.beforePageContent&&L.beforePageContent(B),b.applyStyles(b.userStyles),L.afterPageContent&&L.afterPageContent(B),b.applyStyles(b.userStyles),L.afterPageAdd&&B.pageNumber>1&&B.afterPageAdd(B),b.applyStyles(b.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(B){L[B]&&console.error('The "'.concat(B,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(B){var j=B[0],ne=B[1];L[ne]&&(console.error("Use of deprecated option ".concat(ne,". Use ").concat(j," instead")),L[j]=L[ne])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(B){var j=typeof B=="string"?B:B[0],ne=typeof B=="string"?B:B[1];typeof L[j]<"u"&&(typeof L.styles[ne]>"u"&&(L.styles[ne]=L[j]),console.error("Use of deprecated option: "+j+", use the style "+ne+" instead."))});for(var O=0,q=["styles","bodyStyles","headStyles","footStyles"];O<q.length;O++){var W=q[O];v(L[W]||{})}for(var F=L.columnStyles||{},z=0,ee=Object.keys(F);z<ee.length;z++){var le=ee[z];v(F[le]||{})}},R=0,C=[w,_,T];R<C.length;R++){var I=C[R];k(I)}}d.default=h;function v(b){b.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),b.minCellHeight||(b.minCellHeight=b.rowHeight)):b.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),b.cellWidth||(b.cellWidth=b.columnWidth))}}),287:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.Column=d.Cell=d.Row=d.Table=void 0;var v=h(913),b=h(662),w=h(200),_=(function(){function C(I,L){this.pageNumber=1,this.pageCount=1,this.id=I.id,this.settings=I.settings,this.styles=I.styles,this.hooks=I.hooks,this.columns=L.columns,this.head=L.head,this.body=L.body,this.foot=L.foot}return C.prototype.getHeadHeight=function(I){return this.head.reduce(function(L,O){return L+O.getMaxCellHeight(I)},0)},C.prototype.getFootHeight=function(I){return this.foot.reduce(function(L,O){return L+O.getMaxCellHeight(I)},0)},C.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},C.prototype.callCellHooks=function(I,L,O,q,W,F){for(var z=0,ee=L;z<ee.length;z++){var le=ee[z],B=new b.CellHookData(I,this,O,q,W,F),j=le(B)===!1;if(O.text=Array.isArray(O.text)?O.text:[O.text],j)return!1}return!0},C.prototype.callEndPageHooks=function(I,L){I.applyStyles(I.userStyles);for(var O=0,q=this.hooks.didDrawPage;O<q.length;O++){var W=q[O];W(new b.HookData(I,this,L))}},C.prototype.callWillDrawPageHooks=function(I,L){for(var O=0,q=this.hooks.willDrawPage;O<q.length;O++){var W=q[O];W(new b.HookData(I,this,L))}},C.prototype.getWidth=function(I){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var L=this.columns.reduce(function(q,W){return q+W.wrappedWidth},0);return L}else{var O=this.settings.margin;return I-O.left-O.right}},C})();d.Table=_;var T=(function(){function C(I,L,O,q,W){W===void 0&&(W=!1),this.height=0,this.raw=I,I instanceof v.HtmlRowInput&&(this.raw=I._element,this.element=I._element),this.index=L,this.section=O,this.cells=q,this.spansMultiplePages=W}return C.prototype.getMaxCellHeight=function(I){var L=this;return I.reduce(function(O,q){var W;return Math.max(O,((W=L.cells[q.index])===null||W===void 0?void 0:W.height)||0)},0)},C.prototype.hasRowSpan=function(I){var L=this;return I.filter(function(O){var q=L.cells[O.index];return q?q.rowSpan>1:!1}).length>0},C.prototype.canEntireRowFit=function(I,L){return this.getMaxCellHeight(L)<=I},C.prototype.getMinimumRowHeight=function(I,L){var O=this;return I.reduce(function(q,W){var F=O.cells[W.index];if(!F)return 0;var z=L.getLineHeight(F.styles.fontSize),ee=F.padding("vertical"),le=ee+z;return le>q?le:q},0)},C})();d.Row=T;var k=(function(){function C(I,L,O){var q,W;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=L,this.section=O,this.raw=I;var F=I;I!=null&&typeof I=="object"&&!Array.isArray(I)?(this.rowSpan=I.rowSpan||1,this.colSpan=I.colSpan||1,F=(W=(q=I.content)!==null&&q!==void 0?q:I.title)!==null&&W!==void 0?W:I,I._element&&(this.raw=I._element)):(this.rowSpan=1,this.colSpan=1);var z=F!=null?""+F:"",ee=/\r\n|\r|\n/g;this.text=z.split(ee)}return C.prototype.getTextPos=function(){var I;if(this.styles.valign==="top")I=this.y+this.padding("top");else if(this.styles.valign==="bottom")I=this.y+this.height-this.padding("bottom");else{var L=this.height-this.padding("vertical");I=this.y+L/2+this.padding("top")}var O;if(this.styles.halign==="right")O=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var q=this.width-this.padding("horizontal");O=this.x+q/2+this.padding("left")}else O=this.x+this.padding("left");return{x:O,y:I}},C.prototype.getContentHeight=function(I,L){L===void 0&&(L=1.15);var O=Array.isArray(this.text)?this.text.length:1,q=this.styles.fontSize/I*L,W=O*q+this.padding("vertical");return Math.max(W,this.styles.minCellHeight)},C.prototype.padding=function(I){var L=(0,w.parseSpacing)(this.styles.cellPadding,0);return I==="vertical"?L.top+L.bottom:I==="horizontal"?L.left+L.right:L[I]},C})();d.Cell=k;var R=(function(){function C(I,L,O){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=I,this.raw=L,this.index=O}return C.prototype.getMaxCustomCellWidth=function(I){for(var L=0,O=0,q=I.allRows();O<q.length;O++){var W=q[O],F=W.cells[this.index];F&&typeof F.styles.cellWidth=="number"&&(L=Math.max(L,F.styles.cellWidth))}return L},C})();d.Column=R}),360:(function(c,d){Object.defineProperty(d,"__esModule",{value:!0}),d.assign=void 0;function h(v,b,w,_,T){if(v==null)throw new TypeError("Cannot convert undefined or null to object");for(var k=Object(v),R=1;R<arguments.length;R++){var C=arguments[R];if(C!=null)for(var I in C)Object.prototype.hasOwnProperty.call(C,I)&&(k[I]=C[I])}return k}d.assign=h}),858:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.createTable=void 0;var v=h(323),b=h(287),w=h(189),_=h(913),T=h(360);function k(W,F){var z=new v.DocHandler(W),ee=R(F,z.scaleFactor()),le=new b.Table(F,ee);return(0,w.calculateWidths)(z,le),z.applyStyles(z.userStyles),le}d.createTable=k;function R(W,F){var z=W.content,ee=O(z.columns);if(z.head.length===0){var le=I(ee,"head");le&&z.head.push(le)}if(z.foot.length===0){var le=I(ee,"foot");le&&z.foot.push(le)}var B=W.settings.theme,j=W.styles;return{columns:ee,head:C("head",z.head,ee,j,B,F),body:C("body",z.body,ee,j,B,F),foot:C("foot",z.foot,ee,j,B,F)}}function C(W,F,z,ee,le,B){var j={},ne=F.map(function(re,be){for(var P=0,$={},ie=0,ae=0,he=0,Ne=z;he<Ne.length;he++){var D=Ne[he];if(j[D.index]==null||j[D.index].left===0)if(ae===0){var H=void 0;Array.isArray(re)?H=re[D.index-ie-P]:H=re[D.dataKey];var K={};typeof H=="object"&&!Array.isArray(H)&&(K=(H==null?void 0:H.styles)||{});var Z=q(W,D,be,le,ee,B,K),se=new b.Cell(H,Z,W);$[D.dataKey]=se,$[D.index]=se,ae=se.colSpan-1,j[D.index]={left:se.rowSpan-1,times:ae}}else ae--,ie++;else j[D.index].left--,ae=j[D.index].times,P++}return new b.Row(re,be,W,$)});return ne}function I(W,F){var z={};return W.forEach(function(ee){if(ee.raw!=null){var le=L(F,ee.raw);le!=null&&(z[ee.dataKey]=le)}}),Object.keys(z).length>0?z:null}function L(W,F){if(W==="head"){if(typeof F=="object")return F.header||F.title||null;if(typeof F=="string"||typeof F=="number")return F}else if(W==="foot"&&typeof F=="object")return F.footer;return null}function O(W){return W.map(function(F,z){var ee,le,B;return typeof F=="object"?B=(le=(ee=F.dataKey)!==null&&ee!==void 0?ee:F.key)!==null&&le!==void 0?le:z:B=z,new b.Column(B,F,z)})}function q(W,F,z,ee,le,B,j){var ne=(0,_.getTheme)(ee),re;W==="head"?re=le.headStyles:W==="body"?re=le.bodyStyles:W==="foot"&&(re=le.footStyles);var be=(0,T.assign)({},ne.table,ne[W],le.styles,re),P=le.columnStyles[F.dataKey]||le.columnStyles[F.index]||{},$=W==="body"?P:{},ie=W==="body"&&z%2===0?(0,T.assign)({},ne.alternateRow,le.alternateRowStyles):{},ae=(0,_.defaultStyles)(B),he=(0,T.assign)({},ae,be,ie,$);return(0,T.assign)(he,j)}}),49:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.addPage=d.drawTable=void 0;var v=h(200),b=h(287),w=h(323),_=h(360),T=h(938),k=h(435);function R(P,$){var ie=$.settings,ae=ie.startY,he=ie.margin,Ne={x:he.left,y:ae},D=$.getHeadHeight($.columns)+$.getFootHeight($.columns),H=ae+he.bottom+D;if(ie.pageBreak==="avoid"){var K=$.body,Z=K.reduce(function(fe,me){return fe+me.height},0);H+=Z}var se=new w.DocHandler(P);(ie.pageBreak==="always"||ie.startY!=null&&H>se.pageSize().height)&&(be(se),Ne.y=he.top),$.callWillDrawPageHooks(se,Ne);var de=(0,_.assign)({},Ne);$.startPageNumber=se.pageNumber(),ie.horizontalPageBreak?C(se,$,de,Ne):(se.applyStyles(se.userStyles),(ie.showHead==="firstPage"||ie.showHead==="everyPage")&&$.head.forEach(function(fe){return le(se,$,fe,Ne,$.columns)}),se.applyStyles(se.userStyles),$.body.forEach(function(fe,me){var Me=me===$.body.length-1;ee(se,$,fe,Me,de,Ne,$.columns)}),se.applyStyles(se.userStyles),(ie.showFoot==="lastPage"||ie.showFoot==="everyPage")&&$.foot.forEach(function(fe){return le(se,$,fe,Ne,$.columns)})),(0,v.addTableBorder)(se,$,de,Ne),$.callEndPageHooks(se,Ne),$.finalY=Ne.y,P.lastAutoTable=$,P.previousAutoTable=$,P.autoTable&&(P.autoTable.previous=$),se.applyStyles(se.userStyles)}d.drawTable=R;function C(P,$,ie,ae){var he=(0,k.calculateAllColumnsCanFitInPage)(P,$),Ne=$.settings;if(Ne.horizontalPageBreakBehaviour==="afterAllRows")he.forEach(function(Z,se){P.applyStyles(P.userStyles),se>0?re(P,$,ie,ae,Z.columns,!0):I(P,$,ae,Z.columns),L(P,$,ie,ae,Z.columns),q(P,$,ae,Z.columns)});else for(var D=-1,H=he[0],K=function(){var Z=D;if(H){P.applyStyles(P.userStyles);var se=H.columns;D>=0?re(P,$,ie,ae,se,!0):I(P,$,ae,se),Z=O(P,$,D+1,ae,se),q(P,$,ae,se)}var de=Z-D;he.slice(1).forEach(function(fe){P.applyStyles(P.userStyles),re(P,$,ie,ae,fe.columns,!0),O(P,$,D+1,ae,fe.columns,de),q(P,$,ae,fe.columns)}),D=Z};D<$.body.length-1;)K()}function I(P,$,ie,ae){var he=$.settings;P.applyStyles(P.userStyles),(he.showHead==="firstPage"||he.showHead==="everyPage")&&$.head.forEach(function(Ne){return le(P,$,Ne,ie,ae)})}function L(P,$,ie,ae,he){P.applyStyles(P.userStyles),$.body.forEach(function(Ne,D){var H=D===$.body.length-1;ee(P,$,Ne,H,ie,ae,he)})}function O(P,$,ie,ae,he,Ne){P.applyStyles(P.userStyles),Ne=Ne??$.body.length;var D=Math.min(ie+Ne,$.body.length),H=-1;return $.body.slice(ie,D).forEach(function(K,Z){var se=ie+Z===$.body.length-1,de=ne(P,$,se,ae);K.canEntireRowFit(de,he)&&(le(P,$,K,ae,he),H=ie+Z)}),H}function q(P,$,ie,ae){var he=$.settings;P.applyStyles(P.userStyles),(he.showFoot==="lastPage"||he.showFoot==="everyPage")&&$.foot.forEach(function(Ne){return le(P,$,Ne,ie,ae)})}function W(P,$,ie){var ae=ie.getLineHeight(P.styles.fontSize),he=P.padding("vertical"),Ne=Math.floor(($-he)/ae);return Math.max(0,Ne)}function F(P,$,ie,ae){var he={};P.spansMultiplePages=!0,P.height=0;for(var Ne=0,D=0,H=ie.columns;D<H.length;D++){var K=H[D],Z=P.cells[K.index];if(Z){Array.isArray(Z.text)||(Z.text=[Z.text]);var se=new b.Cell(Z.raw,Z.styles,Z.section);se=(0,_.assign)(se,Z),se.text=[];var de=W(Z,$,ae);Z.text.length>de&&(se.text=Z.text.splice(de,Z.text.length));var fe=ae.scaleFactor(),me=ae.getLineHeightFactor();Z.contentHeight=Z.getContentHeight(fe,me),Z.contentHeight>=$&&(Z.contentHeight=$,se.styles.minCellHeight-=$),Z.contentHeight>P.height&&(P.height=Z.contentHeight),se.contentHeight=se.getContentHeight(fe,me),se.contentHeight>Ne&&(Ne=se.contentHeight),he[K.index]=se}}var Me=new b.Row(P.raw,-1,P.section,he,!0);Me.height=Ne;for(var we=0,Pe=ie.columns;we<Pe.length;we++){var K=Pe[we],se=Me.cells[K.index];se&&(se.height=Me.height);var Z=P.cells[K.index];Z&&(Z.height=P.height)}return Me}function z(P,$,ie,ae){var he=P.pageSize().height,Ne=ae.settings.margin,D=Ne.top+Ne.bottom,H=he-D;$.section==="body"&&(H-=ae.getHeadHeight(ae.columns)+ae.getFootHeight(ae.columns));var K=$.getMinimumRowHeight(ae.columns,P),Z=K<ie;if(K>H)return console.error("Will not be able to print row ".concat($.index," correctly since it's minimum height is larger than page height")),!0;if(!Z)return!1;var se=$.hasRowSpan(ae.columns),de=$.getMaxCellHeight(ae.columns)>H;return de?(se&&console.error("The content of row ".concat($.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(se||ae.settings.rowPageBreak==="avoid")}function ee(P,$,ie,ae,he,Ne,D){var H=ne(P,$,ae,Ne);if(ie.canEntireRowFit(H,D))le(P,$,ie,Ne,D);else if(z(P,ie,H,$)){var K=F(ie,H,$,P);le(P,$,ie,Ne,D),re(P,$,he,Ne,D),ee(P,$,K,ae,he,Ne,D)}else re(P,$,he,Ne,D),ee(P,$,ie,ae,he,Ne,D)}function le(P,$,ie,ae,he){ae.x=$.settings.margin.left;for(var Ne=0,D=he;Ne<D.length;Ne++){var H=D[Ne],K=ie.cells[H.index];if(!K){ae.x+=H.width;continue}P.applyStyles(K.styles),K.x=ae.x,K.y=ae.y;var Z=$.callCellHooks(P,$.hooks.willDrawCell,K,ie,H,ae);if(Z===!1){ae.x+=H.width;continue}B(P,K,ae);var se=K.getTextPos();(0,T.default)(K.text,se.x,se.y,{halign:K.styles.halign,valign:K.styles.valign,maxWidth:Math.ceil(K.width-K.padding("left")-K.padding("right"))},P.getDocument()),$.callCellHooks(P,$.hooks.didDrawCell,K,ie,H,ae),ae.x+=H.width}ae.y+=ie.height}function B(P,$,ie){var ae=$.styles;if(P.getDocument().setFillColor(P.getDocument().getFillColor()),typeof ae.lineWidth=="number"){var he=(0,v.getFillStyle)(ae.lineWidth,ae.fillColor);he&&P.rect($.x,ie.y,$.width,$.height,he)}else typeof ae.lineWidth=="object"&&(ae.fillColor&&P.rect($.x,ie.y,$.width,$.height,"F"),j(P,$,ie,ae.lineWidth))}function j(P,$,ie,ae){var he,Ne,D,H;ae.top&&(he=ie.x,Ne=ie.y,D=ie.x+$.width,H=ie.y,ae.right&&(D+=.5*ae.right),ae.left&&(he-=.5*ae.left),K(ae.top,he,Ne,D,H)),ae.bottom&&(he=ie.x,Ne=ie.y+$.height,D=ie.x+$.width,H=ie.y+$.height,ae.right&&(D+=.5*ae.right),ae.left&&(he-=.5*ae.left),K(ae.bottom,he,Ne,D,H)),ae.left&&(he=ie.x,Ne=ie.y,D=ie.x,H=ie.y+$.height,ae.top&&(Ne-=.5*ae.top),ae.bottom&&(H+=.5*ae.bottom),K(ae.left,he,Ne,D,H)),ae.right&&(he=ie.x+$.width,Ne=ie.y,D=ie.x+$.width,H=ie.y+$.height,ae.top&&(Ne-=.5*ae.top),ae.bottom&&(H+=.5*ae.bottom),K(ae.right,he,Ne,D,H));function K(Z,se,de,fe,me){P.getDocument().setLineWidth(Z),P.getDocument().line(se,de,fe,me,"S")}}function ne(P,$,ie,ae){var he=$.settings.margin.bottom,Ne=$.settings.showFoot;return(Ne==="everyPage"||Ne==="lastPage"&&ie)&&(he+=$.getFootHeight($.columns)),P.pageSize().height-ae.y-he}function re(P,$,ie,ae,he,Ne){he===void 0&&(he=[]),Ne===void 0&&(Ne=!1),P.applyStyles(P.userStyles),$.settings.showFoot==="everyPage"&&!Ne&&$.foot.forEach(function(H){return le(P,$,H,ae,he)}),$.callEndPageHooks(P,ae);var D=$.settings.margin;(0,v.addTableBorder)(P,$,ie,ae),be(P),$.pageNumber++,$.pageCount++,ae.x=D.left,ae.y=D.top,ie.y=D.top,$.callWillDrawPageHooks(P,ae),$.settings.showHead==="everyPage"&&($.head.forEach(function(H){return le(P,$,H,ae,he)}),P.applyStyles(P.userStyles))}d.addPage=re;function be(P){var $=P.pageNumber();P.setPage($+1);var ie=P.pageNumber();return ie===$?(P.addPage(),!0):!1}}),435:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.calculateAllColumnsCanFitInPage=void 0;var v=h(200);function b(_,T,k){var R;k===void 0&&(k={});var C=(0,v.getPageAvailableWidth)(_,T),I=new Map,L=[],O=[],q=[];T.settings.horizontalPageBreakRepeat,Array.isArray(T.settings.horizontalPageBreakRepeat)?q=T.settings.horizontalPageBreakRepeat:(typeof T.settings.horizontalPageBreakRepeat=="string"||typeof T.settings.horizontalPageBreakRepeat=="number")&&(q=[T.settings.horizontalPageBreakRepeat]),q.forEach(function(ee){var le=T.columns.find(function(B){return B.dataKey===ee||B.index===ee});le&&!I.has(le.index)&&(I.set(le.index,!0),L.push(le.index),O.push(T.columns[le.index]),C-=le.wrappedWidth)});for(var W=!0,F=(R=k==null?void 0:k.start)!==null&&R!==void 0?R:0;F<T.columns.length;){if(I.has(F)){F++;continue}var z=T.columns[F].wrappedWidth;if(W||C>=z)W=!1,L.push(F),O.push(T.columns[F]),C-=z;else break;F++}return{colIndexes:L,columns:O,lastIndex:F-1}}function w(_,T){for(var k=[],R=0;R<T.columns.length;R++){var C=b(_,T,{start:R});C.columns.length&&(k.push(C),R=C.lastIndex)}return k}d.calculateAllColumnsCanFitInPage=w}),189:(function(c,d,h){Object.defineProperty(d,"__esModule",{value:!0}),d.ellipsize=d.resizeColumns=d.calculateWidths=void 0;var v=h(200);function b(L,O){w(L,O);var q=[],W=0;O.columns.forEach(function(z){var ee=z.getMaxCustomCellWidth(O);ee?z.width=ee:(z.width=z.wrappedWidth,q.push(z)),W+=z.width});var F=O.getWidth(L.pageSize().width)-W;F&&(F=_(q,F,function(z){return Math.max(z.minReadableWidth,z.minWidth)})),F&&(F=_(q,F,function(z){return z.minWidth})),F=Math.abs(F),!O.settings.horizontalPageBreak&&F>.1/L.scaleFactor()&&(F=F<1?F:Math.round(F),console.warn("Of the table content, ".concat(F," units width could not fit page"))),k(O),R(O,L),T(O)}d.calculateWidths=b;function w(L,O){var q=L.scaleFactor(),W=O.settings.horizontalPageBreak,F=(0,v.getPageAvailableWidth)(L,O);O.allRows().forEach(function(z){for(var ee=0,le=O.columns;ee<le.length;ee++){var B=le[ee],j=z.cells[B.index];if(j){var ne=O.hooks.didParseCell;O.callCellHooks(L,ne,j,z,B,null);var re=j.padding("horizontal");j.contentWidth=(0,v.getStringWidth)(j.text,j.styles,L)+re;var be=(0,v.getStringWidth)(j.text.join(" ").split(/\s+/),j.styles,L);if(j.minReadableWidth=be+j.padding("horizontal"),typeof j.styles.cellWidth=="number")j.minWidth=j.styles.cellWidth,j.wrappedWidth=j.styles.cellWidth;else if(j.styles.cellWidth==="wrap"||W===!0)j.contentWidth>F?(j.minWidth=F,j.wrappedWidth=F):(j.minWidth=j.contentWidth,j.wrappedWidth=j.contentWidth);else{var P=10/q;j.minWidth=j.styles.minCellWidth||P,j.wrappedWidth=j.contentWidth,j.minWidth>j.wrappedWidth&&(j.wrappedWidth=j.minWidth)}}}}),O.allRows().forEach(function(z){for(var ee=0,le=O.columns;ee<le.length;ee++){var B=le[ee],j=z.cells[B.index];if(j&&j.colSpan===1)B.wrappedWidth=Math.max(B.wrappedWidth,j.wrappedWidth),B.minWidth=Math.max(B.minWidth,j.minWidth),B.minReadableWidth=Math.max(B.minReadableWidth,j.minReadableWidth);else{var ne=O.styles.columnStyles[B.dataKey]||O.styles.columnStyles[B.index]||{},re=ne.cellWidth||ne.minCellWidth;re&&typeof re=="number"&&(B.minWidth=re,B.wrappedWidth=re)}j&&(j.colSpan>1&&!B.minWidth&&(B.minWidth=j.minWidth),j.colSpan>1&&!B.wrappedWidth&&(B.wrappedWidth=j.minWidth))}})}function _(L,O,q){for(var W=O,F=L.reduce(function(P,$){return P+$.wrappedWidth},0),z=0;z<L.length;z++){var ee=L[z],le=ee.wrappedWidth/F,B=W*le,j=ee.width+B,ne=q(ee),re=j<ne?ne:j;O-=re-ee.width,ee.width=re}if(O=Math.round(O*1e10)/1e10,O){var be=L.filter(function(P){return O<0?P.width>q(P):!0});be.length&&(O=_(be,O,q))}return O}d.resizeColumns=_;function T(L){for(var O={},q=1,W=L.allRows(),F=0;F<W.length;F++)for(var z=W[F],ee=0,le=L.columns;ee<le.length;ee++){var B=le[ee],j=O[B.index];if(q>1)q--,delete z.cells[B.index];else if(j)j.cell.height+=z.height,q=j.cell.colSpan,delete z.cells[B.index],j.left--,j.left<=1&&delete O[B.index];else{var ne=z.cells[B.index];if(!ne)continue;if(ne.height=z.height,ne.rowSpan>1){var re=W.length-F,be=ne.rowSpan>re?re:ne.rowSpan;O[B.index]={cell:ne,left:be,row:z}}}}}function k(L){for(var O=L.allRows(),q=0;q<O.length;q++)for(var W=O[q],F=null,z=0,ee=0,le=0;le<L.columns.length;le++){var B=L.columns[le];if(ee-=1,ee>1&&L.columns[le+1])z+=B.width,delete W.cells[B.index];else if(F){var j=F;delete W.cells[B.index],F=null,j.width=B.width+z}else{var j=W.cells[B.index];if(!j)continue;if(ee=j.colSpan,z=0,j.colSpan>1){F=j,z+=B.width;continue}j.width=B.width+z}}}function R(L,O){for(var q={count:0,height:0},W=0,F=L.allRows();W<F.length;W++){for(var z=F[W],ee=0,le=L.columns;ee<le.length;ee++){var B=le[ee],j=z.cells[B.index];if(j){O.applyStyles(j.styles,!0);var ne=j.width-j.padding("horizontal");if(j.styles.overflow==="linebreak")j.text=O.splitTextToSize(j.text,ne+1/O.scaleFactor(),{fontSize:j.styles.fontSize});else if(j.styles.overflow==="ellipsize")j.text=C(j.text,ne,j.styles,O,"...");else if(j.styles.overflow==="hidden")j.text=C(j.text,ne,j.styles,O,"");else if(typeof j.styles.overflow=="function"){var re=j.styles.overflow(j.text,ne);typeof re=="string"?j.text=[re]:j.text=re}j.contentHeight=j.getContentHeight(O.scaleFactor(),O.getLineHeightFactor());var be=j.contentHeight/j.rowSpan;j.rowSpan>1&&q.count*q.height<be*j.rowSpan?q={height:be,count:j.rowSpan}:q&&q.count>0&&q.height>be&&(be=q.height),be>z.height&&(z.height=be)}}q.count--}}function C(L,O,q,W,F){return L.map(function(z){return I(z,O,q,W,F)})}d.ellipsize=C;function I(L,O,q,W,F){var z=1e4*W.scaleFactor();if(O=Math.ceil(O*z)/z,O>=(0,v.getStringWidth)(L,q,W))return L;for(;O<(0,v.getStringWidth)(L+F,q,W)&&!(L.length<=1);)L=L.substring(0,L.length-1);return L.trim()+F}}),84:(function(c){if(typeof n>"u"){var d=new Error("Cannot find module 'undefined'");throw d.code="MODULE_NOT_FOUND",d}c.exports=n})},a={};function o(c){var d=a[c];if(d!==void 0)return d.exports;var h=a[c]={exports:{}};return i[c].call(h.exports,h,h.exports,o),h.exports}var l={};return(function(){var c=l;Object.defineProperty(c,"__esModule",{value:!0}),c.Cell=c.Column=c.Row=c.Table=c.CellHookData=c.__drawTable=c.__createTable=c.applyPlugin=void 0;var d=o(790),h=o(587),v=o(49),b=o(858),w=o(287);Object.defineProperty(c,"Table",{enumerable:!0,get:function(){return w.Table}});var _=o(662);Object.defineProperty(c,"CellHookData",{enumerable:!0,get:function(){return _.CellHookData}});var T=o(287);Object.defineProperty(c,"Cell",{enumerable:!0,get:function(){return T.Cell}}),Object.defineProperty(c,"Column",{enumerable:!0,get:function(){return T.Column}}),Object.defineProperty(c,"Row",{enumerable:!0,get:function(){return T.Row}});function k(O){(0,d.default)(O)}c.applyPlugin=k;function R(O,q){var W=(0,h.parseInput)(O,q),F=(0,b.createTable)(O,W);(0,v.drawTable)(O,F)}function C(O,q){var W=(0,h.parseInput)(O,q);return(0,b.createTable)(O,W)}c.__createTable=C;function I(O,q){(0,v.drawTable)(O,q)}c.__drawTable=I;try{var L=o(84);L.jsPDF&&(L=L.jsPDF),k(L)}catch{}c.default=R})(),l})()})})(sh)),sh.exports}var _I=SI();const T2=L2(_I),ia=t=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t),NI=async t=>{try{const n=await(await fetch(t)).blob();return new Promise((i,a)=>{const o=new FileReader;o.onloadend=()=>i(o.result),o.onerror=a,o.readAsDataURL(n)})}catch(e){return console.error("Error loading image:",e),""}},Nm=async(t,e,n)=>{const i=new Et({orientation:"portrait",unit:"mm",format:"a4"}),a=i.internal.pageSize.width,o=i.internal.pageSize.height,l=15,c=a-l*2,d=t.company==="mirrorzone",h=[0,0,0],v=(Xe,Se=.1)=>{i.setDrawColor(200,200,200),i.setLineWidth(Se),i.line(l,Xe,a-l,Xe)};let b=0;const w=t.status===mn.PAID,_=w?"PAID":"UNPAID",T=w?[34,197,94]:[249,115,22];i.setFillColor(T[0],T[1],T[2]);const k=70,R=12,C=-45*(Math.PI/180),I=-10,L=25,O=Math.cos(C),q=Math.sin(C),W={x:I,y:L},F={x:I+k*O,y:L+k*q},z={x:F.x-R*q,y:F.y+R*O},ee={x:W.x-R*q,y:W.y+R*O};i.moveTo(W.x,W.y),i.lineTo(F.x,F.y),i.lineTo(z.x,z.y),i.lineTo(ee.x,ee.y),i.close(),i.fill(),i.saveGraphicsState();const le=15,B=15;i.setFont("helvetica","bold"),i.setFontSize(10),i.setTextColor(255,255,255),i.text(_,le,B,{angle:45,align:"center",baseline:"middle"}),i.restoreGraphicsState(),b=25;const ne=t.documentType==="quote"?"Quote":"Invoice";i.setFont("helvetica","normal"),i.setFontSize(20),i.setTextColor(h[0],h[1],h[2]),i.text(ne,l,b),i.setFontSize(12),i.text(t.invoiceNumber,l,b+7);const re=d?"/mirrorzone-logo.png":"/clonmel-logo.png",be="PNG";try{const Xe=await NI(re);if(Xe){const Ge=await(En=>new Promise(Lt=>{const qt=new Image;qt.onload=()=>Lt({w:qt.naturalWidth,h:qt.naturalHeight}),qt.src=En}))(Xe),ct=Ge.w/Ge.h,xt=d?80:60,Ht=20;let pt=xt,At=xt/ct;At>Ht&&(At=Ht,pt=Ht*ct);const rt=a-l-pt;i.addImage(Xe,be,rt,b-10,pt,At)}}catch(Xe){console.error("Error adding logo:",Xe)}b+=20,v(b),b+=8;const P=c/3;i.setFontSize(8),i.setFont("helvetica","bold"),i.text(`${ne} To:`,l,b),i.setFont("helvetica","normal");const ie=(t.customerAddress||"").split(",").map(Xe=>Xe.trim()).filter(Boolean).flatMap(Xe=>i.splitTextToSize(Xe,P-5)),ae=[t.customerName,...ie].filter(Boolean);let he=b+5;ae.forEach(Xe=>{i.text(Xe,l,he),he+=4});const Ne=l+P;i.setFont("helvetica","bold"),i.text("Deliver To:",Ne,b),i.setFont("helvetica","normal");let D=b+5;ae.forEach(Xe=>{i.text(Xe,Ne,D),D+=4});const H=l+P*2;i.setFont("helvetica","bold");const K=d?e.mirrorZoneName||"MirrorZone":e.companyName||"Clonmel Glass & Mirrors Ltd";i.text(K,H,b),i.setFont("helvetica","normal");const Z=d?[e.mirrorZoneAddress||"24 Mary Street, Clonmel, Co. Tipperary, E91 YV52","",`Tel: ${e.mirrorZonePhone||"(052) 61 26306"}`,`Email: ${e.mirrorZoneEmail||"info@mirrorzone.ie"}`,e.mirrorZoneWebsite||"Web: www.mirrorzone.ie"]:[e.companyAddress||"24 Mary Street, Clonmel, Co. Tipperary","",`Tel: ${e.companyPhone||"(052) 612 6306"}`,`Email: ${e.companyEmail||"info@clonmelglassandmirrors.com"}`,e.companyWebsite?`Web: ${e.companyWebsite}`:""].filter(Boolean);let se=b+5;Z.forEach(Xe=>{i.splitTextToSize(Xe,P-5).forEach(Ge=>{i.text(Ge,H,se),se+=4})}),b=Math.max(he,D,se)+5,v(b),b+=6;const de=[{label:`${ne} Date`,val:new Date(t.dateIssued).toLocaleDateString("en-GB")},{label:"Ref. No.",val:t.invoiceNumber},{label:"Account Manager",val:"Admin"},{label:"VAT No.",val:e.vatNumber||"IE8252470Q"},{label:"Payment Due",val:t.dueDate?new Date(t.dueDate).toLocaleDateString("en-GB"):"On Receipt"},{label:"Credit Terms",val:"30 Days"}],fe=c/de.length;i.setFont("helvetica","bold"),i.setFontSize(8),de.forEach((Xe,Se)=>{i.text(Xe.label,l+Se*fe,b)}),b+=5,i.setFont("helvetica","normal"),de.forEach((Xe,Se)=>{i.text(Xe.val,l+Se*fe,b)}),b+=5,v(b),b+=10;const me=[["Description","Quantity","Price","VAT Rate","Total"]],Me=t.items.map(Xe=>[Xe.description,Xe.quantity.toString(),ia(Xe.unitPrice),"23.00%",ia(Xe.total)]);T2(i,{startY:b,head:me,body:Me,theme:"plain",styles:{fontSize:8,font:"helvetica",textColor:h,cellPadding:5,valign:"middle"},headStyles:{fillColor:[243,244,246],textColor:[31,41,55],fontStyle:"bold",fontSize:9,halign:"left"},columnStyles:{0:{cellWidth:"auto",halign:"left"},1:{cellWidth:25,halign:"right"},2:{cellWidth:30,halign:"right"},3:{cellWidth:25,halign:"right"},4:{cellWidth:30,halign:"right"}},didParseCell:Xe=>{Xe.section==="head"&&Xe.column.index>0&&(Xe.cell.styles.halign="right")}}),b=i.lastAutoTable.finalY+10;const we=l,Pe=[["23.00%",`${ia(t.subtotal)}`,`${ia(t.taxAmount)}`,`${ia(t.total)}`]];i.setFont("helvetica","bold"),i.setFontSize(9),i.text("VAT Analysis",we,b-2),T2(i,{startY:b,margin:{left:we},tableWidth:90,head:[["VAT Rate %","Net","VAT","Gross"]],body:Pe,theme:"plain",styles:{fontSize:8,font:"helvetica",textColor:h,cellPadding:3,lineColor:[229,231,235],lineWidth:.1},headStyles:{fillColor:[243,244,246],textColor:[0,0,0],fontStyle:"bold",halign:"left"},columnStyles:{0:{halign:"left"},1:{halign:"right"},2:{halign:"right"},3:{halign:"right"}}});let Ue=b;const et=a-l,Ie=a-l-60,ue=(Xe,Se,Ge=!1,ct=!1)=>{i.setFont("helvetica",Ge?"bold":"normal"),i.setFontSize(Ge&&ct?11:9),i.setTextColor(h[0],h[1],h[2]),i.text(Xe,Ie,Ue+4),i.text(Se,et,Ue+4,{align:"right"}),Ue+=6};i.setDrawColor(209,213,219),i.setLineWidth(.3),i.line(Ie,Ue,et,Ue),ue("Total Net",`${ia(t.subtotal)}`),ue("Total Discount",`${ia(0)}`),ue("Total VAT",`${ia(t.taxAmount)}`),Ue+=4,i.line(Ie,Ue,et,Ue),Ue+=2,ue("Total Gross",`${ia(t.total)}`,!0),Ue+=2,i.line(Ie,Ue,et,Ue),Ue+=2;const yt=t.amountPaid||0;ue("Less Deposit",`${ia(yt)}`),Ue+=4,i.setDrawColor(31,41,55),i.setLineWidth(.5),i.line(Ie,Ue,et,Ue),Ue+=2,ue("Total Payable",`${ia(t.balanceDue)}`,!0,!0);const at=i.lastAutoTable.finalY;b=Math.max(at,Ue)+15,i.setDrawColor(229,231,235),i.setLineWidth(.1),i.line(l,b,a-l,b),b+=5;const Ye=l;if(i.setFont("helvetica","bold"),i.setFontSize(9),t.notes){i.text("Notes:",Ye,b),b+=4,i.setFont("helvetica","normal"),i.setFontSize(8);const Xe=i.splitTextToSize(t.notes||"",80);i.text(Xe,Ye,b)}b+=10,i.setFont("helvetica","bold"),i.setFontSize(9),i.text("Bank Details",Ye,b),b+=5,i.setFont("helvetica","normal"),i.setFontSize(8),(d?[{l:"Account Name:",v:e.mirrorZoneAccountName||"MirrorZone"},{l:"Bank Name:",v:e.mirrorZoneBankName||"Bank of Ireland"},{l:"BIC/SWIFT:",v:e.mirrorZoneBic||"BOFIIE2D"},{l:"IBAN:",v:e.mirrorZoneIban||"IE12BOFI90001010101234"}]:[{l:"Account Name:",v:e.accountName||"Clonmel Glass & Mirrors"},{l:"Bank Name:",v:e.bankName||"PTSB"},{l:"BIC/SWIFT:",v:e.bic||"PTSBIE2D"},{l:"IBAN:",v:e.iban||"IE98IPBS99071010105209"}]).forEach(Xe=>{i.setFont("helvetica","bold"),i.text(Xe.l,Ye,b),i.setFont("helvetica","normal"),i.text(Xe.v,Ye+25,b),b+=4});const nt=o-10;i.setFillColor(243,244,246),i.rect(0,nt-5,a,15,"F"),i.setTextColor(75,85,99),i.setFontSize(8);const tt=new Date().toLocaleDateString("en-GB");return i.text(`Printed as: ${tt} | Page 1 of 1`,l,nt+2),i.text("Created by Clonmel Glass Invoice Hub",a-l,nt+2,{align:"right"}),i},m5=async(t,e,n)=>{const i=await Nm(t,e);if(/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)){const a=i.output("blob"),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`${t.invoiceNumber}.pdf`,l.style.display="none",document.body.appendChild(l),l.click(),setTimeout(()=>{document.body.removeChild(l),URL.revokeObjectURL(o)},100)}else i.save(`${t.invoiceNumber}.pdf`)},Am=async(t,e,n)=>(await Nm(t,e)).output("bloburl").toString(),AI=async(t,e,n,i,a)=>{if(!e.webhookUrl)throw new Error("Webhook URL not configured in Settings.");try{const c=(await Nm(t,e,n)).output("datauristring").split(",")[1],d={generatedAt:new Date().toISOString(),webhookType:"INVOICE_SEND",notificationType:a||"Manual Send",filename:`${t.invoiceNumber}.pdf`,pdfBase64:c,invoice:{id:t.id,number:t.invoiceNumber,status:t.status,dateIssued:t.dateIssued.split("T")[0].split("-").reverse().join("-"),dueDate:t.dueDate?t.dueDate.split("T")[0].split("-").reverse().join("-"):"",currency:"EUR",notes:t.notes,reminderCount:t.reminderCount||0,totals:{subtotal:`${t.subtotal.toFixed(2)}`,taxRate:t.taxRate,taxAmount:`${t.taxAmount.toFixed(2)}`,total:`${t.total.toFixed(2)}`,amountPaid:`${(t.amountPaid||0).toFixed(2)}`,balanceDue:`${(t.balanceDue||0).toFixed(2)}`},items:t.items.map(v=>({description:v.description,quantity:v.quantity,unitPrice:`${v.unitPrice.toFixed(2)}`,total:`${v.total.toFixed(2)}`,unit:v.unit}))},customer:{id:t.customerId,name:t.customerName,firstName:t.customerName?t.customerName.split(" ")[0]:"",lastName:t.customerName?t.customerName.split(" ").slice(1).join(" "):"",email:t.customerEmail,phone:t.customerPhone,address:t.customerAddress,city:i==null?void 0:i.city,postalCode:i==null?void 0:i.postalCode,country:i==null?void 0:i.country,companyName:i==null?void 0:i.company,tags:i==null?void 0:i.tags,crmNotes:i==null?void 0:i.notes},sender:{company:t.company||"clonmel",taxId:e.vatNumber}},h=await fetch(e.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!h.ok)throw new Error(`Webhook failed: ${h.statusText}`);return!0}catch(o){throw console.error("Webhook sending failed:",o),o}},bl=t=>{if(t==null)return"";if(typeof t=="object"){if(t.message)return String(t.message);try{return JSON.stringify(t)}catch{return""}}return String(t)},za=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),Rd=({label:t,value:e,icon:n,color:i})=>{const a=(i==null?void 0:i.split("-")[1])||"slate";return g.jsxs("div",{className:"relative overflow-hidden bg-white p-6 rounded-3xl border border-slate-100 shadow-xl shadow-slate-200/40 hover:shadow-2xl hover:shadow-slate-200/60 hover:-translate-y-1 transition-all duration-300 group",children:[g.jsx("div",{className:`absolute -top-10 -right-10 w-40 h-40 rounded-full blur-3xl opacity-10 bg-${a}-500 group-hover:opacity-20 transition-opacity`}),g.jsxs("div",{className:"relative flex items-start justify-between z-10",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest",children:bl(t)}),g.jsx("h3",{className:"text-3xl font-black text-slate-800 mt-2 tracking-tight",children:bl(e)})]}),g.jsx("div",{className:`p-3.5 rounded-2xl ${i} shadow-lg shadow-${a}-500/20 group-hover:scale-110 transition-transform duration-300`,children:g.jsx(n,{size:24,className:"text-white"})})]})]})},TI=({invoice:t,onClose:e,onSendReminder:n,isReminding:i})=>{const a=new Date;a.setHours(0,0,0,0);const o=new Date(t.dueDate);o.setHours(0,0,0,0);const l=o.getTime()-a.getTime(),c=Math.ceil(l/(1e3*60*60*24)),d=c<0;return g.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:g.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-300 border border-slate-100",children:[g.jsxs("div",{className:"p-8 bg-slate-50 border-b border-slate-100 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:`h-16 w-16 rounded-3xl flex items-center justify-center text-white shadow-xl ${d?"bg-rose-500":"bg-brand-600"}`,children:g.jsx(sb,{size:32})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:t.customerName}),g.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Client Profile & Payment Status"})]})]}),g.jsx("button",{onClick:e,className:"p-4 text-slate-400 hover:text-slate-900 hover:bg-slate-200 rounded-full transition-all",children:g.jsx(Ga,{size:24})})]}),g.jsxs("div",{className:"p-8 space-y-8 overflow-y-auto max-h-[70vh] custom-scrollbar",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-3 text-slate-600",children:[g.jsx(dm,{size:18,className:"text-brand-500"}),g.jsx("span",{className:"text-sm font-bold",children:t.customerPhone||"No phone provided"})]}),g.jsxs("div",{className:"flex items-center gap-3 text-slate-600",children:[g.jsx(cm,{size:18,className:"text-brand-500"}),g.jsx("span",{className:"text-sm font-bold",children:t.customerEmail||"No email provided"})]}),g.jsxs("div",{className:"flex items-start gap-3 text-slate-600",children:[g.jsx(Tl,{size:18,className:"text-brand-500 mt-1"}),g.jsxs("div",{children:[g.jsxs("span",{className:"text-sm font-bold block",children:["Invoice ",t.invoiceNumber]}),g.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:["Ref: ",t.id.slice(-6)]})]})]})]}),g.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 flex flex-col items-center justify-center text-center",children:[g.jsx("div",{className:`text-4xl font-black mb-1 ${d?"text-rose-600":"text-brand-600"}`,children:Math.abs(c)}),g.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:d?"Days Overdue":"Days Until Due"}),g.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs font-bold text-slate-600 bg-white px-4 py-2 rounded-full border border-slate-200",children:[g.jsx(_h,{size:14,className:"text-brand-500"}),"Due ",new Date(t.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})]})]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 text-center",children:[g.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total"}),g.jsx("div",{className:"text-sm font-black text-slate-900",children:za(t.total)})]}),g.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 text-center",children:[g.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Paid"}),g.jsx("div",{className:"text-sm font-black text-emerald-600",children:za(t.amountPaid)})]}),g.jsxs("div",{className:"bg-slate-900 p-4 rounded-2xl text-center shadow-lg shadow-slate-900/20",children:[g.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Balance"}),g.jsx("div",{className:"text-sm font-black text-brand-400",children:za(t.balanceDue)})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2",children:[g.jsx(ch,{size:14})," Ordered Products"]}),g.jsx("div",{className:"space-y-2",children:t.items.map((h,v)=>g.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-xs font-black text-slate-900",children:h.description}),g.jsx("div",{className:"text-[10px] font-bold text-slate-400 mt-0.5",children:h.productId})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("div",{className:"text-xs font-black text-slate-700",children:[h.quantity," units"]}),g.jsx("div",{className:"text-[10px] font-bold text-slate-400",children:za(h.total)})]})]},v))})]}),t.notes&&g.jsxs("div",{className:"p-6 bg-amber-50 rounded-3xl border border-amber-100",children:[g.jsx("h4",{className:"text-[10px] font-black text-amber-700 uppercase tracking-widest mb-2",children:"Project Notes"}),g.jsxs("p",{className:"text-xs text-amber-800 italic leading-relaxed",children:['"',t.notes,'"']})]})]}),g.jsxs("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex gap-4",children:[g.jsx("button",{onClick:e,className:"flex-1 py-4 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-slate-900 transition-all",children:"Close Details"}),g.jsxs("button",{onClick:()=>n(t),disabled:i,className:"flex-[2] bg-brand-600 text-white py-4 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] hover:bg-brand-700 shadow-xl shadow-brand-500/20 transition-all flex items-center justify-center gap-3 disabled:opacity-50",children:[i?g.jsx(Q2,{size:18,className:"animate-spin"}):g.jsx(nb,{size:18}),"Send AI Payment Reminder"]})]})]})})},E2=()=>{const{invoices:t,user:e,databaseError:n,updateInvoice:i,companyLogo:a,refreshDatabase:o}=Os();Fe.useEffect(()=>{o()},[]);const[l,c]=Fe.useState(()=>{const D=[],H=new Date;return[{offsetHr:1,msg:"System health check initiated"},{offsetHr:2,msg:"Database optimization completed"},{offsetHr:5,msg:"Daily revenue report generated"},{offsetHr:12,msg:"Payment gateway sync: 0 new transactions"},{offsetHr:23,msg:"System backup completed successfully"}].forEach(Z=>{const de=new Date(H.getTime()-Z.offsetHr*60*60*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});D.push(`[${de}] ${Z.msg}`)}),D}),[d,h]=Fe.useState(null),[v,b]=Fe.useState(null),[w,_]=Fe.useState(null),T=Fe.useRef(!1),k=Fe.useRef({}),[R,C]=Fe.useState(!1),I=Fe.useRef(!1),[L,O]=Fe.useState("daily"),[q,W]=Fe.useState("all"),[F,z]=Fe.useState(""),[ee,le]=Fe.useState(""),[B,j]=Fe.useState(!1),ne=Fe.useMemo(()=>{if(q==="all")return t;const D=new Date,H=new Date(D.getFullYear(),D.getMonth(),1),K=new Date(D.getFullYear(),D.getMonth()-1,1),Z=new Date(D.getFullYear(),D.getMonth(),0),se=new Date(D.getFullYear(),0,1),de=new Date(D.getFullYear()-1,0,1),fe=new Date(D.getFullYear()-1,11,31);return t.filter(me=>{const Me=new Date(me.dateIssued);switch(q){case"thisMonth":return Me>=H&&Me<=D;case"lastMonth":return Me>=K&&Me<=Z;case"thisYear":return Me>=se&&Me<=D;case"lastYear":return Me>=de&&Me<=fe;case"custom":return!F||!ee?!0:Me>=new Date(F)&&Me<=new Date(ee);default:return!0}})},[t,q,F,ee]),re=ne.filter(D=>D.documentType!=="quote").reduce((D,H)=>D+(Number(H.amountPaid)||0),0),be=ne.filter(D=>D.documentType!=="quote").reduce((D,H)=>D+(Number(H.balanceDue)||0),0),P=ne.filter(D=>D.documentType==="quote").reduce((D,H)=>D+(Number(H.total)||0),0);ne.filter(D=>D.status===mn.PAID&&D.documentType!=="quote").length;const $=Fe.useMemo(()=>{const D=new Date;D.setHours(0,0,0,0);const H=new Date(D);return H.setDate(D.getDate()+3),t.filter(K=>{if(K.documentType==="quote"||K.status===mn.PAID||!K.dueDate)return!1;const Z=new Date(K.dueDate);return isNaN(Z.getTime())?!1:(Z.setHours(0,0,0,0),Z<=H)}).sort((K,Z)=>{const se=K.dueDate?new Date(K.dueDate).getTime():0,de=Z.dueDate?new Date(Z.dueDate).getTime():0;return se-de})},[t]),ie=Fe.useMemo(()=>{const D=new Date;return D.setHours(0,0,0,0),t.filter(H=>H.documentType!=="quote"&&H.status!==mn.PAID&&H.dueDate&&!isNaN(new Date(H.dueDate).getTime())&&new Date(H.dueDate)<D).length},[t]);Fe.useEffect(()=>{(async()=>{if(T.current||t.length===0||n)return;const H=new Date;H.setHours(0,0,0,0);const K=H.toISOString().split("T")[0],Z=t.filter(se=>{if(se.status===mn.PAID)return!1;const de=new Date(se.dueDate);de.setHours(0,0,0,0);const fe=new Date(de);fe.setDate(de.getDate()-2);const me=de.getTime()<H.getTime(),Me=fe.getTime()===H.getTime(),Pe=(I.current?k.current[se.id]:se.lastReminderSent)!==K;return(me||Me)&&Pe});if(Z.length>0){T.current=!0;const se=[],de=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});for(const fe of Z)try{if(!fe.id)continue;if(I.current)k.current[fe.id]=K,se.push(`[${de}] [Auto-Mail] Proactive reminder triggered for ${bl(fe.customerName)}`);else try{await i({...fe,lastReminderSent:K}),se.push(`[${de}] [Auto-Mail] Reminder queued for ${bl(fe.customerName)} (Inv: ${bl(fe.invoiceNumber)})`)}catch(me){if(me.message==="COLUMN_MISSING_REMINDER")I.current=!0,C(!0),k.current[fe.id]=K,se.push(`[${de}]  Switch: Tracking auto-reminders locally.`);else throw me}}catch(me){se.push(`[${de}] Failed for ${bl(fe.invoiceNumber)}: ${(me==null?void 0:me.message)||"Error"}`)}se.length>0&&c(fe=>[...se,...fe].slice(0,50)),T.current=!1}})()},[t.length,n,i]);const ae=async D=>{h(D.id);const H=new Date;H.setHours(0,0,0,0);const K=new Date(D.dueDate);K.setHours(0,0,0,0);const Z=K.getTime()-H.getTime(),se=Math.ceil(Z/(1e3*60*60*24));try{const de=await xk(D.customerName,D.invoiceNumber,D.balanceDue,se),fe=H.toISOString().split("T")[0];if(I.current)k.current[D.id]=fe;else try{await i({...D,lastReminderSent:fe})}catch(Me){Me.message==="COLUMN_MISSING_REMINDER"&&(I.current=!0,C(!0),k.current[D.id]=fe)}const me=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});c(Me=>[`[${me}] [Manual-AI] Sent to ${D.customerEmail||D.customerName}: "${de.slice(0,30)}..."`,...Me]),alert(`AI Reminder Generated & "Sent" to ${D.customerName}:

${de}`)}catch{alert("Failed to generate AI reminder.")}finally{h(null)}},he=async D=>{try{const H=await Am(D,a);_(H)}catch{alert("Preview failed.")}},Ne=Fe.useMemo(()=>{const D={},H=new Date,K=t.filter(Z=>Z.documentType!=="quote");if(L==="yearly"){const Z=[],se=H.getFullYear();for(let de=4;de>=0;de--){const fe=se-de;D[fe.toString()]=0,Z.push({key:fe.toString(),label:fe.toString()})}return K.forEach(de=>{const me=new Date(de.dateIssued).getFullYear().toString();D[me]!==void 0&&(D[me]+=Number(de.total))}),Z.map(de=>({name:de.label,amount:D[de.key]}))}else if(L==="monthly"){const Z=[],se=new Date;for(let de=11;de>=0;de--){const fe=new Date(se.getFullYear(),se.getMonth()-de,1),me=`${fe.getFullYear()}-${String(fe.getMonth()+1).padStart(2,"0")}`,Me=fe.toLocaleDateString("en-US",{month:"short",year:"numeric"});D[me]=0,Z.push({key:me,label:Me})}return K.forEach(de=>{const fe=new Date(de.dateIssued),me=`${fe.getFullYear()}-${String(fe.getMonth()+1).padStart(2,"0")}`;D[me]!==void 0&&(D[me]+=Number(de.total))}),Z.map(de=>({name:de.label,amount:D[de.key]}))}else if(L==="weekly"){const Z=[],se=new Date;se.setHours(0,0,0,0);for(let de=7;de>=0;de--){const fe=new Date(se);fe.setDate(se.getDate()-de*7-se.getDay());const me=new Date(fe);me.setDate(fe.getDate()+6);const Me=fe.toLocaleDateString("en-CA"),we=`${fe.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`;D[Me]=0,Z.push({key:Me,label:we,startDate:new Date(fe),endDate:new Date(me)})}return K.forEach(de=>{const fe=de.status===mn.PAID&&de.paymentDate?de.paymentDate:de.dateIssued,me=new Date(fe);Z.forEach(Me=>{me>=Me.startDate&&me<=Me.endDate&&(D[Me.key]+=Number(de.total))})}),Z.map(de=>({name:de.label,amount:D[de.key]}))}else if(L==="custom"){if(!F||!ee)return[];const Z=[],se=we=>{if(!we)return new Date;if(we.includes("T"))return new Date(we);const Pe=we.split("-");return Pe.length===3?new Date(parseInt(Pe[0]),parseInt(Pe[1])-1,parseInt(Pe[2])):new Date(we)},de=we=>{const Pe=we.getFullYear(),Ue=String(we.getMonth()+1).padStart(2,"0"),et=String(we.getDate()).padStart(2,"0");return`${Pe}-${Ue}-${et}`},fe=se(F),me=se(ee);me.setHours(23,59,59,999);const Me=new Date(fe);for(;Me<=me;){const we=de(Me);D[we]=0,Z.push({key:we,label:Me.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),Me.setDate(Me.getDate()+1)}return K.forEach(we=>{const Pe=we.status===mn.PAID&&we.paymentDate?we.paymentDate:we.dateIssued;let Ue;Pe&&!Pe.includes("T")&&Pe.match(/^\d{4}-\d{2}-\d{2}$/)?Ue=se(Pe):Ue=new Date(Pe);const et=de(Ue);D[et]!==void 0&&(D[et]+=Number(we.total))}),Z.map(we=>({name:we.label,amount:D[we.key]}))}else{const Z=[],se=new Date;se.setHours(0,0,0,0);const de=fe=>{if(!fe)return new Date;if(fe.includes("T"))return new Date(fe);const me=fe.split("-");return me.length===3?new Date(parseInt(me[0]),parseInt(me[1])-1,parseInt(me[2])):new Date(fe)};for(let fe=13;fe>=0;fe--){const me=new Date(se);me.setDate(se.getDate()-fe);const Me=me.toLocaleDateString("en-CA");D[Me]=0,Z.push({key:Me,label:me.toLocaleDateString("en-US",{month:"short",day:"numeric"})})}return K.forEach(fe=>{const me=fe.status===mn.PAID&&fe.paymentDate?fe.paymentDate:fe.dateIssued;let Me;me&&!me.includes("T")&&me.match(/^\d{4}-\d{2}-\d{2}$/)?Me=de(me):Me=new Date(me);const we=Me.toLocaleDateString("en-CA");D[we]!==void 0&&(D[we]+=Number(fe.total))}),Z.map(fe=>({name:fe.label,amount:D[fe.key]}))}},[t,L,F,ee]);return g.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-12",children:[B&&g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in",children:g.jsxs("div",{className:"bg-white rounded-3xl p-8 w-full max-w-md shadow-2xl space-y-6 animate-in zoom-in-95 duration-200",children:[g.jsx("h3",{className:"text-2xl font-black text-slate-800 tracking-tight",children:"Select Date Range"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Start Date"}),g.jsx("input",{type:"date",value:F,onChange:D=>z(D.target.value),className:"w-full bg-slate-50 border-2 border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-700 focus:border-brand-500 outline-none transition-all"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"End Date"}),g.jsx("input",{type:"date",value:ee,onChange:D=>le(D.target.value),className:"w-full bg-slate-50 border-2 border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-700 focus:border-brand-500 outline-none transition-all"})]})]}),g.jsxs("div",{className:"flex gap-3 pt-2",children:[g.jsx("button",{onClick:()=>{j(!1),W("all")},className:"flex-1 py-3 px-6 rounded-xl font-bold text-slate-500 hover:bg-slate-50 transition-colors",children:"Cancel"}),g.jsx("button",{onClick:()=>{F&&ee&&(W("custom"),j(!1))},disabled:!F||!ee,className:"flex-1 py-3 px-6 bg-brand-600 text-white rounded-xl font-bold shadow-lg shadow-brand-500/20 hover:bg-brand-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply Filter"})]})]})}),v&&g.jsx(TI,{invoice:v,onClose:()=>b(null),onSendReminder:ae,isReminding:d===v.id}),g.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Dashboard"}),g.jsx("p",{className:"text-slate-500 font-medium mt-1",children:"Overview & Operations Center"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:"relative",children:[g.jsxs("select",{value:q==="custom"?"custom":q,onChange:D=>{const H=D.target.value;H==="custom"?j(!0):W(H)},className:"appearance-none bg-white text-xs font-black text-slate-700 px-5 py-2.5 rounded-2xl border border-slate-200 shadow-sm outline-none focus:border-brand-500 cursor-pointer pr-8",children:[g.jsx("option",{value:"all",children:"All Time"}),g.jsx("option",{value:"thisMonth",children:"This Month"}),g.jsx("option",{value:"lastMonth",children:"Last Month"}),g.jsx("option",{value:"thisYear",children:"This Year"}),g.jsx("option",{value:"lastYear",children:"Last Year"}),g.jsx("option",{value:"custom",children:"Custom Range..."})]}),g.jsx(um,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 rotate-90 pointer-events-none"})]}),g.jsxs("div",{className:`text-xs font-black px-5 py-2.5 rounded-2xl border flex items-center gap-2 shadow-sm transition-all ${R?"bg-amber-50 text-amber-700 border-amber-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,children:[g.jsx(Q2,{size:14,className:R?"":"animate-pulse"}),R?"LOCAL MODE":"SYSTEM ACTIVE"]}),g.jsx("div",{className:"text-xs font-black bg-white text-slate-700 px-5 py-2.5 rounded-2xl border border-slate-200 shadow-sm",children:new Date().toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsx(Rd,{label:"Total Revenue",value:za(re),icon:tb,color:"bg-emerald-500"}),g.jsx(Rd,{label:"Outstanding",value:za(be),icon:Mc,color:"bg-rose-500"}),g.jsx(Rd,{label:"Quotes Value",value:za(P),icon:Oc,color:"bg-violet-500"})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsx(Rd,{label:"Active Invoices",value:t.filter(D=>D.documentType!=="quote").length,icon:ch,color:"bg-slate-800"}),g.jsx(Rd,{label:"Action Needed",value:ie,icon:q_,color:"bg-amber-500"})]}),g.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:g.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[g.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-xl shadow-slate-200/40",children:[g.jsxs("div",{className:"p-8 border-b border-slate-50 flex items-center justify-between bg-white/50 backdrop-blur-sm",children:[g.jsxs("h3",{className:"text-sm font-black text-slate-800 uppercase tracking-widest flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-brand-50 rounded-lg text-brand-600",children:g.jsx(Tl,{size:18})}),"Priority Actions"]}),g.jsxs("span",{className:"text-[10px] font-black text-slate-400 bg-slate-50 px-3 py-1.5 rounded-full border border-slate-100 uppercase tracking-wider",children:[$.length," Pending"]})]}),g.jsx("div",{className:"p-6 max-h-[500px] overflow-y-auto custom-scrollbar bg-slate-50/30",children:$.length===0?g.jsxs("div",{className:"py-24 text-center",children:[g.jsx("div",{className:"bg-emerald-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:g.jsx(Nh,{size:32,className:"text-emerald-500"})}),g.jsx("h4",{className:"text-lg font-bold text-slate-800",children:"All Clear!"}),g.jsx("p",{className:"text-sm text-slate-400 font-medium mt-1",children:"No collections pending action."})]}):g.jsx("div",{className:"space-y-4",children:$.map(D=>{const H=new Date;H.setHours(0,0,0,0);const K=new Date(D.dueDate);K.setHours(0,0,0,0);const Z=K<H,se=K.getTime()===H.getTime(),de=R?k.current[D.id]:D.lastReminderSent;return g.jsx("div",{onClick:()=>b(D),className:`group p-5 rounded-2xl border transition-all hover:shadow-xl hover:-translate-y-0.5 cursor-pointer bg-white ${Z?"border-rose-100 shadow-rose-100/50":"border-slate-100 shadow-sm"}`,children:g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:`p-3.5 rounded-2xl ${Z?"bg-rose-50 text-rose-600":"bg-slate-50 text-slate-600"}`,children:g.jsx(sb,{size:20})}),g.jsxs("div",{children:[g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("h4",{className:"font-bold text-slate-900 text-lg leading-tight group-hover:text-brand-600 transition-colors",children:bl(D.customerName)})}),g.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1 flex items-center gap-2",children:[g.jsxs("span",{className:"text-slate-400",children:["#",bl(D.invoiceNumber)]}),g.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),g.jsx("span",{children:D.customerPhone||"No Phone"})]})]})]}),g.jsxs("div",{className:"flex items-center gap-4",onClick:fe=>fe.stopPropagation(),children:[g.jsxs("div",{className:"text-right mr-2",children:[g.jsx("div",{className:"text-sm font-black text-slate-900",children:za(D.balanceDue)}),g.jsx("div",{className:`text-[10px] font-black uppercase tracking-widest mt-0.5 ${Z?"text-rose-500":se?"text-brand-500":"text-slate-400"}`,children:Z?"Overdue":se?"Due Today":`${Math.ceil((K.getTime()-H.getTime())/(1e3*3600*24))} Days Left`})]}),g.jsx("button",{onClick:fe=>{fe.stopPropagation(),he(D)},className:"p-3 rounded-xl text-slate-400 hover:bg-slate-50 hover:text-slate-700 transition-all border border-transparent hover:border-slate-100",title:"View PDF",children:g.jsx(uh,{size:18})}),g.jsxs("button",{onClick:fe=>{fe.stopPropagation(),ae(D)},disabled:d===D.id||de===H.toISOString().split("T")[0],className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${de===H.toISOString().split("T")[0]?"bg-slate-100 text-slate-400 cursor-default":"bg-slate-900 text-white hover:bg-brand-600 shadow-xl shadow-slate-900/20"}`,children:[d===D.id?g.jsx(EI,{size:14,className:"animate-spin"}):g.jsx(nb,{size:14}),de===H.toISOString().split("T")[0]?"Sent":"Remind"]})]})]})},D.id)})})})]}),g.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-100 overflow-hidden shadow-sm",children:[g.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-100 flex items-center justify-between",children:[g.jsxs("h3",{className:"text-sm font-black text-slate-800 uppercase tracking-widest flex items-center gap-2",children:[g.jsx(QN,{size:16,className:"text-brand-500"}),L==="yearly"?"Yearly":L==="monthly"?"Monthly":L==="weekly"?"Weekly":"Daily"," Revenue Trends"]}),g.jsxs("div",{className:"flex bg-slate-200/50 p-1 rounded-lg",children:[g.jsx("button",{onClick:()=>O("daily"),className:`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${L==="daily"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Daily"}),g.jsx("button",{onClick:()=>O("weekly"),className:`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${L==="weekly"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Weekly"}),g.jsx("button",{onClick:()=>O("monthly"),className:`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${L==="monthly"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Monthly"}),g.jsx("button",{onClick:()=>O("yearly"),className:`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${L==="yearly"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Yearly"}),g.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),g.jsx("button",{onClick:()=>{O("custom"),j(!0)},className:`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${L==="custom"?"bg-white text-brand-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Custom"})]})]}),g.jsx("div",{className:"p-6 h-80",children:g.jsx(Ex,{width:"100%",height:"100%",children:g.jsxs(Cx,{data:Ne,children:[g.jsx(kx,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:10},dy:10}),g.jsx(Ix,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:10},tickFormatter:D=>za(D)}),g.jsx(Rx,{cursor:{fill:"#f1f5f9"},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},formatter:D=>[`${za(D)}`,"Revenue"]}),g.jsx(Lx,{dataKey:"amount",fill:"#0ea5e9",radius:[4,4,0,0],barSize:40,children:Ne.map((D,H)=>g.jsx(Dx,{fill:D.amount>0?"#0ea5e9":"#e2e8f0"},`cell-${H}`))})]})})})]})]})}),w&&g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/90 p-8 backdrop-blur-xl",children:g.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-7xl h-[94vh] flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-300",children:[g.jsxs("div",{className:"flex justify-between items-center px-10 py-6 border-b-2 border-slate-50 bg-white",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"p-3 bg-brand-50 rounded-2xl text-brand-600",children:g.jsx(uh,{size:24})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-black text-slate-900 uppercase tracking-widest text-sm",children:"Invoice Preview"}),g.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"PDF Document Viewer"})]})]}),g.jsx("button",{onClick:()=>_(null),className:"text-slate-300 hover:bg-rose-50 hover:text-rose-500 rounded-full p-3 transition-all",children:g.jsx(Ga,{size:28})})]}),g.jsx("div",{className:"flex-1 bg-slate-100 p-10 overflow-hidden relative",children:g.jsx("iframe",{src:w,className:"w-full h-full rounded-3xl shadow-2xl border-8 border-white bg-white",title:"PDF Preview"})}),g.jsx("div",{className:"p-8 border-t-2 border-slate-50 bg-white flex justify-end",children:g.jsx("button",{onClick:()=>_(null),className:"px-12 py-4 bg-slate-900 text-white font-black hover:bg-slate-800 rounded-2xl transition-all text-[10px] uppercase tracking-[0.2em] shadow-2xl shadow-slate-900/20",children:"Exit Preview Mode"})})]})})]})},EI=({size:t,className:e})=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[g.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),g.jsx("path",{d:"M3 3v5h5"}),g.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),g.jsx("path",{d:"M16 16h5v5"})]}),CI=t=>{if(!t)return"-";const e=new Date(t);return isNaN(e.getTime())?"-":new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)},C2=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),kI=({status:t,overdue:e})=>{const n={[mn.PAID]:{style:"bg-emerald-50 text-emerald-700 border-emerald-100",icon:g.jsx(Nh,{size:10}),label:"PAID"},[mn.PARTIALLY_PAID]:{style:"bg-amber-50 text-amber-700 border-amber-200",icon:g.jsx(Tl,{size:10}),label:"PARTIALLY PAID"},[mn.UNPAID]:{style:e?"bg-rose-50 text-rose-700 border-rose-200 animate-pulse":"bg-slate-50 text-slate-600 border-slate-200",icon:e?g.jsx(Mc,{size:10}):g.jsx(Tl,{size:10}),label:e?"OVERDUE":"UNPAID"}},{style:i,icon:a,label:o}=n[t]||n[mn.UNPAID];return g.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[9px] font-black border transition-all shadow-sm ${i} tracking-widest`,children:[a,o]})},II=({paid:t,total:e})=>{const n=Math.min(100,Math.max(0,t/e*100));return g.jsxs("div",{className:"w-full max-w-[100px] flex flex-col gap-1",children:[g.jsxs("div",{className:"flex justify-between text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:[g.jsx("span",{children:"Progress"}),g.jsxs("span",{children:[Math.round(n),"%"]})]}),g.jsx("div",{className:"h-1.5 w-full bg-slate-100 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out ${n===100?"bg-emerald-500":"bg-emerald-400"}`,style:{width:`${n}%`}})})]})},RI=()=>{const{invoices:t,updateInvoice:e,deleteInvoice:n,setView:i,companyLogo:a,setEditingInvoice:o,settings:l,customers:c,user:d}=Os(),[h,v]=Fe.useState(""),[b,w]=Fe.useState(null),[_,T]=Fe.useState(""),k=t.filter(O=>{var q,W;return(O.documentType==="invoice"||!O.documentType)&&O.invoiceNumber&&!O.invoiceNumber.startsWith("QT-")&&(((q=O.customerName)==null?void 0:q.toLowerCase().includes(h.toLowerCase()))||((W=O.invoiceNumber)==null?void 0:W.toLowerCase().includes(h.toLowerCase())))}),R=O=>{const q=parseFloat(_);if(isNaN(q)||q<=0)return;const W=(O.amountPaid||0)+q,F=O.total-W;let z=mn.PARTIALLY_PAID;F<=.05&&(z=mn.PAID),e({...O,amountPaid:Math.min(W,O.total),balanceDue:z===mn.PAID?0:Math.max(0,F),status:z,paymentDate:z===mn.PAID?new Date().toISOString():O.paymentDate}),w(null),T("")},C=async O=>{if(window.confirm(`Delete invoice ${O.invoiceNumber}?`))try{await n(O.id)}catch(q){console.error("Failed to delete invoice:",q),alert("Failed to delete invoice. Please try again.")}},I=async O=>{if(!l.webhookUrl){alert("Please configure Webhook URL (n8n) in Settings -> Integrations first.");return}const q=O.reminderCount||0,F=q===0?"First Mail":"Reminder";if(window.confirm(`Send invoice ${O.invoiceNumber} to ${O.customerEmail||"customer"}?

Type: ${F}`))try{const z=c.find(ee=>ee.id===O.customerId);await AI(O,l,a,z,F),alert(`Invoice sent successfully! (${F})`),e({...O,lastReminderSent:new Date().toISOString(),reminderCount:q+1})}catch(z){console.error(z),alert("Failed to send invoice. Check settings.")}},L=async O=>{if(!l.xeroWebhookUrl){alert("Please configure Xero Webhook URL in Settings -> Integrations first.");return}if(window.confirm(`Transfer ${O.invoiceNumber} to Xero?`))try{const q=c.find(F=>F.id===O.customerId),W=await E_(O,q,l,d);alert(W?"Transferred to Xero successfully!":"Failed to transfer to Xero.")}catch(q){console.error(q),alert("Xero transfer failed.")}};return g.jsxs("div",{className:"max-w-[95%] mx-auto space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-black text-slate-800 tracking-tight uppercase",children:["Invoice ",g.jsx("span",{className:"text-brand-500",children:"List"})]}),g.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Manage global ledger & collections"})]}),g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsxs("div",{className:"relative group",children:[g.jsx(jc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-300",size:16}),g.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-3 bg-white text-slate-900 border-2 border-slate-100 rounded-2xl focus:ring-4 focus:ring-brand-500/10 focus:border-brand-500 outline-none text-xs w-full md:w-80",value:h,onChange:O=>v(O.target.value)})]}),g.jsx("button",{onClick:()=>{o(null),i("CREATE_INVOICE")},className:"bg-brand-600 text-white px-6 py-3 rounded-2xl font-black hover:bg-brand-700 transition-all text-[10px] uppercase tracking-[0.2em]",children:"New Invoice"})]})]}),g.jsx("div",{className:"bg-white rounded-[2.5rem] shadow-sm border-2 border-slate-100 overflow-hidden",children:g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-slate-50/70 border-b-2 border-slate-100",children:[g.jsx("th",{className:"text-left py-6 px-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Customer"}),g.jsx("th",{className:"text-right py-6 px-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Amount"}),g.jsx("th",{className:"text-center py-6 px-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Progress"}),g.jsx("th",{className:"text-center py-6 px-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Status"}),g.jsx("th",{className:"text-center py-6 px-10 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:k.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:5,className:"text-center py-12 text-slate-400",children:"No invoices found"})}):k.map(O=>{const q=O.dueDate&&new Date(O.dueDate)<new Date&&O.status!==mn.PAID,W=b===O.id;return g.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[g.jsxs("td",{className:"py-6 px-10",children:[g.jsx("div",{className:"text-lg font-black text-slate-900",children:O.customerName||"Unknown"}),g.jsx("div",{className:"text-[10px] font-bold text-slate-400 mt-0.5",children:O.invoiceNumber}),g.jsx("div",{className:"text-[10px] font-bold text-slate-600 mt-1",children:CI(O.dateIssued)})]}),g.jsxs("td",{className:"py-6 px-10 text-right",children:[g.jsx("div",{className:"text-sm font-black text-slate-900",children:C2(O.total)}),g.jsxs("div",{className:"text-[10px] font-bold text-rose-500 mt-0.5",children:["Balance: ",C2(O.balanceDue||0)]})]}),g.jsx("td",{className:"py-6 px-10 align-middle",children:g.jsx(II,{paid:O.amountPaid||0,total:O.total})}),g.jsx("td",{className:"py-6 px-10 text-center",children:g.jsx(kI,{status:O.status,overdue:!!q})}),g.jsx("td",{className:"py-6 px-10",children:g.jsx("div",{className:"flex items-center justify-center gap-2",children:W?g.jsxs("div",{className:"flex items-center gap-2 bg-white shadow-lg p-1 rounded-xl border border-slate-100 animate-in fade-in zoom-in-95 duration-200",children:[g.jsxs("div",{className:"flex gap-1 mr-1",children:[g.jsx("button",{onClick:()=>T((O.balanceDue||0).toString()),className:"px-2 py-1 text-[10px] font-black bg-brand-50 text-brand-600 rounded-md hover:bg-brand-100 transition-colors uppercase",title:"Pay Full Balance",children:"Full"}),g.jsx("button",{onClick:()=>T(((O.balanceDue||0)/2).toFixed(2)),className:"px-2 py-1 text-[10px] font-black bg-slate-50 text-slate-600 rounded-md hover:bg-slate-100 transition-colors uppercase",title:"Pay 50%",children:"50%"})]}),g.jsxs("div",{className:"relative",children:[g.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs font-bold",children:""}),g.jsx("input",{autoFocus:!0,type:"number",className:"w-24 pl-6 pr-2 py-1.5 text-xs font-bold border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-transparent outline-none",placeholder:"Amount",value:_,onChange:F=>T(F.target.value),onKeyDown:F=>{F.key==="Enter"&&R(O),F.key==="Escape"&&(w(null),T(""))}})]}),g.jsx("button",{onClick:()=>R(O),className:"p-1.5 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors shadow-sm",children:g.jsx(Yd,{size:14,strokeWidth:3})}),g.jsx("button",{onClick:()=>{w(null),T("")},className:"p-1.5 bg-slate-100 text-slate-500 rounded-lg hover:bg-slate-200 transition-colors",children:g.jsx(Ga,{size:14,strokeWidth:3})})]}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>{w(O.id),T((O.balanceDue||0).toString())},className:"p-2 text-emerald-600 bg-emerald-50 hover:bg-emerald-500 hover:text-white rounded-xl transition-all",title:"Record Payment",children:g.jsx(cN,{size:16})}),g.jsx("button",{onClick:()=>{o(O),i("CREATE_INVOICE")},className:"p-2 text-amber-600 bg-amber-50 hover:bg-amber-500 hover:text-white rounded-xl transition-all",title:"Edit",children:g.jsx(ib,{size:16})}),g.jsx("button",{onClick:async()=>{const F=await Am(O,l);window.open(F,"_blank")},className:"p-2 text-brand-600 bg-brand-50 hover:bg-brand-600 hover:text-white rounded-xl transition-all",title:"View PDF",children:g.jsx(uh,{size:16})}),g.jsx("button",{onClick:()=>I(O),className:"p-2 text-violet-600 bg-violet-50 hover:bg-violet-500 hover:text-white rounded-xl transition-all",title:"Send via Email (n8n)",children:g.jsx(cm,{size:16})}),g.jsx("button",{onClick:()=>L(O),className:"p-2 text-blue-600 bg-blue-50 hover:bg-blue-500 hover:text-white rounded-xl transition-all",title:"Send to Xero",children:g.jsx(Z_,{size:16})}),g.jsx("button",{onClick:()=>m5(O,l),className:"p-2 text-slate-600 bg-slate-50 hover:bg-slate-500 hover:text-white rounded-xl transition-all",title:"Download",children:g.jsx(eb,{size:16})}),g.jsx("button",{onClick:()=>C(O),className:"p-2 text-rose-600 bg-rose-50 hover:bg-rose-500 hover:text-white rounded-xl transition-all",title:"Delete",children:g.jsx(No,{size:16})})]})})})]},O.id)})})]})})})]})},k2=({label:t,value:e,onChange:n,min:i,max:a,align:o="left"})=>{const[l,c]=Fe.useState(!1),[d,h]=Fe.useState(new Date),v=Fe.useRef(null);Fe.useEffect(()=>{if(e){const q=new Date(e);isNaN(q.getTime())||h(q)}else h(new Date)},[l,e]),Fe.useEffect(()=>{const q=W=>{v.current&&!v.current.contains(W.target)&&c(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[]);const b=q=>new Date(q.getFullYear(),q.getMonth()+1,0).getDate(),w=q=>new Date(q.getFullYear(),q.getMonth(),1).getDay(),_=q=>{h(new Date(d.getFullYear(),d.getMonth()+q,1))},T=q=>{const W=new Date(d.getFullYear(),d.getMonth(),q),F=W.getFullYear(),z=String(W.getMonth()+1).padStart(2,"0"),ee=String(W.getDate()).padStart(2,"0"),le=`${F}-${z}-${ee}`;n(le),c(!1)},k=q=>{const W=new Date;return q===W.getDate()&&d.getMonth()===W.getMonth()&&d.getFullYear()===W.getFullYear()},R=q=>{if(!e)return!1;const W=new Date(e);return q===W.getDate()&&d.getMonth()===W.getMonth()&&d.getFullYear()===W.getFullYear()},C=q=>q.toLocaleDateString("en-US",{month:"long",year:"numeric"}),I=b(d),L=w(d),O=[];for(let q=0;q<L;q++)O.push(null);for(let q=1;q<=I;q++)O.push(q);return g.jsxs("div",{className:"relative",ref:v,children:[t&&g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:t}),g.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>c(!l),children:[g.jsx(_h,{size:16,className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-brand-500 transition-colors"}),g.jsx("div",{className:`w-full text-slate-900 bg-white border-2 rounded-xl px-4 py-3 text-sm transition-all flex items-center h-[46px] ${l?"border-brand-500 ring-4 ring-brand-500/10":"border-slate-200 hover:border-slate-300"}`,children:e?new Date(e).toLocaleDateString("en-GB"):g.jsx("span",{className:"text-slate-400",children:"Select Date..."})})]}),l&&g.jsxs("div",{className:`absolute z-50 mt-2 bg-white rounded-xl shadow-2xl border border-slate-200 p-4 w-[300px] ${o==="right"?"right-0":"left-0"} animate-in fade-in zoom-in-95 duration-200`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("button",{onClick:()=>_(-1),className:"p-1 hover:bg-slate-100 rounded-lg text-slate-600 transition-colors",children:g.jsx(Ud,{size:20})}),g.jsx("span",{className:"font-bold text-slate-800",children:C(d)}),g.jsx("button",{onClick:()=>_(1),className:"p-1 hover:bg-slate-100 rounded-lg text-slate-600 transition-colors",children:g.jsx(um,{size:20})})]}),g.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(q=>g.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:q},q))}),g.jsx("div",{className:"grid grid-cols-7 gap-1 text-center",children:O.map((q,W)=>g.jsx("div",{children:q?g.jsx("button",{onClick:()=>T(q),className:`w-8 h-8 rounded-lg text-sm font-semibold flex items-center justify-center transition-all
                      ${R(q)?"bg-brand-600 text-white shadow-md shadow-brand-500/30":k(q)?"bg-brand-50 text-brand-600 border border-brand-200":"text-slate-700 hover:bg-slate-100"}
                    `,children:q}):g.jsx("div",{className:"w-8 h-8"})},W))})]})]})},g5=Fe.createContext(void 0),LI=({children:t})=>{const[e,n]=Fe.useState([]),i=Fe.useCallback((o,l="info",c=3e3)=>{const d=Math.random().toString(36).substr(2,9);n(h=>[...h,{id:d,type:l,message:o,duration:c}]),c>0&&setTimeout(()=>{n(h=>h.filter(v=>v.id!==d))},c)},[]),a=o=>{n(l=>l.filter(c=>c.id!==o))};return g.jsxs(g5.Provider,{value:{showToast:i},children:[t,g.jsx("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 pointer-events-none",children:e.map(o=>g.jsxs("div",{className:`pointer-events-auto min-w-[300px] max-w-sm w-full bg-white rounded-xl shadow-2xl border-l-4 p-4 flex items-start gap-3 animate-in slide-in-from-right-full fade-in duration-300 ${o.type==="success"?"border-brand-500":o.type==="error"?"border-rose-500":o.type==="warning"?"border-amber-500":"border-slate-500"}`,children:[g.jsxs("div",{className:`mt-0.5 ${o.type==="success"?"text-brand-500":o.type==="error"?"text-rose-500":o.type==="warning"?"text-amber-500":"text-slate-500"}`,children:[o.type==="success"&&g.jsx(k0,{size:20}),o.type==="error"&&g.jsx(Mc,{size:20}),o.type==="warning"&&g.jsx(eA,{size:20}),o.type==="info"&&g.jsx(xN,{size:20})]}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"text-sm font-bold text-slate-800 capitalize",children:o.type}),g.jsx("p",{className:"text-xs text-slate-600 font-medium mt-1 leading-relaxed",children:o.message})]}),g.jsx("button",{onClick:()=>a(o.id),className:"text-slate-400 hover:text-slate-600 transition-colors",children:g.jsx(Ga,{size:16})})]},o.id))})]})},v5=()=>{const t=Fe.useContext(g5);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},vl=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),DI=()=>{var di;const{products:t,addInvoice:e,updateInvoice:n,user:i,setView:a,customers:o,addCustomer:l,editingInvoice:c,setEditingInvoice:d,settings:h}=Os(),{showToast:v}=v5(),[b,w]=Fe.useState("invoice"),[_,T]=Fe.useState(`INV-${Date.now().toString().slice(-6)}`);Fe.useEffect(()=>{if(c){if(T(c.invoiceNumber),I(c.customerName),O(c.customerEmail||""),W(c.customerPhone||""),z(c.customerAddress||""),he(c.dateIssued.split("T")[0]),D(c.dueDate.split("T")[0]),K(c.items),ue(c.notes||""),R(c.company||"clonmel"),c.documentType==="invoice"&&(c.invoiceNumber.startsWith("QT")||c.invoiceNumber.startsWith("qt"))){const ze=Math.floor(1e3+Math.random()*9e3);T(`INV-${new Date().getFullYear()}-${ze}`)}else T(c.invoiceNumber);w(c.documentType||"invoice"),se(c.taxRate||h.taxRate||23)}else T(`${b==="quote"?"QT":"INV"}-${Date.now().toString().slice(-6)}`),se(h.taxRate||23)},[c,b,h]);const[k,R]=Fe.useState("clonmel"),[C,I]=Fe.useState(""),[L,O]=Fe.useState(""),[q,W]=Fe.useState(""),[F,z]=Fe.useState(""),[ee,le]=Fe.useState(""),[B,j]=Fe.useState(""),[ne,re]=Fe.useState(""),[be,P]=Fe.useState(""),[$,ie]=Fe.useState("Ireland"),[ae,he]=Fe.useState(new Date().toISOString().split("T")[0]),[Ne,D]=Fe.useState(""),[H,K]=Fe.useState([]),[Z,se]=Fe.useState(23),[de,fe]=Fe.useState(null),[me,Me]=Fe.useState(""),[we,Pe]=Fe.useState(""),[Ue,et]=Fe.useState(""),[Ie,ue]=Fe.useState(""),[yt,at]=Fe.useState(!1),[Ye,Ze]=Fe.useState(""),[nt,tt]=Fe.useState(!1),[Xe,Se]=Fe.useState(""),[Ge,ct]=Fe.useState(null);Fe.useEffect(()=>{c&&ct(c.customerId)},[c]);const[xt,Ht]=Fe.useState(!1),[pt,At]=Fe.useState(""),[rt,En]=Fe.useState(""),[Lt,qt]=Fe.useState(1),[Pt,_t]=Fe.useState(""),[Xn,Yt]=Fe.useState(""),[Cr,an]=Fe.useState(!1),[vi,Yi]=Fe.useState(""),on=Fe.useMemo(()=>{const ze={};return t.filter($t=>k==="mirrorzone"?$t.company==="mirrorzone"||!$t.company&&$t.category==="Mirrors":$t.company==="clonmel"||!$t.company&&$t.category!=="Mirrors").forEach($t=>{ze[$t.category]||(ze[$t.category]=[]),ze[$t.category].push($t)}),ze},[t,k]),Nt=H.reduce((ze,Mt)=>ze+Mt.total,0),Vt=Nt*Z/100,Zr=Nt+Vt,gn=t.find(ze=>ze.id===Xe),ji=vi?parseFloat(vi):gn?gn.price:0,yi=typeof Lt=="string"?parseFloat(Lt)||0:Lt,wt=ji*yi,sr=wt*(1+Z/100),ar=(ze,Mt)=>{const $t=parseFloat(ze),Dn=parseFloat(Mt);if(!isNaN($t)&&!isNaN(Dn)&&$t>0&&Dn>0){const Bn=$t*Dn/1e6;qt(Number(Bn.toFixed(6)))}else qt(0)},Ei=()=>{if(!Xe||!gn)return;let ze=rt||gn.name;Cr&&Pt&&Xn&&(ze+=` (${Pt}mm x ${Xn}mm)`);const Mt={id:Date.now().toString(),productId:gn.id,description:ze,quantity:yi,unitPrice:ji,total:ji*yi,unit:gn.unit};K([...H,Mt]),Se(""),En(""),qt(1),_t(""),Yt(""),Yi(""),an(!1)},Fn=ze=>{K(H.filter(Mt=>Mt.id!==ze))},Ln=ze=>{fe(ze.id),Me(ze.description),Pe(ze.quantity.toString()),et(ze.unitPrice.toString())},Ci=()=>{if(de){const ze=parseFloat(we)||0,Mt=parseFloat(Ue)||0;K(H.map($t=>$t.id===de?{...$t,description:me,quantity:ze,unitPrice:Mt,total:ze*Mt}:$t)),fe(null)}},vs=()=>{fe(null)},[ci,ln]=Fe.useState(!1),wn=async()=>{if(!C||H.length===0){v("Please fill in customer details and add at least one item.","warning");return}const ze=[ee,B,ne,be,$].filter(Boolean).join(", ");ln(!0);try{let Mt=Ge;if(!Mt&&C){const Dn=o.find(Bn=>Bn.name.toLowerCase()===C.toLowerCase()||Bn.email&&L&&Bn.email.toLowerCase()===L.toLowerCase());if(Dn)Mt=Dn.id;else{const Bn={id:Date.now().toString()+Math.random().toString(36).substr(2,5),name:C,email:L,phone:q,address:ee,addressLine2:B,city:ne,postalCode:be,country:$,company:"",notes:"Auto-created from Invoice Builder",tags:["Auto-Created"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(i==null?void 0:i.id)||"system"};await l(Bn),Mt=Bn.id,v(`New customer "${C}" added to CRM.`,"success")}}const $t={id:c&&c.id?c.id:Date.now().toString(),invoiceNumber:_,customerId:Mt||"cust_unknown",customerName:C,customerEmail:L,customerPhone:q,customerAddress:ze,company:k,documentType:b,items:H,subtotal:Nt,taxRate:Z,taxAmount:Vt,total:Zr,amountPaid:c?c.amountPaid:0,balanceDue:Zr-(c?c.amountPaid:0),status:c?c.status:b==="quote"?"PENDING":mn.UNPAID,dateIssued:ae,dueDate:Ne||ae,notes:Ie,createdBy:(i==null?void 0:i.id)||"unknown",validUntil:b==="quote"?(c==null?void 0:c.validUntil)||new Date(Date.now()+720*60*60*1e3).toISOString():void 0};c&&c.id?(c.documentType!==b&&b==="invoice"&&$t.status==="PENDING"&&($t.status=mn.UNPAID),await n($t)):await e($t),d(null),v(`${b==="quote"?"Quote":"Invoice"} saved successfully.`,"success"),a(b==="quote"?"QUOTES":"INVOICES")}catch(Mt){console.error("Failed to save:",Mt),v("Failed to save invoice/quote. Check console for details.","error")}finally{ln(!1)}};return g.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-10",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:[c?"Edit":"Generate"," ",b==="quote"?"Quote":"Invoice"]}),g.jsxs("div",{className:"flex gap-4 mt-4 bg-slate-100 p-1.5 rounded-2xl w-fit",children:[g.jsx("button",{onClick:()=>w("invoice"),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${b==="invoice"?"bg-slate-800 text-white shadow-slate-900/10 scale-100":"bg-transparent text-slate-400 hover:text-slate-600 scale-95 hover:scale-100"}`,children:"Invoice Mode"}),g.jsx("button",{onClick:()=>w("quote"),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${b==="quote"?"bg-brand-500 text-white shadow-brand-500/20 scale-100":"bg-transparent text-slate-400 hover:text-slate-600 scale-95 hover:scale-100"}`,children:"Quote Mode"})]})]}),g.jsx("button",{onClick:()=>a("INVOICES"),className:"text-slate-500 hover:text-slate-800 font-semibold text-sm bg-slate-100 px-4 py-2 rounded-lg transition-colors self-start md:self-auto",children:"Cancel & Exit"})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200",children:[g.jsx("div",{className:`p-6 border-b-4 ${k==="clonmel"?"bg-gradient-to-r from-red-600 to-red-700 border-red-800":"bg-gradient-to-r from-slate-900 to-purple-900 border-purple-950"}`,children:g.jsxs("div",{className:"max-w-2xl mx-auto",children:[g.jsx("label",{className:"block text-xs font-black text-white/80 uppercase tracking-[0.2em] mb-3 text-center",children:"Select Company for Invoice"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsx("button",{type:"button",onClick:()=>{R("clonmel"),Se(""),an(!1),qt(1),_t(""),Yt(""),En("")},className:`p-6 rounded-xl border-2 transition-all duration-300 ${k==="clonmel"?"bg-white border-white shadow-2xl scale-105":"bg-red-600/30 border-white/30 hover:bg-red-600/50 hover:border-white/50"}`,children:g.jsxs("div",{className:`text-center ${k==="clonmel"?"text-red-600":"text-white"}`,children:[g.jsx("div",{className:"text-xl font-black mb-1",children:"CLONMEL GLASS"}),g.jsx("div",{className:"text-xs font-semibold opacity-70",children:"& Mirrors Ltd"}),k==="clonmel"&&g.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-red-600 text-white px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[g.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"Selected"]})]})}),g.jsx("button",{type:"button",onClick:()=>{R("mirrorzone"),Se(""),an(!1),qt(1),_t(""),Yt(""),En("")},className:`p-6 rounded-xl border-2 transition-all duration-300 ${k==="mirrorzone"?"bg-white border-white shadow-2xl scale-105":"bg-slate-900/30 border-white/30 hover:bg-slate-900/50 hover:border-white/50"}`,children:g.jsxs("div",{className:`text-center ${k==="mirrorzone"?"text-slate-900":"text-white"}`,children:[g.jsx("div",{className:"text-xl font-black",children:"MIRRORZONE"}),k==="mirrorzone"&&g.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-slate-900 text-white px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[g.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),"Selected"]})]})})]})]})}),g.jsxs("div",{className:"p-6 md:p-8 bg-slate-50 border-b border-slate-200 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"relative",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:"Search & Select Customer (Optional)"}),g.jsxs("div",{className:"relative",children:[g.jsx(jc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:16}),g.jsx("input",{type:"text",placeholder:"Type name, email or phone...",value:Ye,onChange:ze=>{Ze(ze.target.value),tt(!0)},onFocus:()=>tt(!0),className:"w-full pl-11 pr-4 py-3 bg-white border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all text-sm font-semibold text-slate-700"})]}),nt&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>tt(!1)}),g.jsxs("div",{className:"absolute z-20 w-full mt-2 bg-white rounded-xl border-2 border-slate-100 shadow-xl max-h-60 overflow-y-auto",children:[o.filter(ze=>ze.name.toLowerCase().includes(Ye.toLowerCase())||ze.email.toLowerCase().includes(Ye.toLowerCase())||ze.phone.includes(Ye)).map(ze=>g.jsxs("button",{onClick:()=>{I(ze.name),O(ze.email),W(ze.phone);const Mt=[ze.address,ze.city,ze.postalCode,ze.country];z(Mt.filter(Boolean).join(", ")),Ze(ze.name),ct(ze.id),tt(!1)},className:"w-full text-left px-4 py-3 hover:bg-slate-50 transition-colors border-b border-slate-50 last:border-0 flex justify-between items-center group",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-slate-800 text-sm group-hover:text-brand-600 transition-colors",children:ze.name}),g.jsxs("div",{className:"text-xs text-slate-400",children:[ze.email,"  ",ze.phone]})]}),C===ze.name&&g.jsx(Yd,{size:16,className:"text-brand-500"})]},ze.id)),o.filter(ze=>ze.name.toLowerCase().includes(Ye.toLowerCase())||ze.email.toLowerCase().includes(Ye.toLowerCase())||ze.phone.includes(Ye)).length===0&&g.jsx("div",{className:"p-4 text-center text-xs text-slate-400 font-medium",children:"No matching customers found"})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:"Customer / Client"}),g.jsx("input",{type:"text",className:"w-full text-lg font-bold text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 focus:ring-4 focus:ring-brand-500/10 focus:border-brand-500 outline-none transition-all",placeholder:"Search or enter name...",value:C,onChange:ze=>I(ze.target.value)})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:"Email"}),g.jsx("input",{type:"email",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",placeholder:"email@example.com",value:L,onChange:ze=>O(ze.target.value)})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:"Phone"}),g.jsxs("div",{className:"relative",children:[g.jsx(dm,{size:14,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),g.jsx("input",{type:"tel",className:"w-full pl-10 text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",placeholder:"Phone number",value:q,onChange:ze=>W(ze.target.value)})]})]})]}),g.jsxs("div",{className:"space-y-3 p-1",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-1",children:"Billing Address"}),g.jsx("input",{type:"text",placeholder:"Address Line 1",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",value:ee,onChange:ze=>le(ze.target.value)}),g.jsx("input",{type:"text",placeholder:"Address Line 2 (Optional)",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",value:B,onChange:ze=>j(ze.target.value)}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsx("input",{type:"text",placeholder:"City",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",value:ne,onChange:ze=>re(ze.target.value)}),g.jsx("input",{type:"text",placeholder:"Eircode / Postcode",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",value:be,onChange:ze=>P(ze.target.value)})]}),g.jsx("input",{type:"text",placeholder:"Country",className:"w-full text-slate-900 bg-white border-2 border-slate-200 rounded-xl px-4 py-3 text-sm focus:border-brand-500 outline-none transition-all",value:$,onChange:ze=>ie(ze.target.value)})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsx("div",{children:g.jsx(k2,{label:"Issue Date",value:ae,onChange:he})}),g.jsx("div",{children:g.jsx(k2,{label:"Due Date",value:Ne,onChange:D,align:"right"})})]}),g.jsxs("div",{className:"p-5 bg-white rounded-2xl border-2 border-slate-100 shadow-sm flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("span",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Document Reference"}),g.jsx("span",{className:"font-mono text-sm font-bold text-brand-600",children:_})]}),g.jsx("div",{className:"h-10 w-10 bg-brand-50 rounded-full flex items-center justify-center text-brand-500",children:g.jsx(dh,{size:20})})]})]})]}),g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"mb-8 p-6 bg-slate-50 rounded-2xl border-2 border-slate-100 space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-end",children:[g.jsxs("div",{className:"flex-1 w-full",children:[g.jsxs("label",{className:"block text-[10px] font-black text-slate-500 mb-2 uppercase tracking-wider flex items-center gap-2",children:[g.jsx("span",{className:"flex items-center justify-center h-4 w-4 bg-brand-600 text-white rounded-full text-[8px]",children:"1"}),"Select Product from Catalog"]}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>{Ht(!xt),At("")},className:"w-full border-2 border-slate-200 text-slate-700 rounded-lg px-3 py-2.5 text-sm font-medium bg-white shadow-sm transition-all focus:outline-none focus:ring-4 focus:ring-brand-500/10 focus:border-brand-500 flex items-center justify-between group",children:[g.jsx("span",{className:Xe?"text-slate-900":"text-slate-400",children:Xe?(di=t.find(ze=>ze.id===Xe))==null?void 0:di.name:"Search all glass & mirrors..."}),g.jsx(Y_,{size:16,className:`text-slate-400 transition-transform ${xt?"rotate-180":""}`})]}),xt&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>Ht(!1)}),g.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border-2 border-slate-100 z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[g.jsx("div",{className:"p-2 border-b border-slate-50 sticky top-0 bg-white",children:g.jsxs("div",{className:"relative",children:[g.jsx(jc,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),g.jsx("input",{autoFocus:!0,type:"text",placeholder:"Type to filter...",className:"w-full bg-slate-50 text-slate-900 rounded-lg pl-9 pr-3 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-brand-500/10",value:pt,onChange:ze=>At(ze.target.value),onClick:ze=>ze.stopPropagation()})]})}),g.jsxs("div",{className:"max-h-60 overflow-y-auto p-1",children:[Object.entries(on).map(([ze,Mt])=>{const $t=Mt.filter(Dn=>Dn.name.toLowerCase().includes(pt.toLowerCase()));return $t.length===0?null:g.jsxs("div",{className:"mb-1",children:[g.jsx("div",{className:"px-3 py-1.5 text-[10px] uppercase tracking-widest font-black text-slate-400 bg-slate-50/50 rounded-md mb-1 mx-1",children:ze}),$t.map(Dn=>g.jsxs("button",{onClick:()=>{Se(Dn.id);const Bn=t.find(ys=>ys.id===Dn.id);Bn&&(En(Bn.name),Bn.unit==="sqm"&&k!=="mirrorzone"?(an(!0),qt(0)):(an(!1),qt(1))),Ht(!1)},className:"w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-slate-700 hover:bg-brand-50 hover:text-brand-700 transition-colors flex items-center justify-between group",children:[g.jsx("span",{children:Dn.name}),g.jsxs("span",{className:"text-xs text-slate-400 font-mono group-hover:text-brand-500",children:[vl(Dn.price),"/",Dn.unit]})]},Dn.id))]},ze)}),Object.values(on).every(ze=>ze.filter(Mt=>Mt.name.toLowerCase().includes(pt.toLowerCase())).length===0)&&g.jsx("div",{className:"p-4 text-center text-slate-400 text-xs font-medium italic",children:"No products found."})]})]})]})]}),g.jsx("div",{className:"absolute right-0 top-0 -mt-7",children:g.jsxs("button",{onClick:()=>a("PRODUCTS"),className:"text-[10px] font-bold text-brand-600 hover:text-brand-700 hover:underline flex items-center gap-1",children:[g.jsx(Sl,{size:10}),"Manage Products"]})})]}),!Cr&&Xe&&g.jsxs("div",{className:"flex gap-3 w-full md:w-auto animate-in zoom-in duration-200",children:[g.jsxs("div",{className:"w-20",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-500 mb-2 uppercase tracking-wider",children:"Quantity"}),g.jsx("input",{type:"number",min:"1",className:"w-full border-2 border-slate-200 text-slate-700 rounded-lg px-3 py-2.5 text-sm font-medium focus:outline-none focus:border-brand-500 bg-white shadow-sm",value:Lt,onChange:ze=>qt(ze.target.value)})]}),g.jsxs("div",{className:"w-28",children:[g.jsxs("label",{className:"block text-[10px] font-black text-slate-500 mb-2 uppercase tracking-wider whitespace-nowrap",children:["Price () ",g.jsx("span",{className:"text-[9px] text-slate-400 font-bold normal-case ml-1",children:"(Override)"})]}),g.jsx("input",{type:"number",placeholder:gn?gn.price.toFixed(2):"0.00",className:"w-full border-2 border-slate-200 text-slate-700 rounded-lg px-3 py-2.5 text-sm font-medium focus:outline-none focus:border-brand-500 bg-white shadow-sm placeholder:text-slate-300",value:vi,onChange:ze=>Yi(ze.target.value)})]})]}),g.jsxs("div",{className:"w-full md:w-auto flex flex-col gap-2",children:[Xe&&g.jsxs("div",{className:"text-right px-2 animate-in fade-in duration-300",children:[g.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block",children:["Subtotal: ",vl(wt)]}),g.jsxs("span",{className:"text-xs font-black text-brand-600 block",children:["Inc VAT: ",vl(sr)]})]}),g.jsxs("button",{onClick:Ei,disabled:!Xe||Cr&&(isNaN(parseFloat(Pt))||isNaN(parseFloat(Xn))||parseFloat(Pt)<=0||parseFloat(Xn)<=0),className:"w-full bg-brand-600 text-white px-6 py-2.5 rounded-lg hover:bg-brand-700 transition-all flex items-center justify-center space-x-2 text-xs font-bold shadow-lg shadow-brand-500/20 disabled:opacity-50 disabled:shadow-none uppercase tracking-wider",children:[g.jsx(Sl,{size:16}),g.jsx("span",{children:"ADD ITEM"})]})]})]}),Cr&&k!=="mirrorzone"&&g.jsxs("div",{className:"flex flex-col md:flex-row items-stretch gap-6 p-6 bg-white rounded-2xl border-2 border-brand-500 shadow-2xl animate-in slide-in-from-top-4 duration-300",children:[g.jsx("div",{className:"flex items-center justify-center px-4 text-brand-500 bg-brand-50 rounded-xl",children:g.jsx(BN,{size:32})}),g.jsxs("div",{className:"grid grid-cols-2 gap-6 flex-1 w-full",children:[g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"block text-xs font-black text-brand-600 uppercase tracking-widest ml-1",children:"Width (mm)"}),g.jsx("input",{type:"number",placeholder:"0",autoFocus:!0,className:"w-full border-4 border-brand-100 bg-white text-slate-900 rounded-xl px-5 py-4 text-xl font-black outline-none focus:border-brand-500 transition-all placeholder:text-slate-300",value:Pt,onChange:ze=>{_t(ze.target.value),ar(ze.target.value,Xn)}})]}),g.jsxs("div",{className:"space-y-1",children:[g.jsx("label",{className:"block text-xs font-black text-brand-600 uppercase tracking-widest ml-1",children:"Height (mm)"}),g.jsx("input",{type:"number",placeholder:"0",className:"w-full border-4 border-brand-100 bg-white text-slate-900 rounded-xl px-5 py-4 text-xl font-black outline-none focus:border-brand-500 transition-all placeholder:text-slate-300",value:Xn,onChange:ze=>{Yt(ze.target.value),ar(Pt,ze.target.value)}})]})]}),g.jsxs("div",{className:"flex flex-row md:flex-col items-center justify-center gap-4 w-full md:w-48 pt-4 md:pt-0 border-t md:border-t-0 md:border-l border-slate-100",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest",children:"Calculated SQM"}),g.jsx("div",{className:"text-3xl font-black text-brand-600 leading-none",children:Lt.toFixed(6)})]}),g.jsx("button",{onClick:()=>{_t(""),Yt(""),qt(0)},className:"px-4 py-2 text-[10px] font-black text-rose-500 hover:text-white bg-rose-50 hover:bg-rose-500 rounded-lg transition-all uppercase tracking-widest",children:"Clear"})]})]})]}),g.jsx("div",{className:"overflow-x-auto rounded-xl border-2 border-slate-100",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-slate-50 border-b-2 border-slate-100",children:g.jsxs("tr",{children:[g.jsx("th",{className:"text-left py-4 px-6 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Product Description"}),g.jsx("th",{className:"text-center py-4 px-6 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Qty / SQM"}),g.jsx("th",{className:"text-right py-4 px-6 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Unit Price"}),g.jsx("th",{className:"text-right py-4 px-6 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Line Total"}),g.jsx("th",{className:"w-16"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:H.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:5,className:"py-12 text-center text-slate-400",children:g.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[g.jsx(Z2,{size:32,className:"opacity-20"}),g.jsx("p",{className:"text-xs font-medium italic",children:"No items added to this invoice yet."})]})})}):H.map(ze=>g.jsxs("tr",{className:"group hover:bg-slate-50/80 transition-colors",children:[g.jsx("td",{className:"py-4 px-6",children:de===ze.id?g.jsx("div",{className:"flex items-center gap-2",children:g.jsx("input",{type:"text",autoFocus:!0,className:"w-full border border-brand-200 text-slate-700 rounded px-2 py-1 text-sm font-medium focus:outline-none focus:border-brand-500 bg-white",value:me,onChange:Mt=>Me(Mt.target.value),onKeyDown:Mt=>{Mt.key==="Enter"&&Ci(),Mt.key==="Escape"&&vs()}})}):g.jsxs("div",{className:"group/desc relative pr-8",children:[g.jsx("div",{className:"text-sm font-medium text-slate-900",children:ze.description}),g.jsx("div",{className:"text-[10px] text-brand-500 font-mono font-bold mt-0.5",children:ze.productId})]})}),g.jsx("td",{className:"py-4 px-6 text-center text-sm font-bold text-slate-700",children:de===ze.id?g.jsx("input",{type:"number",className:"w-20 text-center border border-brand-200 rounded px-2 py-1 text-sm font-medium focus:outline-none focus:border-brand-500 bg-white",value:we,onChange:Mt=>Pe(Mt.target.value)}):ze.quantity}),g.jsx("td",{className:"py-4 px-6 text-right text-sm font-medium text-slate-500",children:de===ze.id?g.jsx("input",{type:"number",className:"w-24 text-right border border-brand-200 rounded px-2 py-1 text-sm font-medium focus:outline-none focus:border-brand-500 bg-white",value:Ue,onChange:Mt=>et(Mt.target.value)}):vl(ze.unitPrice)}),g.jsx("td",{className:"py-4 px-6 text-right text-sm font-bold text-slate-900",children:vl(ze.total)}),g.jsx("td",{className:"py-4 px-6 text-right",children:de===ze.id?g.jsxs("div",{className:"flex justify-end gap-1",children:[g.jsx("button",{onClick:Ci,className:"p-1.5 bg-emerald-100 text-emerald-600 rounded-lg hover:bg-emerald-200",children:g.jsx(Yd,{size:14})}),g.jsx("button",{onClick:vs,className:"p-1.5 bg-slate-100 text-slate-500 rounded-lg hover:bg-slate-200",children:g.jsx(Ga,{size:14})})]}):g.jsxs("div",{className:"flex justify-end gap-1",children:[g.jsx("button",{onClick:()=>Ln(ze),className:"p-2 text-slate-300 hover:text-brand-600 hover:bg-brand-50 rounded-lg transition-all",children:g.jsx(PN,{size:16})}),g.jsx("button",{onClick:()=>Fn(ze.id),className:"p-2 text-slate-300 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-all",children:g.jsx(No,{size:16})})]})})]},ze.id))})]})})]}),g.jsx("div",{className:"p-6 md:p-8",children:g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start pt-10 mt-6 border-t-2 border-slate-100",children:[g.jsxs("div",{className:"w-full md:w-1/2 pr-0 md:pr-12 mb-10 md:mb-0",children:[g.jsxs("label",{className:"text-xs font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[g.jsx(sA,{size:14,className:"text-purple-500"}),"Custom Notes & Terms"]}),g.jsx("textarea",{className:"w-full border-2 border-slate-200 text-slate-900 rounded-2xl px-5 py-4 text-sm h-40 focus:ring-4 focus:ring-brand-500/10 focus:border-brand-500 outline-none resize-none shadow-sm transition-all",placeholder:"Enter specific project notes or banking instructions...",value:Ie,onChange:ze=>ue(ze.target.value)}),g.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-3 uppercase tracking-wider",children:"Note: These details are visible to the customer on the PDF."})]}),g.jsxs("div",{className:"w-full md:w-[400px] bg-slate-900 text-white p-8 rounded-[2rem] space-y-6 shadow-2xl relative overflow-hidden",children:[g.jsxs("div",{className:"space-y-4 relative z-10",children:[g.jsxs("div",{className:"flex justify-between text-sm items-center border-b border-white/10 pb-4",children:[g.jsx("span",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"Subtotal"}),g.jsx("span",{className:"font-mono font-bold text-lg",children:vl(Nt)})]}),g.jsxs("div",{className:"flex justify-between text-sm items-center pb-2",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsx("span",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"VAT Amount"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-[10px] font-black text-brand-400",children:"Rate:"}),g.jsx("input",{type:"number",value:Z,onChange:ze=>se(parseFloat(ze.target.value)),className:"w-12 bg-slate-800 border border-slate-700 rounded px-1 py-0.5 text-xs text-white text-center font-bold focus:border-brand-500 outline-none"}),g.jsx("span",{className:"text-[10px] font-black text-brand-400",children:"%"})]})]}),g.jsx("span",{className:"font-mono font-bold text-lg",children:vl(Vt)})]})]}),g.jsx("div",{className:"pt-6 border-t-2 border-white/20 relative z-10",children:g.jsxs("div",{className:"flex flex-col gap-2",children:[g.jsx("span",{className:"text-[10px] font-black text-brand-500 uppercase tracking-widest",children:"Total Invoice Value"}),g.jsxs("div",{className:"flex justify-between items-end",children:[g.jsx("span",{className:"text-2xl font-black tracking-tighter text-white",children:"TOTAL DUE"}),g.jsx("span",{className:"text-4xl font-black text-brand-500 font-mono leading-none",children:vl(Zr)})]})]})})]})]})})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-5 pb-20",children:[g.jsx("button",{onClick:()=>a("INVOICES"),className:"px-10 py-5 rounded-2xl border-2 border-slate-200 text-slate-500 font-black hover:bg-slate-100 transition-all text-xs uppercase tracking-[0.2em]",children:"Discard Draft"}),g.jsx("button",{onClick:wn,disabled:ci,className:"px-10 py-5 rounded-2xl bg-brand-600 text-white font-black hover:bg-brand-700 transition-all flex items-center justify-center space-x-4 text-xs uppercase tracking-[0.2em] shadow-2xl shadow-brand-500/40 disabled:opacity-50",children:ci?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),g.jsx("span",{children:"Saving..."})]}):g.jsxs(g.Fragment,{children:[g.jsx(dh,{size:20}),g.jsx("span",{children:c?"Update & Save Changes":"Save & Finalize Invoice"})]})})]})]})},I2=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),MI=()=>{const{invoices:t,setView:e,setSelectedInvoiceId:n}=Os(),[i,a]=Fe.useState(new Date),[o,l]=Fe.useState(new Date),c=["January","February","March","April","May","June","July","August","September","October","November","December"],d=(I,L)=>new Date(L,I+1,0).getDate(),h=(I,L)=>new Date(L,I,1).getDay(),v=()=>{a(new Date(i.getFullYear(),i.getMonth()-1,1))},b=()=>{a(new Date(i.getFullYear(),i.getMonth()+1,1))},w=()=>{const I=new Date;a(new Date(I.getFullYear(),I.getMonth(),1)),l(I)},_=Fe.useMemo(()=>{const I=i.getMonth(),L=i.getFullYear(),O=d(I,L),q=h(I,L),W=[],F=d(I-1,L);for(let ee=q-1;ee>=0;ee--)W.push({day:F-ee,month:I-1,year:L,currentMonth:!1});for(let ee=1;ee<=O;ee++)W.push({day:ee,month:I,year:L,currentMonth:!0});const z=42-W.length;for(let ee=1;ee<=z;ee++)W.push({day:ee,month:I+1,year:L,currentMonth:!1});return W},[i]),T=Fe.useMemo(()=>{const I={};return t.forEach(L=>{try{if(L.documentType==="quote"||!L.dueDate)return;const O=new Date(L.dueDate);if(isNaN(O.getTime()))return;const q=O.toISOString().split("T")[0];I[q]||(I[q]=[]),I[q].push(L)}catch{console.warn("Skipping invoice with invalid date:",L.id)}}),I},[t]),k=(I,L,O)=>{const W=new Date(O,L,I).toISOString().split("T")[0];return T[W]||[]},R=Fe.useMemo(()=>{if(!o)return[];const I=o.toISOString().split("T")[0];return T[I]||[]},[o,T]),C=new Date().toISOString().split("T")[0];try{return g.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 md:space-y-8 animate-in fade-in duration-700 pb-12",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-4xl font-black text-slate-800 tracking-tight flex items-center gap-4",children:[g.jsx("div",{className:"p-3 bg-brand-500 text-white rounded-2xl shadow-xl shadow-brand-500/20",children:g.jsx(_h,{size:28})}),"Payment Schedule"]}),g.jsxs("p",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.3em] mt-3 flex items-center gap-2",children:[g.jsx(WN,{size:14,className:"text-brand-500"}),"Collection Strategy & Deadline Monitoring"]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("button",{onClick:w,className:"px-4 py-3 bg-white border-2 border-slate-100 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-600 hover:text-brand-600 hover:border-brand-200 transition-all shadow-sm",children:"Today"}),g.jsxs("div",{className:"flex items-center bg-white border-2 border-slate-100 rounded-xl p-1 shadow-sm",children:[g.jsx("button",{onClick:v,className:"p-2 text-slate-400 hover:text-brand-600 hover:bg-slate-50 rounded-lg transition-all",children:g.jsx(Ud,{size:20})}),g.jsxs("div",{className:"px-4 text-xs font-black text-slate-800 uppercase tracking-widest min-w-[140px] text-center",children:[c[i.getMonth()]," ",i.getFullYear()]}),g.jsx("button",{onClick:b,className:"p-2 text-slate-400 hover:text-brand-600 hover:bg-slate-50 rounded-lg transition-all",children:g.jsx(um,{size:20})})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[g.jsxs("div",{className:"xl:col-span-3",children:[g.jsxs("div",{className:"bg-white rounded-[2rem] border-2 border-slate-100 shadow-2xl overflow-hidden",children:[g.jsx("div",{className:"grid grid-cols-7 bg-slate-50 border-b-2 border-slate-100",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(I=>g.jsx("div",{className:"py-4 text-center text-[10px] font-black text-slate-400 uppercase tracking-widest",children:I},I))}),g.jsx("div",{className:"grid grid-cols-7",children:_.map((I,L)=>{const O=k(I.day,I.month,I.year),q=new Date(I.year,I.month,I.day),W=q.toISOString().split("T")[0],F=W===C,z=(o==null?void 0:o.toISOString().split("T")[0])===W,ee=O.some(j=>j.status!==mn.PAID),le=O.some(j=>j.status!==mn.PAID&&new Date(j.dueDate)<new Date),B=O.length>0&&O.every(j=>j.status===mn.PAID);return g.jsxs("button",{onClick:()=>l(q),className:`relative h-28 p-4 border-r border-b border-slate-100 text-left transition-all group ${I.currentMonth?"bg-white":"bg-slate-50/30 opacity-30 grayscale"} ${z?"ring-2 ring-inset ring-brand-500 bg-brand-50/20":"hover:bg-slate-50/50"}`,children:[g.jsxs("div",{className:"flex justify-between items-start mb-1",children:[g.jsx("span",{className:`text-[11px] font-black ${F?"bg-brand-600 text-white h-6 w-6 rounded-lg flex items-center justify-center shadow-lg shadow-brand-500/20":z?"text-brand-600":"text-slate-400"}`,children:I.day}),O.length>0&&g.jsxs("div",{className:"flex gap-1",children:[le&&g.jsx("div",{className:"h-2 w-2 rounded-full bg-rose-500 animate-pulse",title:"Overdue Items"}),ee&&!le&&g.jsx("div",{className:"h-2 w-2 rounded-full bg-amber-400",title:"Pending Items"}),B&&g.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-500",title:"All Settled"})]})]}),O.length>0&&g.jsxs("div",{className:"mt-2",children:[g.jsx("div",{className:"text-[10px] font-black text-slate-900 truncate",children:(O[0].customerName||"Unknown").split(" ")[0]}),O.length>1&&g.jsxs("div",{className:"text-[8px] font-black text-slate-400 uppercase mt-0.5",children:["+ ",O.length-1," other",O.length>2?"s":""]}),g.jsxs("div",{className:"mt-2 text-[9px] font-bold text-brand-600",children:["",O.reduce((j,ne)=>j+ne.total,0).toLocaleString()]})]})]},L)})})]}),g.jsxs("div",{className:"mt-6 flex flex-wrap gap-6 items-center px-4",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-rose-500"}),g.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Overdue"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-amber-400"}),g.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pending"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-emerald-500"}),g.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Settled"})]})]})]}),g.jsx("div",{className:"xl:col-span-1",children:g.jsxs("div",{className:"bg-black rounded-[2.5rem] p-8 shadow-2xl h-full flex flex-col border border-white/5 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 h-40 w-40 bg-brand-500/10 rounded-full blur-3xl -mr-20 -mt-20"}),g.jsxs("div",{className:"relative z-10 mb-8 pb-8 border-b border-white/10",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("h3",{className:"text-[10px] font-black text-brand-500 uppercase tracking-[0.3em]",children:"Day Overview"}),g.jsx("div",{className:"h-8 w-8 bg-white/5 rounded-lg flex items-center justify-center text-slate-500",children:g.jsx(Tl,{size:16})})]}),g.jsxs("div",{className:"text-xl font-black text-white leading-tight",children:[o==null?void 0:o.toLocaleDateString(void 0,{weekday:"long"}),g.jsx("br",{}),g.jsx("span",{className:"text-brand-400",children:o==null?void 0:o.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]})]}),g.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto pr-2 custom-scrollbar relative z-10",children:R.length===0?g.jsxs("div",{className:"py-16 text-center",children:[g.jsx("div",{className:"h-20 w-20 bg-white/5 rounded-3xl flex items-center justify-center mx-auto mb-6",children:g.jsx(_N,{size:32,className:"text-slate-700"})}),g.jsxs("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest leading-loose",children:["No collections",g.jsx("br",{}),"slated for this day"]})]}):R.map(I=>{const L=new Date(I.dueDate)<new Date&&I.status!==mn.PAID,O=()=>{n(I.id),e("INVOICES")};return g.jsxs("div",{onClick:O,className:"group bg-white/5 hover:bg-white/10 rounded-2xl border border-white/5 p-5 transition-all cursor-pointer",children:[g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsxs("div",{className:"max-w-[140px]",children:[g.jsx("span",{className:"block text-[8px] font-black text-slate-500 uppercase tracking-widest mb-1",children:I.invoiceNumber}),g.jsx("span",{className:"block text-sm font-black text-white group-hover:text-brand-400 transition-colors truncate",children:I.customerName||"Unknown"})]}),g.jsx("div",{className:`p-2 rounded-lg ${I.status===mn.PAID?"bg-emerald-500/20 text-emerald-400":L?"bg-rose-500/20 text-rose-400":"bg-amber-500/20 text-amber-400"}`,children:I.status===mn.PAID?g.jsx(Nh,{size:16}):L?g.jsx(Mc,{size:16}):g.jsx(Tl,{size:16})})]}),g.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(tb,{size:12,className:"text-brand-500"}),g.jsx("span",{className:"text-sm font-black text-white",children:I2(I.balanceDue||0)})]}),g.jsx("button",{onClick:()=>e("INVOICES"),className:"p-2 bg-white/10 rounded-lg text-slate-400 hover:text-white hover:bg-brand-600 transition-all",children:g.jsx(F_,{size:14})})]})]},I.id)})}),g.jsxs("div",{className:"mt-8 pt-8 border-t border-white/10 relative z-10",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5",children:[g.jsx("span",{className:"block text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Total Due"}),g.jsx("span",{className:"text-base font-black text-white",children:I2(R.reduce((I,L)=>I+(L.balanceDue||0),0))})]}),g.jsxs("div",{className:"bg-brand-600 p-4 rounded-2xl shadow-xl shadow-brand-500/10",children:[g.jsx("span",{className:"block text-[9px] font-black text-brand-200 uppercase tracking-widest mb-1",children:"Invoices"}),g.jsx("span",{className:"text-base font-black text-white",children:R.length})]})]}),g.jsxs("div",{className:"mt-6 flex items-center gap-3 p-4 bg-rose-500/10 rounded-2xl border border-rose-500/20",children:[g.jsx(Mc,{size:18,className:"text-rose-500 shrink-0"}),g.jsxs("p",{className:"text-[9px] font-bold text-rose-200 leading-relaxed",children:["Priority notification: ",R.filter(I=>new Date(I.dueDate)<new Date&&I.status!==mn.PAID).length," invoices require urgent follow-up today to maintain cash flow."]})]})]})]})})]})]})}catch(I){return g.jsxs("div",{className:"p-12 text-center",children:[g.jsx("div",{className:"bg-rose-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:g.jsx(Mc,{size:32,className:"text-rose-500"})}),g.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:"Calendar Error"}),g.jsx("p",{className:"text-slate-500 mb-6",children:"Something went wrong loading the calendar view."}),g.jsx("pre",{className:"bg-slate-100 p-4 rounded-xl text-left text-xs font-mono text-slate-600 overflow-auto max-w-2xl mx-auto",children:I instanceof Error?I.message:String(I)})]})}},PI=()=>{const{customers:t,addCustomer:e,updateCustomer:n,deleteCustomer:i,user:a}=Os(),[o,l]=Fe.useState(""),[c,d]=Fe.useState(!1),[h,v]=Fe.useState(null),[b,w]=Fe.useState(!1),_=bh.useRef(null),[T,k]=Fe.useState({name:"",email:"",phone:"",address:"",addressLine2:"",city:"",region:"",postalCode:"",country:"Ireland",company:"",notes:"",tags:[]}),[R,C]=Fe.useState(""),I=t.filter(P=>P.name.toLowerCase().includes(o.toLowerCase())||P.email.toLowerCase().includes(o.toLowerCase())||P.phone.includes(o)),L=P=>{const $=P.split(/\r?\n/);if($.length<2)return[];const ie=$[0].split(",").map(he=>he.trim().toLowerCase().replace(/"/g,"")),ae=[];for(let he=1;he<$.length;he++){if(!$[he].trim())continue;const Ne=[];let D=!1,H="";for(let Z of $[he])Z==='"'?D=!D:Z===","&&!D?(Ne.push(H.replace(/^"|"$/g,"").trim()),H=""):H+=Z;if(Ne.push(H.replace(/^"|"$/g,"").trim()),Ne.length<2)continue;const K={};ie.forEach((Z,se)=>{const de=Ne[se]||"";Z.includes("name")?K.name=de:Z.includes("email")?K.email=de:Z.includes("phone")||Z.includes("tel")?K.phone=de:Z.includes("city")?K.city=de:Z.includes("address")&&(Z.includes("2")||Z.includes("line 2"))?K.addressLine2=de:Z.includes("address")||Z.includes("street")?K.address=de:Z.includes("region")||Z.includes("county")||Z.includes("state")||Z.includes("province")?K.region=de:Z.includes("company")?K.company=de:Z.includes("code")||Z.includes("zip")||Z.includes("post")?K.postalCode=de:Z.includes("country")&&(K.country=de)}),!K.name&&Ne[0]&&(K.name=Ne[0]),!K.email&&Ne[1]&&Ne[1].includes("@")&&(K.email=Ne[1]),K.name&&ae.push(K)}return ae},O=async P=>{var ae;const $=(ae=P.target.files)==null?void 0:ae[0];if(!$)return;w(!0);const ie=new FileReader;ie.onload=async he=>{var Ne;try{const D=(Ne=he.target)==null?void 0:Ne.result,H=L(D);if(H.length===0){alert("No valid contacts found in CSV. Please check formatting.");return}if(confirm(`Found ${H.length} contacts. Import now?`)){let K=0;for(const Z of H)try{const se={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:Z.name||"Unknown",email:Z.email||"",phone:Z.phone||"",address:Z.address||"",city:Z.city||"",postalCode:Z.postalCode||"",country:Z.country||"Ireland",company:Z.company||"",notes:"Imported via CSV",tags:["Imported"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(a==null?void 0:a.id)||"import"};await e(se),K++}catch(se){console.error("Failed to import contact:",Z,se)}alert(`Successfully imported ${K} contacts.`)}}catch(D){console.error("Import error:",D),alert("Failed to process CSV file.")}finally{w(!1),_.current&&(_.current.value="")}},ie.readAsText($)},q=P=>{P?(v(P),k({name:P.name,email:P.email,phone:P.phone,address:P.address||"",addressLine2:P.addressLine2||"",city:P.city||"",region:P.region||"",postalCode:P.postalCode||"",country:P.country||"Ireland",company:P.company||"",notes:P.notes||"",tags:P.tags||[]})):(v(null),k({name:"",email:"",phone:"",address:"",addressLine2:"",city:"",region:"",postalCode:"",country:"Ireland",company:"",notes:"",tags:[]})),d(!0)},W=()=>{d(!1),v(null),C("")},F=()=>{R.trim()&&!T.tags.includes(R.trim())&&(k({...T,tags:[...T.tags,R.trim()]}),C(""))},z=P=>{k({...T,tags:T.tags.filter($=>$!==P)})},ee=async P=>{P.preventDefault();const $={id:(h==null?void 0:h.id)||Date.now().toString(),...T,createdAt:(h==null?void 0:h.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(h==null?void 0:h.createdBy)||(a==null?void 0:a.id)||"unknown"};h?await n($):await e($),W()},le=async P=>{confirm("Are you sure you want to delete this customer?")&&await i(P)},[B,j]=Fe.useState([]),ne=P=>{P.target.checked?j(I.map($=>$.id)):j([])},re=P=>{j($=>$.includes(P)?$.filter(ie=>ie!==P):[...$,P])},be=async()=>{if(B.length!==0&&confirm(`Are you sure you want to delete ${B.length} customers? This cannot be undone.`)){let P=0;for(const $ of B)try{await i($),P++}catch(ie){console.error(`Failed to delete customer ${$}:`,ie)}j([]),alert(`Successfully deleted ${P} customers.`)}};return g.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 pb-12",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-4xl font-black text-slate-800 tracking-tight flex items-center gap-4",children:[g.jsx("div",{className:"p-3 bg-brand-500 text-white rounded-2xl shadow-xl shadow-brand-500/20",children:g.jsx(Wd,{size:28})}),"Customer List"]}),g.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.3em] mt-3",children:"Manage Your Client Database"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{type:"file",accept:".csv",className:"hidden",ref:_,onChange:O}),B.length>0?g.jsxs("button",{onClick:be,className:"flex items-center gap-2 px-6 py-4 bg-rose-600 text-white rounded-2xl hover:bg-rose-700 transition-all shadow-xl shadow-rose-500/20 font-black text-sm uppercase tracking-wider animate-in fade-in zoom-in",children:[g.jsx(No,{size:20}),"Delete Selected (",B.length,")"]}):g.jsxs("button",{onClick:()=>{var P;return(P=_.current)==null?void 0:P.click()},disabled:b,className:"flex items-center gap-2 px-6 py-4 bg-white text-slate-600 border-2 border-slate-200 rounded-2xl hover:bg-slate-50 transition-all font-black text-sm uppercase tracking-wider",children:[b?g.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-brand-500 rounded-full animate-spin"}):g.jsx(rb,{size:20}),"Bulk Import"]}),g.jsxs("button",{onClick:()=>q(),className:"flex items-center gap-2 px-6 py-4 bg-brand-600 text-white rounded-2xl hover:bg-brand-700 transition-all shadow-xl shadow-brand-500/20 font-black text-sm uppercase tracking-wider",children:[g.jsx(Sl,{size:20}),"Add New Customer"]})]})]}),g.jsxs("div",{className:"relative",children:[g.jsx(jc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search customers by name, email, or phone...",value:o,onChange:P=>l(P.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-slate-200 rounded-2xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all text-sm font-semibold"})]}),g.jsx("div",{className:"bg-white rounded-2xl border-2 border-slate-200 overflow-hidden shadow-sm overflow-x-auto",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-slate-50 border-b-2 border-slate-100",children:[g.jsx("th",{className:"px-6 py-4 text-left w-12",children:g.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-slate-300 text-brand-600 focus:ring-brand-500 transition-all",onChange:ne,checked:I.length>0&&B.length===I.length})}),g.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-500 uppercase tracking-widest",children:"Customer"}),g.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-500 uppercase tracking-widest",children:"Contact Info"}),g.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-500 uppercase tracking-widest hidden md:table-cell",children:"Location"}),g.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-slate-500 uppercase tracking-widest hidden lg:table-cell",children:"Tags"}),g.jsx("th",{className:"px-6 py-4 text-right text-xs font-black text-slate-500 uppercase tracking-widest",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:I.map(P=>g.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[g.jsx("td",{className:"px-6 py-4",children:g.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-slate-300 text-brand-600 focus:ring-brand-500 transition-all",checked:B.includes(P.id),onChange:()=>re(P.id)})}),g.jsx("td",{className:"px-6 py-4",children:g.jsxs("div",{children:[g.jsx("div",{className:"font-bold text-slate-900 text-sm",children:P.name}),P.company&&g.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-slate-400 mt-1 uppercase tracking-wide",children:[g.jsx(C0,{size:10}),P.company]})]})}),g.jsx("td",{className:"px-6 py-4",children:g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600",children:[g.jsx(cm,{size:12,className:"text-slate-400"}),P.email]}),g.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-600",children:[g.jsx(dm,{size:12,className:"text-slate-400"}),P.phone]})]})}),g.jsx("td",{className:"px-6 py-4 hidden md:table-cell",children:P.address||P.city?g.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600 max-w-[200px]",children:[g.jsx(kN,{size:12,className:"text-slate-400 mt-0.5 shrink-0"}),g.jsx("span",{className:"truncate",children:[P.address,P.city].filter(Boolean).join(", ")})]}):g.jsx("span",{className:"text-xs text-slate-300 italic",children:"No address"})}),g.jsx("td",{className:"px-6 py-4 hidden lg:table-cell",children:g.jsx("div",{className:"flex flex-wrap gap-1",children:P.tags&&P.tags.length>0?P.tags.map($=>g.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 rounded text-[10px] font-bold uppercase tracking-wider",children:$},$)):g.jsx("span",{className:"text-xs text-slate-300 italic",children:"No tags"})})}),g.jsx("td",{className:"px-6 py-4 text-right",children:g.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsx("button",{onClick:()=>q(P),className:"p-1.5 text-brand-600 bg-brand-50 rounded hover:bg-brand-600 hover:text-white transition-all",title:"Edit",children:g.jsx(I0,{size:14})}),g.jsx("button",{onClick:()=>le(P.id),className:"p-1.5 text-rose-600 bg-rose-50 rounded hover:bg-rose-600 hover:text-white transition-all",title:"Delete",children:g.jsx(No,{size:14})})]})})]},P.id))})]})}),I.length===0&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-slate-100 rounded-full mb-4",children:g.jsx(Wd,{size:40,className:"text-slate-400"})}),g.jsx("p",{className:"text-slate-500 font-semibold",children:"No customers found"}),g.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Add your first customer to get started"})]}),c&&g.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"sticky top-0 bg-white border-b-2 border-slate-100 p-6 flex justify-between items-center rounded-t-3xl",children:[g.jsx("h3",{className:"text-2xl font-black text-slate-900",children:h?"Edit Customer":"Add New Customer"}),g.jsx("button",{onClick:W,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all",children:g.jsx(Ga,{size:24})})]}),g.jsxs("form",{onSubmit:ee,className:"p-6 space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Name *"}),g.jsx("input",{type:"text",required:!0,value:T.name,onChange:P=>k({...T,name:P.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"John Doe"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Email *"}),g.jsx("input",{type:"email",required:!0,value:T.email,onChange:P=>k({...T,email:P.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"john@example.com"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Phone *"}),g.jsx("input",{type:"tel",required:!0,value:T.phone,onChange:P=>k({...T,phone:P.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"+353 123 456 789"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Company"}),g.jsx("input",{type:"text",value:T.company,onChange:P=>k({...T,company:P.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Company Name"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Address"}),g.jsx("input",{type:"text",value:T.address,onChange:P=>k({...T,address:P.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Street Address"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Address Line 2"}),g.jsx("input",{type:"text",value:T.addressLine2,onChange:P=>k({...T,addressLine2:P.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Suite, Unit, Building, etc."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"City"}),g.jsx("input",{type:"text",value:T.city,onChange:P=>k({...T,city:P.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Clonmel"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Region / County"}),g.jsx("input",{type:"text",value:T.region,onChange:P=>k({...T,region:P.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Co. Tipperary"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Postal Code"}),g.jsx("input",{type:"text",value:T.postalCode,onChange:P=>k({...T,postalCode:P.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"E91 X123"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Country"}),g.jsx("input",{type:"text",value:T.country,onChange:P=>k({...T,country:P.target.value}),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Ireland"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Tags"}),g.jsxs("div",{className:"flex gap-2 mb-2",children:[g.jsx("input",{type:"text",value:R,onChange:P=>C(P.target.value),onKeyPress:P=>P.key==="Enter"&&(P.preventDefault(),F()),className:"flex-1 px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all",placeholder:"Add tag and press Enter"}),g.jsx("button",{type:"button",onClick:F,className:"px-4 py-3 bg-slate-100 text-slate-600 rounded-xl hover:bg-slate-200 transition-all font-bold",children:g.jsx(JN,{size:20})})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:T.tags.map(P=>g.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-brand-100 text-brand-700 rounded-lg text-sm font-bold",children:[P,g.jsx("button",{type:"button",onClick:()=>z(P),className:"hover:text-brand-900",children:g.jsx(Ga,{size:14})})]},P))})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-600 mb-2 uppercase tracking-wider",children:"Notes"}),g.jsx("textarea",{value:T.notes,onChange:P=>k({...T,notes:P.target.value}),rows:4,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all resize-none",placeholder:"Additional notes about this customer..."})]})]}),g.jsxs("div",{className:"flex gap-4 pt-4 border-t-2 border-slate-100",children:[g.jsx("button",{type:"button",onClick:W,className:"flex-1 px-6 py-4 border-2 border-slate-200 text-slate-600 rounded-xl hover:bg-slate-50 transition-all font-black uppercase tracking-wider",children:"Cancel"}),g.jsxs("button",{type:"submit",className:"flex-1 px-6 py-4 bg-brand-600 text-white rounded-xl hover:bg-brand-700 transition-all font-black uppercase tracking-wider shadow-xl shadow-brand-500/20 flex items-center justify-center gap-2",children:[g.jsx(dh,{size:20}),h?"Update":"Create"," Customer"]})]})]})]})})]})},UI=t=>{const e=t.split(/\r?\n/);if(e.length<2)return{products:[],headers:[],errors:["File appears to be empty or missing headers."],totalRows:0};const n=e[0].replace(/^\uFEFF/,"").split(",").map(l=>l.trim().toLowerCase().replace(/"/g,"")),i=[],a=[];let o=0;for(let l=1;l<e.length;l++){if(!e[l].trim())continue;o++;const d=[];let h=!1,v="";for(let k of e[l])k==='"'?h=!h:k===","&&!h?(d.push(v.replace(/^"|"$/g,"").trim()),v=""):v+=k;if(d.push(v.replace(/^"|"$/g,"").trim()),d.length===0)continue;const b={};n.forEach((k,R)=>{const C=d[R]||"";k.includes("name")||k.includes("title")||k.includes("product")?b.name=C:k.includes("price")||k.includes("cost")||k.includes("rate")?b.price=C:k.includes("unit")?b.unit=C:k.includes("category")||k.includes("type")?b.category=C:k.includes("desc")?b.description=C:(k.includes("code")||k.includes("sku"))&&(b.sku=C)});const w=b.name,_=b.price?String(b.price).replace(/[^0-9.-]+/g,""):"0",T=parseFloat(_);w&&!isNaN(T)?i.push({name:w,price:T,unit:b.unit,category:b.category,description:b.description,sku:b.sku}):(w||a.push(`Row ${l+1}: Missing Product Name`),isNaN(T)&&a.push(`Row ${l+1}: Invalid Price '${b.price}'`))}return{products:i,headers:n,errors:a,totalRows:o}},R2=()=>{const{products:t,addProduct:e,updateProduct:n,deleteProduct:i,users:a,addUser:o,deleteUser:l,user:c,companyLogo:d,setCompanyLogo:h,isSyncing:v,databaseError:b,refreshDatabase:w,currentView:_}=Os(),{showToast:T}=v5(),[k,R]=Fe.useState(_==="USERS"?"USERS":"PRODUCTS"),[C,I]=Fe.useState("clonmel");Fe.useEffect(()=>{_==="USERS"&&R("USERS"),_==="PRODUCTS"&&R("PRODUCTS")},[_]);const[L,O]=Fe.useState([]),[q,W]=Fe.useState(b),[F,z]=Fe.useState(null),[ee,le]=Fe.useState(""),[B,j]=Fe.useState(""),[ne,re]=Fe.useState("sqm"),[be,P]=Fe.useState("Clear Glass"),[$,ie]=Fe.useState(!1),[ae,he]=Fe.useState(""),[Ne,D]=Fe.useState(""),[H,K]=Fe.useState(ps.USER);Fe.useEffect(()=>{v&&O(Se=>[{msg:"Synchronizing with remote cloud...",time:new Date().toLocaleTimeString()},...Se].slice(0,5))},[v]);const Z=Fe.useMemo(()=>{const Se=new Set(t.map(ct=>ct.category)),Ge=Array.from(Se);return Ge.includes("Clear Glass")||Ge.push("Clear Glass"),Ge.includes("Toughened")||Ge.push("Toughened"),Ge.includes("Mirrors")||Ge.push("Mirrors"),["All",...Ge.sort()]},[t]),[se,de]=Fe.useState(""),[fe,me]=Fe.useState("All"),Me=Fe.useMemo(()=>t.filter(Se=>{const Ge=String(Se.name).toLowerCase().includes(se.toLowerCase()),ct=String(Se.id).toLowerCase().includes(se.toLowerCase()),xt=fe==="All"||Se.category===fe;return(Ge||ct)&&xt}),[t,se,fe]),[we,Pe]=Fe.useState(!1),Ue=bh.useRef(null),et=async Se=>{var xt;const Ge=(xt=Se.target.files)==null?void 0:xt[0];if(!Ge)return;Pe(!0);const ct=new FileReader;ct.onload=async Ht=>{var pt;try{const At=(pt=Ht.target)==null?void 0:pt.result,{products:rt,headers:En,errors:Lt}=UI(At);if(rt.length===0){T(`No valid products found.

Detected Headers: ${En.join(", ")}

Required: 'Name' and 'Price'.
Please check your CSV formatting.`,"error",5e3),Lt.length>0&&console.error("CSV Parsing Errors:",Lt);return}if(confirm(`Found ${rt.length} products. Import to ${C==="mirrorzone"?"Mirrorzone":"Clonmel Glass"}?`)){let qt=0,Pt=0;T(`Starting import of ${rt.length} products...`,"info");for(const _t of rt)try{const Xn={id:`P-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,name:_t.name||"Unknown Product",price:typeof _t.price=="string"?parseFloat(String(_t.price).replace(/[^0-9.-]+/g,"")):_t.price,unit:_t.unit||(C==="mirrorzone"?"pcs":"sqm"),category:_t.category||(C==="mirrorzone"?"Mirrors":"Clear Glass"),description:_t.description||_t.sku||`Imported ${C} Product`,company:C};await e(Xn),qt++}catch(Xn){console.error("Failed to import product:",_t,Xn),Pt++}Pt>0?T(`Import Complete.

Success: ${qt}
Failed: ${Pt}`,"warning",5e3):T(`Successfully imported ${qt} products.`,"success")}}catch(At){console.error("Import error:",At),T(`Failed to process CSV file: ${At.message}`,"error")}finally{Pe(!1),Ue.current&&(Ue.current.value="")}},ct.readAsText(Ge)};if((c==null?void 0:c.role)!==ps.ADMIN)return g.jsx("div",{className:"p-20 text-center text-slate-500 font-black uppercase tracking-widest",children:"Access Restricted to Administrators"});const[Ie,ue]=Fe.useState(new Set);Fe.useEffect(()=>{ue(new Set)},[C,k,fe,se]);const yt=Se=>{const Ge=new Set(Ie);Ge.has(Se)?Ge.delete(Se):Ge.add(Se),ue(Ge)},at=()=>{if(Ie.size===Me.length&&Me.length>0)ue(new Set);else{const Se=Me.filter(Ge=>Ge.company===C||!Ge.company&&(C==="mirrorzone"?Ge.category==="Mirrors":Ge.category!=="Mirrors")).map(Ge=>Ge.id);ue(new Set(Se))}},Ye=async()=>{if(Ie.size!==0&&confirm(`Are you sure you want to delete ${Ie.size} products? This cannot be undone.`)){let Se=0;for(const Ge of Ie)try{await i(Ge),Se++}catch(ct){console.error(`Failed to delete product ${Ge}`,ct)}ue(new Set),alert(`Successfully deleted ${Se} products.`)}},Ze=async Se=>{if(Se.preventDefault(),!ee||!B)return;const Ge=be,ct={id:F?F.id:`P-${Date.now().toString().slice(-4)}`,name:ee,price:parseFloat(B),unit:ne,description:`Commercial Grade ${Ge}`,category:Ge,company:C};try{F?await n(ct):await e(ct),z(null),le(""),j(""),P("Clear Glass"),re("sqm")}catch(xt){console.error("Save Product Error:",xt),alert(`Error saving product: ${xt.message||"Unknown DB Error"}. 

Check if the database migration was run.`)}},nt=async Se=>{if(window.confirm("Permanently remove this item from the catalog?"))try{await i(Se)}catch{alert("Deletion failed.")}},tt=async Se=>{if(Se.preventDefault(),!ae||!Ne){alert("Please fill in name and email");return}try{const Ge="user@123",ct={id:crypto.randomUUID(),name:ae,email:Ne,role:H,avatar:`https://i.pravatar.cc/150?u=${Ne}`,password:Ge};await o(ct),alert(` User "${ae}" added successfully!

 Default Password: ${Ge}

Please ask them to log in and change it.`),he(""),D(""),K(ps.USER)}catch(Ge){console.error("Add user error:",Ge),alert(` Failed to add user: ${Ge.message}`)}},Xe=async Se=>{const Ge=a.find(xt=>xt.id===Se),ct=(Ge==null?void 0:Ge.name)||"this user";if(window.confirm(` DELETE USER PROFILE

Are you sure you want to permanently delete "${ct}"?

This will:
 Remove the user from the database
 Revoke all system access
 Delete the user profile from the site

This action CANNOT be undone.`))try{await l(Se),alert(` User "${ct}" has been successfully deleted from the system and database.`)}catch(xt){alert(" Failed to delete user. Please try again or check your database connection."),console.error("Delete user error:",xt)}};return g.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 pb-24",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:"System Engine"}),g.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-[0.3em] mt-2",children:"Node Instance: azyeptjbktvkqiigotbi"})]}),g.jsxs("div",{className:`flex items-center space-x-4 text-[10px] font-black border-2 px-6 py-2.5 rounded-2xl shadow-sm ${b?"bg-rose-50 border-rose-100 text-rose-600":"bg-brand-50 border-brand-100 text-brand-600"}`,children:[g.jsx(lN,{size:14,className:b?"text-rose-400":"text-brand-500"}),g.jsxs("span",{className:"uppercase tracking-[0.2em]",children:["Remote Status: ",b?"SCHEMA ERROR":"LIVE & SECURE"]})]})]}),g.jsxs("div",{className:"flex space-x-10 border-b-2 border-slate-100",children:[g.jsx("button",{onClick:()=>R("PRODUCTS"),className:`pb-5 px-1 text-[10px] font-black uppercase tracking-[0.2em] border-b-4 transition-all ${k==="PRODUCTS"?"border-brand-500 text-brand-600":"border-transparent text-slate-400 hover:text-slate-900"}`,children:"Catalog Manager"}),g.jsx("button",{onClick:()=>R("USERS"),className:`pb-5 px-1 text-[10px] font-black uppercase tracking-[0.2em] border-b-4 transition-all ${k==="USERS"?"border-brand-500 text-brand-600":"border-transparent text-slate-400 hover:text-slate-900"}`,children:"Permissions"})]}),Ie.size>0&&g.jsxs("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-slate-900 text-white px-8 py-4 rounded-full shadow-2xl flex items-center gap-6 animate-in slide-in-from-bottom-10 fade-in duration-300",children:[g.jsxs("div",{className:"text-xs font-black uppercase tracking-widest",children:[Ie.size," Items Selected"]}),g.jsxs("button",{onClick:Ye,className:"flex items-center gap-2 bg-rose-600 hover:bg-rose-700 text-white px-4 py-2 rounded-xl transition-all font-bold text-xs uppercase tracking-wider",children:[g.jsx(No,{size:16})," Delete Selected"]}),g.jsx("button",{onClick:()=>ue(new Set),className:"p-2 hover:bg-slate-800 rounded-full transition-all text-slate-400 hover:text-white",children:g.jsx(Ga,{size:16})})]}),k==="PRODUCTS"&&g.jsxs("div",{className:"space-y-10",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsx("button",{onClick:()=>{I("clonmel"),P("Clear Glass"),me("All")},className:`p-6 rounded-2xl border-2 transition-all duration-300 ${C==="clonmel"?"bg-white border-white shadow-xl scale-[1.02]":"bg-red-600/5 border-red-600/10 hover:bg-red-600/10"}`,children:g.jsxs("div",{className:`text-center ${C==="clonmel"?"text-red-600":"text-slate-400"}`,children:[g.jsx("div",{className:"text-xl font-black mb-1",children:"CLONMEL GLASS"}),g.jsx("div",{className:"text-[10px] font-bold opacity-70 uppercase tracking-widest",children:"General Catalog"}),C==="clonmel"&&g.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-red-50 text-red-600 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[g.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Active"]})]})}),g.jsx("button",{onClick:()=>{I("mirrorzone"),P("Mirrors"),re("pcs"),me("All")},className:`p-6 rounded-2xl border-2 transition-all duration-300 ${C==="mirrorzone"?"bg-white border-white shadow-xl scale-[1.02]":"bg-slate-900/5 border-slate-900/10 hover:bg-slate-900/10"}`,children:g.jsxs("div",{className:`text-center ${C==="mirrorzone"?"text-slate-900":"text-slate-400"}`,children:[g.jsx("div",{className:"text-xl font-black mb-1",children:"MIRRORZONE"}),g.jsx("div",{className:"text-[10px] font-bold opacity-70 uppercase tracking-widest",children:"Mirrors Collection"}),C==="mirrorzone"&&g.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 bg-slate-100 text-slate-900 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[g.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),"Active"]})]})})]}),!F&&g.jsxs("div",{id:"product-form-section",className:"bg-white p-8 md:p-10 rounded-[2.5rem] border-2 border-slate-100 shadow-2xl animate-in slide-in-from-top-4 duration-500",children:[g.jsx("div",{className:"flex items-center justify-between mb-8 border-b-2 border-slate-50 pb-6",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:`h-12 w-12 rounded-2xl flex items-center justify-center text-white shadow-lg ${C==="mirrorzone"?"bg-slate-900 shadow-slate-900/20":"bg-red-600 shadow-red-600/20"}`,children:g.jsx(Sl,{size:24})}),g.jsx("div",{children:g.jsx("h3",{className:"font-black text-slate-800 uppercase tracking-widest leading-none",children:`Add to ${C==="mirrorzone"?"Mirrorzone":"Clonmel Glass"}`})})]})}),g.jsxs("form",{onSubmit:Ze,className:"grid grid-cols-1 md:grid-cols-4 gap-6 items-end",children:[g.jsxs("div",{className:"md:col-span-1 space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Display Name"}),g.jsx("input",{type:"text",placeholder:C==="mirrorzone"?"e.g. 6MM ANTIQUE MIRROR":"e.g. 10MM TOUGH SATIN",required:!0,value:ee,onChange:Se=>le(Se.target.value),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-sm font-black focus:border-brand-500 outline-none transition-all"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Unit Price ()"}),g.jsx("input",{type:"number",step:"0.01",required:!0,placeholder:"0.00",value:B,onChange:Se=>j(Se.target.value),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-sm font-black focus:border-brand-500 outline-none transition-all"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Classification"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:be,onChange:Se=>P(Se.target.value),onFocus:()=>ie(!0),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl pl-6 pr-10 py-4 text-sm font-black focus:border-brand-500 outline-none transition-all",placeholder:C==="mirrorzone"?"Mirrors":"e.g. Clear Glass"}),g.jsx("button",{type:"button",onClick:()=>ie(!$),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-brand-500",children:g.jsx(Ud,{size:20,className:`transform transition-transform ${$?"-rotate-90":"rotate-0"}`})}),$&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>ie(!1)}),g.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white rounded-xl border-2 border-slate-200 shadow-2xl max-h-80 overflow-y-auto animate-in zoom-in-95 duration-100",children:g.jsxs("div",{className:"py-2",children:[Z.filter(Se=>Se!=="All").map(Se=>g.jsx("button",{type:"button",onClick:()=>{P(Se),ie(!1)},className:"w-full text-left px-4 py-3 hover:bg-slate-50 text-sm font-bold text-slate-700 hover:text-brand-600 transition-colors border-b border-slate-50 last:border-0",children:Se},Se)),be&&!Z.includes(be)&&g.jsxs("button",{type:"button",onClick:()=>ie(!1),className:"w-full text-left px-4 py-3 bg-brand-50 hover:bg-brand-100 text-sm font-black text-brand-600 transition-colors flex items-center gap-2 border-t-2 border-brand-100",children:[g.jsx(Sl,{size:14}),g.jsxs("span",{children:['Add "',be,'" as new']})]}),g.jsx("div",{className:"px-4 py-2 text-[10px] text-slate-400 font-bold uppercase tracking-widest border-t border-slate-50 mt-1 bg-slate-50/50",children:"Type in box to add custom..."})]})})]})]})]}),g.jsx("div",{className:"flex gap-3",children:g.jsxs("button",{type:"submit",disabled:v,className:`flex-1 flex items-center justify-center gap-3 font-black py-4 rounded-2xl transition-all disabled:opacity-50 shadow-2xl uppercase text-[10px] tracking-[0.2em] ${C==="mirrorzone"?"bg-slate-900 hover:bg-slate-800 text-white shadow-slate-900/20":"bg-red-600 hover:bg-red-700 text-white shadow-red-600/20"}`,children:[v?g.jsx(s0,{className:"animate-spin",size:16}):g.jsx(Sl,{size:16}),"Add Product"]})})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-white p-5 rounded-3xl border-2 border-slate-100 flex gap-5 shadow-sm items-center",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsx(jc,{size:18,className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400"}),g.jsx("input",{type:"text",placeholder:`Search ${C==="mirrorzone"?"mirrors":"glass"}...`,value:se,onChange:Se=>de(Se.target.value),className:"w-full pl-14 pr-6 py-4 bg-white border-2 border-slate-200 text-slate-900 rounded-2xl text-sm font-bold focus:border-brand-500 outline-none transition-all"})]}),g.jsx("input",{type:"file",accept:".csv",className:"hidden",ref:Ue,onChange:et}),g.jsxs("button",{onClick:()=>{var Se;return(Se=Ue.current)==null?void 0:Se.click()},disabled:we,className:"flex items-center gap-2 px-6 py-4 bg-slate-50 text-slate-600 border-2 border-slate-100 rounded-2xl hover:bg-slate-100 transition-all font-black text-[10px] uppercase tracking-widest whitespace-nowrap",children:[we?g.jsx(s0,{className:"animate-spin",size:16}):g.jsx(rb,{size:16}),"Import CSV"]}),C!=="mirrorzone"&&g.jsx("select",{value:fe,onChange:Se=>me(Se.target.value),className:"bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-[10px] font-black uppercase tracking-widest outline-none focus:border-brand-500",children:Z.filter(Se=>Se!=="Mirrors").map(Se=>g.jsx("option",{value:Se,children:Se},Se))})]}),C==="mirrorzone"&&g.jsxs("div",{className:"bg-white rounded-[2rem] border-2 border-slate-100 overflow-hidden shadow-xl mb-12 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[g.jsxs("div",{className:"bg-slate-900 px-8 py-4 flex items-center justify-between",children:[g.jsxs("h3",{className:"text-white font-black uppercase tracking-widest text-sm flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),g.jsx("input",{type:"checkbox",onChange:at,className:"w-4 h-4 rounded border-slate-600 bg-slate-800 text-purple-600 focus:ring-purple-500"}),"Mirrorzone ",g.jsx("span",{className:"opacity-50",children:"Collection"})]}),g.jsx("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-800 px-3 py-1 rounded-full uppercase tracking-widest",children:"Mirrors Only"})]}),g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-slate-50/80 border-b-2 border-slate-100",children:g.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:[g.jsx("th",{className:"w-12 px-8 py-6",children:g.jsx("span",{className:"sr-only",children:"Select"})}),g.jsx("th",{className:"text-left px-4 py-6",children:"Product Line"}),g.jsx("th",{className:"text-left px-8 py-6",children:"Pricing Index"}),g.jsx("th",{className:"text-right px-8 py-6",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:Me.filter(Se=>Se.company==="mirrorzone"||!Se.company&&(Se.category==="Mirrors"||String(Se.category).toLowerCase().includes("mirror"))).length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:4,className:"p-12 text-center text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No mirrors found in catalog"})}):Me.filter(Se=>Se.company==="mirrorzone"||!Se.company&&(Se.category==="Mirrors"||String(Se.category).toLowerCase().includes("mirror"))).map(Se=>g.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors group ${Ie.has(Se.id)?"bg-purple-50/50":""}`,children:[g.jsx("td",{className:"px-8 py-6",children:g.jsx("input",{type:"checkbox",checked:Ie.has(Se.id),onChange:()=>yt(Se.id),className:"w-5 h-5 rounded-md border-2 border-slate-300 text-purple-600 focus:ring-purple-500 cursor-pointer"})}),g.jsx("td",{className:"px-4 py-6",children:(F==null?void 0:F.id)===Se.id?g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{autoFocus:!0,type:"text",value:ee,onChange:Ge=>le(Ge.target.value),className:"w-full bg-white border-2 border-brand-200 rounded-lg px-3 py-2 text-sm font-black focus:border-brand-500 outline-none",placeholder:"Product Name"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:be,onChange:Ge=>P(Ge.target.value),onFocus:()=>ie(!0),className:"w-full bg-slate-50 border-2 border-slate-200 rounded-lg pl-2 pr-6 py-1 text-[10px] font-bold uppercase",placeholder:"Category"}),g.jsx("button",{type:"button",onClick:()=>ie(!$),className:"absolute right-1 top-1/2 -translate-y-1/2 text-slate-400 hover:text-brand-500",children:g.jsx(Ud,{size:14,className:`transform transition-transform ${$?"-rotate-90":"rotate-0"}`})}),$&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>ie(!1)}),g.jsx("div",{className:"absolute z-50 w-48 mt-1 bg-white rounded-xl border-2 border-slate-200 shadow-2xl max-h-60 overflow-y-auto animate-in zoom-in-95 duration-100 left-0",children:g.jsx("div",{className:"py-2",children:Z.filter(Ge=>Ge!=="All").map(Ge=>g.jsx("button",{type:"button",onClick:()=>{P(Ge),ie(!1)},className:"w-full text-left px-4 py-2 hover:bg-slate-50 text-[10px] font-bold text-slate-700 hover:text-brand-600 transition-colors border-b border-slate-50 last:border-0 uppercase",children:Ge},Ge))})})]})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"font-black text-slate-900 group-hover:text-brand-600 transition-colors",children:String(Se.name)}),g.jsx("div",{className:"text-[9px] font-bold text-slate-400 mt-1 uppercase",children:String(Se.category)})]})}),g.jsx("td",{className:"px-8 py-6",children:(F==null?void 0:F.id)===Se.id?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-slate-400 font-bold",children:""}),g.jsx("input",{type:"number",step:"0.01",value:B,onChange:Ge=>j(Ge.target.value),className:"w-24 bg-white border-2 border-brand-200 rounded-lg px-2 py-2 text-sm font-black focus:border-brand-500 outline-none"}),g.jsx("span",{className:"text-[10px] font-bold text-slate-400 ml-1.5 uppercase",children:"/ UNIT"})]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{className:"text-sm font-black text-slate-800",children:["",Number(Se.price).toFixed(2)]}),g.jsx("span",{className:"text-[10px] font-bold text-slate-400 ml-1.5 uppercase",children:"/ UNIT"})]})}),g.jsx("td",{className:"px-8 py-6 text-right flex items-center justify-end gap-3",children:(F==null?void 0:F.id)===Se.id?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:Ze,className:"p-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-2xl transition-all shadow-lg shadow-emerald-500/20",title:"Save Changes",children:g.jsx(Yd,{size:18})}),g.jsx("button",{onClick:()=>{z(null),le(""),j("")},className:"p-3 bg-slate-100 hover:bg-slate-200 text-slate-500 rounded-2xl transition-all",title:"Cancel",children:g.jsx(Ga,{size:18})})]}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>{z(Se),le(Se.name),j(Se.price.toString()),re(Se.unit),P(Se.category)},className:"p-3 text-slate-300 hover:text-amber-600 hover:bg-amber-50 rounded-2xl transition-all",children:g.jsx(I0,{size:18})}),g.jsx("button",{onClick:()=>nt(Se.id),className:"p-3 text-slate-300 hover:text-rose-600 hover:bg-rose-50 rounded-2xl transition-all",children:g.jsx(No,{size:18})})]})})]},Se.id))})]})]}),C==="clonmel"&&g.jsxs("div",{className:"bg-white rounded-[2rem] border-2 border-slate-100 overflow-hidden shadow-xl animate-in fade-in slide-in-from-bottom-4 duration-500",children:[g.jsxs("div",{className:"bg-red-600 px-8 py-4 flex items-center justify-between",children:[g.jsxs("h3",{className:"text-white font-black uppercase tracking-widest text-sm flex items-center gap-2",children:[g.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),g.jsx("input",{type:"checkbox",onChange:at,className:"w-4 h-4 rounded border-brand-200 bg-red-700 text-white focus:ring-white"}),"Clonmel Glass ",g.jsx("span",{className:"opacity-70",children:"Collection"})]}),g.jsx("span",{className:"text-[10px] font-bold text-white/80 bg-red-700 px-3 py-1 rounded-full uppercase tracking-widest",children:"General Catalog"})]}),g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-slate-50/80 border-b-2 border-slate-100",children:g.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:[g.jsx("th",{className:"w-12 px-8 py-6",children:g.jsx("span",{className:"sr-only",children:"Select"})}),g.jsx("th",{className:"text-left px-4 py-6",children:"Product Line"}),g.jsx("th",{className:"text-left px-8 py-6",children:"Pricing Index"}),g.jsx("th",{className:"text-right px-8 py-6",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:Me.filter(Se=>Se.company==="clonmel"||!Se.company&&!String(Se.category).toLowerCase().includes("mirror")).length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:4,className:"p-12 text-center text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No other products found"})}):Me.filter(Se=>Se.company==="clonmel"||!Se.company&&!String(Se.category).toLowerCase().includes("mirror")).map(Se=>g.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors group ${Ie.has(Se.id)?"bg-red-50/50":""}`,children:[g.jsx("td",{className:"px-8 py-6",children:g.jsx("input",{type:"checkbox",checked:Ie.has(Se.id),onChange:()=>yt(Se.id),className:"w-5 h-5 rounded-md border-2 border-slate-300 text-brand-600 focus:ring-brand-500 cursor-pointer"})}),g.jsx("td",{className:"px-4 py-6",children:(F==null?void 0:F.id)===Se.id?g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{autoFocus:!0,type:"text",value:ee,onChange:Ge=>le(Ge.target.value),className:"w-full bg-white border-2 border-brand-200 rounded-lg px-3 py-2 text-sm font-black focus:border-brand-500 outline-none",placeholder:"Product Name"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"text",value:be,onChange:Ge=>P(Ge.target.value),onFocus:()=>ie(!0),className:"w-full bg-slate-50 border-2 border-slate-200 rounded-lg pl-2 pr-6 py-1 text-[10px] font-bold uppercase",placeholder:"Category"}),g.jsx("button",{type:"button",onClick:()=>ie(!$),className:"absolute right-1 top-1/2 -translate-y-1/2 text-slate-400 hover:text-brand-500",children:g.jsx(Ud,{size:14,className:`transform transition-transform ${$?"-rotate-90":"rotate-0"}`})}),$&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>ie(!1)}),g.jsx("div",{className:"absolute z-50 w-48 mt-1 bg-white rounded-xl border-2 border-slate-200 shadow-2xl max-h-60 overflow-y-auto animate-in zoom-in-95 duration-100 left-0",children:g.jsx("div",{className:"py-2",children:Z.filter(Ge=>Ge!=="All").map(Ge=>g.jsx("button",{type:"button",onClick:()=>{P(Ge),ie(!1)},className:"w-full text-left px-4 py-2 hover:bg-slate-50 text-[10px] font-bold text-slate-700 hover:text-brand-600 transition-colors border-b border-slate-50 last:border-0 uppercase",children:Ge},Ge))})})]})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"font-black text-slate-900 group-hover:text-brand-600 transition-colors",children:String(Se.name)}),g.jsx("div",{className:"text-[9px] font-bold text-slate-400 mt-1 uppercase",children:String(Se.category)})]})}),g.jsx("td",{className:"px-8 py-6",children:(F==null?void 0:F.id)===Se.id?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-slate-400 font-bold",children:""}),g.jsx("input",{type:"number",step:"0.01",value:B,onChange:Ge=>j(Ge.target.value),className:"w-24 bg-white border-2 border-brand-200 rounded-lg px-2 py-2 text-sm font-black focus:border-brand-500 outline-none"}),g.jsxs("span",{className:"text-[10px] font-bold text-slate-400 ml-1.5 uppercase",children:["/ ",String(Se.unit)]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("span",{className:"text-sm font-black text-slate-800",children:["",Number(Se.price).toFixed(2)]}),g.jsxs("span",{className:"text-[10px] font-bold text-slate-400 ml-1.5 uppercase",children:["/ ",String(Se.unit)]})]})}),g.jsx("td",{className:"px-8 py-6 text-right flex items-center justify-end gap-3",children:(F==null?void 0:F.id)===Se.id?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:Ze,className:"p-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-2xl transition-all shadow-lg shadow-emerald-500/20",title:"Save Changes",children:g.jsx(Yd,{size:18})}),g.jsx("button",{onClick:()=>{z(null),le(""),j("")},className:"p-3 bg-slate-100 hover:bg-slate-200 text-slate-500 rounded-2xl transition-all",title:"Cancel",children:g.jsx(Ga,{size:18})})]}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:()=>{z(Se),le(Se.name),j(Se.price.toString()),re(Se.unit),P(Se.category)},className:"p-3 text-slate-300 hover:text-amber-600 hover:bg-amber-50 rounded-2xl transition-all",children:g.jsx(I0,{size:18})}),g.jsx("button",{onClick:()=>nt(Se.id),className:"p-3 text-slate-300 hover:text-rose-600 hover:bg-rose-50 rounded-2xl transition-all",children:g.jsx(No,{size:18})})]})})]},Se.id))})]})]})]})]}),k==="USERS"&&g.jsxs("div",{className:"space-y-10",children:[g.jsxs("div",{className:"bg-white p-8 md:p-10 rounded-[2.5rem] border-2 border-slate-100 shadow-2xl animate-in slide-in-from-top-4 duration-500",children:[g.jsxs("div",{className:"flex items-center gap-4 mb-8 border-b-2 border-slate-50 pb-6",children:[g.jsx("div",{className:"h-12 w-12 rounded-2xl bg-purple-600 flex items-center justify-center text-white shadow-lg shadow-purple-500/20",children:g.jsx(Wd,{size:24})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-black text-slate-800 uppercase tracking-widest leading-none",children:"Add New Team Member"}),g.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mt-2",children:"Grant access to the Invoice Hub"})]})]}),g.jsxs("form",{onSubmit:tt,className:"grid grid-cols-1 md:grid-cols-4 gap-6 items-end",children:[g.jsxs("div",{className:"md:col-span-1 space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Full Name"}),g.jsx("input",{type:"text",placeholder:"e.g. Jane Doe",required:!0,value:ae,onChange:Se=>he(Se.target.value),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-sm font-black focus:border-purple-500 outline-none transition-all placeholder:text-slate-300"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Email Address"}),g.jsx("input",{type:"email",required:!0,placeholder:"user@clonmel.com",value:Ne,onChange:Se=>D(Se.target.value),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-sm font-black focus:border-purple-500 outline-none transition-all placeholder:text-slate-300"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Access Level"}),g.jsxs("select",{value:H,onChange:Se=>K(Se.target.value),className:"w-full bg-white text-slate-900 border-2 border-slate-200 rounded-2xl px-6 py-4 text-sm font-black outline-none appearance-none cursor-pointer focus:border-purple-500",children:[g.jsx("option",{value:ps.USER,children:"Standard User"}),g.jsx("option",{value:ps.ADMIN,children:"Administrator"})]})]}),g.jsxs("button",{type:"submit",disabled:v,className:"flex-1 flex items-center justify-center gap-3 bg-slate-900 hover:bg-purple-600 text-white font-black py-4 rounded-2xl transition-all disabled:opacity-50 shadow-2xl shadow-slate-900/20 uppercase text-[10px] tracking-[0.2em]",children:[v?g.jsx(s0,{className:"animate-spin",size:16}):g.jsx(Sl,{size:16}),"Add User"]})]})]}),g.jsx("div",{className:"bg-white rounded-[3rem] border-2 border-slate-100 overflow-hidden shadow-xl",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-slate-50/50 border-b-2 border-slate-100",children:g.jsxs("tr",{className:"text-[10px] font-black text-slate-400 text-left uppercase tracking-widest",children:[g.jsx("th",{className:"px-12 py-7",children:"Access Node"}),g.jsx("th",{className:"px-12 py-7",children:"Authentication Email"}),g.jsx("th",{className:"px-12 py-7",children:"Auth Group"}),g.jsx("th",{className:"px-12 py-7 text-right",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:a.filter(Se=>Se.email!=="princegaur088@gmail.com"&&Se.email!=="princegaur088@gmil.com").map(Se=>g.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[g.jsxs("td",{className:"px-12 py-7 flex items-center gap-6",children:[g.jsx("div",{className:"w-14 h-14 rounded-2xl border-4 border-white shadow-xl bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center text-white font-black text-xl uppercase",children:Se.name.charAt(0)}),g.jsxs("div",{children:[g.jsx("span",{className:"block font-black text-slate-900 text-base tracking-tight",children:String(Se.name)}),g.jsxs("span",{className:"text-[10px] font-bold text-slate-300 uppercase",children:["Hardware ID: ",String(Se.id)]})]})]}),g.jsx("td",{className:"px-12 py-7 text-slate-500 font-black text-sm",children:String(Se.email)}),g.jsx("td",{className:"px-12 py-7",children:g.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-5 py-2 rounded-2xl border-2 ${Se.role===ps.ADMIN?"bg-purple-50 text-purple-700 border-purple-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:String(Se.role)})}),g.jsx("td",{className:"px-12 py-7 text-right",children:Se.id!==(c==null?void 0:c.id)&&g.jsx("button",{onClick:()=>Xe(Se.id),className:"p-3 text-slate-300 hover:text-rose-500 hover:bg-rose-50 rounded-2xl transition-all",title:"Remove User",children:g.jsx(No,{size:20})})})]},Se.id))})]})})]})]})},OI=()=>{const{user:t,invoices:e,setView:n,setEditingInvoice:i,settings:a,deleteInvoice:o}=Os(),[l,c]=Fe.useState(""),d=e.filter(b=>(b.documentType==="quote"||b.invoiceNumber.startsWith("QT-"))&&(b.customerName.toLowerCase().includes(l.toLowerCase())||b.invoiceNumber.toLowerCase().includes(l.toLowerCase()))),h=b=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(b),v=b=>{const w={PENDING:{style:"bg-amber-50 text-amber-700 border-amber-200",icon:g.jsx(Tl,{size:10}),label:"PENDING"},[mn.UNPAID]:{style:"bg-amber-50 text-amber-700 border-amber-200",icon:g.jsx(Tl,{size:10}),label:"PENDING"},ACCEPTED:{style:"bg-emerald-50 text-emerald-700 border-emerald-100",icon:g.jsx(k0,{size:10}),label:"ACCEPTED"},[mn.PAID]:{style:"bg-emerald-50 text-emerald-700 border-emerald-100",icon:g.jsx(k0,{size:10}),label:"ACCEPTED"},REJECTED:{style:"bg-rose-50 text-rose-700 border-rose-200",icon:g.jsx(sN,{size:10}),label:"REJECTED"},EXPIRED:{style:"bg-slate-50 text-slate-600 border-slate-200",icon:g.jsx(_h,{size:10}),label:"EXPIRED"}},{style:_,icon:T,label:k}=w[b]||w.PENDING;return g.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[9px] font-black border transition-all shadow-sm ${_} tracking-widest`,children:[T,k]})};return g.jsxs("div",{className:"max-w-[95%] mx-auto space-y-6",children:[g.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[g.jsxs("div",{children:[g.jsxs("h2",{className:"text-2xl font-black text-slate-800 tracking-tight uppercase",children:["Quote ",g.jsx("span",{className:"text-brand-500",children:"Manager"})]}),g.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Create and manage customer quotes"})]}),g.jsx("div",{className:"flex items-center space-x-3",children:g.jsxs("button",{onClick:()=>{i({id:"",documentType:"quote",invoiceNumber:`QT-${Date.now().toString().slice(-6)}`,customerName:"",items:[],total:0,subtotal:0,taxAmount:0,balanceDue:0,amountPaid:0,status:mn.PENDING,dateIssued:new Date().toISOString(),dueDate:new Date(Date.now()+720*60*60*1e3).toISOString(),company:"clonmel"}),n("CREATE_INVOICE")},className:"flex items-center gap-2 px-6 py-4 bg-brand-600 text-white rounded-2xl hover:bg-brand-700 transition-all shadow-xl shadow-brand-500/20 font-black text-sm uppercase tracking-wider",children:[g.jsx(Sl,{size:20}),"New Quote"]})})]}),g.jsxs("div",{className:"relative",children:[g.jsx(jc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),g.jsx("input",{type:"text",placeholder:"Search quotes by customer or quote number...",value:l,onChange:b=>c(b.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-slate-200 rounded-2xl focus:border-brand-500 focus:ring-4 focus:ring-brand-500/10 outline-none transition-all text-sm font-semibold"})]}),g.jsx("div",{className:"bg-white rounded-[2.5rem] border-2 border-slate-100 overflow-hidden shadow-2xl",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-slate-900 border-b-2 border-slate-800",children:g.jsxs("tr",{className:"text-white",children:[g.jsx("th",{className:"text-left py-4 px-3 md:py-6 md:px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Quote Details"}),g.jsx("th",{className:"hidden md:table-cell text-left py-6 px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Customer"}),g.jsx("th",{className:"text-right py-4 px-3 md:py-6 md:px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Amount"}),g.jsx("th",{className:"hidden md:table-cell text-center py-6 px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Valid Until"}),g.jsx("th",{className:"text-center py-4 px-3 md:py-6 md:px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Status"}),g.jsx("th",{className:"text-center py-4 px-3 md:py-6 md:px-10 text-[10px] font-black uppercase tracking-[0.2em]",children:"Actions"})]})}),g.jsx("tbody",{className:"divide-y divide-slate-100",children:d.length===0?g.jsx("tr",{children:g.jsxs("td",{colSpan:6,className:"py-20 text-center",children:[g.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-slate-100 rounded-full mb-4",children:g.jsx(Oc,{size:40,className:"text-slate-400"})}),g.jsx("p",{className:"text-slate-500 font-semibold",children:"No quotes found"}),g.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Create your first quote to get started"})]})}):d.map(b=>g.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[g.jsxs("td",{className:"py-4 px-3 md:py-6 md:px-10",children:[g.jsx("div",{className:"text-lg font-black text-slate-900 tracking-tight",children:b.invoiceNumber}),g.jsx("div",{className:"md:hidden font-bold text-slate-700 text-xs mt-1",children:b.customerName}),g.jsxs("div",{className:"text-[10px] font-bold text-slate-400 mt-0.5",children:["Issued: ",new Date(b.dateIssued).toLocaleDateString(void 0,{month:"short",day:"numeric"})]}),g.jsx("div",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mt-1",children:b.company==="mirrorzone"?"Mirrorzone":"Clonmel Glass"})]}),g.jsxs("td",{className:"hidden md:table-cell py-6 px-10",children:[g.jsx("div",{className:"font-bold text-slate-900",children:b.customerName}),b.customerEmail&&g.jsx("div",{className:"text-xs text-slate-500 mt-1",children:b.customerEmail})]}),g.jsx("td",{className:"py-4 px-3 md:py-6 md:px-10 text-right whitespace-nowrap",children:g.jsx("div",{className:"text-sm font-black text-slate-900",children:h(b.total)})}),g.jsx("td",{className:"hidden md:table-cell py-6 px-10 text-center",children:g.jsx("div",{className:"text-xs font-bold text-slate-600",children:b.validUntil?new Date(b.validUntil).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"})}),g.jsx("td",{className:"py-4 px-3 md:py-6 md:px-10 text-center",children:v(b.status)}),g.jsx("td",{className:"py-4 px-3 md:py-6 md:px-10",children:g.jsxs("div",{className:"flex items-center justify-center gap-2 transition-opacity",children:[g.jsx("button",{onClick:()=>{const w=Math.floor(1e3+Math.random()*9e3),_=`INV-${new Date().getFullYear()}-${w}`,T={...b,documentType:"invoice",invoiceNumber:_,status:mn.UNPAID};i(T),n("CREATE_INVOICE")},className:"hidden md:block p-2 md:p-3 text-purple-600 bg-purple-50 hover:bg-purple-500 hover:text-white rounded-xl md:rounded-2xl transition-all shadow-sm",title:"Convert to Invoice",children:g.jsx(vN,{size:16})}),g.jsx("button",{onClick:()=>{i(b),n("CREATE_INVOICE")},className:"hidden md:block p-2 md:p-3 text-amber-500 bg-amber-50 hover:bg-amber-500 hover:text-white rounded-xl md:rounded-2xl transition-all shadow-sm",title:"Edit Quote",children:g.jsx(ib,{size:16})}),g.jsx("button",{onClick:async()=>{const w=await Am(b,a);window.open(w,"_blank")},className:"p-3 text-brand-600 bg-brand-50 hover:bg-brand-600 hover:text-white rounded-xl md:rounded-2xl transition-all shadow-sm active:scale-95",title:"View Quote PDF",children:g.jsx(uh,{size:20})}),g.jsx("button",{onClick:()=>m5(b,a),className:"p-3 text-slate-600 bg-slate-100 hover:bg-slate-600 hover:text-white rounded-xl md:rounded-2xl transition-all shadow-sm active:scale-95",title:"Download Quote PDF",children:g.jsx(eb,{size:20})}),g.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this quote?")&&o(b.id)},className:"hidden md:block p-2 md:p-3 text-rose-500 bg-rose-50 hover:bg-rose-500 hover:text-white rounded-xl md:rounded-2xl transition-all shadow-sm",title:"Delete Quote",children:g.jsx(No,{size:16})})]})})]},b.id))})]})})]})},jI=()=>{const{settings:t,updateSettings:e,isSyncing:n}=Os(),[i,a]=Fe.useState(t),[o,l]=Fe.useState(!1),[c,d]=Fe.useState("clonmel");Fe.useEffect(()=>{a(t)},[t]);const h=b=>{const{name:w,value:_}=b.target;a(T=>({...T,[w]:w==="taxRate"?parseFloat(_):_}))},v=async b=>{b.preventDefault();try{await e(i),l(!0),setTimeout(()=>l(!1),3e3)}catch(w){console.error("Failed to save settings",w)}};return g.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-10",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Settings & Configuration"}),o&&g.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 bg-emerald-50 px-4 py-2 rounded-lg animate-in fade-in slide-in-from-right-4",children:[g.jsx(Nh,{size:18}),g.jsx("span",{className:"text-sm font-bold",children:"Settings Saved Successfully"})]})]}),g.jsxs("div",{className:"flex gap-4 bg-slate-100 p-1.5 rounded-2xl w-fit",children:[g.jsx("button",{onClick:()=>d("clonmel"),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${c==="clonmel"?"bg-white text-slate-900 shadow-sm scale-100":"bg-transparent text-slate-400 hover:text-slate-600 scale-95 hover:scale-100"}`,children:"Clonmel Glass"}),g.jsx("button",{onClick:()=>d("mirrorzone"),className:`px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-sm ${c==="mirrorzone"?"bg-slate-900 text-white shadow-brand-500/20 scale-100":"bg-transparent text-slate-400 hover:text-slate-600 scale-95 hover:scale-100"}`,children:"MirrorZone"})]}),g.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c==="clonmel"?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in duration-300",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:g.jsx(C0,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Clonmel Glass Identity"})]}),g.jsx("div",{className:"p-6 md:p-8 space-y-6",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Company Name"}),g.jsx("input",{name:"companyName",value:i.companyName,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"VAT Number"}),g.jsx("input",{name:"vatNumber",value:i.vatNumber||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Address"}),g.jsx("input",{name:"companyAddress",value:i.companyAddress,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Phone"}),g.jsx("input",{name:"companyPhone",value:i.companyPhone,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Email"}),g.jsx("input",{name:"companyEmail",value:i.companyEmail,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Website"}),g.jsx("input",{name:"companyWebsite",value:i.companyWebsite,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]})]})})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in duration-300",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:g.jsx(xy,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Clonmel Glass Banking"})]}),g.jsx("div",{className:"p-6 md:p-8 space-y-6",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Bank Name"}),g.jsx("input",{name:"bankName",value:i.bankName,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Account Name"}),g.jsx("input",{name:"accountName",value:i.accountName,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"IBAN"}),g.jsx("input",{name:"iban",value:i.iban,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors font-mono"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"BIC / Sort Code"}),g.jsx("input",{name:"bic",value:i.bic,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-brand-500 outline-none transition-colors font-mono"})]})]})})]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in duration-300",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-slate-900 text-white rounded-lg",children:g.jsx(C0,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"MirrorZone Identity"})]}),g.jsx("div",{className:"p-6 md:p-8 space-y-6",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Company Name (MirrorZone)"}),g.jsx("input",{name:"mirrorZoneName",value:i.mirrorZoneName||"",onChange:h,placeholder:"MirrorZone",className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Address"}),g.jsx("input",{name:"mirrorZoneAddress",value:i.mirrorZoneAddress||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Phone"}),g.jsx("input",{name:"mirrorZonePhone",value:i.mirrorZonePhone||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Email"}),g.jsx("input",{name:"mirrorZoneEmail",value:i.mirrorZoneEmail||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Website"}),g.jsx("input",{name:"mirrorZoneWebsite",value:i.mirrorZoneWebsite||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]})]})})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden animate-in fade-in duration-300",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg",children:g.jsx(xy,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"MirrorZone Banking"})]}),g.jsx("div",{className:"p-6 md:p-8 space-y-6",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Bank Name"}),g.jsx("input",{name:"mirrorZoneBankName",value:i.mirrorZoneBankName||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Account Name"}),g.jsx("input",{name:"mirrorZoneAccountName",value:i.mirrorZoneAccountName||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"IBAN"}),g.jsx("input",{name:"mirrorZoneIban",value:i.mirrorZoneIban||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors font-mono"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"BIC / Sort Code"}),g.jsx("input",{name:"mirrorZoneBic",value:i.mirrorZoneBic||"",onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-semibold focus:border-purple-500 outline-none transition-colors font-mono"})]})]})})]})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg",children:g.jsx(Z2,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Shared Financials"})]}),g.jsxs("div",{className:"p-6 md:p-8 space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Standard VAT Rate (%)"}),g.jsx("input",{type:"number",name:"taxRate",value:i.taxRate,onChange:h,className:"w-32 border-2 border-slate-200 rounded-xl px-4 py-3 font-bold focus:border-brand-500 outline-none transition-colors"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Default Payment Terms "}),g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"p-2 bg-slate-100 rounded-lg text-slate-400 mt-1",children:g.jsx(Oc,{size:20})}),g.jsx("textarea",{name:"defaultNotes",value:i.defaultNotes,onChange:h,className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-medium focus:border-brand-500 outline-none transition-colors h-32 resize-y",placeholder:"Enter default terms displayed on every new invoice..."})]})]})]})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[g.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-slate-900 text-white rounded-lg",children:g.jsx(Oc,{size:20})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Integrations (Email)"})]}),g.jsxs("div",{className:"p-6 md:p-8 space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Webhook URL (N8N / Zapier)"}),g.jsx("input",{name:"webhookUrl",value:i.webhookUrl||"",onChange:h,placeholder:"https://...",className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-mono text-sm focus:border-brand-500 outline-none transition-colors"}),g.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:"System will POST JSON data + PDF Base64 to this URL when sending requested."})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-black text-slate-500 uppercase tracking-widest mb-2",children:"Xero Integration Webhook"}),g.jsx("input",{name:"xeroWebhookUrl",value:i.xeroWebhookUrl||"",onChange:h,placeholder:"https://hooks.zapier.com/...",className:"w-full border-2 border-slate-200 rounded-xl px-4 py-3 font-mono text-sm focus:border-brand-500 outline-none transition-colors"}),g.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:'System will POST full invoice JSON to this URL when "Transfer to Xero" is clicked.'})]})]})]}),g.jsx("div",{className:"flex justify-end pt-4 pb-20",children:g.jsx("button",{type:"submit",disabled:n,className:"bg-brand-600 text-white px-8 py-4 rounded-xl font-black uppercase tracking-widest flex items-center gap-3 hover:bg-brand-700 transition-all shadow-xl shadow-brand-500/20 disabled:opacity-70 disabled:shadow-none",children:n?g.jsx(g.Fragment,{children:"Saving..."}):g.jsxs(g.Fragment,{children:[g.jsx(dh,{size:20}),"Save Changes"]})})})]})]})},y5=()=>{const{login:t,resetPassword:e,verifyOtpAndReset:n}=Os(),[i,a]=Fe.useState("login"),[o,l]=Fe.useState(""),[c,d]=Fe.useState(""),[h,v]=Fe.useState(""),[b,w]=Fe.useState(""),[_,T]=Fe.useState(""),[k,R]=Fe.useState(!1),C=async()=>{w(""),R(!0);try{await t(o,c)}catch(q){w(q.message||"Login failed. Please check your credentials.")}finally{R(!1)}},I=async()=>{if(w(""),!o){w("Please enter your email address");return}R(!0);try{await e(o),T("OTP generated! Check your email/logs."),setTimeout(()=>{a("verifyOtp"),T("")},1e3)}catch(q){w(q.message||"Failed to generate OTP.")}finally{R(!1)}},L=async()=>{if(w(""),!h||!c){w("Please enter the OTP and your new password");return}R(!0);try{await n(o,h,c),T("Password updated! Logging you in..."),setTimeout(async()=>{try{await t(o,c)}catch{a("login")}},1500)}catch(q){w(q.message||"Invalid OTP or expired.")}finally{R(!1)}},O=()=>{i==="login"?C():i==="reset"?I():i==="verifyOtp"&&L()};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4",children:g.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md border border-slate-100",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("div",{className:"h-16 w-16 bg-brand-500 rounded-xl flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 shadow-lg shadow-brand-500/30",children:"CG"}),g.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Clonmel Glass"}),g.jsxs("p",{className:"text-slate-500",children:[i==="login"&&"Sign in to Invoice Hub",i==="reset"&&"Reset Password (OTP)",i==="verifyOtp"&&"Enter OTP & New Password"]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:i==="verifyOtp"?"Confirm Email":"Email Address"}),g.jsx("input",{type:"email",value:o,onChange:q=>l(q.target.value),disabled:i==="verifyOtp",onKeyPress:q=>q.key==="Enter"&&O(),className:"w-full bg-white text-slate-900 border border-slate-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 disabled:bg-slate-100 outline-none transition-all",placeholder:"your@email.com"})]}),i==="verifyOtp"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"OTP Code"}),g.jsx("input",{type:"text",value:h,onChange:q=>v(q.target.value),className:"w-full bg-white text-slate-900 border border-slate-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all tracking-widest text-center font-bold",placeholder:"123456"})]}),(i==="login"||i==="verifyOtp")&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:i==="verifyOtp"?"Set New Password":"Password"}),g.jsx("input",{type:"password",value:c,onChange:q=>d(q.target.value),onKeyPress:q=>q.key==="Enter"&&O(),className:"w-full bg-white text-slate-900 border border-slate-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all",placeholder:i==="verifyOtp"?"New password":"Enter password"})]}),b&&g.jsx("div",{className:"bg-rose-50 border border-rose-200 text-rose-700 px-4 py-3 rounded-lg text-sm font-medium",children:b}),_&&g.jsx("div",{className:"bg-emerald-50 border border-emerald-200 text-emerald-700 px-4 py-3 rounded-lg text-sm font-medium",children:_}),g.jsx("button",{onClick:O,disabled:k,className:"w-full bg-brand-600 text-white font-semibold py-3 rounded-lg hover:bg-brand-700 transition-colors shadow-lg shadow-brand-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Processing...":i==="login"?"Sign In":i==="reset"?"Send OTP":"Verify & Reset"}),g.jsxs("div",{className:"text-center pt-4 border-t border-slate-200 space-y-2",children:[i==="login"&&g.jsx("button",{onClick:()=>a("reset"),className:"block w-full text-sm text-slate-500 hover:text-brand-600 transition-colors",children:"Forgot Password?"}),(i==="reset"||i==="verifyOtp")&&g.jsx("button",{onClick:()=>a("login"),className:"text-brand-600 font-semibold text-sm",children:"Back to Login"})]})]})]})})},FI=()=>{const{currentView:t}=Os();switch(t){case"LOGIN":return g.jsx(y5,{});case"DASHBOARD":return g.jsx(E2,{});case"CALENDAR":return g.jsx(MI,{});case"INVOICES":return g.jsx(RI,{});case"QUOTES":return g.jsx(OI,{});case"CREATE_INVOICE":return g.jsx(DI,{});case"CUSTOMERS":return g.jsx(PI,{});case"PRODUCTS":return g.jsx(R2,{});case"USERS":return g.jsx(R2,{});case"SETTINGS":return g.jsx(jI,{});default:return g.jsx(E2,{})}},BI=()=>{const{user:t,isLoading:e}=Os();return e?g.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-50 text-slate-400 font-bold uppercase tracking-widest animate-pulse",children:"Initializing Core Systems..."}):t?g.jsx(oA,{children:g.jsx(FI,{})}):g.jsx(y5,{})};function qI(){return g.jsx(R_,{children:g.jsx(LI,{children:g.jsx(BI,{})})})}const b5=document.getElementById("root");if(!b5)throw new Error("Could not find root element to mount to");const zI=Vx.createRoot(b5);zI.render(g.jsx(bh.StrictMode,{children:g.jsx(qI,{})}));export{xn as _};
